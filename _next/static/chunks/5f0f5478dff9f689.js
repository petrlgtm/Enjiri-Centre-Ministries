(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,55260,89832,e=>{"use strict";let t;var n=e.i(44816),i=e.i(98501),l=e.i(43868),o=e.i(59482),r=e.i(54939),s=e.i(78372),a=e.i(63972),d=e.i(93870),c=e.i(50769),u=e.i(18647),p=e.i(30445),m=e.i(36580),h=e.i(19981),g=e.i(47707),f=e.i(54390),x=e.i(98215),b=e.i(68894),y=(0,b.default)(function(e,t,n){return t=t.toLowerCase(),e+(n?(0,x.default)(t):t)}),v=e.i(91916),j=(0,b.default)(function(e,t,n){return e+(n?"-":"")+t.toLowerCase()}),w=e.i(83926),S=e.i(18573),I=e.i(12173),C=e.i(53568),_=e.i(60363);let T="structure",R=(0,u.defineLocaleResourceBundle)({locale:"en-US",namespace:T,resources:()=>e.A(21821)}),P=["_id","_type","_createdAt","_updatedAt","_rev"];function k(e,t,n=!1){return t.map(t=>(function e(t,n,i=!1){let[l,...o]=n;if(!("fields"in t))return"";let r=t.fields.find(e=>e.name===l);if(!r){if(!P.includes(l)){let e=`The current ordering config targeted the nonexistent field "${l}" on schema type "${t.name}". It should be one of ${t.fields.map(e=>e.name).join(", ")}`;if(i)throw Error(e);console.warn(e)}return""}if("to"in r.type&&"reference"===r.type.name){let t=r.type.to;return`${l}->{${t.map(t=>e(t,o)).join(",")}}`}let s=o.length>0&&e(r.type,o),a=s?`{${s}}`:"";return o.length>0?`${l}${a}`:l})(e,t.field.split("."),n)).join(", ")}class E extends Error{constructor(e,t,n,i){super(e),this.name="SerializeError";const l=typeof n>"u"?"<unknown>":`${n}`;this.path=(t||[]).concat(i?`${l} (${i})`:l)}withHelpUrl(e){return this.helpId=e,this}}let D="structure-node-id-required",F="structure-title-required",A={title:"Last edited",i18n:{title:{key:"menu-items.sort-by.last-edited",ns:T}},name:"lastEditedDesc",by:[{field:"_updatedAt",direction:"desc"}]},V=[A,{title:"Created",i18n:{title:{key:"menu-items.sort-by.created",ns:T}},name:"lastCreatedDesc",by:[{field:"_createdAt",direction:"desc"}]}];function M(e,t,n){return e instanceof L?e.serialize({path:n,index:t}):e}class L{constructor(e,t){this._context=e,this.spec=t||{}}id(e){return this.clone({id:e})}getId(){return this.spec.id}action(e){return this.clone({action:e})}getAction(){return this.spec.action}intent(e){return this.clone({intent:e})}getIntent(){return this.spec.intent}title(e){return this.clone({title:e})}getTitle(){return this.spec.title}i18n(e){return this.clone({i18n:e})}getI18n(){return this.spec.i18n}group(e){return this.clone({group:e})}getGroup(){return this.spec.group}icon(e){return this.clone({icon:e})}getIcon(){return this.spec.icon}params(e){return this.clone({params:e})}getParams(){return this.spec.params}showAsAction(e=!0){return this.clone({showAsAction:!!e})}getShowAsAction(){return this.spec.showAsAction}serialize(e={path:[]}){let{title:t,action:n,intent:i}=this.spec;if(!t){let t="string"==typeof n?`action: "${n}"`:void 0;throw new E("`title` is required for menu item",e.path,e.index,t).withHelpUrl(F)}if(!n&&!i)throw new E(`\`action\` or \`intent\` required for menu item with title ${this.spec.title}`,e.path,e.index,`"${t}"`).withHelpUrl("structure-action-or-intent-required");if(i&&n)throw new E("cannot set both `action` AND `intent`",e.path,e.index,`"${t}"`).withHelpUrl("structure-action-and-intent-mutually-exclusive");return{...this.spec,title:t}}clone(e){let t=new L(this._context);return t.spec={...this.spec,...e},t}}function z(e,{by:t,title:n,i18n:i},l){let o=new L(e).group("sorting").title(e.i18n.t("default-menu-item.fallback-title",{ns:"studio",replace:{title:n}})).icon(f.SortIcon).action("setSortOrder").params({by:t,extendedProjection:l});return i&&(o=o.i18n(i)),o}function O(e,t){let{schema:n}=e,i="string"==typeof t?n.get(t):t;return i&&"orderings"in i?(i.orderings?i.orderings.concat(V):V).map(t=>z(e,t,k(i,t.by))):[]}function B(e,t,n){return e instanceof N?e.serialize({path:n,index:t}):e}class N{constructor(e,t){this._context=e,this._id=t?t.id:"",this._title=t?t.title:"",this._i18n=t?t.i18n:void 0}id(e){return new N(this._context,{id:e,title:this._title,i18n:this._i18n})}getId(){return this._id}title(e){return new N(this._context,{title:e,id:this._id,i18n:this._i18n})}getTitle(){return this._title}i18n(e){return new N(this._context,{i18n:e,id:this._id,title:this._title})}getI18n(){return this._i18n}serialize(e={path:[]}){if(!this._id)throw new E("`id` is required for a menu item group",e.path,e.index,this._title).withHelpUrl(D);if(!this._title)throw new E("`title` is required for a menu item group",e.path,this._id).withHelpUrl(F);return{id:this._id,title:this._title,i18n:this._i18n}}}let $=/([^A-Za-z0-9-_.])/;function H(e,t,n){if("string"!=typeof e)throw new E(`Structure node id must be of type string, got ${typeof e}`,t,n);let[i]=e.match($)||[];if(i)throw new E(`Structure node id cannot contain character "${i}"`,t,n);if(e.startsWith("__edit__"))throw new E("Structure node id cannot start with __edit__",t,n);return e}function G(e,t){if(t)return t;let n=y(e);return $.test(n)?y((0,C.default)(e)):n}class U{constructor(e){this.spec={options:{},...e||{}}}id(e){return this.clone({id:e})}getId(){return this.spec.id}title(e){return this.clone({title:e,id:G(e,this.spec.id)})}getTitle(){return this.spec.title}i18n(e){return this.clone({i18n:e})}getI18n(){return this.spec.i18n}child(e){return this.clone({child:e})}getChild(){return this.spec.child}component(e){return this.clone({component:e})}getComponent(){return this.spec.component}options(e){return this.clone({options:e})}getOptions(){return this.spec.options||{}}menuItems(e){return this.clone({menuItems:e})}getMenuItems(){return this.spec.menuItems}menuItemGroups(e){return this.clone({menuItemGroups:e})}getMenuItemGroups(){return this.spec.menuItemGroups}canHandleIntent(e){return this.clone({canHandleIntent:e})}serialize(e={path:[]}){let{id:t,title:n,child:i,options:l,component:o}=this.spec;if(!t)throw new E("`id` is required for `component` structure item",e.path,e.index).withHelpUrl(D);if(!o)throw new E("`component` is required for `component` structure item",e.path,e.index).withHelpUrl(D);return{id:H(t,e.path,e.index),title:n,type:"component",child:i,component:o,canHandleIntent:this.spec.canHandleIntent,options:l||{},menuItems:(this.spec.menuItems||[]).map((t,n)=>M(t,n,e.path)),menuItemGroups:(this.spec.menuItemGroups||[]).map((t,n)=>B(t,n,e.path))}}clone(e){let t=new U;return t.spec={...this.spec,...e},t}}class q{constructor(e){this.spec={id:(0,v.uniqueId)("__divider__"),type:"divider",...e}}title(e){return this.clone({title:e})}getTitle(){return this.spec.title}i18n(e){return this.clone({i18n:e})}getI18n(){return this.spec.i18n}serialize(){return{...this.spec}}clone(e){let t=new q;return t.spec={...this.spec,...e},t}}async function W(e,t){return await e(u.DEFAULT_STUDIO_CLIENT_OPTIONS).fetch("*[sanity::versionOf($publishedId)][0]._type",{publishedId:(0,c.getPublishedId)(t)},{tag:"structure.resolve-type"})}class K{spec={};id(e){return this.clone({id:e})}getId(){return this.spec.id}title(e){return this.clone({title:e,id:this.spec.id||j(e)})}getTitle(){return this.spec.title}icon(e){return this.clone({icon:e})}getIcon(){return this.spec.icon}serialize(e={path:[]}){let{id:t,title:n,icon:i}=this.spec;if(!t)throw new E("`id` is required for view item",e.path,e.index).withHelpUrl(D);if(!n)throw new E("`title` is required for view item",e.path,e.index).withHelpUrl(F);return{id:H(t,e.path,e.index),title:n,icon:i}}}function Y(e,t,n){return"function"==typeof e.serialize?e.serialize({path:n,index:t}):e}class X extends K{constructor(e){const t=(e=>(0,u.isRecord)(e)&&"component"===e.type)(e)?{...e}:{options:{}};super(),this.spec=t;const n="function"==typeof e?e:this.spec.component;n&&(this.spec=this.component(n).spec)}component(e){return this.clone({component:e})}getComponent(){return this.spec.component}options(e){return this.clone({options:e})}getOptions(){return this.spec.options||{}}serialize(e={path:[]}){let t=super.serialize(e),n=this.spec.component;if("function"!=typeof n)throw new E("`component` is required and must be a function for `component()` view item",e.path,e.index).withHelpUrl("structure-view-component-required");return{...t,component:n,options:this.spec.options||{},type:"component"}}clone(e){let t=new X;return t.spec={...this.spec,...e},t}}class J extends K{constructor(e){super(),this.spec={id:"editor",title:"Editor",...e||{}}}serialize(e={path:[]}){return{...super.serialize(e),type:"form"}}clone(e){let t=new J;return t.spec={...this.spec,...e},t}}let Z=e=>new J(e);var Q=Object.freeze({__proto__:null,ComponentViewBuilder:X,FormViewBuilder:J,GenericViewBuilder:K,component:e=>new X(e),form:Z,maybeSerializeView:Y});class ee{constructor(e,t){this._context=e,this.spec=t||{}}id(e){return this.clone({id:e})}getId(){return this.spec.id}title(e){return this.clone({title:e,id:G(e,this.spec.id)})}getTitle(){return this.spec.title}i18n(e){return this.clone({i18n:e})}getI18n(){return this.spec.i18n}child(e){return this.clone({child:e})}getChild(){return this.spec.child}documentId(e){let t=this.spec.id||e;return this.clone({id:t,options:{...this.spec.options,id:e}})}getDocumentId(){return this.spec.options?.id}schemaType(e){return this.clone({options:{...this.spec.options,type:"string"==typeof e?e:e.name}})}getSchemaType(){return this.spec.options?.type}initialValueTemplate(e,t){return this.clone({options:{...this.spec.options,template:e,templateParameters:t}})}getInitialValueTemplate(){return this.spec.options?.template}getInitialValueTemplateParameters(){return this.spec.options?.templateParameters}views(e){return this.clone({views:e})}getViews(){return this.spec.views||[]}defaultPanes(e){return this.clone({defaultPanes:e})}serialize({path:e=[],index:t,hint:n}={path:[]}){var i;let l,o,r=e[t||e.length-1],s=this.spec.id||r&&`${r}`||"",a={id:s,type:void 0,template:void 0,templateParameters:void 0,...this.spec.options};if("string"!=typeof s||!s)throw new E("`id` is required for document nodes",e,t,n).withHelpUrl(D);if(!a||!a.id)throw new E("document id (`id`) is required for document nodes",e,s,n).withHelpUrl("structure-document-id-required");if(!a||!a.type)throw new E("document type (`schemaType`) is required for document nodes",e,s,n);let d=(this.spec.views&&this.spec.views.length>0?this.spec.views:[Z()]).map((t,n)=>Y(t,n,e)),c=d.map(e=>e.id),u=(0,w.uniq)(c.filter((e,t)=>c.includes(e,t+1)));if(u.length>0)throw new E(`document node has views with duplicate IDs: ${u.join(",  ")}`,e,s,n);if(this.spec.defaultPanes&&this.spec.defaultPanes.length>0){let e=this.spec.defaultPanes.filter(e=>c.includes(e)),t=this.spec.defaultPanes.filter(e=>!c.includes(e));t.length>0&&console.warn(`DefaultPanes contains invalid view IDs that don't match any defined views: ${t.join(", ")}. Valid view IDs are: ${c.join(", ")}`),e.length>=2&&(o=e)}return{...this.spec,child:this.spec.child||(({resolveDocumentNode:e,getClient:t})=>async(n,{params:i,path:l})=>{let o=i.type,r=l.slice(0,l.length-1),s=l[l.length-1];if(o||(o=await W(t,n)),!o)throw new E("Failed to resolve document, and no type provided in parameters.",r,s);return e({documentId:n,schemaType:o})})(this._context),id:H(s,e,t),type:"document",options:(l={id:(i=a).id||"",type:i.type||"*"},i.template&&(l.template=i.template),i.templateParameters&&(l.templateParameters=i.templateParameters),l),views:d,defaultPanes:o}}clone(e={}){let t=new ee(this._context),n={...this.spec.options,...e.options};return t.spec={...this.spec,...e,options:n},t}}class et{constructor(e,t){this._context=e,this.spec=t||{}}id(e){return this.clone({id:e})}getId(){return this.spec.id}title(e){return this.clone({title:e})}getTitle(){return this.spec.title}description(e){return this.clone({description:e})}getDescription(){return this.spec.description}templateId(e){let t=this.spec.id||e;return this.clone({id:t,templateId:e})}getTemplateId(){return this.spec.templateId}parameters(e){return this.clone({parameters:e})}getParameters(){return this.spec.parameters}serialize({path:e=[],index:t,hint:n}={path:[]}){if("string"!=typeof this.spec.id||!this.spec.id)throw new E("`id` is required for initial value template item nodes",e,t,n).withHelpUrl(D);if(!this.spec.templateId)throw new E("template id (`templateId`) is required for initial value template item nodes",e,this.spec.id,n).withHelpUrl(D);let i=this._context.templates.find(e=>e.id===this.spec.templateId);if(!i)throw new E("template id (`templateId`) is required for initial value template item nodes",e,this.spec.id,n).withHelpUrl(D);return{id:this.spec.id,templateId:this.spec.id,schemaType:i.schemaType,type:"initialValueTemplateItem",description:this.spec.description||i.description,title:this.spec.title||i.title,subtitle:this.spec.subtitle,icon:this.spec.icon||i.icon,initialDocumentId:this.spec.initialDocumentId,parameters:this.spec.parameters}}clone(e={}){let t=new et(this._context);return t.spec={...this.spec,...e},t}}let en=Symbol("Document type list canHandleIntent"),ei=(e,t,{pane:n})=>{let i="create"===e,l=n.options?.filter||"",o=n.options?.params||{},r=n.schemaTypeName?[n.schemaTypeName]:ed(l,o),s=n.initialValueTemplates||[];return i&&t.template?s.some(e=>e.templateId===t.template):"edit"===e&&t.id&&r.includes(t.type)||i&&r.includes(t.type)};ei.identity=en;let el=["default","card","media","detail","block"];function eo(){}let er=(e,t,{pane:n,index:i})=>i<=1&&ei(e,t,{pane:n});class es{initialValueTemplatesSpecified=!1;spec={};id(e){return this.clone({id:e})}getId(){return this.spec.id}title(e){return this.clone({title:e,id:G(e,this.spec.id)})}getTitle(){return this.spec.title}i18n(e){return this.clone({i18n:e})}getI18n(){return this.spec.i18n}defaultLayout(e){return this.clone({defaultLayout:e})}getDefaultLayout(){return this.spec.defaultLayout}menuItems(e){return this.clone({menuItems:e})}getMenuItems(){return this.spec.menuItems}menuItemGroups(e){return this.clone({menuItemGroups:e})}getMenuItemGroups(){return this.spec.menuItemGroups}child(e){return this.clone({child:e})}getChild(){return this.spec.child}canHandleIntent(e){return this.clone({canHandleIntent:e})}getCanHandleIntent(){return this.spec.canHandleIntent}showIcons(e=!0){return this.clone({displayOptions:{...this.spec.displayOptions,showIcons:e}})}getShowIcons(){return this.spec.displayOptions?this.spec.displayOptions.showIcons:void 0}initialValueTemplates(e){return this.initialValueTemplatesSpecified=!0,this.clone({initialValueTemplates:Array.isArray(e)?e:[e]})}getInitialValueTemplates(){return this.spec.initialValueTemplates}serialize(e={path:[]}){let t=this.spec.id||"",n=e.path,i=this.spec.defaultLayout;if(i&&!el.includes(i))throw new E(`\`layout\` must be one of ${el.map(e=>`"${e}"`).join(", ")}`,n,t||e.index,this.spec.title);let l=(this.spec.initialValueTemplates||[]).map((e,t)=>e instanceof et?e.serialize({path:n,index:t}):e);return{id:H(t,e.path,t||e.index),title:this.spec.title,i18n:this.spec.i18n,type:"genericList",defaultLayout:i,child:this.spec.child||eo,canHandleIntent:this.spec.canHandleIntent||er,displayOptions:this.spec.displayOptions,initialValueTemplates:l,menuItems:(this.spec.menuItems||[]).map((e,t)=>M(e,t,n)),menuItemGroups:(this.spec.menuItemGroups||[]).map((e,t)=>B(e,t,n))}}}class ea extends es{constructor(e,t){super(),this._context=e,this.spec=t||{},this.initialValueTemplatesSpecified=!!t?.initialValueTemplates}apiVersion(e){return this.clone({options:{...this.spec.options||{filter:""},apiVersion:e}})}getApiVersion(){return this.spec.options?.apiVersion}filter(e){return this.clone({options:{...this.spec.options,filter:e}})}getFilter(){return this.spec.options?.filter}schemaType(e){let t="string"==typeof e?e:e.name;return this.clone({schemaTypeName:t})}getSchemaType(){return this.spec.schemaTypeName}params(e){return this.clone({options:{...this.spec.options||{filter:""},params:e}})}getParams(){return this.spec.options?.params}defaultOrdering(e){if(!Array.isArray(e))throw Error("`defaultOrdering` must be an array of order clauses");return this.clone({options:{...this.spec.options||{filter:""},defaultOrdering:e}})}getDefaultOrdering(){return this.spec.options?.defaultOrdering}serialize(e={path:[]}){let t;if("string"!=typeof this.spec.id||!this.spec.id)throw new E("`id` is required for document lists",e.path,e.index,this.spec.title).withHelpUrl(D);if(!this.spec.options||!this.spec.options.filter)throw new E("`filter` is required for document lists",e.path,this.spec.id,this.spec.title).withHelpUrl("structure-filter-required");return this.spec.options?.filter!=="_type == $type"&&this.spec.options.filter&&!this.spec.options.apiVersion&&console.warn(`No apiVersion specified for document type list with custom filter: \`${this.spec.options.filter}\`. This will be required in the future. See %s for more info.`,(0,_.generateHelpUrl)("structure-api-version-required-for-custom-filter")),{...super.serialize(e),type:"documentList",schemaTypeName:this.spec.schemaTypeName,child:this.spec.child||(t=this._context,(e,n)=>{let i=n.parent,l=n.params?.template?t.templates.find(e=>e.id===n.params.template):void 0;return Promise.resolve(l?l.schemaType:i.schemaTypeName||W(t.getClient,e)).then(n=>n?t.resolveDocumentNode({schemaType:n,documentId:e}):new ee(t).id("editor").documentId(e).schemaType(""))}),options:{...this.spec.options,apiVersion:this.spec.options.apiVersion||u.DEFAULT_STUDIO_CLIENT_OPTIONS.apiVersion,filter:((e,t)=>{let n=e.options?.filter.trim()||"";if(["*","{"].includes(n[0]))throw new E(`\`filter\` cannot start with \`${n[0]}\` - looks like you are providing a query, not a filter`,t.path,e.id,e.title).withHelpUrl("structure-query-provided-for-filter");return n})(this.spec,e)}}}clone(e){let t=new ea(this._context);return t.spec={...this.spec,...e},this.initialValueTemplatesSpecified||(t.spec.initialValueTemplates=function(e,t){let{document:n}=e,{schemaTypeName:i,options:l}=t,{filter:o,params:r}=l||{filter:"",params:{}},s=i?[i]:Array.from(new Set(ed(o,r)));if(0!==s.length)return s.flatMap(e=>n.resolveNewDocumentOptions({type:"structure",schemaType:e})).map(e=>({...e,icon:f.AddIcon}))}(this._context,t.spec)),t.spec.schemaTypeName||(t.spec.schemaTypeName=function(e){let{options:t}=e,{filter:n,params:i}=t||{filter:"",params:{}},l=ed(n,i);return 1===l.length?l[0]:void 0}(t.spec)),t}getSpec(){return this.spec}}function ed(e,t={}){let n=function(e,t={}){let n,i=/\b_type\s*==\s*(['"].*?['"]|\$.*?(?:\s|$))|\B(['"].*?['"]|\$.*?(?:\s|$))\s*==\s*_type/g,l=[];for(;null!==(n=i.exec(e));)l.push(n[1]||n[2]);return l.map(e=>(("$"===e[0]?t[e.slice(1)]:e)||"").trim().replace(/^["']|["']$/g,"")).filter(Boolean)}(e,t);return 0===n.length&&(n=function(e,t={}){let n=e.match(/\b_type\s+in\s+\[(.*?)\]/);return n?n[1].split(/,\s*/).map(e=>e.trim().replace(/^["']+|["']+$/g,"")).map(e=>"$"===e[0]?t[e.slice(1)]:e).filter(Boolean):[]}(e,t)),n}let ec=e=>"listItem"===e.type,eu=(e,t,n)=>(n.pane.items||[]).filter(ef).some(e=>e.schemaType.name===t.type&&e._id===t.id)||er(e,t,n),ep=(e,t)=>{let n=(t.parent.items.filter(ec).find(t=>t.id===e)||{child:void 0}).child;return n&&"function"==typeof n&&"function"==typeof n?n(e,t):n};class em extends es{constructor(e,t){super(),this._context=e,this.spec=t||{},this.initialValueTemplatesSpecified=!!(t&&t.initialValueTemplates)}items(e){return this.clone({items:e})}getItems(){return this.spec.items}serialize(e={path:[]}){let t=this.spec.id;if("string"!=typeof t||!t)throw new E("`id` is required for lists",e.path,e.index).withHelpUrl(D);let n=typeof this.spec.items>"u"?[]:this.spec.items;if(!Array.isArray(n))throw new E("`items` must be an array of items",e.path,e.index).withHelpUrl("structure-list-items-must-be-array");let i=(e.path||[]).concat(t),l=n.map((e,t)=>(function(e,t,n){if(e instanceof eh)return e.serialize({path:n,index:t});if(e instanceof q)return e.serialize();if(e&&"divider"===e.type)return e;if(!e||"listItem"!==e.type){var i;let l=e&&e.type||(e instanceof em?"ListBuilder":(i=e,(0,u.isRecord)(i)&&"function"==typeof i.then)?"Promise":Array.isArray(e)?"array":typeof e);throw new E(`List items must be of type "listItem", got "${l}"${"array"===l?" - did you forget to spread (...moreItems)?":""}`,n,t).withHelpUrl("structure-invalid-list-item")}return e})(e,t,i)),o=l.filter((e,t)=>(0,S.find)(l,{id:e.id},t+1));if(o.length>0){let t=o.map(e=>e.id).slice(0,5),n=o.length>5?`${t.join(", ")}...`:t.join(", ");throw new E(`List items with same ID found (${n})`,e.path,e.index).withHelpUrl("structure-list-item-ids-must-be-unique")}return{...super.serialize(e),type:"list",canHandleIntent:this.spec.canHandleIntent||eu,child:this.spec.child||ep,items:l}}clone(e){let t=new em(this._context);return t.spec={...this.spec,...e},t}}class eh{constructor(e,t){this._context=e,this.spec=t||{}}id(e){return this.clone({id:e})}getId(){return this.spec.id}title(e){return this.clone({title:e,id:G(e,this.spec.id)})}getTitle(){return this.spec.title}i18n(e){return this.clone({i18n:e})}getI18n(){return this.spec.i18n}icon(e){return this.clone({icon:e})}showIcon(e=!0){return this.clone({displayOptions:{...this.spec.displayOptions,showIcon:e}})}getShowIcon(){return this.spec.displayOptions?this.spec.displayOptions.showIcon:void 0}getIcon(){return this.spec.icon}child(e){return this.clone({child:e})}getChild(){return this.spec.child}schemaType(e){return this.clone({schemaType:e})}getSchemaType(){let e=this.spec.schemaType;return"string"==typeof e?this._context.schema.get(e):this.spec.schemaType}serialize(e={path:[]}){let{id:t,title:n,child:i}=this.spec;if("string"!=typeof t||!t)throw new E("`id` is required for list items",e.path,e.index).withHelpUrl(D);if(!e.titleIsOptional&&("string"!=typeof n||!n))throw new E("`title` is required for list items",e.path,t).withHelpUrl(F);let l=this.spec.schemaType;if("string"==typeof l){let n=this._context.schema.get(l);if(!n)throw new E(`Could not find type "${l}" in schema`,e.path,t).withHelpUrl("structure-schema-type-not-found");l=n}let o={path:e.path.concat(t),hint:"child"},r=i instanceof U||i instanceof ea||i instanceof ee||i instanceof em?i.serialize(o):i;if("function"==typeof r){let e=r;r=(t,n)=>e(t,{...n,serializeOptions:o})}return{...this.spec,id:H(t,e.path,e.index),schemaType:l,child:r,title:n,type:"listItem"}}clone(e){let t=new eh(this._context);return t.spec={...this.spec,...e},t}}class eg extends eh{constructor(e,t){super(e,t),this._context=e,this.spec=t||{}}serialize(e={path:[]}){let t,n=super.serialize({...e,titleIsOptional:!0});if(!n.schemaType)throw new E("`schemaType` is required for document list items",e.path,e.index).withHelpUrl("structure-schema-type-required");let i=n.child||(t=this._context,e=>{let i=n.schemaType&&("string"==typeof n.schemaType?n.schemaType:n.schemaType.name);return i?t.resolveDocumentNode({schemaType:i,documentId:e}):new ee(t).id("documentEditor").documentId(e)});return{...n,child:i,schemaType:n.schemaType,_id:n.id}}clone(e){let t=new eg(this._context);return t.spec={...this.spec,...e},t}}function ef(e){return(0,u.isRecord)(e)&&"u">typeof e.schemaType&&"string"==typeof e._id}class ex extends ea{constructor(e,t){super(e),this._context=e,this.spec=t||{}}child(e){return this.cloneWithoutDefaultIntentHandler({child:e})}clone(e){let t=super.clone(e),n=new ex(this._context);return n.spec={...this.spec,...t.getSpec(),...e},n}cloneWithoutDefaultIntentHandler(e){let t=super.clone(e),n=new ex(this._context),i=this.spec.canHandleIntent,l=i&&i.identity===en?{canHandleIntent:void 0}:{};return n.spec={...t.getSpec(),...this.spec,...e,...l},n}}let eb=["sanity.imageAsset","sanity.fileAsset"];function ey(e){return(function({schema:e}){return e.getTypeNames().filter(t=>{let n=e.get(t);return n&&n.type?.name==="document"}).filter(e=>!eb.includes(e))})(e).map(t=>ev(e,t))}function ev(e,t){let{schema:n}=e,i=n.get(t);if(!i)throw Error(`Schema type with name "${t}" not found`);let l=i.title||(0,I.startCase)(t);return new eh(e).id(t).title(l).schemaType(i).child((n,i)=>{let l=i.parent,o="list"===l.type?l.items.find(e=>e.id===n):null,r=ej(e,t);return o&&o.title&&(r=r.title(o.title)),r})}function ej(e,t){let{schema:n,resolveDocumentNode:i}=e,l="string"==typeof t?t:t.schemaType,o="string"==typeof l?l:l.name,r="string"==typeof t?{}:t,s=n.get(o);if(!s)throw Error(`Schema type with name "${o}" not found`);let a=s.title||(0,I.startCase)(o);return new ex(e).id(r.id||o).title(r.title||a).filter("_type == $type").params({type:o}).schemaType(s).defaultOrdering(A.by).menuItemGroups(r.menuItemGroups||[{id:"sorting",title:"Sort",i18n:{title:{key:"menu-item-groups.actions-group",ns:T}}},{id:"layout",title:"Layout",i18n:{title:{key:"menu-item-groups.layout-group",ns:T}}},{id:"actions",title:"Actions",i18n:{title:{key:"menu-item-groups.sorting-group",ns:T}}}]).child(r.child||(e=>i({schemaType:o,documentId:e}))).canHandleIntent(r.canHandleIntent||ei).menuItems(r.menuItems||[...O(e,s),new L(e).group("layout").i18n({title:{key:"menu-items.layout.compact-view",ns:T}}).title("Compact view").icon(f.StackCompactIcon).action("setLayout").params({layout:"default"}),new L(e).group("layout").i18n({title:{key:"menu-items.layout.detailed-view",ns:T}}).title("Detailed view").icon(f.StackIcon).action("setLayout").params({layout:"detail"})])}function ew(e){let t,l,o,a,d,p=(0,i.c)(26),{defaultDocumentNode:m,structure:h,children:x}=e,[b,y]=(0,r.useState)(!1),v=(0,u.useSource)(),j=(0,u.useConfigContextFromSource)(v),w=(0,u.useDocumentStore)(),{perspectiveStack:S}=(0,u.usePerspective)();p[0]!==m||p[1]!==S||p[2]!==v?(t=function({defaultDocumentNode:e,source:t,perspectiveStack:n}){let i=(0,u.getConfigContextFromSource)(t),l={...t,getStructureBuilder:()=>o,resolveDocumentNode:t=>{let n=e?.(o,{...t,...i})||new ee(l);return n.getId()||(n=n.id("documentEditor")),t.documentId&&(n=n.documentId((0,c.getPublishedId)(t.documentId))),n.schemaType(t.schemaType)},perspectiveStack:n},o={defaults:()=>{let e;return e=ey(l),new em(l).id("__root__").title("Content").i18n({title:{key:"default-definition.content-title",ns:T}}).items(e).showIcons(e.some(e=>{var t;return!!(t=e.getSchemaType())&&"string"!=typeof t&&!!t.icon}))},documentTypeList:(...e)=>ej(l,...e),documentTypeListItem:(...e)=>ev(l,...e),documentTypeListItems:(...e)=>ey(l,...e),document:(...e)=>new ee(l,...e),documentWithInitialValueTemplate:(...e)=>(function({resolveDocumentNode:e,templates:t},n,i){let l=t.find(e=>e.id===n);if(!l)throw Error(`Template with ID "${n}" not defined`);return e({schemaType:l.schemaType}).initialValueTemplate(n,i)})(l,...e),defaultDocument:l.resolveDocumentNode,list:(...e)=>new em(l,...e),listItem:(...e)=>new eh(l,...e),menuItem:(...e)=>new L(l,...e),menuItemGroup:(...e)=>new N(l,...e),menuItemsFromInitialValueTemplateItems:(...e)=>(function(e,t){let{schema:n,templates:i}=e;return t.map(t=>{let l=i.find(e=>e.id===t.templateId),o=t.title||l?.title||"Create",r={};l&&l.schemaType&&(r.type=l.schemaType),t.templateId&&(r.template=t.templateId);let s=t.parameters?[r,t.parameters]:r,a=l&&n.get(l.schemaType),d=t.i18n||l?.i18n,c=new L(e).title(o).icon(l&&l.icon||a?.icon||f.AddIcon).intent({type:"create",params:s});return d&&(c=c.i18n(d)),c.serialize()})})(l,...e),documentList:(...e)=>new ea(l,...e),documentListItem:(...e)=>new eg(l,...e),orderingMenuItem:(...e)=>z(l,...e),orderingMenuItemsForType:(...e)=>O(l,...e),editor:(...e)=>(function(e,t){let n=t?.type?e.resolveDocumentNode({schemaType:t.type}):new ee(e);if(!t)return n;let{id:i,type:l,template:o,templateParameters:r}=t.options;return n=n.id(t.id).documentId(i),l&&(n=n.schemaType(l)),o&&(n=n.initialValueTemplate(o,r)),t.child&&(n=n.child(t.child)),n})(l,...e),defaultInitialValueTemplateItems:(...e)=>(function(e){let{schema:t,getStructureBuilder:n,templates:i}=e,l=t.getTypeNames();return i.filter(e=>!e.parameters?.length).sort((e,t)=>l.indexOf(e.schemaType)-l.indexOf(t.schemaType)).map(e=>n().initialValueTemplateItem(e.id))})(l,...e),initialValueTemplateItem:(e,t)=>new et(l,{id:e,parameters:t,templateId:e}),component:e=>(0,g.isValidElementType)(e)?new U().component(e):new U(e),divider:e=>new q(e),view:Q,context:l};return o}({defaultDocumentNode:m,source:v,perspectiveStack:S}),p[0]=m,p[1]=S,p[2]=v,p[3]=t):t=p[3];let I=t;e:{let e;if(h){let e;p[4]!==I||p[5]!==j||p[6]!==w||p[7]!==S||p[8]!==h?(e=h(I,{...j,documentStore:w,perspectiveStack:S}),p[4]=I,p[5]=j,p[6]=w,p[7]=S,p[8]=h,p[9]=e):e=p[9],l=e;break e}p[10]!==I?(e=I.defaults(),p[10]=I,p[11]=e):e=p[11],l=e}let C=l,_=!b,R=!b,P=!b,k=!b;p[12]!==b||p[13]!==_||p[14]!==R||p[15]!==P||p[16]!==k?(o={backButton:b,resizablePanes:_,reviewChanges:R,splitPanes:P,splitViews:k},p[12]=b,p[13]=_,p[14]=R,p[15]=P,p[16]=k,p[17]=o):o=p[17];let E=o;p[18]!==I.context||p[19]!==E||p[20]!==b||p[21]!==C?(a={features:E,layoutCollapsed:b,setLayoutCollapsed:y,rootPaneNode:C,structureContext:I.context},p[18]=I.context,p[19]=E,p[20]=b,p[21]=C,p[22]=a):a=p[22];let D=a;return p[23]!==x||p[24]!==D?(d=(0,n.jsx)(s.StructureToolContext.Provider,{value:D,children:x}),p[23]=x,p[24]=D,p[25]=d):d=p[25],d}e.s(["SerializeError",()=>E,"StructureToolProvider",()=>ew,"getExtendedProjection",()=>k,"structureLocaleNamespace",()=>T,"structureUsEnglishLocaleBundle",()=>R],89832);var eS=e.i(31199),eI=e.i(97146),eC=e.i(99513),e_=e.i(82401),eT=e.i(91413),eR=e.i(7697),eP=e.i(80205),ek=e.i(13186),eE=e.i(97275),eD=e.i(78480),eF=e.i(76605),eA=e.i(86838),eV=e.i(81095),eM=e.i(61218),eL=e.i(78873),ez=e.i(87636),eO=e.i(28640),eB=e.i(82100),eN=e.i(46704),e$=e.i(19202),eH=e.i(59862),eG=e.i(6298),eU=e.i(69031),eq=e.i(34671),eW=e.i(36996),eK=e.i(6816),eY=e.i(83205),eX=e.i(75077),eJ=e.i(12802),eZ=e.i(45871),eQ=e.i(91860),e0=e.i(93366),e1=e.i(66613),e2=e.i(45669),e3=e.i(38972),e3=e3,e4=e.i(10583),e5=e.i(67457),e6=e.i(78961),e8=e.i(25325),e7=e.i(26674),e9=e.i(41246),te=e.i(3986),tt=e.i(30205),tn=e.i(30214),ti=e.i(23792),tl=e.i(93862),to=e.i(83507),tr=e.i(92110),ts=e.i(62307),ta=e.i(6098),td=e.i(89171),tc=e.i(24686);let tu=({clientWidth:e,clientHeight:t,scrollWidth:n,scrollHeight:i})=>i>t||n>e,tp=e=>{let t=window.getComputedStyle(e).overflow;return t.includes("auto")||t.includes("scroll")},tm=e=>{if(null==e)return{x:0,y:0};let{scrollTop:t,scrollHeight:n,clientHeight:i,scrollLeft:l,scrollWidth:o,clientWidth:r}=e;return{x:l?l/Math.max(1e-5,o-r):0,y:t?t/Math.max(1e-5,n-i):0}};function th(){return(th=Object.assign.bind()).apply(null,arguments)}function tg(e){return e.matches("body *")?e:window}class tf{constructor(e,t={}){var n,i=this;this.elements=void 0,this.defaults={vertical:!0,horizontal:!0,debug:!0},this.options=void 0,this.paused=!1,this.logger=void 0,this.handleScroll=async function(e){if(i.paused||!e.currentTarget)return;let t=i.getScrollContainer(e.currentTarget);await new Promise(e=>{requestAnimationFrame(()=>e())}),i.mirrorScrollPositions(tm(t),t)},this.elements=[...e].filter(Boolean).map(e=>this.getScrollContainer(e)),this.elements=[...new Set(this.elements)],this.options=th({},this.defaults,t),this.options.debug&&(this.logger=(n="[scroll-mirror]",{log:(...e)=>console.log(n,...e),warn:(...e)=>console.warn(n,...e),error:(...e)=>console.error(n,...e)}),function(e,t){if(e.length<1)null==t||t.warn("No elements provided.");else for(let n of(e.length<2&&(null==t||t.warn("Only one element provided.",e)),e.some(e=>!e)&&(null==t||t.error("Some elements are not defined.",e)),e))n instanceof HTMLElement&&!tu(n)&&(null==t||t.warn("Element doesn't have overflow:",n)),n instanceof HTMLElement&&n.matches("body *")&&!tp(n)&&(null==t||t.warn('No "overflow: auto;" or "overflow: scroll;" set on element:',n))}(this.elements,this.logger)),this.elements.forEach(e=>this.addScrollHandler(e)),this.elements.includes(document.documentElement)&&this.mirrorScrollPositions(tm(document.documentElement),document.documentElement)}pause(){this.paused=!0}resume(){this.paused=!1}destroy(){this.elements.forEach(e=>this.removeScrollHandler(e))}addScrollHandler(e){this.removeScrollHandler(e),tg(e).addEventListener("scroll",this.handleScroll,{passive:!0})}removeScrollHandler(e){tg(e).removeEventListener("scroll",this.handleScroll)}getScrollContainer(e){return e instanceof HTMLElement&&e.matches("body *")?e:document.documentElement}mirrorScrollPositions(e,t){this.elements.forEach(n=>{t!==n&&(this.removeScrollHandler(n),this.setScrollPosition(e,n),window.requestAnimationFrame(()=>{this.addScrollHandler(n)}))})}setScrollPosition(e,t){let{vertical:n,horizontal:i}=this.options,l=t.scrollWidth-t.clientWidth,o=t.scrollHeight-t.clientHeight;n&&o&&t.scrollTo({top:o*e.y,behavior:"instant"}),i&&l&&t.scrollTo({left:l*e.x,behavior:"instant"})}get progress(){return tm(this.elements.find(e=>tu(e)))}set progress(e){"number"==typeof e&&(e={x:e,y:e});let t=th({},this.progress,e);(function(e,t){let n=!0;for(let[i,l]of Object.entries(e))("number"!=typeof l||l<0||l>1)&&(null==t||t.error(`progress.${i} must be a number between 0-1`),n=!1);return n})(t,this.logger)&&this.mirrorScrollPositions(t)}}var tx=e.i(71196),tb=e.i(47679),ty=e.i(59085),tv=e.i(59323),tj=e.i(48630),tw=e.i(36425),tS=e.i(8894),tI=e.i(30902),tC=e.i(17489),t_=e.i(85877),tT=e.i(6824),tR=e.i(65196),tP=e.i(9932);function tk(e,t){return"function"==typeof e?e(t):e}function tE(e,t){return n=>{t.setState(t=>({...t,[e]:tk(n,t[e])}))}}function tD(e){return e instanceof Function}function tF(e,t,n){let i,l=[];return o=>{let r,s;n.key&&n.debug&&(r=Date.now());let a=e(o);if(!(a.length!==l.length||a.some((e,t)=>l[t]!==e)))return i;if(l=a,n.key&&n.debug&&(s=Date.now()),i=t(...a),null==n||null==n.onChange||n.onChange(i),n.key&&n.debug&&null!=n&&n.debug()){let e=Math.round((Date.now()-r)*100)/100,t=Math.round((Date.now()-s)*100)/100,i=t/16,l=(e,t)=>{for(e=String(e);e.length<t;)e=" "+e;return e};console.info(`%câ± ${l(t,5)} /${l(e,5)} ms`,`
            font-size: .6rem;
            font-weight: bold;
            color: hsl(${Math.max(0,Math.min(120-120*i,120))}deg 100% 31%);`,null==n?void 0:n.key)}return i}}function tA(e,t,n,i){return{debug:()=>{var n;return null!=(n=null==e?void 0:e.debugAll)?n:e[t]},key:!1,onChange:i}}e.i(31417);let tV="debugHeaders";function tM(e,t,n){var i;let l={id:null!=(i=n.id)?i:t.id,column:t,index:n.index,isPlaceholder:!!n.isPlaceholder,placeholderId:n.placeholderId,depth:n.depth,subHeaders:[],colSpan:0,rowSpan:0,headerGroup:null,getLeafHeaders:()=>{let e=[],t=n=>{n.subHeaders&&n.subHeaders.length&&n.subHeaders.map(t),e.push(n)};return t(l),e},getContext:()=>({table:e,header:l,column:t})};return e._features.forEach(t=>{null==t.createHeader||t.createHeader(l,e)}),l}function tL(e,t,n,i){var l,o;let r=0,s=function(e,t){void 0===t&&(t=1),r=Math.max(r,t),e.filter(e=>e.getIsVisible()).forEach(e=>{var n;null!=(n=e.columns)&&n.length&&s(e.columns,t+1)},0)};s(e);let a=[],d=(e,t)=>{let l={depth:t,id:[i,`${t}`].filter(Boolean).join("_"),headers:[]},o=[];e.forEach(e=>{let r,s=[...o].reverse()[0],a=e.column.depth===l.depth,d=!1;if(a&&e.column.parent?r=e.column.parent:(r=e.column,d=!0),s&&(null==s?void 0:s.column)===r)s.subHeaders.push(e);else{let l=tM(n,r,{id:[i,t,r.id,null==e?void 0:e.id].filter(Boolean).join("_"),isPlaceholder:d,placeholderId:d?`${o.filter(e=>e.column===r).length}`:void 0,depth:t,index:o.length});l.subHeaders.push(e),o.push(l)}l.headers.push(e),e.headerGroup=l}),a.push(l),t>0&&d(o,t-1)};d(t.map((e,t)=>tM(n,e,{depth:r,index:t})),r-1),a.reverse();let c=e=>e.filter(e=>e.column.getIsVisible()).map(e=>{let t=0,n=0,i=[0];return e.subHeaders&&e.subHeaders.length?(i=[],c(e.subHeaders).forEach(e=>{let{colSpan:n,rowSpan:l}=e;t+=n,i.push(l)})):t=1,n+=Math.min(...i),e.colSpan=t,e.rowSpan=n,{colSpan:t,rowSpan:n}});return c(null!=(l=null==(o=a[0])?void 0:o.headers)?l:[]),a}let tz=(e,t,n,i,l,o,r)=>{let s={id:t,index:i,original:n,depth:l,parentId:r,_valuesCache:{},_uniqueValuesCache:{},getValue:t=>{if(s._valuesCache.hasOwnProperty(t))return s._valuesCache[t];let n=e.getColumn(t);if(null!=n&&n.accessorFn)return s._valuesCache[t]=n.accessorFn(s.original,i),s._valuesCache[t]},getUniqueValues:t=>{if(s._uniqueValuesCache.hasOwnProperty(t))return s._uniqueValuesCache[t];let n=e.getColumn(t);if(null!=n&&n.accessorFn)return n.columnDef.getUniqueValues?s._uniqueValuesCache[t]=n.columnDef.getUniqueValues(s.original,i):s._uniqueValuesCache[t]=[s.getValue(t)],s._uniqueValuesCache[t]},renderValue:t=>{var n;return null!=(n=s.getValue(t))?n:e.options.renderFallbackValue},subRows:null!=o?o:[],getLeafRows:()=>{var e,t;let n,i;return e=s.subRows,t=e=>e.subRows,n=[],(i=e=>{e.forEach(e=>{n.push(e);let l=t(e);null!=l&&l.length&&i(l)})})(e),n},getParentRow:()=>s.parentId?e.getRow(s.parentId,!0):void 0,getParentRows:()=>{let e=[],t=s;for(;;){let n=t.getParentRow();if(!n)break;e.push(n),t=n}return e.reverse()},getAllCells:tF(()=>[e.getAllLeafColumns()],t=>t.map(t=>{var n;let i;return n=t.id,i={id:`${s.id}_${t.id}`,row:s,column:t,getValue:()=>s.getValue(n),renderValue:()=>{var t;return null!=(t=i.getValue())?t:e.options.renderFallbackValue},getContext:tF(()=>[e,t,s,i],(e,t,n,i)=>({table:e,column:t,row:n,cell:i,getValue:i.getValue,renderValue:i.renderValue}),tA(e.options,"debugCells","cell.getContext"))},e._features.forEach(n=>{null==n.createCell||n.createCell(i,t,s,e)},{}),i}),tA(e.options,"debugRows","getAllCells")),_getAllCellsByColumnId:tF(()=>[s.getAllCells()],e=>e.reduce((e,t)=>(e[t.column.id]=t,e),{}),tA(e.options,"debugRows","getAllCellsByColumnId"))};for(let t=0;t<e._features.length;t++){let n=e._features[t];null==n||null==n.createRow||n.createRow(s,e)}return s},tO=(e,t,n)=>{var i,l;let o=null==n||null==(i=n.toString())?void 0:i.toLowerCase();return!!(null==(l=e.getValue(t))||null==(l=l.toString())||null==(l=l.toLowerCase())?void 0:l.includes(o))};tO.autoRemove=e=>tY(e);let tB=(e,t,n)=>{var i;return!!(null==(i=e.getValue(t))||null==(i=i.toString())?void 0:i.includes(n))};tB.autoRemove=e=>tY(e);let tN=(e,t,n)=>{var i;return(null==(i=e.getValue(t))||null==(i=i.toString())?void 0:i.toLowerCase())===(null==n?void 0:n.toLowerCase())};tN.autoRemove=e=>tY(e);let t$=(e,t,n)=>{var i;return null==(i=e.getValue(t))?void 0:i.includes(n)};t$.autoRemove=e=>tY(e);let tH=(e,t,n)=>!n.some(n=>{var i;return!(null!=(i=e.getValue(t))&&i.includes(n))});tH.autoRemove=e=>tY(e)||!(null!=e&&e.length);let tG=(e,t,n)=>n.some(n=>{var i;return null==(i=e.getValue(t))?void 0:i.includes(n)});tG.autoRemove=e=>tY(e)||!(null!=e&&e.length);let tU=(e,t,n)=>e.getValue(t)===n;tU.autoRemove=e=>tY(e);let tq=(e,t,n)=>e.getValue(t)==n;tq.autoRemove=e=>tY(e);let tW=(e,t,n)=>{let[i,l]=n,o=e.getValue(t);return o>=i&&o<=l};tW.resolveFilterValue=e=>{let[t,n]=e,i="number"!=typeof t?parseFloat(t):t,l="number"!=typeof n?parseFloat(n):n,o=null===t||Number.isNaN(i)?-1/0:i,r=null===n||Number.isNaN(l)?1/0:l;if(o>r){let e=o;o=r,r=e}return[o,r]},tW.autoRemove=e=>tY(e)||tY(e[0])&&tY(e[1]);let tK={includesString:tO,includesStringSensitive:tB,equalsString:tN,arrIncludes:t$,arrIncludesAll:tH,arrIncludesSome:tG,equals:tU,weakEquals:tq,inNumberRange:tW};function tY(e){return null==e||""===e}function tX(e,t,n){return!!e&&!!e.autoRemove&&e.autoRemove(t,n)||void 0===t||"string"==typeof t&&!t}let tJ={sum:(e,t,n)=>n.reduce((t,n)=>{let i=n.getValue(e);return t+("number"==typeof i?i:0)},0),min:(e,t,n)=>{let i;return n.forEach(t=>{let n=t.getValue(e);null!=n&&(i>n||void 0===i&&n>=n)&&(i=n)}),i},max:(e,t,n)=>{let i;return n.forEach(t=>{let n=t.getValue(e);null!=n&&(i<n||void 0===i&&n>=n)&&(i=n)}),i},extent:(e,t,n)=>{let i,l;return n.forEach(t=>{let n=t.getValue(e);null!=n&&(void 0===i?n>=n&&(i=l=n):(i>n&&(i=n),l<n&&(l=n)))}),[i,l]},mean:(e,t)=>{let n=0,i=0;if(t.forEach(t=>{let l=t.getValue(e);null!=l&&(l*=1)>=l&&(++n,i+=l)}),n)return i/n},median:(e,t)=>{if(!t.length)return;let n=t.map(t=>t.getValue(e));if(!(Array.isArray(n)&&n.every(e=>"number"==typeof e)))return;if(1===n.length)return n[0];let i=Math.floor(n.length/2),l=n.sort((e,t)=>e-t);return n.length%2!=0?l[i]:(l[i-1]+l[i])/2},unique:(e,t)=>Array.from(new Set(t.map(t=>t.getValue(e))).values()),uniqueCount:(e,t)=>new Set(t.map(t=>t.getValue(e))).size,count:(e,t)=>t.length},tZ=()=>({left:[],right:[]}),tQ={size:150,minSize:20,maxSize:Number.MAX_SAFE_INTEGER},t0=()=>({startOffset:null,startSize:null,deltaOffset:null,deltaPercentage:null,isResizingColumn:!1,columnSizingStart:[]}),t1=null;function t2(e){return"touchstart"===e.type}function t3(e,t){return t?"center"===t?e.getCenterVisibleLeafColumns():"left"===t?e.getLeftVisibleLeafColumns():e.getRightVisibleLeafColumns():e.getVisibleLeafColumns()}let t4=()=>({pageIndex:0,pageSize:10}),t5=()=>({top:[],bottom:[]}),t6=(e,t,n,i,l)=>{var o;let r=l.getRow(t,!0);n?(r.getCanMultiSelect()||Object.keys(e).forEach(t=>delete e[t]),r.getCanSelect()&&(e[t]=!0)):delete e[t],i&&null!=(o=r.subRows)&&o.length&&r.getCanSelectSubRows()&&r.subRows.forEach(t=>t6(e,t.id,n,i,l))};function t8(e,t){let n=e.getState().rowSelection,i=[],l={},o=function(e,t){return e.map(e=>{var t;let r=t7(e,n);if(r&&(i.push(e),l[e.id]=e),null!=(t=e.subRows)&&t.length&&(e={...e,subRows:o(e.subRows)}),r)return e}).filter(Boolean)};return{rows:o(t.rows),flatRows:i,rowsById:l}}function t7(e,t){var n;return null!=(n=t[e.id])&&n}function t9(e,t,n){var i;if(!(null!=(i=e.subRows)&&i.length))return!1;let l=!0,o=!1;return e.subRows.forEach(e=>{if((!o||l)&&(e.getCanSelect()&&(t7(e,t)?o=!0:l=!1),e.subRows&&e.subRows.length)){let n=t9(e,t);"all"===n?o=!0:("some"===n&&(o=!0),l=!1)}}),l?"all":!!o&&"some"}let ne=/([0-9]+)/gm;function nt(e,t){return e===t?0:e>t?1:-1}function nn(e){return"number"==typeof e?isNaN(e)||e===1/0||e===-1/0?"":String(e):"string"==typeof e?e:""}function ni(e,t){let n=e.split(ne).filter(Boolean),i=t.split(ne).filter(Boolean);for(;n.length&&i.length;){let e=n.shift(),t=i.shift(),l=parseInt(e,10),o=parseInt(t,10),r=[l,o].sort();if(isNaN(r[0])){if(e>t)return 1;if(t>e)return -1;continue}if(isNaN(r[1]))return isNaN(l)?-1:1;if(l>o)return 1;if(o>l)return -1}return n.length-i.length}let nl={alphanumeric:(e,t,n)=>ni(nn(e.getValue(n)).toLowerCase(),nn(t.getValue(n)).toLowerCase()),alphanumericCaseSensitive:(e,t,n)=>ni(nn(e.getValue(n)),nn(t.getValue(n))),text:(e,t,n)=>nt(nn(e.getValue(n)).toLowerCase(),nn(t.getValue(n)).toLowerCase()),textCaseSensitive:(e,t,n)=>nt(nn(e.getValue(n)),nn(t.getValue(n))),datetime:(e,t,n)=>{let i=e.getValue(n),l=t.getValue(n);return i>l?1:i<l?-1:0},basic:(e,t,n)=>nt(e.getValue(n),t.getValue(n))},no=[{createTable:e=>{e.getHeaderGroups=tF(()=>[e.getAllColumns(),e.getVisibleLeafColumns(),e.getState().columnPinning.left,e.getState().columnPinning.right],(t,n,i,l)=>{var o,r;let s=null!=(o=null==i?void 0:i.map(e=>n.find(t=>t.id===e)).filter(Boolean))?o:[],a=null!=(r=null==l?void 0:l.map(e=>n.find(t=>t.id===e)).filter(Boolean))?r:[];return tL(t,[...s,...n.filter(e=>!(null!=i&&i.includes(e.id))&&!(null!=l&&l.includes(e.id))),...a],e)},tA(e.options,tV,"getHeaderGroups")),e.getCenterHeaderGroups=tF(()=>[e.getAllColumns(),e.getVisibleLeafColumns(),e.getState().columnPinning.left,e.getState().columnPinning.right],(t,n,i,l)=>tL(t,n=n.filter(e=>!(null!=i&&i.includes(e.id))&&!(null!=l&&l.includes(e.id))),e,"center"),tA(e.options,tV,"getCenterHeaderGroups")),e.getLeftHeaderGroups=tF(()=>[e.getAllColumns(),e.getVisibleLeafColumns(),e.getState().columnPinning.left],(t,n,i)=>{var l;return tL(t,null!=(l=null==i?void 0:i.map(e=>n.find(t=>t.id===e)).filter(Boolean))?l:[],e,"left")},tA(e.options,tV,"getLeftHeaderGroups")),e.getRightHeaderGroups=tF(()=>[e.getAllColumns(),e.getVisibleLeafColumns(),e.getState().columnPinning.right],(t,n,i)=>{var l;return tL(t,null!=(l=null==i?void 0:i.map(e=>n.find(t=>t.id===e)).filter(Boolean))?l:[],e,"right")},tA(e.options,tV,"getRightHeaderGroups")),e.getFooterGroups=tF(()=>[e.getHeaderGroups()],e=>[...e].reverse(),tA(e.options,tV,"getFooterGroups")),e.getLeftFooterGroups=tF(()=>[e.getLeftHeaderGroups()],e=>[...e].reverse(),tA(e.options,tV,"getLeftFooterGroups")),e.getCenterFooterGroups=tF(()=>[e.getCenterHeaderGroups()],e=>[...e].reverse(),tA(e.options,tV,"getCenterFooterGroups")),e.getRightFooterGroups=tF(()=>[e.getRightHeaderGroups()],e=>[...e].reverse(),tA(e.options,tV,"getRightFooterGroups")),e.getFlatHeaders=tF(()=>[e.getHeaderGroups()],e=>e.map(e=>e.headers).flat(),tA(e.options,tV,"getFlatHeaders")),e.getLeftFlatHeaders=tF(()=>[e.getLeftHeaderGroups()],e=>e.map(e=>e.headers).flat(),tA(e.options,tV,"getLeftFlatHeaders")),e.getCenterFlatHeaders=tF(()=>[e.getCenterHeaderGroups()],e=>e.map(e=>e.headers).flat(),tA(e.options,tV,"getCenterFlatHeaders")),e.getRightFlatHeaders=tF(()=>[e.getRightHeaderGroups()],e=>e.map(e=>e.headers).flat(),tA(e.options,tV,"getRightFlatHeaders")),e.getCenterLeafHeaders=tF(()=>[e.getCenterFlatHeaders()],e=>e.filter(e=>{var t;return!(null!=(t=e.subHeaders)&&t.length)}),tA(e.options,tV,"getCenterLeafHeaders")),e.getLeftLeafHeaders=tF(()=>[e.getLeftFlatHeaders()],e=>e.filter(e=>{var t;return!(null!=(t=e.subHeaders)&&t.length)}),tA(e.options,tV,"getLeftLeafHeaders")),e.getRightLeafHeaders=tF(()=>[e.getRightFlatHeaders()],e=>e.filter(e=>{var t;return!(null!=(t=e.subHeaders)&&t.length)}),tA(e.options,tV,"getRightLeafHeaders")),e.getLeafHeaders=tF(()=>[e.getLeftHeaderGroups(),e.getCenterHeaderGroups(),e.getRightHeaderGroups()],(e,t,n)=>{var i,l,o,r,s,a;return[...null!=(i=null==(l=e[0])?void 0:l.headers)?i:[],...null!=(o=null==(r=t[0])?void 0:r.headers)?o:[],...null!=(s=null==(a=n[0])?void 0:a.headers)?s:[]].map(e=>e.getLeafHeaders()).flat()},tA(e.options,tV,"getLeafHeaders"))}},{getInitialState:e=>({columnVisibility:{},...e}),getDefaultOptions:e=>({onColumnVisibilityChange:tE("columnVisibility",e)}),createColumn:(e,t)=>{e.toggleVisibility=n=>{e.getCanHide()&&t.setColumnVisibility(t=>({...t,[e.id]:null!=n?n:!e.getIsVisible()}))},e.getIsVisible=()=>{var n,i;let l=e.columns;return null==(n=l.length?l.some(e=>e.getIsVisible()):null==(i=t.getState().columnVisibility)?void 0:i[e.id])||n},e.getCanHide=()=>{var n,i;return(null==(n=e.columnDef.enableHiding)||n)&&(null==(i=t.options.enableHiding)||i)},e.getToggleVisibilityHandler=()=>t=>{null==e.toggleVisibility||e.toggleVisibility(t.target.checked)}},createRow:(e,t)=>{e._getAllVisibleCells=tF(()=>[e.getAllCells(),t.getState().columnVisibility],e=>e.filter(e=>e.column.getIsVisible()),tA(t.options,"debugRows","_getAllVisibleCells")),e.getVisibleCells=tF(()=>[e.getLeftVisibleCells(),e.getCenterVisibleCells(),e.getRightVisibleCells()],(e,t,n)=>[...e,...t,...n],tA(t.options,"debugRows","getVisibleCells"))},createTable:e=>{let t=(t,n)=>tF(()=>[n(),n().filter(e=>e.getIsVisible()).map(e=>e.id).join("_")],e=>e.filter(e=>null==e.getIsVisible?void 0:e.getIsVisible()),tA(e.options,"debugColumns",t));e.getVisibleFlatColumns=t("getVisibleFlatColumns",()=>e.getAllFlatColumns()),e.getVisibleLeafColumns=t("getVisibleLeafColumns",()=>e.getAllLeafColumns()),e.getLeftVisibleLeafColumns=t("getLeftVisibleLeafColumns",()=>e.getLeftLeafColumns()),e.getRightVisibleLeafColumns=t("getRightVisibleLeafColumns",()=>e.getRightLeafColumns()),e.getCenterVisibleLeafColumns=t("getCenterVisibleLeafColumns",()=>e.getCenterLeafColumns()),e.setColumnVisibility=t=>null==e.options.onColumnVisibilityChange?void 0:e.options.onColumnVisibilityChange(t),e.resetColumnVisibility=t=>{var n;e.setColumnVisibility(t?{}:null!=(n=e.initialState.columnVisibility)?n:{})},e.toggleAllColumnsVisible=t=>{var n;t=null!=(n=t)?n:!e.getIsAllColumnsVisible(),e.setColumnVisibility(e.getAllLeafColumns().reduce((e,n)=>({...e,[n.id]:t||!(null!=n.getCanHide&&n.getCanHide())}),{}))},e.getIsAllColumnsVisible=()=>!e.getAllLeafColumns().some(e=>!(null!=e.getIsVisible&&e.getIsVisible())),e.getIsSomeColumnsVisible=()=>e.getAllLeafColumns().some(e=>null==e.getIsVisible?void 0:e.getIsVisible()),e.getToggleAllColumnsVisibilityHandler=()=>t=>{var n;e.toggleAllColumnsVisible(null==(n=t.target)?void 0:n.checked)}}},{getInitialState:e=>({columnOrder:[],...e}),getDefaultOptions:e=>({onColumnOrderChange:tE("columnOrder",e)}),createColumn:(e,t)=>{e.getIndex=tF(e=>[t3(t,e)],t=>t.findIndex(t=>t.id===e.id),tA(t.options,"debugColumns","getIndex")),e.getIsFirstColumn=n=>{var i;return(null==(i=t3(t,n)[0])?void 0:i.id)===e.id},e.getIsLastColumn=n=>{var i;let l=t3(t,n);return(null==(i=l[l.length-1])?void 0:i.id)===e.id}},createTable:e=>{e.setColumnOrder=t=>null==e.options.onColumnOrderChange?void 0:e.options.onColumnOrderChange(t),e.resetColumnOrder=t=>{var n;e.setColumnOrder(t?[]:null!=(n=e.initialState.columnOrder)?n:[])},e._getOrderColumnsFn=tF(()=>[e.getState().columnOrder,e.getState().grouping,e.options.groupedColumnMode],(e,t,n)=>i=>{let l=[];if(null!=e&&e.length){let t=[...e],n=[...i];for(;n.length&&t.length;){let e=t.shift(),i=n.findIndex(t=>t.id===e);i>-1&&l.push(n.splice(i,1)[0])}l=[...l,...n]}else l=i;var o=l;if(!(null!=t&&t.length)||!n)return o;let r=o.filter(e=>!t.includes(e.id));return"remove"===n?r:[...t.map(e=>o.find(t=>t.id===e)).filter(Boolean),...r]},tA(e.options,"debugTable","_getOrderColumnsFn"))}},{getInitialState:e=>({columnPinning:tZ(),...e}),getDefaultOptions:e=>({onColumnPinningChange:tE("columnPinning",e)}),createColumn:(e,t)=>{e.pin=n=>{let i=e.getLeafColumns().map(e=>e.id).filter(Boolean);t.setColumnPinning(e=>{var t,l,o,r,s,a;return"right"===n?{left:(null!=(o=null==e?void 0:e.left)?o:[]).filter(e=>!(null!=i&&i.includes(e))),right:[...(null!=(r=null==e?void 0:e.right)?r:[]).filter(e=>!(null!=i&&i.includes(e))),...i]}:"left"===n?{left:[...(null!=(s=null==e?void 0:e.left)?s:[]).filter(e=>!(null!=i&&i.includes(e))),...i],right:(null!=(a=null==e?void 0:e.right)?a:[]).filter(e=>!(null!=i&&i.includes(e)))}:{left:(null!=(t=null==e?void 0:e.left)?t:[]).filter(e=>!(null!=i&&i.includes(e))),right:(null!=(l=null==e?void 0:e.right)?l:[]).filter(e=>!(null!=i&&i.includes(e)))}})},e.getCanPin=()=>e.getLeafColumns().some(e=>{var n,i,l;return(null==(n=e.columnDef.enablePinning)||n)&&(null==(i=null!=(l=t.options.enableColumnPinning)?l:t.options.enablePinning)||i)}),e.getIsPinned=()=>{let n=e.getLeafColumns().map(e=>e.id),{left:i,right:l}=t.getState().columnPinning,o=n.some(e=>null==i?void 0:i.includes(e)),r=n.some(e=>null==l?void 0:l.includes(e));return o?"left":!!r&&"right"},e.getPinnedIndex=()=>{var n,i;let l=e.getIsPinned();return l?null!=(n=null==(i=t.getState().columnPinning)||null==(i=i[l])?void 0:i.indexOf(e.id))?n:-1:0}},createRow:(e,t)=>{e.getCenterVisibleCells=tF(()=>[e._getAllVisibleCells(),t.getState().columnPinning.left,t.getState().columnPinning.right],(e,t,n)=>{let i=[...null!=t?t:[],...null!=n?n:[]];return e.filter(e=>!i.includes(e.column.id))},tA(t.options,"debugRows","getCenterVisibleCells")),e.getLeftVisibleCells=tF(()=>[e._getAllVisibleCells(),t.getState().columnPinning.left],(e,t)=>(null!=t?t:[]).map(t=>e.find(e=>e.column.id===t)).filter(Boolean).map(e=>({...e,position:"left"})),tA(t.options,"debugRows","getLeftVisibleCells")),e.getRightVisibleCells=tF(()=>[e._getAllVisibleCells(),t.getState().columnPinning.right],(e,t)=>(null!=t?t:[]).map(t=>e.find(e=>e.column.id===t)).filter(Boolean).map(e=>({...e,position:"right"})),tA(t.options,"debugRows","getRightVisibleCells"))},createTable:e=>{e.setColumnPinning=t=>null==e.options.onColumnPinningChange?void 0:e.options.onColumnPinningChange(t),e.resetColumnPinning=t=>{var n,i;return e.setColumnPinning(t?tZ():null!=(n=null==(i=e.initialState)?void 0:i.columnPinning)?n:tZ())},e.getIsSomeColumnsPinned=t=>{var n,i,l;let o=e.getState().columnPinning;return t?!!(null==(n=o[t])?void 0:n.length):!!((null==(i=o.left)?void 0:i.length)||(null==(l=o.right)?void 0:l.length))},e.getLeftLeafColumns=tF(()=>[e.getAllLeafColumns(),e.getState().columnPinning.left],(e,t)=>(null!=t?t:[]).map(t=>e.find(e=>e.id===t)).filter(Boolean),tA(e.options,"debugColumns","getLeftLeafColumns")),e.getRightLeafColumns=tF(()=>[e.getAllLeafColumns(),e.getState().columnPinning.right],(e,t)=>(null!=t?t:[]).map(t=>e.find(e=>e.id===t)).filter(Boolean),tA(e.options,"debugColumns","getRightLeafColumns")),e.getCenterLeafColumns=tF(()=>[e.getAllLeafColumns(),e.getState().columnPinning.left,e.getState().columnPinning.right],(e,t,n)=>{let i=[...null!=t?t:[],...null!=n?n:[]];return e.filter(e=>!i.includes(e.id))},tA(e.options,"debugColumns","getCenterLeafColumns"))}},{createColumn:(e,t)=>{e._getFacetedRowModel=t.options.getFacetedRowModel&&t.options.getFacetedRowModel(t,e.id),e.getFacetedRowModel=()=>e._getFacetedRowModel?e._getFacetedRowModel():t.getPreFilteredRowModel(),e._getFacetedUniqueValues=t.options.getFacetedUniqueValues&&t.options.getFacetedUniqueValues(t,e.id),e.getFacetedUniqueValues=()=>e._getFacetedUniqueValues?e._getFacetedUniqueValues():new Map,e._getFacetedMinMaxValues=t.options.getFacetedMinMaxValues&&t.options.getFacetedMinMaxValues(t,e.id),e.getFacetedMinMaxValues=()=>{if(e._getFacetedMinMaxValues)return e._getFacetedMinMaxValues()}}},{getDefaultColumnDef:()=>({filterFn:"auto"}),getInitialState:e=>({columnFilters:[],...e}),getDefaultOptions:e=>({onColumnFiltersChange:tE("columnFilters",e),filterFromLeafRows:!1,maxLeafRowFilterDepth:100}),createColumn:(e,t)=>{e.getAutoFilterFn=()=>{let n=t.getCoreRowModel().flatRows[0],i=null==n?void 0:n.getValue(e.id);return"string"==typeof i?tK.includesString:"number"==typeof i?tK.inNumberRange:"boolean"==typeof i||null!==i&&"object"==typeof i?tK.equals:Array.isArray(i)?tK.arrIncludes:tK.weakEquals},e.getFilterFn=()=>{var n,i;return tD(e.columnDef.filterFn)?e.columnDef.filterFn:"auto"===e.columnDef.filterFn?e.getAutoFilterFn():null!=(n=null==(i=t.options.filterFns)?void 0:i[e.columnDef.filterFn])?n:tK[e.columnDef.filterFn]},e.getCanFilter=()=>{var n,i,l;return(null==(n=e.columnDef.enableColumnFilter)||n)&&(null==(i=t.options.enableColumnFilters)||i)&&(null==(l=t.options.enableFilters)||l)&&!!e.accessorFn},e.getIsFiltered=()=>e.getFilterIndex()>-1,e.getFilterValue=()=>{var n;return null==(n=t.getState().columnFilters)||null==(n=n.find(t=>t.id===e.id))?void 0:n.value},e.getFilterIndex=()=>{var n,i;return null!=(n=null==(i=t.getState().columnFilters)?void 0:i.findIndex(t=>t.id===e.id))?n:-1},e.setFilterValue=n=>{t.setColumnFilters(t=>{var i,l;let o=e.getFilterFn(),r=null==t?void 0:t.find(t=>t.id===e.id),s=tk(n,r?r.value:void 0);if(tX(o,s,e))return null!=(i=null==t?void 0:t.filter(t=>t.id!==e.id))?i:[];let a={id:e.id,value:s};return r?null!=(l=null==t?void 0:t.map(t=>t.id===e.id?a:t))?l:[]:null!=t&&t.length?[...t,a]:[a]})}},createRow:(e,t)=>{e.columnFilters={},e.columnFiltersMeta={}},createTable:e=>{e.setColumnFilters=t=>{let n=e.getAllLeafColumns();null==e.options.onColumnFiltersChange||e.options.onColumnFiltersChange(e=>{var i;return null==(i=tk(t,e))?void 0:i.filter(e=>{let t=n.find(t=>t.id===e.id);return!(t&&tX(t.getFilterFn(),e.value,t))&&!0})})},e.resetColumnFilters=t=>{var n,i;e.setColumnFilters(t?[]:null!=(n=null==(i=e.initialState)?void 0:i.columnFilters)?n:[])},e.getPreFilteredRowModel=()=>e.getCoreRowModel(),e.getFilteredRowModel=()=>(!e._getFilteredRowModel&&e.options.getFilteredRowModel&&(e._getFilteredRowModel=e.options.getFilteredRowModel(e)),e.options.manualFiltering||!e._getFilteredRowModel)?e.getPreFilteredRowModel():e._getFilteredRowModel()}},{createTable:e=>{e._getGlobalFacetedRowModel=e.options.getFacetedRowModel&&e.options.getFacetedRowModel(e,"__global__"),e.getGlobalFacetedRowModel=()=>e.options.manualFiltering||!e._getGlobalFacetedRowModel?e.getPreFilteredRowModel():e._getGlobalFacetedRowModel(),e._getGlobalFacetedUniqueValues=e.options.getFacetedUniqueValues&&e.options.getFacetedUniqueValues(e,"__global__"),e.getGlobalFacetedUniqueValues=()=>e._getGlobalFacetedUniqueValues?e._getGlobalFacetedUniqueValues():new Map,e._getGlobalFacetedMinMaxValues=e.options.getFacetedMinMaxValues&&e.options.getFacetedMinMaxValues(e,"__global__"),e.getGlobalFacetedMinMaxValues=()=>{if(e._getGlobalFacetedMinMaxValues)return e._getGlobalFacetedMinMaxValues()}}},{getInitialState:e=>({globalFilter:void 0,...e}),getDefaultOptions:e=>({onGlobalFilterChange:tE("globalFilter",e),globalFilterFn:"auto",getColumnCanGlobalFilter:t=>{var n;let i=null==(n=e.getCoreRowModel().flatRows[0])||null==(n=n._getAllCellsByColumnId()[t.id])?void 0:n.getValue();return"string"==typeof i||"number"==typeof i}}),createColumn:(e,t)=>{e.getCanGlobalFilter=()=>{var n,i,l,o;return(null==(n=e.columnDef.enableGlobalFilter)||n)&&(null==(i=t.options.enableGlobalFilter)||i)&&(null==(l=t.options.enableFilters)||l)&&(null==(o=null==t.options.getColumnCanGlobalFilter?void 0:t.options.getColumnCanGlobalFilter(e))||o)&&!!e.accessorFn}},createTable:e=>{e.getGlobalAutoFilterFn=()=>tK.includesString,e.getGlobalFilterFn=()=>{var t,n;let{globalFilterFn:i}=e.options;return tD(i)?i:"auto"===i?e.getGlobalAutoFilterFn():null!=(t=null==(n=e.options.filterFns)?void 0:n[i])?t:tK[i]},e.setGlobalFilter=t=>{null==e.options.onGlobalFilterChange||e.options.onGlobalFilterChange(t)},e.resetGlobalFilter=t=>{e.setGlobalFilter(t?void 0:e.initialState.globalFilter)}}},{getInitialState:e=>({sorting:[],...e}),getDefaultColumnDef:()=>({sortingFn:"auto",sortUndefined:1}),getDefaultOptions:e=>({onSortingChange:tE("sorting",e),isMultiSortEvent:e=>e.shiftKey}),createColumn:(e,t)=>{e.getAutoSortingFn=()=>{let n=t.getFilteredRowModel().flatRows.slice(10),i=!1;for(let t of n){let n=null==t?void 0:t.getValue(e.id);if("[object Date]"===Object.prototype.toString.call(n))return nl.datetime;if("string"==typeof n&&(i=!0,n.split(ne).length>1))return nl.alphanumeric}return i?nl.text:nl.basic},e.getAutoSortDir=()=>{let n=t.getFilteredRowModel().flatRows[0];return"string"==typeof(null==n?void 0:n.getValue(e.id))?"asc":"desc"},e.getSortingFn=()=>{var n,i;if(!e)throw Error();return tD(e.columnDef.sortingFn)?e.columnDef.sortingFn:"auto"===e.columnDef.sortingFn?e.getAutoSortingFn():null!=(n=null==(i=t.options.sortingFns)?void 0:i[e.columnDef.sortingFn])?n:nl[e.columnDef.sortingFn]},e.toggleSorting=(n,i)=>{let l=e.getNextSortingOrder(),o=null!=n;t.setSorting(r=>{let s,a=null==r?void 0:r.find(t=>t.id===e.id),d=null==r?void 0:r.findIndex(t=>t.id===e.id),c=[],u=o?n:"desc"===l;if("toggle"!=(s=null!=r&&r.length&&e.getCanMultiSort()&&i?a?"toggle":"add":null!=r&&r.length&&d!==r.length-1?"replace":a?"toggle":"replace")||o||l||(s="remove"),"add"===s){var p;(c=[...r,{id:e.id,desc:u}]).splice(0,c.length-(null!=(p=t.options.maxMultiSortColCount)?p:Number.MAX_SAFE_INTEGER))}else c="toggle"===s?r.map(t=>t.id===e.id?{...t,desc:u}:t):"remove"===s?r.filter(t=>t.id!==e.id):[{id:e.id,desc:u}];return c})},e.getFirstSortDir=()=>{var n,i;return(null!=(n=null!=(i=e.columnDef.sortDescFirst)?i:t.options.sortDescFirst)?n:"desc"===e.getAutoSortDir())?"desc":"asc"},e.getNextSortingOrder=n=>{var i,l;let o=e.getFirstSortDir(),r=e.getIsSorted();return r?(r===o||null!=(i=t.options.enableSortingRemoval)&&!i||!!n&&null!=(l=t.options.enableMultiRemove)&&!l)&&("desc"===r?"asc":"desc"):o},e.getCanSort=()=>{var n,i;return(null==(n=e.columnDef.enableSorting)||n)&&(null==(i=t.options.enableSorting)||i)&&!!e.accessorFn},e.getCanMultiSort=()=>{var n,i;return null!=(n=null!=(i=e.columnDef.enableMultiSort)?i:t.options.enableMultiSort)?n:!!e.accessorFn},e.getIsSorted=()=>{var n;let i=null==(n=t.getState().sorting)?void 0:n.find(t=>t.id===e.id);return!!i&&(i.desc?"desc":"asc")},e.getSortIndex=()=>{var n,i;return null!=(n=null==(i=t.getState().sorting)?void 0:i.findIndex(t=>t.id===e.id))?n:-1},e.clearSorting=()=>{t.setSorting(t=>null!=t&&t.length?t.filter(t=>t.id!==e.id):[])},e.getToggleSortingHandler=()=>{let n=e.getCanSort();return i=>{n&&(null==i.persist||i.persist(),null==e.toggleSorting||e.toggleSorting(void 0,!!e.getCanMultiSort()&&(null==t.options.isMultiSortEvent?void 0:t.options.isMultiSortEvent(i))))}}},createTable:e=>{e.setSorting=t=>null==e.options.onSortingChange?void 0:e.options.onSortingChange(t),e.resetSorting=t=>{var n,i;e.setSorting(t?[]:null!=(n=null==(i=e.initialState)?void 0:i.sorting)?n:[])},e.getPreSortedRowModel=()=>e.getGroupedRowModel(),e.getSortedRowModel=()=>(!e._getSortedRowModel&&e.options.getSortedRowModel&&(e._getSortedRowModel=e.options.getSortedRowModel(e)),e.options.manualSorting||!e._getSortedRowModel)?e.getPreSortedRowModel():e._getSortedRowModel()}},{getDefaultColumnDef:()=>({aggregatedCell:e=>{var t,n;return null!=(t=null==(n=e.getValue())||null==n.toString?void 0:n.toString())?t:null},aggregationFn:"auto"}),getInitialState:e=>({grouping:[],...e}),getDefaultOptions:e=>({onGroupingChange:tE("grouping",e),groupedColumnMode:"reorder"}),createColumn:(e,t)=>{e.toggleGrouping=()=>{t.setGrouping(t=>null!=t&&t.includes(e.id)?t.filter(t=>t!==e.id):[...null!=t?t:[],e.id])},e.getCanGroup=()=>{var n,i;return(null==(n=e.columnDef.enableGrouping)||n)&&(null==(i=t.options.enableGrouping)||i)&&(!!e.accessorFn||!!e.columnDef.getGroupingValue)},e.getIsGrouped=()=>{var n;return null==(n=t.getState().grouping)?void 0:n.includes(e.id)},e.getGroupedIndex=()=>{var n;return null==(n=t.getState().grouping)?void 0:n.indexOf(e.id)},e.getToggleGroupingHandler=()=>{let t=e.getCanGroup();return()=>{t&&e.toggleGrouping()}},e.getAutoAggregationFn=()=>{let n=t.getCoreRowModel().flatRows[0],i=null==n?void 0:n.getValue(e.id);return"number"==typeof i?tJ.sum:"[object Date]"===Object.prototype.toString.call(i)?tJ.extent:void 0},e.getAggregationFn=()=>{var n,i;if(!e)throw Error();return tD(e.columnDef.aggregationFn)?e.columnDef.aggregationFn:"auto"===e.columnDef.aggregationFn?e.getAutoAggregationFn():null!=(n=null==(i=t.options.aggregationFns)?void 0:i[e.columnDef.aggregationFn])?n:tJ[e.columnDef.aggregationFn]}},createTable:e=>{e.setGrouping=t=>null==e.options.onGroupingChange?void 0:e.options.onGroupingChange(t),e.resetGrouping=t=>{var n,i;e.setGrouping(t?[]:null!=(n=null==(i=e.initialState)?void 0:i.grouping)?n:[])},e.getPreGroupedRowModel=()=>e.getFilteredRowModel(),e.getGroupedRowModel=()=>(!e._getGroupedRowModel&&e.options.getGroupedRowModel&&(e._getGroupedRowModel=e.options.getGroupedRowModel(e)),e.options.manualGrouping||!e._getGroupedRowModel)?e.getPreGroupedRowModel():e._getGroupedRowModel()},createRow:(e,t)=>{e.getIsGrouped=()=>!!e.groupingColumnId,e.getGroupingValue=n=>{if(e._groupingValuesCache.hasOwnProperty(n))return e._groupingValuesCache[n];let i=t.getColumn(n);return null!=i&&i.columnDef.getGroupingValue?(e._groupingValuesCache[n]=i.columnDef.getGroupingValue(e.original),e._groupingValuesCache[n]):e.getValue(n)},e._groupingValuesCache={}},createCell:(e,t,n,i)=>{e.getIsGrouped=()=>t.getIsGrouped()&&t.id===n.groupingColumnId,e.getIsPlaceholder=()=>!e.getIsGrouped()&&t.getIsGrouped(),e.getIsAggregated=()=>{var t;return!e.getIsGrouped()&&!e.getIsPlaceholder()&&!!(null!=(t=n.subRows)&&t.length)}}},{getInitialState:e=>({expanded:{},...e}),getDefaultOptions:e=>({onExpandedChange:tE("expanded",e),paginateExpandedRows:!0}),createTable:e=>{let t=!1,n=!1;e._autoResetExpanded=()=>{var i,l;if(!t)return void e._queue(()=>{t=!0});if(null!=(i=null!=(l=e.options.autoResetAll)?l:e.options.autoResetExpanded)?i:!e.options.manualExpanding){if(n)return;n=!0,e._queue(()=>{e.resetExpanded(),n=!1})}},e.setExpanded=t=>null==e.options.onExpandedChange?void 0:e.options.onExpandedChange(t),e.toggleAllRowsExpanded=t=>{(null!=t?t:!e.getIsAllRowsExpanded())?e.setExpanded(!0):e.setExpanded({})},e.resetExpanded=t=>{var n,i;e.setExpanded(t?{}:null!=(n=null==(i=e.initialState)?void 0:i.expanded)?n:{})},e.getCanSomeRowsExpand=()=>e.getPrePaginationRowModel().flatRows.some(e=>e.getCanExpand()),e.getToggleAllRowsExpandedHandler=()=>t=>{null==t.persist||t.persist(),e.toggleAllRowsExpanded()},e.getIsSomeRowsExpanded=()=>{let t=e.getState().expanded;return!0===t||Object.values(t).some(Boolean)},e.getIsAllRowsExpanded=()=>{let t=e.getState().expanded;return"boolean"==typeof t?!0===t:!(!Object.keys(t).length||e.getRowModel().flatRows.some(e=>!e.getIsExpanded()))},e.getExpandedDepth=()=>{let t=0;return(!0===e.getState().expanded?Object.keys(e.getRowModel().rowsById):Object.keys(e.getState().expanded)).forEach(e=>{let n=e.split(".");t=Math.max(t,n.length)}),t},e.getPreExpandedRowModel=()=>e.getSortedRowModel(),e.getExpandedRowModel=()=>(!e._getExpandedRowModel&&e.options.getExpandedRowModel&&(e._getExpandedRowModel=e.options.getExpandedRowModel(e)),e.options.manualExpanding||!e._getExpandedRowModel)?e.getPreExpandedRowModel():e._getExpandedRowModel()},createRow:(e,t)=>{e.toggleExpanded=n=>{t.setExpanded(i=>{var l;let o=!0===i||!!(null!=i&&i[e.id]),r={};if(!0===i?Object.keys(t.getRowModel().rowsById).forEach(e=>{r[e]=!0}):r=i,n=null!=(l=n)?l:!o,!o&&n)return{...r,[e.id]:!0};if(o&&!n){let{[e.id]:t,...n}=r;return n}return i})},e.getIsExpanded=()=>{var n;let i=t.getState().expanded;return!!(null!=(n=null==t.options.getIsRowExpanded?void 0:t.options.getIsRowExpanded(e))?n:!0===i||(null==i?void 0:i[e.id]))},e.getCanExpand=()=>{var n,i,l;return null!=(n=null==t.options.getRowCanExpand?void 0:t.options.getRowCanExpand(e))?n:(null==(i=t.options.enableExpanding)||i)&&!!(null!=(l=e.subRows)&&l.length)},e.getIsAllParentsExpanded=()=>{let n=!0,i=e;for(;n&&i.parentId;)n=(i=t.getRow(i.parentId,!0)).getIsExpanded();return n},e.getToggleExpandedHandler=()=>{let t=e.getCanExpand();return()=>{t&&e.toggleExpanded()}}}},{getInitialState:e=>({...e,pagination:{...t4(),...null==e?void 0:e.pagination}}),getDefaultOptions:e=>({onPaginationChange:tE("pagination",e)}),createTable:e=>{let t=!1,n=!1;e._autoResetPageIndex=()=>{var i,l;if(!t)return void e._queue(()=>{t=!0});if(null!=(i=null!=(l=e.options.autoResetAll)?l:e.options.autoResetPageIndex)?i:!e.options.manualPagination){if(n)return;n=!0,e._queue(()=>{e.resetPageIndex(),n=!1})}},e.setPagination=t=>null==e.options.onPaginationChange?void 0:e.options.onPaginationChange(e=>tk(t,e)),e.resetPagination=t=>{var n;e.setPagination(t?t4():null!=(n=e.initialState.pagination)?n:t4())},e.setPageIndex=t=>{e.setPagination(n=>{let i=tk(t,n.pageIndex);return i=Math.max(0,Math.min(i,void 0===e.options.pageCount||-1===e.options.pageCount?Number.MAX_SAFE_INTEGER:e.options.pageCount-1)),{...n,pageIndex:i}})},e.resetPageIndex=t=>{var n,i;e.setPageIndex(t?0:null!=(n=null==(i=e.initialState)||null==(i=i.pagination)?void 0:i.pageIndex)?n:0)},e.resetPageSize=t=>{var n,i;e.setPageSize(t?10:null!=(n=null==(i=e.initialState)||null==(i=i.pagination)?void 0:i.pageSize)?n:10)},e.setPageSize=t=>{e.setPagination(e=>{let n=Math.max(1,tk(t,e.pageSize)),i=Math.floor(e.pageSize*e.pageIndex/n);return{...e,pageIndex:i,pageSize:n}})},e.setPageCount=t=>e.setPagination(n=>{var i;let l=tk(t,null!=(i=e.options.pageCount)?i:-1);return"number"==typeof l&&(l=Math.max(-1,l)),{...n,pageCount:l}}),e.getPageOptions=tF(()=>[e.getPageCount()],e=>{let t=[];return e&&e>0&&(t=[...Array(e)].fill(null).map((e,t)=>t)),t},tA(e.options,"debugTable","getPageOptions")),e.getCanPreviousPage=()=>e.getState().pagination.pageIndex>0,e.getCanNextPage=()=>{let{pageIndex:t}=e.getState().pagination,n=e.getPageCount();return -1===n||0!==n&&t<n-1},e.previousPage=()=>e.setPageIndex(e=>e-1),e.nextPage=()=>e.setPageIndex(e=>e+1),e.firstPage=()=>e.setPageIndex(0),e.lastPage=()=>e.setPageIndex(e.getPageCount()-1),e.getPrePaginationRowModel=()=>e.getExpandedRowModel(),e.getPaginationRowModel=()=>(!e._getPaginationRowModel&&e.options.getPaginationRowModel&&(e._getPaginationRowModel=e.options.getPaginationRowModel(e)),e.options.manualPagination||!e._getPaginationRowModel)?e.getPrePaginationRowModel():e._getPaginationRowModel(),e.getPageCount=()=>{var t;return null!=(t=e.options.pageCount)?t:Math.ceil(e.getRowCount()/e.getState().pagination.pageSize)},e.getRowCount=()=>{var t;return null!=(t=e.options.rowCount)?t:e.getPrePaginationRowModel().rows.length}}},{getInitialState:e=>({rowPinning:t5(),...e}),getDefaultOptions:e=>({onRowPinningChange:tE("rowPinning",e)}),createRow:(e,t)=>{e.pin=(n,i,l)=>{let o=i?e.getLeafRows().map(e=>{let{id:t}=e;return t}):[],r=new Set([...l?e.getParentRows().map(e=>{let{id:t}=e;return t}):[],e.id,...o]);t.setRowPinning(e=>{var t,i,l,o,s,a;return"bottom"===n?{top:(null!=(l=null==e?void 0:e.top)?l:[]).filter(e=>!(null!=r&&r.has(e))),bottom:[...(null!=(o=null==e?void 0:e.bottom)?o:[]).filter(e=>!(null!=r&&r.has(e))),...Array.from(r)]}:"top"===n?{top:[...(null!=(s=null==e?void 0:e.top)?s:[]).filter(e=>!(null!=r&&r.has(e))),...Array.from(r)],bottom:(null!=(a=null==e?void 0:e.bottom)?a:[]).filter(e=>!(null!=r&&r.has(e)))}:{top:(null!=(t=null==e?void 0:e.top)?t:[]).filter(e=>!(null!=r&&r.has(e))),bottom:(null!=(i=null==e?void 0:e.bottom)?i:[]).filter(e=>!(null!=r&&r.has(e)))}})},e.getCanPin=()=>{var n;let{enableRowPinning:i,enablePinning:l}=t.options;return"function"==typeof i?i(e):null==(n=null!=i?i:l)||n},e.getIsPinned=()=>{let n=[e.id],{top:i,bottom:l}=t.getState().rowPinning,o=n.some(e=>null==i?void 0:i.includes(e)),r=n.some(e=>null==l?void 0:l.includes(e));return o?"top":!!r&&"bottom"},e.getPinnedIndex=()=>{var n,i;let l=e.getIsPinned();if(!l)return -1;let o=null==(n="top"===l?t.getTopRows():t.getBottomRows())?void 0:n.map(e=>{let{id:t}=e;return t});return null!=(i=null==o?void 0:o.indexOf(e.id))?i:-1}},createTable:e=>{e.setRowPinning=t=>null==e.options.onRowPinningChange?void 0:e.options.onRowPinningChange(t),e.resetRowPinning=t=>{var n,i;return e.setRowPinning(t?t5():null!=(n=null==(i=e.initialState)?void 0:i.rowPinning)?n:t5())},e.getIsSomeRowsPinned=t=>{var n,i,l;let o=e.getState().rowPinning;return t?!!(null==(n=o[t])?void 0:n.length):!!((null==(i=o.top)?void 0:i.length)||(null==(l=o.bottom)?void 0:l.length))},e._getPinnedRows=(t,n,i)=>{var l;return(null==(l=e.options.keepPinnedRows)||l?(null!=n?n:[]).map(t=>{let n=e.getRow(t,!0);return n.getIsAllParentsExpanded()?n:null}):(null!=n?n:[]).map(e=>t.find(t=>t.id===e))).filter(Boolean).map(e=>({...e,position:i}))},e.getTopRows=tF(()=>[e.getRowModel().rows,e.getState().rowPinning.top],(t,n)=>e._getPinnedRows(t,n,"top"),tA(e.options,"debugRows","getTopRows")),e.getBottomRows=tF(()=>[e.getRowModel().rows,e.getState().rowPinning.bottom],(t,n)=>e._getPinnedRows(t,n,"bottom"),tA(e.options,"debugRows","getBottomRows")),e.getCenterRows=tF(()=>[e.getRowModel().rows,e.getState().rowPinning.top,e.getState().rowPinning.bottom],(e,t,n)=>{let i=new Set([...null!=t?t:[],...null!=n?n:[]]);return e.filter(e=>!i.has(e.id))},tA(e.options,"debugRows","getCenterRows"))}},{getInitialState:e=>({rowSelection:{},...e}),getDefaultOptions:e=>({onRowSelectionChange:tE("rowSelection",e),enableRowSelection:!0,enableMultiRowSelection:!0,enableSubRowSelection:!0}),createTable:e=>{e.setRowSelection=t=>null==e.options.onRowSelectionChange?void 0:e.options.onRowSelectionChange(t),e.resetRowSelection=t=>{var n;return e.setRowSelection(t?{}:null!=(n=e.initialState.rowSelection)?n:{})},e.toggleAllRowsSelected=t=>{e.setRowSelection(n=>{t=void 0!==t?t:!e.getIsAllRowsSelected();let i={...n},l=e.getPreGroupedRowModel().flatRows;return t?l.forEach(e=>{e.getCanSelect()&&(i[e.id]=!0)}):l.forEach(e=>{delete i[e.id]}),i})},e.toggleAllPageRowsSelected=t=>e.setRowSelection(n=>{let i=void 0!==t?t:!e.getIsAllPageRowsSelected(),l={...n};return e.getRowModel().rows.forEach(t=>{t6(l,t.id,i,!0,e)}),l}),e.getPreSelectedRowModel=()=>e.getCoreRowModel(),e.getSelectedRowModel=tF(()=>[e.getState().rowSelection,e.getCoreRowModel()],(t,n)=>Object.keys(t).length?t8(e,n):{rows:[],flatRows:[],rowsById:{}},tA(e.options,"debugTable","getSelectedRowModel")),e.getFilteredSelectedRowModel=tF(()=>[e.getState().rowSelection,e.getFilteredRowModel()],(t,n)=>Object.keys(t).length?t8(e,n):{rows:[],flatRows:[],rowsById:{}},tA(e.options,"debugTable","getFilteredSelectedRowModel")),e.getGroupedSelectedRowModel=tF(()=>[e.getState().rowSelection,e.getSortedRowModel()],(t,n)=>Object.keys(t).length?t8(e,n):{rows:[],flatRows:[],rowsById:{}},tA(e.options,"debugTable","getGroupedSelectedRowModel")),e.getIsAllRowsSelected=()=>{let t=e.getFilteredRowModel().flatRows,{rowSelection:n}=e.getState(),i=!!(t.length&&Object.keys(n).length);return i&&t.some(e=>e.getCanSelect()&&!n[e.id])&&(i=!1),i},e.getIsAllPageRowsSelected=()=>{let t=e.getPaginationRowModel().flatRows.filter(e=>e.getCanSelect()),{rowSelection:n}=e.getState(),i=!!t.length;return i&&t.some(e=>!n[e.id])&&(i=!1),i},e.getIsSomeRowsSelected=()=>{var t;let n=Object.keys(null!=(t=e.getState().rowSelection)?t:{}).length;return n>0&&n<e.getFilteredRowModel().flatRows.length},e.getIsSomePageRowsSelected=()=>{let t=e.getPaginationRowModel().flatRows;return!e.getIsAllPageRowsSelected()&&t.filter(e=>e.getCanSelect()).some(e=>e.getIsSelected()||e.getIsSomeSelected())},e.getToggleAllRowsSelectedHandler=()=>t=>{e.toggleAllRowsSelected(t.target.checked)},e.getToggleAllPageRowsSelectedHandler=()=>t=>{e.toggleAllPageRowsSelected(t.target.checked)}},createRow:(e,t)=>{e.toggleSelected=(n,i)=>{let l=e.getIsSelected();t.setRowSelection(o=>{var r;if(n=void 0!==n?n:!l,e.getCanSelect()&&l===n)return o;let s={...o};return t6(s,e.id,n,null==(r=null==i?void 0:i.selectChildren)||r,t),s})},e.getIsSelected=()=>{let{rowSelection:n}=t.getState();return t7(e,n)},e.getIsSomeSelected=()=>{let{rowSelection:n}=t.getState();return"some"===t9(e,n)},e.getIsAllSubRowsSelected=()=>{let{rowSelection:n}=t.getState();return"all"===t9(e,n)},e.getCanSelect=()=>{var n;return"function"==typeof t.options.enableRowSelection?t.options.enableRowSelection(e):null==(n=t.options.enableRowSelection)||n},e.getCanSelectSubRows=()=>{var n;return"function"==typeof t.options.enableSubRowSelection?t.options.enableSubRowSelection(e):null==(n=t.options.enableSubRowSelection)||n},e.getCanMultiSelect=()=>{var n;return"function"==typeof t.options.enableMultiRowSelection?t.options.enableMultiRowSelection(e):null==(n=t.options.enableMultiRowSelection)||n},e.getToggleSelectedHandler=()=>{let t=e.getCanSelect();return n=>{var i;t&&e.toggleSelected(null==(i=n.target)?void 0:i.checked)}}}},{getDefaultColumnDef:()=>tQ,getInitialState:e=>({columnSizing:{},columnSizingInfo:t0(),...e}),getDefaultOptions:e=>({columnResizeMode:"onEnd",columnResizeDirection:"ltr",onColumnSizingChange:tE("columnSizing",e),onColumnSizingInfoChange:tE("columnSizingInfo",e)}),createColumn:(e,t)=>{e.getSize=()=>{var n,i,l;let o=t.getState().columnSizing[e.id];return Math.min(Math.max(null!=(n=e.columnDef.minSize)?n:tQ.minSize,null!=(i=null!=o?o:e.columnDef.size)?i:tQ.size),null!=(l=e.columnDef.maxSize)?l:tQ.maxSize)},e.getStart=tF(e=>[e,t3(t,e),t.getState().columnSizing],(t,n)=>n.slice(0,e.getIndex(t)).reduce((e,t)=>e+t.getSize(),0),tA(t.options,"debugColumns","getStart")),e.getAfter=tF(e=>[e,t3(t,e),t.getState().columnSizing],(t,n)=>n.slice(e.getIndex(t)+1).reduce((e,t)=>e+t.getSize(),0),tA(t.options,"debugColumns","getAfter")),e.resetSize=()=>{t.setColumnSizing(t=>{let{[e.id]:n,...i}=t;return i})},e.getCanResize=()=>{var n,i;return(null==(n=e.columnDef.enableResizing)||n)&&(null==(i=t.options.enableColumnResizing)||i)},e.getIsResizing=()=>t.getState().columnSizingInfo.isResizingColumn===e.id},createHeader:(e,t)=>{e.getSize=()=>{let t=0,n=e=>{if(e.subHeaders.length)e.subHeaders.forEach(n);else{var i;t+=null!=(i=e.column.getSize())?i:0}};return n(e),t},e.getStart=()=>{if(e.index>0){let t=e.headerGroup.headers[e.index-1];return t.getStart()+t.getSize()}return 0},e.getResizeHandler=n=>{let i=t.getColumn(e.column.id),l=null==i?void 0:i.getCanResize();return o=>{if(!i||!l||(null==o.persist||o.persist(),t2(o)&&o.touches&&o.touches.length>1))return;let r=e.getSize(),s=e?e.getLeafHeaders().map(e=>[e.column.id,e.column.getSize()]):[[i.id,i.getSize()]],a=t2(o)?Math.round(o.touches[0].clientX):o.clientX,d={},c=(e,n)=>{"number"==typeof n&&(t.setColumnSizingInfo(e=>{var i,l;let o="rtl"===t.options.columnResizeDirection?-1:1,r=(n-(null!=(i=null==e?void 0:e.startOffset)?i:0))*o,s=Math.max(r/(null!=(l=null==e?void 0:e.startSize)?l:0),-.999999);return e.columnSizingStart.forEach(e=>{let[t,n]=e;d[t]=Math.round(100*Math.max(n+n*s,0))/100}),{...e,deltaOffset:r,deltaPercentage:s}}),("onChange"===t.options.columnResizeMode||"end"===e)&&t.setColumnSizing(e=>({...e,...d})))},u=e=>{c("end",e),t.setColumnSizingInfo(e=>({...e,isResizingColumn:!1,startOffset:null,startSize:null,deltaOffset:null,deltaPercentage:null,columnSizingStart:[]}))},p=n||("u">typeof document?document:null),m={moveHandler:e=>c("move",e.clientX),upHandler:e=>{null==p||p.removeEventListener("mousemove",m.moveHandler),null==p||p.removeEventListener("mouseup",m.upHandler),u(e.clientX)}},h={moveHandler:e=>(e.cancelable&&(e.preventDefault(),e.stopPropagation()),c("move",e.touches[0].clientX),!1),upHandler:e=>{var t;null==p||p.removeEventListener("touchmove",h.moveHandler),null==p||p.removeEventListener("touchend",h.upHandler),e.cancelable&&(e.preventDefault(),e.stopPropagation()),u(null==(t=e.touches[0])?void 0:t.clientX)}},g=!!function(){if("boolean"==typeof t1)return t1;let e=!1;try{let t=()=>{};window.addEventListener("test",t,{get passive(){return e=!0,!1}}),window.removeEventListener("test",t)}catch(t){e=!1}return t1=e}()&&{passive:!1};t2(o)?(null==p||p.addEventListener("touchmove",h.moveHandler,g),null==p||p.addEventListener("touchend",h.upHandler,g)):(null==p||p.addEventListener("mousemove",m.moveHandler,g),null==p||p.addEventListener("mouseup",m.upHandler,g)),t.setColumnSizingInfo(e=>({...e,startOffset:a,startSize:r,deltaOffset:0,deltaPercentage:0,columnSizingStart:s,isResizingColumn:i.id}))}}},createTable:e=>{e.setColumnSizing=t=>null==e.options.onColumnSizingChange?void 0:e.options.onColumnSizingChange(t),e.setColumnSizingInfo=t=>null==e.options.onColumnSizingInfoChange?void 0:e.options.onColumnSizingInfoChange(t),e.resetColumnSizing=t=>{var n;e.setColumnSizing(t?{}:null!=(n=e.initialState.columnSizing)?n:{})},e.resetHeaderSizeInfo=t=>{var n;e.setColumnSizingInfo(t?t0():null!=(n=e.initialState.columnSizingInfo)?n:t0())},e.getTotalSize=()=>{var t,n;return null!=(t=null==(n=e.getHeaderGroups()[0])?void 0:n.headers.reduce((e,t)=>e+t.getSize(),0))?t:0},e.getLeftTotalSize=()=>{var t,n;return null!=(t=null==(n=e.getLeftHeaderGroups()[0])?void 0:n.headers.reduce((e,t)=>e+t.getSize(),0))?t:0},e.getCenterTotalSize=()=>{var t,n;return null!=(t=null==(n=e.getCenterHeaderGroups()[0])?void 0:n.headers.reduce((e,t)=>e+t.getSize(),0))?t:0},e.getRightTotalSize=()=>{var t,n;return null!=(t=null==(n=e.getRightHeaderGroups()[0])?void 0:n.headers.reduce((e,t)=>e+t.getSize(),0))?t:0}}}];function nr(e,t){var n,i,l;let o;return e?"function"==typeof(i=n=e)&&(o=Object.getPrototypeOf(i)).prototype&&o.prototype.isReactComponent||"function"==typeof n||"object"==typeof(l=n)&&"symbol"==typeof l.$$typeof&&["react.memo","react.forward_ref"].includes(l.$$typeof.description)?r.createElement(e,t):e:null}let ns="diffView",na="previousDocument",nd="nextDocument";function nc(){let e,t,n,l=(0,i.c)(9),{navigate:o,state:r}=(0,h.useRouter)();l[0]!==o||l[1]!==r?(e=e=>{let{mode:t,previousDocument:n,nextDocument:i}=e,l={...(0,e0.fromPairs)(r._searchParams),...t?{[ns]:t}:{},...n?{[na]:[n.type,n.id].join(",")}:{},...i?{[nd]:[i.type,i.id].join(",")}:{}};o({...r,_searchParams:(0,e1.toPairs)(l)})},l[0]=o,l[1]=r,l[2]=e):e=l[2];let s=e;l[3]!==o||l[4]!==r?(t=()=>{o({...r,_searchParams:(r._searchParams??[]).filter(nu)})},l[3]=o,l[4]=r,l[5]=t):t=l[5];let a=t;return l[6]!==a||l[7]!==s?(n={navigateDiffView:s,exitDiffView:a},l[6]=a,l[7]=s,l[8]=n):n=l[8],n}function nu(e){let[t]=e;return![ns,na,nd].includes(t)}let np=["version"];function nm(e){let t,n,l,o,s,a,d,c,u=(0,i.c)(22);u[0]!==e?(t=void 0===e?{}:e,u[0]=e,u[1]=t):t=u[1];let{onParamsError:p}=t,{state:m}=(0,h.useRouter)();if(u[2]!==m._searchParams){let e=new URLSearchParams(m._searchParams);l=e.get(na),n=e.get(nd),o=e.get(ns),u[2]=m._searchParams,u[3]=n,u[4]=l,u[5]=o}else n=u[3],l=u[4],o=u[5];let g=o,f=[l,n,g].some(nh),x=l??"",b=n??"",y=g??"";u[6]!==x||u[7]!==b||u[8]!==y?(s=function({previousDocument:e,nextDocument:t,mode:n}){let i=[],[l,o]=e.split(",").filter(Boolean),[r,s]=t.split(",").filter(Boolean);return np.includes(n)||i.push(["invalidModeParam",n]),(typeof l>"u"||typeof o>"u")&&i.push(["invalidPreviousDocumentParam",e]),(typeof r>"u"||typeof s>"u")&&i.push(["invalidNextDocumentParam",t]),0!==i.length?{result:"error",errors:i}:{result:"success",params:{mode:n,documents:{previous:{type:l,id:o},next:{type:r,id:s}}}}}({previousDocument:x,nextDocument:b,mode:y}),u[6]=x,u[7]=b,u[8]=y,u[9]=s):s=u[9];let v=s;if(u[10]!==f||u[11]!==p||u[12]!==v.errors||u[13]!==v.result?(a=()=>{"error"===v.result&&f&&p?.(v.errors)},u[10]=f,u[11]=p,u[12]=v.errors,u[13]=v.result,u[14]=a):a=u[14],u[15]!==f||u[16]!==p||u[17]!==v?(d=[f,p,v],u[15]=f,u[16]=p,u[17]=v,u[18]=d):d=u[18],(0,r.useEffect)(a,d),"error"===v.result){let e;return u[19]===Symbol.for("react.memo_cache_sentinel")?(e={isActive:!1},u[19]=e):e=u[19],e}return u[20]!==v.params?(c={state:"ready",isActive:!0,...v.params},u[20]=v.params,u[21]=c):c=u[21],c}function nh(e){return null!==e}function ng(e){return null!==e}function nf(e,t){return(0,c.isPublishedId)(e)?"published":(0,c.isDraftId)(e)?"draft":t.find(({_id:t})=>(0,u.getReleaseIdFromReleaseDocumentId)(t)===(0,c.getVersionFromId)(e))??(0,c.getVersionFromId)(e)}let nx=eI.styled.header.withConfig({displayName:"VersionModeHeaderLayout",componentId:"sc-w17umd-0"})`display:grid;grid-area:header;grid-template-columns:1fr min-content 1fr;border-block-end:1px solid var(--card-border-color);`,nb=eI.styled.div.withConfig({displayName:"VersionModeHeaderLayoutSection",componentId:"sc-w17umd-1"})`display:flex;justify-content:space-between;align-items:center;`,ny=e=>{let t,o,r,s,a,d,c,p,m,h,g,x,b,y,v,j,w=(0,i.c)(48),{documentId:S,state:I}=e,{t:C}=(0,u.useTranslation)(T);w[0]!==S?(t={documentId:S},w[0]=S,w[1]=t):t=w[1];let{data:_}=(0,u.useDocumentVersions)(t),{exitDiffView:R,navigateDiffView:P}=nc(),{documents:k}=nm(),E=(0,u.useActiveReleases)();w[2]!==_?(o=_.flatMap(nw),w[2]=_,w[3]=o):o=w[3];let D=o;if(w[4]!==E.data||w[5]!==D){let e;w[7]!==D?(e=e=>{let t=(0,u.getReleaseIdFromReleaseDocumentId)(e._id);return"u">typeof t&&D.includes(t)},w[7]=D,w[8]=e):e=w[8],r=E.data.filter(e),w[4]=E.data,w[5]=D,w[6]=r}else r=w[6];let F=r;w[9]!==E?(s=function({loading:e,error:t}){return e?"pending":"u">typeof t?"error":"ready"}(E),w[9]=E,w[10]=s):s=w[10];let A=s;w[11]!==k||w[12]!==P?(a=e=>{"u">typeof k?.previous&&P({previousDocument:{...k.previous,id:e}})},w[11]=k,w[12]=P,w[13]=a):a=w[13];let V=a;w[14]!==k||w[15]!==P?(d=e=>{"u">typeof k?.next&&P({nextDocument:{...k.next,id:e}})},w[14]=k,w[15]=P,w[16]=d):d=w[16];let M=d;return w[17]!==C?(c=C("compare-versions.title"),w[17]=C,w[18]=c):c=w[18],w[19]!==c?(p=(0,n.jsx)(l.Box,{padding:4,children:(0,n.jsx)(l.Text,{as:"h1",size:1,muted:!0,children:c})}),w[19]=c,w[20]=p):p=w[20],w[21]!==S||w[22]!==k||w[23]!==V||w[24]!==F||w[25]!==A||w[26]!==I?(m="u">typeof k?.previous&&(0,n.jsx)(nv,{releases:F,releasesState:A,onSelectRelease:V,role:"previous",documentId:S,state:I,document:k.previous}),w[21]=S,w[22]=k,w[23]=V,w[24]=F,w[25]=A,w[26]=I,w[27]=m):m=w[27],w[28]!==p||w[29]!==m?(h=(0,n.jsxs)(nb,{children:[p,m]}),w[28]=p,w[29]=m,w[30]=h):h=w[30],w[31]===Symbol.for("react.memo_cache_sentinel")?(g=(0,n.jsx)(l.Flex,{align:"center",paddingX:3,children:(0,n.jsx)(l.Text,{size:1,children:(0,n.jsx)(f.TransferIcon,{})})}),w[31]=g):g=w[31],w[32]!==S||w[33]!==k||w[34]!==M||w[35]!==F||w[36]!==A||w[37]!==I?(x="u">typeof k?.next&&(0,n.jsx)(nv,{releases:F,releasesState:A,onSelectRelease:M,role:"next",documentId:S,state:I,document:k.next}),w[32]=S,w[33]=k,w[34]=M,w[35]=F,w[36]=A,w[37]=I,w[38]=x):x=w[38],w[39]===Symbol.for("react.memo_cache_sentinel")?(b={justifySelf:"end"},w[39]=b):b=w[39],w[40]!==R?(y=(0,n.jsx)(l.Box,{padding:3,style:b,children:(0,n.jsx)(l.Button,{icon:f.CloseIcon,mode:"bleed",onClick:R,padding:2})}),w[40]=R,w[41]=y):y=w[41],w[42]!==x||w[43]!==y?(v=(0,n.jsxs)(nb,{children:[x,y]}),w[42]=x,w[43]=y,w[44]=v):v=w[44],w[45]!==h||w[46]!==v?(j=(0,n.jsxs)(nx,{children:[h,g,v]}),w[45]=h,w[46]=v,w[47]=j):j=w[47],j},nv=e=>{let t,o,r,s,a,d,p,h,g,x,b=(0,i.c)(46),{releases:y,releasesState:v,onSelectRelease:j,role:w,documentId:S,document:I}=e;b[0]!==y?(t=void 0===y?[]:y,b[0]=y,b[1]=t):t=b[1];let C=t;b[2]!==I.id?(o=(0,c.getPublishedId)(I.id),b[2]=I.id,b[3]=o):o=b[3];let{published:_,draft:R}=(0,u.useEditState)(o,I.type);b[4]!==I.id||b[5]!==C?(r=nf(I.id,C),b[4]=I.id,b[5]=C,b[6]=r):r=b[6];let P=r,{t:k}=(0,u.useTranslation)(T),{t:E}=(0,u.useTranslation)(),{document:D}=(0,u.useWorkspace)(),{drafts:F}=D,{enabled:A}=F;if("error"===v){let e,t;return b[7]!==k?(e=k("compare-version.error.loadReleases.title"),b[7]=k,b[8]=e):e=b[8],b[9]!==e?(t=(0,n.jsx)(l.Badge,{tone:"critical",radius:3,children:e}),b[9]=e,b[10]=t):t=b[10],t}if(b[11]!==v||b[12]!==P||b[13]!==E||b[14]!==k?(s=function({selected:e,tCore:t,tStructure:i,releasesState:l}){if("pending"===l)return{text:t("common.loading"),tone:"neutral",disabled:!0};if((0,u.isReleaseDocument)(e)){let i=e?(0,u.getReleaseTone)(e):"neutral";return{text:e?.metadata.title||t("release.placeholder-untitled-release"),icon:(0,n.jsx)(u.ReleaseAvatar,{padding:1,tone:i}),iconRight:e&&(0,u.isReleaseScheduledOrScheduling)(e)?(0,n.jsx)(f.LockIcon,{}):void 0,tone:i}}if((0,u.isSystemBundleName)(e)){let t="published"===e?"positive":"caution";return{text:i(["compare-versions.status",e].join(".")),icon:(0,n.jsx)(u.ReleaseAvatar,{padding:1,tone:t}),tone:t}}return{text:e,icon:(0,n.jsx)(u.ReleaseAvatar,{padding:1,tone:"neutral"}),tone:"neutral"}}({selected:P,tCore:E,tStructure:k,releasesState:v}),b[11]=v,b[12]=P,b[13]=E,b[14]=k,b[15]=s):s=b[15],b[16]!==s?(a=(0,n.jsx)(l.Button,{type:"button",mode:"bleed",padding:2,paddingRight:3,radius:"full",selected:!0,...s}),b[16]=s,b[17]=a):a=b[17],b[18]!==S||b[19]!==j||b[20]!==_||b[21]!==P?(d=_&&(0,n.jsx)(nj,{type:"published",onSelect:j,isSelected:"published"===P,documentId:S}),b[18]=S,b[19]=j,b[20]=_,b[21]=P,b[22]=d):d=b[22],b[23]!==S||b[24]!==R||b[25]!==A||b[26]!==j||b[27]!==P?(p=A&&R&&(0,n.jsx)(nj,{type:"draft",onSelect:j,isSelected:"draft"===P,documentId:S}),b[23]=S,b[24]=R,b[25]=A,b[26]=j,b[27]=P,b[28]=p):p=b[28],b[29]!==S||b[30]!==j||b[31]!==C||b[32]!==P){let e;b[34]!==S||b[35]!==j||b[36]!==P?(e=e=>(0,n.jsx)(nj,{release:e,onSelect:j,isSelected:"string"!=typeof P&&P?._id===e._id,documentId:S},e._id),b[34]=S,b[35]=j,b[36]=P,b[37]=e):e=b[37],h=C.map(e),b[29]=S,b[30]=j,b[31]=C,b[32]=P,b[33]=h}else h=b[33];return b[38]!==p||b[39]!==h||b[40]!==d?(g=(0,n.jsxs)(l.Menu,{children:[d,p,h]}),b[38]=p,b[39]=h,b[40]=d,b[41]=g):g=b[41],b[42]!==w||b[43]!==g||b[44]!==a?(x=(0,n.jsx)(m.MenuButton,{id:w,button:a,menu:g}),b[42]=w,b[43]=g,b[44]=a,b[45]=x):x=b[45],x},nj=e=>{let t,o,r,s,a,d,p,m,h,g,x,b,y,v,j=(0,i.c)(53),{type:w,release:S,onSelect:I,isSelected:C,documentId:_}=e,{t:R}=(0,u.useTranslation)(),{t:P}=(0,u.useTranslation)(T);j[0]!==_||j[1]!==I||j[2]!==S||j[3]!==w?(t=()=>{"draft"===w?I((0,c.getDraftId)(_)):"published"===w?I((0,c.getPublishedId)(_)):"u">typeof S?._id&&I((0,c.getVersionId)(_,(0,u.getReleaseIdFromReleaseDocumentId)(S._id)))},j[0]=_,j[1]=I,j[2]=S,j[3]=w,j[4]=t):t=j[4];let k=t;if(w){let e,t,i,o,r,s,a="published"===w?"positive":"caution";j[5]!==a?(e=(0,n.jsx)(u.ReleaseAvatar,{padding:2,tone:a}),j[5]=a,j[6]=e):e=j[6],j[7]!==w?(t=["compare-versions.status",w],j[7]=w,j[8]=t):t=j[8];let d=t.join(".");return j[9]!==d||j[10]!==P?(i=P(d),j[9]=d,j[10]=P,j[11]=i):i=j[11],j[12]!==i?(o=(0,n.jsx)(l.Box,{paddingY:2,children:(0,n.jsx)(l.Text,{size:1,weight:"medium",children:i})}),j[12]=i,j[13]=o):o=j[13],j[14]!==e||j[15]!==o?(r=(0,n.jsxs)(l.Flex,{gap:1,children:[e,o]}),j[14]=e,j[15]=o,j[16]=r):r=j[16],j[17]!==C||j[18]!==k||j[19]!==r?(s=(0,n.jsx)(l.MenuItem,{padding:1,paddingRight:3,onClick:k,pressed:C,children:r}),j[17]=C,j[18]=k,j[19]=r,j[20]=s):s=j[20],s}j[21]!==S?(o=S?(0,u.getReleaseTone)(S):"neutral",j[21]=S,j[22]=o):o=j[22];let E=o;j[23]!==E?(r=(0,n.jsx)(u.ReleaseAvatar,{padding:2,tone:E}),j[23]=E,j[24]=r):r=j[24],j[25]===Symbol.for("react.memo_cache_sentinel")?(s={minWidth:0},j[25]=s):s=j[25];let D=S.metadata.title;return j[26]!==R?(a=R("release.placeholder-untitled-release"),j[26]=R,j[27]=a):a=j[27],j[28]===Symbol.for("react.memo_cache_sentinel")?(d={size:1,weight:"medium"},j[28]=d):d=j[28],j[29]!==S.metadata.title||j[30]!==a?(p=(0,n.jsx)(u.ReleaseTitle,{title:D,fallback:a,textProps:d}),j[29]=S.metadata.title,j[30]=a,j[31]=p):p=j[31],j[32]!==S.metadata.releaseType||j[33]!==R?(m=["asap","undecided"].includes(S.metadata.releaseType)&&(0,n.jsx)(l.Text,{muted:!0,size:1,children:R(`release.type.${S.metadata.releaseType}`)}),j[32]=S.metadata.releaseType,j[33]=R,j[34]=m):m=j[34],j[35]!==S?(h="scheduled"===S.metadata.releaseType&&(0,n.jsx)(l.Text,{muted:!0,size:1,children:(0,u.formatRelativeLocalePublishDate)(S)}),j[35]=S,j[36]=h):h=j[36],j[37]!==h||j[38]!==p||j[39]!==m?(g=(0,n.jsxs)(l.Stack,{flex:1,paddingY:2,paddingRight:2,space:2,style:s,children:[p,m,h]}),j[37]=h,j[38]=p,j[39]=m,j[40]=g):g=j[40],j[41]!==S?(x=(0,u.isReleaseScheduledOrScheduling)(S)&&(0,n.jsx)(l.Box,{padding:2,children:(0,n.jsx)(l.Text,{size:1,children:(0,n.jsx)(f.LockIcon,{})})}),j[41]=S,j[42]=x):x=j[42],j[43]!==x?(b=(0,n.jsx)(l.Flex,{flex:"none",children:x}),j[43]=x,j[44]=b):b=j[44],j[45]!==g||j[46]!==b||j[47]!==r?(y=(0,n.jsxs)(l.Flex,{gap:1,children:[r,g,b]}),j[45]=g,j[46]=b,j[47]=r,j[48]=y):y=j[48],j[49]!==C||j[50]!==k||j[51]!==y?(v=(0,n.jsx)(l.MenuItem,{padding:1,paddingRight:3,onClick:k,pressed:C,children:y}),j[49]=C,j[50]=k,j[51]=y,j[52]=v):v=j[52],v};function nw(e){return(0,c.getVersionFromId)(e)??[]}let nS=eI.styled.div.withConfig({displayName:"DialogLayout",componentId:"sc-x0jh85-0"})`--offset-block:40px;display:grid;height:calc(100vh - var(--offset-block));min-height:0;overflow:hidden;grid-template-areas:'header header' 'previous-document next-document';grid-template-columns:1fr 1fr;grid-template-rows:min-content minmax(0,1fr);`;function nI(e){return e.document?.components?.unstable_layout}function nC(e){return e.path}function n_(e,t){return(0,tx.default)(e.path,t.path)}let nT=eI.styled.div.withConfig({displayName:"Scroller",componentId:"sc-16z7cpf-0"})`position:relative;height:100%;overflow:auto;scroll-behavior:smooth;scrollbar-width:var(--scrollbar-width);overscroll-behavior:contain;will-change:scroll-position;`,nR=(0,eI.styled)(l.Card).withConfig({displayName:"DiffViewPaneLayout",componentId:"sc-1856b20-0"})`position:relative;grid-area:var(--grid-area);`,nP=(0,eI.styled)(l.Container).withConfig({displayName:"Container",componentId:"sc-1856b20-1"})`width:auto;`,nk=(0,r.forwardRef)(function(e,t){let a,d,c,p,m,h,g,f,x,b,y,v,j=(0,i.c)(36),{role:w,documentType:S,documentId:I,scrollElement:C,syncChannel:_,compareDocument:T}=e,R=(0,r.useRef)(null),[P,k]=(0,r.useState)(null),[E,D]=(0,r.useState)(null);j[0]!==T||j[1]!==I||j[2]!==S||j[3]!==w||j[4]!==C||j[5]!==_?(a=()=>(0,n.jsx)(nE,{compareDocument:T,documentId:I,documentType:S,role:w,scrollElement:C,syncChannel:_}),j[0]=T,j[1]=I,j[2]=S,j[3]=w,j[4]=C,j[5]=_,j[6]=a):a=j[6];let F=a;j[7]!==F?(d={pick:nI,defaultComponent:F},j[7]=F,j[8]=d):d=j[8];let A=(0,u.useMiddlewareComponents)(d);j[9]===Symbol.for("react.memo_cache_sentinel")?(c={isInteractive:!1,onOpenReviewChanges:e2.noop,onSetFocus:e2.noop,isReviewChangesOpen:!1},j[9]=c):c=j[9];let V=`${w}-document`;j[10]!==V?(p={"--grid-area":V},j[10]=V,j[11]=p):p=j[11];let M=p,L="next"===w,z="next"!==w&&"none";j[12]!==z?(m={"--scrollbar-width":z},j[12]=z,j[13]=m):m=j[13];let O=m;return j[14]!==A||j[15]!==I||j[16]!==S?(h=(0,n.jsx)(o.DialogProvider,{position:"absolute",children:(0,n.jsx)(nP,{ref:R,padding:4,width:1,children:(0,n.jsx)(A,{documentId:I,documentType:S})})}),j[14]=A,j[15]=I,j[16]=S,j[17]=h):h=j[17],j[18]!==P||j[19]!==h?(g=(0,n.jsx)(l.PortalProvider,{element:P,children:h}),j[18]=P,j[19]=h,j[20]=g):g=j[20],j[21]!==t||j[22]!==O||j[23]!==g?(f=(0,n.jsx)(nT,{ref:t,style:O,children:g}),j[21]=t,j[22]=O,j[23]=g,j[24]=f):f=j[24],j[25]===Symbol.for("react.memo_cache_sentinel")?(x=(0,n.jsx)("div",{"data-testid":"diffView-document-panel-portal",ref:k}),j[25]=x):x=j[25],j[26]!==f||j[27]!==M||j[28]!==L?(b=(0,n.jsxs)(nR,{ref:D,style:M,borderLeft:L,children:[f,x]}),j[26]=f,j[27]=M,j[28]=L,j[29]=b):b=j[29],j[30]!==E||j[31]!==b?(y=(0,n.jsx)(l.BoundaryElementProvider,{element:E,children:b}),j[30]=E,j[31]=b,j[32]=y):y=j[32],j[33]!==C||j[34]!==y?(v=(0,n.jsx)(s.ReviewChangesContext.Provider,{value:c,children:(0,n.jsx)(u.ChangeIndicatorsTracker,{children:(0,n.jsx)(u.VirtualizerScrollInstanceProvider,{scrollElement:C,containerElement:R,children:y})})}),j[33]=C,j[34]=y,j[35]=v):v=j[35],v}),nE=e=>{var t,l;let o,a,d,p,m,h,g,f,x,b,y,v=(0,i.c)(52),{role:j,documentType:w,documentId:S,syncChannel:I,compareDocument:C}=e;v[0]!==C?(o={compareDocument:C},v[0]=C,v[1]=o):o=v[1];let _=function(e){let t,n,l,o=(0,i.c)(4),{compareDocument:r}=e;o[0]!==r.id?(t=(0,c.getPublishedId)(r.id),o[0]=r.id,o[1]=t):t=o[1];let s=r.type;o[2]!==r.id?(n=(0,c.getVersionFromId)(r.id),o[2]=r.id,o[3]=n):n=o[3];let a=(0,u.useEditState)(t,s,"low",n);e:{if((0,c.isVersionId)(r.id)){l=a.version??void 0;break e}if((0,c.isDraftId)(r.id)){l=a.draft??void 0;break e}if((0,c.isPublishedId)(r.id)){l=a.published??void 0;break e}l=void 0}return l}(o),{data:T}=(0,u.useActiveReleases)(),[R]=(0,r.useState)(nD);v[2]!==S||v[3]!==T?(a=nf(S,T),v[2]=S,v[3]=T,v[4]=a):a=v[4];let P=a;v[5]!==S?(d=(0,c.getPublishedId)(S),v[5]=S,v[6]=d):d=v[6],v[7]!==S?(t=S,p=(0,c.isVersionId)(t)?(0,c.getVersionFromId)(t):(0,c.isPublishedId)(t)?"published":void 0,v[7]=S,v[8]=p):p=v[8],v[9]!==S?(m=(0,c.getVersionFromId)(S),v[9]=S,v[10]=m):m=v[10],v[11]!==_||v[12]!==w||v[13]!==d||v[14]!==p||v[15]!==m?(h={documentId:d,documentType:w,selectedPerspectiveName:p,releaseId:m,comparisonValue:_,displayInlineChanges:!0},v[11]=_,v[12]=w,v[13]=d,v[14]=p,v[15]=m,v[16]=h):h=v[16];let{formState:k,onChange:E,onFocus:D,onBlur:F,onSetActiveFieldGroup:A,onSetCollapsedFieldSet:V,onSetCollapsedPath:M,collapsedFieldSets:L,ready:z,collapsedPaths:O,schemaType:B,value:N,onProgrammaticFocus:$,openPath:H,onPathOpen:G}=(0,u.useDocumentForm)(h),U=null===k||!z;v[17]!==j||v[18]!==I?(g={id:j,syncChannel:I},v[17]=j,v[18]=I,v[19]=g):g=v[19];let q=function(e){let t,n,l,o=(0,i.c)(11),{syncChannel:r,id:s}=e;o[0]!==s||o[1]!==r?(t=e=>r.next({...e,source:s}),o[0]=s,o[1]=r,o[2]=t):t=o[2];let a=t;if(o[3]!==s||o[4]!==r){let e;o[6]!==s?(e=e=>{let{source:t}=e;return t!==s},o[6]=s,o[7]=e):e=o[7],n=r.pipe((0,eR.distinctUntilChanged)(n_),(0,eP.filter)(e),(0,ek.map)(nC)),o[3]=s,o[4]=r,o[5]=n}else n=o[5];let d=n;return o[8]!==d||o[9]!==a?(l={path:d,push:a},o[8]=d,o[9]=a,o[10]=l):l=o[10],l}(g);v[20]!==G||v[21]!==q||v[22]!==j?(f=e=>{G(e),q.push({source:j,path:e})},v[20]=G,v[21]=q,v[22]=j,v[23]=f):f=v[23];let W=f;return v[24]!==G||v[25]!==$||v[26]!==q.path?(x=()=>{let e=q.path.subscribe(e=>{G(e),$(e)});return()=>e.unsubscribe()},v[24]=G,v[25]=$,v[26]=q.path,v[27]=x):x=v[27],v[28]!==G||v[29]!==$||v[30]!==q.path||v[31]!==j?(b=[G,$,q.path,j],v[28]=G,v[29]=$,v[30]=q.path,v[31]=j,v[32]=b):b=v[32],(0,r.useEffect)(x,b),v[33]!==L||v[34]!==O||v[35]!==_||v[36]!==k||v[37]!==U||v[38]!==F||v[39]!==E||v[40]!==D||v[41]!==W||v[42]!==A||v[43]!==V||v[44]!==M||v[45]!==H||v[46]!==R||v[47]!==P||v[48]!==j||v[49]!==B||v[50]!==N?(y=U?(0,n.jsx)(u.LoadingBlock,{showText:!0}):(0,n.jsx)(s.CommentsEnabledContext.Provider,{value:{enabled:!1,mode:null},children:(0,n.jsx)(u.FormBuilder,{__internal_patchChannel:R,id:`diffView-pane-${j}`,onChange:E,onPathFocus:D,onPathOpen:W,onPathBlur:F,onFieldGroupSelect:A,onSetFieldSetCollapsed:V,onSetPathCollapsed:M,collapsedPaths:O,collapsedFieldSets:L,focusPath:k.focusPath,openPath:H,changed:k.changed,focused:k.focused,groups:k.groups,validation:k.validation,members:k.members,perspective:"draft"===(l=P)?"drafts":l,hasUpstreamVersion:k.hasUpstreamVersion,presence:k.presence,schemaType:B,value:N,compareValue:_})}),v[33]=L,v[34]=O,v[35]=_,v[36]=k,v[37]=U,v[38]=F,v[39]=E,v[40]=D,v[41]=W,v[42]=A,v[43]=V,v[44]=M,v[45]=H,v[46]=R,v[47]=P,v[48]=j,v[49]=B,v[50]=N,v[51]=y):y=v[51],y};function nD(){return(0,u.createPatchChannel)()}let nF=eI.styled.a.withConfig({displayName:"Link",componentId:"sc-ihhvnj-0"})`flex:1;text-decoration:none;color:inherit;`,nA=e=>{let t,l,o=(0,i.c)(6),{children:r,documentId:s,documentType:a}=e;o[0]!==s||o[1]!==a?(t={intent:"edit",params:{id:s,type:a}},o[0]=s,o[1]=a,o[2]=t):t=o[2];let{href:d}=(0,h.useIntentLink)(t);return o[3]!==r||o[4]!==d?(l=(0,n.jsx)(nF,{href:d,target:"_blank",rel:"noopener noreferrer",children:r}),o[3]=r,o[4]=d,o[5]=l):l=o[5],l},nV=e=>{var t;let l,o,a,d,c,u,p,h,g,f,x,b,y=(0,i.c)(24),{documentId:v}=e,{documents:j,state:w,mode:S}=nm(),{exitDiffView:I}=nc(),C=((g=(0,i.c)(1))[0]===Symbol.for("react.memo_cache_sentinel")?(h=new eT.Subject,g[0]=h):h=g[0],h),[_,T]=(0,r.useState)(null),[R,P]=(0,r.useState)(null),k=(0,r.useContext)(s.ReferenceInputOptionsContext);y[0]!==k?(l={...k,disableNew:!0,EditReferenceLinkComponent:nA},y[0]=k,y[1]=l):l=y[1];let E=l;return y[2]!==R||y[3]!==_?(o=[_,R],y[2]=R,y[3]=_,y[4]=o):o=y[4],t=o,(b=(0,i.c)(3))[0]!==t?(f=()=>{let e=t.filter(ng);if(0===e.length)return;let n=new tf(e);return()=>n.destroy()},x=[t],b[0]=t,b[1]=f,b[2]=x):(f=b[1],x=b[2]),(0,r.useEffect)(f,x),y[5]!==v||y[6]!==S||y[7]!==w?(a="version"===S&&(0,n.jsx)(ny,{documentId:v,state:w}),y[5]=v,y[6]=S,y[7]=w,y[8]=a):a=y[8],y[9]!==j||y[10]!==R||y[11]!==_||y[12]!==w||y[13]!==C?(d="ready"===w&&(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(nk,{documentType:j.previous.type,documentId:j.previous.id,role:"previous",ref:T,scrollElement:_,syncChannel:C,compareDocument:j.previous}),(0,n.jsx)(nk,{documentType:j.next.type,documentId:j.next.id,role:"next",ref:P,scrollElement:R,syncChannel:C,compareDocument:j.previous})]}),y[9]=j,y[10]=R,y[11]=_,y[12]=w,y[13]=C,y[14]=d):d=y[14],y[15]!==a||y[16]!==d?(c=(0,n.jsxs)(nS,{children:[a,d]}),y[15]=a,y[16]=d,y[17]=c):c=y[17],y[18]!==I||y[19]!==c?(u=(0,n.jsx)(m.Dialog,{id:"diffView",width:"auto",onClose:I,padding:!1,__unstable_hideCloseButton:!0,children:c}),y[18]=I,y[19]=c,y[20]=u):u=y[20],y[21]!==E||y[22]!==u?(p=(0,n.jsx)(s.ReferenceInputOptionsContext.Provider,{value:E,children:u}),y[21]=E,y[22]=u,y[23]=p):p=y[23],p},nM=e=>{let t,l,r,s=(0,i.c)(9),{children:a,documentId:d}=e,c=(0,o.useToast)(),{t:p}=(0,u.useTranslation)(T);s[0]!==p||s[1]!==c?(t={onParamsError:e=>{c.push({id:"diffViewParamsParsingError",status:"error",title:p("compare-version.error.invalidParams.title"),description:(0,n.jsx)("ul",{children:e.map(e=>{let[t,i]=e;return(0,n.jsx)("li",{children:p(`compare-version.error.${t}`,{input:i})},t)})})})}},s[0]=p,s[1]=c,s[2]=t):t=s[2];let{isActive:m}=nm(t);return s[3]!==d||s[4]!==m?(l=m&&(0,n.jsx)(nV,{documentId:d}),s[3]=d,s[4]=m,s[5]=l):l=s[5],s[6]!==a||s[7]!==l?(r=(0,n.jsxs)(n.Fragment,{children:[a,l]}),s[6]=a,s[7]=l,s[8]=r):r=s[8],r};function nL(){let e=(0,r.useContext)(s.PaneLayoutContext);if(!e)throw Error("PaneLayout: missing context value");return e}let nz=(0,eI.styled)(l.Layer).withConfig({displayName:"Root",componentId:"sc-k0eo57-0"})`position:relative;width:1px;min-width:1px;&:before{content:'';display:block;position:absolute;top:0;left:0;bottom:0;width:1px;background-color:var(--card-border-color);}&:not([data-disabled]){cursor:ew-resize;width:9px;min-width:9px;margin:0 -4px;&:before{left:4px;}&:after{content:'';display:block;position:absolute;top:0;left:0;width:9px;bottom:0;background-color:var(--card-border-color);opacity:0;transition:opacity 150ms;}&[data-dragging]:after,&:hover:after{opacity:0.2;}}`;function nO(e){let t,l,o=(0,i.c)(7),{disabled:s,element:a}=e,{resize:d}=nL(),[c,u]=(0,r.useState)(!1);o[0]!==a||o[1]!==d?(t=e=>{if(!a)return;u(!0),e.preventDefault();let t=e.pageX;d("start",a,0);let n=e=>{e.preventDefault(),d("move",a,e.pageX-t)},i=e=>{e.preventDefault(),u(!1),window.removeEventListener("mousemove",n),window.removeEventListener("mouseup",i),d("end",a,0)};window.addEventListener("mousemove",n),window.addEventListener("mouseup",i)},o[0]=a,o[1]=d,o[2]=t):t=o[2];let p=t,m=s?"":void 0,h=c?"":void 0;return o[3]!==p||o[4]!==m||o[5]!==h?(l=(0,n.jsx)(nz,{"data-disabled":m,"data-dragging":h,onMouseDown:p}),o[3]=p,o[4]=m,o[5]=h,o[6]=l):l=o[6],l}let nB=(0,eI.styled)(l.Card).withConfig({displayName:"Root",componentId:"sc-o2std4-0"})`outline:none;box-shadow:1px 0 0 var(--card-border-color);`,nN=(0,r.forwardRef)(function(e,t){let o,a,d,c,p,m,h,g,f,x,b,y,v,j,w,S,I,C,_,T,R,P,k,E,D,F,A,V,M,L=(0,i.c)(86);L[0]!==e?({children:o,currentMinWidth:d,currentMaxWidth:a,flex:g,id:c,minWidth:m,maxWidth:p,selected:f,...h}=e,L[0]=e,L[1]=o,L[2]=a,L[3]=d,L[4]=c,L[5]=p,L[6]=m,L[7]=h,L[8]=g,L[9]=f):(o=L[1],a=L[2],d=L[3],c=L[4],p=L[5],m=L[6],h=L[7],g=L[8],f=L[9]);let z=void 0===g?1:g,O=void 0!==f&&f,[B,N]=(0,r.useState)(null),{collapse:$,collapsed:H,expand:G,expandedElement:U,mount:q,panes:W}=nL();if(L[10]!==W||L[11]!==B){let e;L[14]!==B?(e=e=>e.element===B,L[14]=B,L[15]=e):e=L[15],b=(x=W.find(e))&&W.indexOf(x),L[10]=W,L[11]=B,L[12]=x,L[13]=b}else x=L[12],b=L[13];let K=b,Y="number"==typeof K?W[K+1]:void 0,X=K===W.length-1,J=U===B,Z=!H&&(x?.collapsed||!1),Q=Y?.collapsed||!1,ee=(0,r.useRef)(null),et=x?.flex??z,en=x?.currentMinWidth??d,ei=x?.currentMaxWidth??a;L[16]===Symbol.for("react.memo_cache_sentinel")?(y=()=>ee.current,L[16]=y):y=L[16],(0,r.useImperativeHandle)(t,y),L[17]===Symbol.for("react.memo_cache_sentinel")?(v=e=>{N(e),ee.current=e},L[17]=v):v=L[17];let el=v;L[18]!==a||L[19]!==d||L[20]!==z||L[21]!==c||L[22]!==p||L[23]!==m||L[24]!==q||L[25]!==B?(j=()=>{if(B)return q(B,{currentMinWidth:d,currentMaxWidth:a,flex:z,id:c,minWidth:m,maxWidth:p})},w=[d,a,z,c,m,p,q,B],L[18]=a,L[19]=d,L[20]=z,L[21]=c,L[22]=p,L[23]=m,L[24]=q,L[25]=B,L[26]=j,L[27]=w):(j=L[26],w=L[27]),(0,r.useLayoutEffect)(j,w),L[28]!==$||L[29]!==B?(S=()=>{B&&$(B)},L[28]=$,L[29]=B,L[30]=S):S=L[30];let eo=S;L[31]!==G||L[32]!==B?(I=()=>{B&&G(B)},L[31]=G,L[32]=B,L[33]=I):I=L[33];let er=I,es=!H&&Z;L[34]!==eo||L[35]!==er||L[36]!==X||L[37]!==K||L[38]!==B||L[39]!==es?(C={collapse:eo,collapsed:es,expand:er,index:K,isLast:X,rootElement:B},L[34]=eo,L[35]=er,L[36]=X,L[37]=K,L[38]=B,L[39]=es,L[40]=C):C=L[40];let ea=C;e:{if(H){_=void 0;break e}if(Z){_=51;break e}if(0===en||X){_=m||204;break e}_=en||m||204}let ed=_;t:{if(Z){T=51;break t}if(H&&X){T=void 0;break t}if(X){if(p){T=ei??p;break t}T=void 0;break t}T=ei??p}let ec=T,eu=H&&!X;L[41]!==Z||L[42]!==X||L[43]!==H||L[44]!==Q||L[45]!==B?(R=!X&&!H&&(0,n.jsx)(u.LegacyLayerProvider,{zOffset:"paneResizer",children:(0,n.jsx)(nO,{disabled:Z||Q,element:B})}),L[41]=Z,L[42]=X,L[43]=H,L[44]=Q,L[45]=B,L[46]=R):R=L[46];let ep=R,em=ec===1/0?void 0:ec;L[47]!==et||L[48]!==ed||L[49]!==em?(P={flex:et,minWidth:ed,maxWidth:em},L[47]=et,L[48]=ed,L[49]=em,L[50]=P):P=L[50];let eh=P,eg=H?void 0:"hidden",ef=Z?"":void 0,ex=O?"":void 0;return L[51]!==Z||L[52]!==ei||L[53]!==en||L[54]!==J||L[55]!==et||L[56]!==ec||L[57]!==ed||L[58]!==K?(k=!1,L[51]=Z,L[52]=ei,L[53]=en,L[54]=J,L[55]=et,L[56]=ec,L[57]=ed,L[58]=K,L[59]=k):k=L[59],L[60]!==o||L[61]!==eu?(E=!eu&&(0,n.jsx)(l.Flex,{direction:"column",height:"fill",children:o}),L[60]=o,L[61]=eu,L[62]=E):E=L[62],L[63]!==B||L[64]!==E?(D=(0,n.jsx)(l.BoundaryElementProvider,{element:B,children:E}),L[63]=B,L[64]=E,L[65]=D):D=L[65],L[66]!==eu||L[67]!==c||L[68]!==K||L[69]!==h||L[70]!==eh||L[71]!==eg||L[72]!==ef||L[73]!==ex||L[74]!==k||L[75]!==D?(F=(0,n.jsxs)(nB,{"data-testid":"pane","data-ui":"Pane",tone:"inherit",hidden:eu,id:c,overflow:eg,...h,"data-pane-collapsed":ef,"data-pane-index":K,"data-pane-selected":ex,ref:el,style:eh,children:[k,D]}),L[66]=eu,L[67]=c,L[68]=K,L[69]=h,L[70]=eh,L[71]=eg,L[72]=ef,L[73]=ex,L[74]=k,L[75]=D,L[76]=F):F=L[76],L[77]!==X||L[78]!==F?(A=(0,n.jsx)(u.IsLastPaneProvider,{isLastPane:X,children:F}),L[77]=X,L[78]=F,L[79]=A):A=L[79],L[80]!==ea||L[81]!==A?(V=(0,n.jsx)(u.LegacyLayerProvider,{zOffset:"pane",children:(0,n.jsx)(s.PaneContext.Provider,{value:ea,children:A})}),L[80]=ea,L[81]=A,L[82]=V):V=L[82],L[83]!==ep||L[84]!==V?(M=(0,n.jsxs)(n.Fragment,{children:[V,ep]}),L[83]=ep,L[84]=V,L[85]=M):M=L[85],M}),n$=(0,eI.styled)(l.Card).withConfig({displayName:"Root",componentId:"sc-ok1xda-0"})`position:relative;outline:none;`;function nH(){let e=(0,r.useContext)(s.PaneContext);if(!e)throw Error("Pane: missing context value");return e}n$.displayName="PaneContent__root";let nG=(0,r.forwardRef)(function(e,t){let l,o,r,s,a,d,c=(0,i.c)(14);c[0]!==e?({as:l,children:o,overflow:r,padding:s,...a}=e,c[0]=e,c[1]=l,c[2]=o,c[3]=r,c[4]=s,c[5]=a):(l=c[1],o=c[2],r=c[3],s=c[4],a=c[5]);let{collapsed:u}=nH(),{collapsed:p}=nL(),m=p?void 0:r;return c[6]!==l||c[7]!==o||c[8]!==u||c[9]!==s||c[10]!==t||c[11]!==a||c[12]!==m?(d=(0,n.jsx)(n$,{"data-testid":"pane-content",forwardedAs:l,...a,flex:1,hidden:u,overflow:m,padding:s,ref:t,tone:"inherit",children:o}),c[6]=l,c[7]=o,c[8]=u,c[9]=s,c[10]=t,c[11]=a,c[12]=m,c[13]=d):d=c[13],d});function nU(e){return e?e.toLocaleLowerCase().replaceAll(" ",""):""}let nq={constrainSize:!0,placement:"left-start",portal:!0};function nW(e){let t,o,r,s,a=(0,i.c)(35),{disabled:d,isAfterGroup:c,node:p}=e,m=(0,u.useGetI18nText)("i18n"in p?p:void 0);if("divider"===p.type){let e;return a[0]===Symbol.for("react.memo_cache_sentinel")?(e=(0,n.jsx)(l.MenuDivider,{}),a[0]=e):e=a[0],e}a[1]!==m||a[2]!==p?(t=m(p),a[1]=m,a[2]=p,a[3]=t):t=a[3];let{title:h}=t;if("group"===p.type){let e,t,i,o;if(0===p.children.length)return null;if(p.expanded){let e,t,i;return a[4]!==c?(e=c&&(0,n.jsx)(l.MenuDivider,{}),a[4]=c,a[5]=e):e=a[5],a[6]!==d||a[7]!==p.children||a[8]!==p.disabled?(t=p.children.map((e,t)=>(0,n.jsx)(nW,{disabled:d||!!p.disabled,isAfterGroup:p.children[t-1]?.type==="group",node:e},e.key)),a[6]=d,a[7]=p.children,a[8]=p.disabled,a[9]=t):t=a[9],a[10]!==e||a[11]!==t?(i=(0,n.jsxs)(n.Fragment,{children:[e,t]}),a[10]=e,a[11]=t,a[12]=i):i=a[12],i}a[13]!==c?(e=c&&(0,n.jsx)(l.MenuDivider,{}),a[13]=c,a[14]=e):e=a[14];let r=p.icon;return a[15]!==d||a[16]!==p.children||a[17]!==p.disabled?(t=p.children.map((e,t)=>(0,n.jsx)(nW,{disabled:d||!!p.disabled,isAfterGroup:p.children[t-1]?.type==="group",node:e},e.key)),a[15]=d,a[16]=p.children,a[17]=p.disabled,a[18]=t):t=a[18],a[19]!==d||a[20]!==p.icon||a[21]!==t||a[22]!==h?(i=(0,n.jsx)(ta.MenuGroup,{disabled:d,icon:r,popover:nq,text:h,children:t}),a[19]=d,a[20]=p.icon,a[21]=t,a[22]=h,a[23]=i):i=a[23],a[24]!==e||a[25]!==i?(o=(0,n.jsxs)(n.Fragment,{children:[e,i]}),a[24]=e,a[25]=i,a[26]=o):o=a[26],o}return a[27]!==c?(o=c&&(0,n.jsx)(l.MenuDivider,{}),a[27]=c,a[28]=o):o=a[28],a[29]!==d||a[30]!==p?(r=(0,n.jsx)(nK,{disabled:d,node:p}),a[29]=d,a[30]=p,a[31]=r):r=a[31],a[32]!==o||a[33]!==r?(s=(0,n.jsxs)(n.Fragment,{children:[o,r]}),a[32]=o,a[33]=r,a[34]=s):s=a[34],s}function nK(e){let t,l=(0,i.c)(5),{node:o}=e;if(o.intent){let t;return l[0]!==o.intent||l[1]!==e?(t=(0,n.jsx)(nX,{...e,intent:o.intent}),l[0]=o.intent,l[1]=e,l[2]=t):t=l[2],t}return l[3]!==e?(t=(0,n.jsx)(nY,{...e}),l[3]=e,l[4]=t):t=l[4],t}function nY(e){let t,o,r,s,a,d=(0,i.c)(19),{disabled:c,node:p}=e;d[0]!==p.disabled?(t="object"==typeof p.disabled&&(0,n.jsx)(l.Text,{size:1,children:p.disabled.reason}),d[0]=p.disabled,d[1]=t):t=d[1];let h=t,{title:g}=(0,u.useI18nText)(p),x=p.selected&&!p.hideSelectionIndicator,b=c||!!p.disabled;d[2]!==p.hotkey?(o=p.hotkey?.split("+"),d[2]=p.hotkey,d[3]=o):o=d[3];let y=p.icon,v=p.iconRight||x&&f.CheckmarkIcon,j=p.onAction,w=p.tone;d[4]!==p.title?(r=nU(p.title),d[4]=p.title,d[5]=r):r=d[5];let S=`action-${r}`;return d[6]!==p.icon||d[7]!==p.onAction||d[8]!==p.tone||d[9]!==x||d[10]!==b||d[11]!==o||d[12]!==v||d[13]!==S||d[14]!==g?(s=(0,n.jsx)(m.MenuItem,{disabled:b,hotkeys:o,icon:y,iconRight:v,onClick:j,pressed:x,text:g,tone:w,"data-testid":S}),d[6]=p.icon,d[7]=p.onAction,d[8]=p.tone,d[9]=x,d[10]=b,d[11]=o,d[12]=v,d[13]=S,d[14]=g,d[15]=s):s=d[15],d[16]!==s||d[17]!==h?(a=(0,n.jsx)(u.TooltipOfDisabled,{content:h,placement:"left",children:s}),d[16]=s,d[17]=h,d[18]=a):a=d[18],a}function nX(e){let t,o,r,s,a,d,c=(0,i.c)(23),{disabled:p,intent:g,node:x}=e;c[0]!==x.disabled?(t="object"==typeof x.disabled&&(0,n.jsx)(l.Text,{size:1,children:x.disabled.reason}),c[0]=x.disabled,c[1]=t):t=c[1];let b=t;c[2]!==g.params||c[3]!==g.type?(o={intent:g.type,params:g.params},c[2]=g.params,c[3]=g.type,c[4]=o):o=c[4];let y=(0,h.useIntentLink)(o);c[5]!==y||c[6]!==x?(r=e=>{y.onClick(e),x.onAction()},c[5]=y,c[6]=x,c[7]=r):r=c[7];let v=r,{title:j}=(0,u.useI18nText)(x),w=x.selected&&!x.hideSelectionIndicator,S=p||!!x.disabled;c[8]!==x.hotkey?(s=x.hotkey?.split("+"),c[8]=x.hotkey,c[9]=s):s=c[9];let I=w?f.CheckmarkIcon:void 0;return c[10]!==v||c[11]!==y.href||c[12]!==x.icon||c[13]!==x.tone||c[14]!==w||c[15]!==S||c[16]!==s||c[17]!==I||c[18]!==j?(a=(0,n.jsx)(m.MenuItem,{as:"a",disabled:S,hotkeys:s,href:y.href,icon:x.icon,iconRight:I,onClick:v,pressed:w,text:j,tone:x.tone}),c[10]=v,c[11]=y.href,c[12]=x.icon,c[13]=x.tone,c[14]=w,c[15]=S,c[16]=s,c[17]=I,c[18]=j,c[19]=a):a=c[19],c[20]!==a||c[21]!==b?(d=(0,n.jsx)(u.TooltipOfDisabled,{content:b,placement:"left",children:a}),c[20]=a,c[21]=b,c[22]=d):d=c[22],d}let nJ={constrainSize:!0,placement:"bottom",portal:!0};function nZ(e,t){return e.some(e=>"item"===e.type&&e.tone===t||"group"===e.type&&nZ(e.children,t))}function nQ(e){let t,o,s,a,d,c=(0,i.c)(13),{nodes:p,actionsNodes:h}=e,g=(0,r.useId)(),f=nZ(p,"critical"),x=nZ(p,"caution"),b=f?"critical":x?"caution":void 0;return c[0]!==b?(t=(0,n.jsx)(u.ContextMenuButton,{tone:b,"data-testid":"pane-context-menu-button"}),c[0]=b,c[1]=t):t=c[1],c[2]!==h?(o=h&&(0,n.jsxs)(n.Fragment,{children:[h,(0,n.jsx)(l.MenuDivider,{})]}),c[2]=h,c[3]=o):o=c[3],c[4]!==p?(s=p.map((e,t)=>{let i=p[t-1]?.type==="group";return(0,n.jsx)(nW,{isAfterGroup:i,node:e},e.key)}),c[4]=p,c[5]=s):s=c[5],c[6]!==o||c[7]!==s?(a=(0,n.jsxs)(l.Menu,{children:[o,s]}),c[6]=o,c[7]=s,c[8]=a):a=c[8],c[9]!==g||c[10]!==t||c[11]!==a?(d=(0,n.jsx)(m.MenuButton,{button:t,id:g,menu:a,popover:nJ}),c[9]=g,c[10]=t,c[11]=a,c[12]=d):d=c[12],d}let n0=(0,eI.styled)(l.Layer).withConfig({displayName:"Root",componentId:"sc-rwc61s-0"})`position:sticky;bottom:0;`,n1=(0,eI.styled)(l.Card).withConfig({displayName:"RootCard",componentId:"sc-rwc61s-1"})`padding-bottom:env(safe-area-inset-bottom);`,n2=(0,r.forwardRef)(function(e,t){let o,r,s=(0,i.c)(7),{children:a,padding:d}=e,{collapsed:c}=nH();return s[0]!==a||s[1]!==d?(o=(0,n.jsx)(n1,{tone:"inherit",children:(0,n.jsx)(l.Box,{padding:d,children:a})}),s[0]=a,s[1]=d,s[2]=o):o=s[2],s[3]!==c||s[4]!==t||s[5]!==o?(r=(0,n.jsx)(u.LegacyLayerProvider,{zOffset:"paneFooter",children:(0,n.jsx)(n0,{"data-testid":"pane-footer",hidden:c,ref:t,children:o})}),s[3]=c,s[4]=t,s[5]=o,s[6]=r):r=s[6],r}),n3=(0,eI.styled)(l.Layer).withConfig({displayName:"Root",componentId:"sc-2mpzxb-0"})(({$border:e})=>eI.css`
    line-height: 0;
    position: sticky;
    top: 0;

    &:not([data-collapsed]):after {
      content: '';
      display: block;
      position: absolute;
      left: 0;
      right: 0;
      bottom: -1px;
      border-bottom: 1px solid ${e?"var(--card-border-color)":"transparent"};
      opacity: 1;
    }
  `),n4=(0,eI.styled)(l.Flex).withConfig({displayName:"Layout",componentId:"sc-2mpzxb-1"})`transform-origin:calc(51px / 2);[data-collapsed] > div > &{transform:rotate(90deg);}`,n5=(0,eI.styled)(l.Card).withConfig({displayName:"TitleCard",componentId:"sc-2mpzxb-2"})(({theme:e})=>{let{fg:t,bg:n}=e.sanity.color.card.enabled;return eI.css`
    background-color: ${n};

    [data-ui='Text'] {
      color: ${t};
    }
  `}),n6=(0,eI.styled)(o.TextSkeleton).withConfig({displayName:"TitleTextSkeleton",componentId:"sc-2mpzxb-3"})`width:66%;max-width:175px;`,n8=(0,eI.styled)(l.Text).withConfig({displayName:"TitleText",componentId:"sc-2mpzxb-4"})`cursor:default;outline:none;`,n7=(0,r.forwardRef)(function(e,t){let r,s,a,d,c,p,m,h,g,f,x,b,y,v=(0,i.c)(48),{actions:j,backButton:w,border:S,contentAfter:I,loading:C,subActions:_,tabs:T,tabIndex:R,title:P,appendTitle:k}=e,{collapse:E,collapsed:D,expand:F,rootElement:A}=nH(),V=(0,o.useElementRect)(A||null),M=D?V?.height||window.innerHeight:void 0;v[0]!==M?(r={width:M},v[0]=M,v[1]=r):r=v[1];let L=r;v[2]!==E||v[3]!==D?(s=()=>{D||E()},v[2]=E,v[3]=D,v[4]=s):s=v[4];let z=s;v[5]!==D||v[6]!==F?(a=()=>{D&&F()},v[5]=D,v[6]=F,v[7]=a):a=v[7];let O=a,B=!!(!D&&(T||_)),N=D?"":void 0,$=D?"":void 0;v[8]!==w?(d=w&&(0,n.jsx)(l.Box,{flex:"none",children:w}),v[8]=w,v[9]=d):d=v[9];let H=w?1:2;v[10]!==C?(c=C&&(0,n.jsx)(l.Box,{children:(0,n.jsx)(n6,{animated:!0,radius:1,size:1})}),v[10]=C,v[11]=c):c=v[11],v[12]!==k||v[13]!==C||v[14]!==P?(p=!C&&(0,n.jsxs)(l.Flex,{align:"center",gap:1,children:[(0,n.jsx)(n8,{size:1,textOverflow:"ellipsis",weight:"semibold",children:P}),k]}),v[12]=k,v[13]=C,v[14]=P,v[15]=p):p=v[15],v[16]!==z||v[17]!==H||v[18]!==c||v[19]!==p||v[20]!==R?(m=(0,n.jsxs)(n5,{__unstable_focusRing:!0,flex:1,onClick:z,paddingLeft:H,padding:2,tabIndex:R,children:[c,p]}),v[16]=z,v[17]=H,v[18]=c,v[19]=p,v[20]=R,v[21]=m):m=v[21],v[22]!==j||v[23]!==D?(h=j&&(0,n.jsx)(l.Box,{hidden:D,children:(0,n.jsx)(u.LegacyLayerProvider,{zOffset:"paneHeader",children:j})}),v[22]=j,v[23]=D,v[24]=h):h=v[24],v[25]!==m||v[26]!==h||v[27]!==d?(g=(0,n.jsxs)(l.Flex,{align:"flex-start",gap:3,children:[d,m,h]}),v[25]=m,v[26]=h,v[27]=d,v[28]=g):g=v[28],v[29]!==D||v[30]!==B||v[31]!==_||v[32]!==T?(f=B&&(0,n.jsxs)(l.Flex,{align:"center",hidden:D,overflow:"auto",children:[(0,n.jsx)(l.Box,{flex:1,marginRight:3*!!_,children:T}),_]}),v[29]=D,v[30]=B,v[31]=_,v[32]=T,v[33]=f):f=v[33],v[34]!==O||v[35]!==L||v[36]!==g||v[37]!==f?(x=(0,n.jsxs)(n4,{direction:"column",gap:3,onClick:O,padding:3,sizing:"border",style:L,children:[g,f]}),v[34]=O,v[35]=L,v[36]=g,v[37]=f,v[38]=x):x=v[38];let G=!D&&I;return v[39]!==x||v[40]!==G||v[41]!==$?(b=(0,n.jsx)(u.LegacyLayerProvider,{zOffset:"paneHeader",children:(0,n.jsxs)(l.Card,{"data-collapsed":$,tone:"inherit",children:[x,G]})}),v[39]=x,v[40]=G,v[41]=$,v[42]=b):b=v[42],v[43]!==S||v[44]!==t||v[45]!==b||v[46]!==N?(y=(0,n.jsx)(l.LayerProvider,{zOffset:100,children:(0,n.jsx)(n3,{$border:S,"data-collapsed":N,"data-testid":"pane-header",ref:t,children:b})}),v[43]=S,v[44]=t,v[45]=b,v[46]=N,v[47]=y):y=v[47],y});function n9(e){return e.disabled?{disabledReason:"object"==typeof e.disabled?e.disabled.reason:void 0,ariaLabel:"object"==typeof e.disabled&&"string"==typeof e.disabled?.reason?e.disabled.reason:"This is disabled",isDisabled:!!e.disabled}:{disabledReason:void 0,ariaLabel:void 0,isDisabled:!1}}function ie(e){let t=(0,i.c)(4),{node:l}=e;if("item"===l.type){let e;return t[0]!==l?(e=(0,n.jsx)(it,{node:l}),t[0]=l,t[1]=e):e=t[1],e}if("group"===l.type){let e;return t[2]!==l?(e=(0,n.jsx)(il,{node:l}),t[2]=l,t[3]=e):e=t[3],e}return console.warn('unknown menu node (expected `type: "item" | "group"`):',l),null}function it(e){let t,l,o,r,s,a=(0,i.c)(23),{node:d}=e,{title:c}=(0,u.useI18nText)(d),{t:p}=(0,u.useTranslation)();if(d.intent){let t;return a[0]!==d.intent||a[1]!==e?(t=(0,n.jsx)(ii,{...e,intent:d.intent}),a[0]=d.intent,a[1]=e,a[2]=t):t=a[2],t}a[3]!==d?(t=n9(d),a[3]=d,a[4]=t):t=a[4];let{disabledReason:m,ariaLabel:h,isDisabled:g}=t;a[5]!==h||a[6]!==p||a[7]!==c?(l=h||c||p("status-button.aria-label"),a[5]=h,a[6]=p,a[7]=c,a[8]=l):l=a[8],a[9]!==g||a[10]!==d.hotkey?(o=!g&&d.hotkey?d.hotkey.split("+"):void 0,a[9]=g,a[10]=d.hotkey,a[11]=o):o=a[11];let f=g?m:c;return a[12]!==o||a[13]!==f?(r={hotkeys:o,content:f},a[12]=o,a[13]=f,a[14]=r):r=a[14],a[15]!==g||a[16]!==d.icon||a[17]!==d.onAction||a[18]!==d.selected||a[19]!==d.tone||a[20]!==l||a[21]!==r?(s=(0,n.jsx)(u.StatusButton,{disabled:g,icon:d.icon,onClick:d.onAction,selected:d.selected,tone:d.tone,"aria-label":l,tooltipProps:r}),a[15]=g,a[16]=d.icon,a[17]=d.onAction,a[18]=d.selected,a[19]=d.tone,a[20]=l,a[21]=r,a[22]=s):s=a[22],s}function ii(e){let t,l,o,r,s,a,d,c=(0,i.c)(27),{intent:p,node:m}=e;c[0]!==p.params||c[1]!==p.type?(t={intent:p.type,params:p.params},c[0]=p.params,c[1]=p.type,c[2]=t):t=c[2];let g=(0,h.useIntentLink)(t),{t:f}=(0,u.useTranslation)();c[3]!==g||c[4]!==m?(l=e=>{g.onClick(e),m.onAction()},c[3]=g,c[4]=m,c[5]=l):l=c[5];let x=l;c[6]!==m?(o=n9(m),c[6]=m,c[7]=o):o=c[7];let{disabledReason:b,ariaLabel:y,isDisabled:v}=o;c[8]!==y||c[9]!==m.title||c[10]!==f?(r=y||m.title||f("status-button.aria-label"),c[8]=y,c[9]=m.title,c[10]=f,c[11]=r):r=c[11],c[12]!==v||c[13]!==m.hotkey?(s=!v&&m.hotkey?m.hotkey.split("+"):void 0,c[12]=v,c[13]=m.hotkey,c[14]=s):s=c[14];let j=v?b:m.title;return c[15]!==s||c[16]!==j?(a={hotkeys:s,content:j,placement:"bottom",portal:!0},c[15]=s,c[16]=j,c[17]=a):a=c[17],c[18]!==x||c[19]!==g.href||c[20]!==v||c[21]!==m.icon||c[22]!==m.selected||c[23]!==m.tone||c[24]!==r||c[25]!==a?(d=(0,n.jsx)(u.StatusButton,{forwardedAs:"a",disabled:v,href:g.href,icon:m.icon,onClick:x,selected:m.selected,tone:m.tone,"aria-label":r,tooltipProps:a}),c[18]=x,c[19]=g.href,c[20]=v,c[21]=m.icon,c[22]=m.selected,c[23]=m.tone,c[24]=r,c[25]=a,c[26]=d):d=c[26],d}function il(e){let t,o,s,a,d,c=(0,i.c)(16),{node:p}=e,{title:h}=(0,u.useI18nText)(p),g=!!p.disabled,x=p.icon??f.UnknownIcon;c[0]!==p.title?(t={content:p.title,portal:!0},c[0]=p.title,c[1]=t):t=c[1],c[2]!==g||c[3]!==x||c[4]!==t||c[5]!==h?(o=(0,n.jsx)(m.Button,{disabled:g,icon:x,label:h,mode:"bleed",tooltipProps:t}),c[2]=g,c[3]=x,c[4]=t,c[5]=h,c[6]=o):o=c[6];let b=(0,r.useId)();return c[7]!==p.children||c[8]!==p.disabled?(s=p.children.map((e,t)=>(0,n.jsx)(nW,{disabled:!!p.disabled,isAfterGroup:p.children[t-1]?.type==="group",node:e},e.key)),c[7]=p.children,c[8]=p.disabled,c[9]=s):s=c[9],c[10]!==s?(a=(0,n.jsx)(l.Menu,{children:s}),c[10]=s,c[11]=a):a=c[11],c[12]!==o||c[13]!==b||c[14]!==a?(d=(0,n.jsx)(m.MenuButton,{button:o,id:b,menu:a}),c[12]=o,c[13]=b,c[14]=a,c[15]=d):d=c[15],d}let io=(0,eI.styled)(l.Card).withConfig({displayName:"Root",componentId:"sc-9fi7st-0"})`transition:opacity 200ms;position:relative;z-index:1;padding-left:env(safe-area-inset-left);padding-right:env(safe-area-inset-right);opacity:0;&:not([hidden]){display:flex;}&:not([data-collapsed]){overflow:auto;}&[data-mounted]{opacity:1;}&[data-resizing]{pointer-events:none;}`,ir=[];function is(e){let t,l,a,d,c,u,p,m,h,g,f,x,b,y,v,j,w,S=(0,i.c)(41);S[0]!==e?({children:t,minWidth:l,onCollapse:a,onExpand:d,...c}=e,S[0]=e,S[1]=t,S[2]=l,S[3]=a,S[4]=d,S[5]=c):(t=S[1],l=S[2],a=S[3],d=S[4],c=S[5]);let[I]=(0,r.useState)(ia),[C,_]=(0,r.useState)(null),T=(0,o.useElementRect)(C)?.width||0,R=void 0!==T&&l?T<l:void 0;S[6]===Symbol.for("react.memo_cache_sentinel")?(u={expandedElement:null,panes:[],resizing:!1},S[6]=u):u=S[6];let[P,k]=(0,r.useState)(u);S[7]!==I||S[8]!==C?(p=()=>I.setRootElement(C),m=[I,C],S[7]=I,S[8]=C,S[9]=p,S[10]=m):(p=S[9],m=S[10]),(0,r.useEffect)(p,m),S[11]!==I||S[12]!==T?(h=()=>I.setRootWidth(T),g=[I,T],S[11]=I,S[12]=T,S[13]=h,S[14]=g):(h=S[13],g=S[14]),(0,r.useEffect)(h,g),S[15]!==I?(f=()=>I.subscribe(k),x=[I],S[15]=I,S[16]=f,S[17]=x):(f=S[16],x=S[17]),(0,r.useEffect)(f,x),S[18]!==R||S[19]!==a||S[20]!==d?(b=()=>{void 0!==R&&(R&&a&&a(),!R&&d&&d())},y=[R,a,d],S[18]=R,S[19]=a,S[20]=d,S[21]=b,S[22]=y):(b=S[21],y=S[22]),(0,r.useEffect)(b,y),S[23]!==R||S[24]!==I.collapse||S[25]!==I.expand||S[26]!==I.mount||S[27]!==I.resize||S[28]!==P.expandedElement||S[29]!==P.panes||S[30]!==P.resizing?(v={collapse:I.collapse,collapsed:R,expand:I.expand,expandedElement:P.expandedElement,mount:I.mount,panes:P.panes,resize:I.resize,resizing:P.resizing},S[23]=R,S[24]=I.collapse,S[25]=I.expand,S[26]=I.mount,S[27]=I.resize,S[28]=P.expandedElement,S[29]=P.panes,S[30]=P.resizing,S[31]=v):v=S[31];let E=v,D=R?"":void 0,F=P.resizing?"":void 0,A=T?"":void 0;return S[32]!==t||S[33]!==c||S[34]!==D||S[35]!==F||S[36]!==A?(j=(0,n.jsx)(io,{"data-ui":"PaneLayout",...c,"data-collapsed":D,"data-resizing":F,"data-mounted":A,ref:_,children:t}),S[32]=t,S[33]=c,S[34]=D,S[35]=F,S[36]=A,S[37]=j):j=S[37],S[38]!==E||S[39]!==j?(w=(0,n.jsx)(s.PaneLayoutContext.Provider,{value:E,children:j}),S[38]=E,S[39]=j,S[40]=w):w=S[40],w}function ia(){return function(){let e=[],t=[],n=new WeakMap,i=new Set,l={},o=null,r=0,s=null,a=null,d=new Map,c=!1;function u(e){i.delete(e),s=e,p()}return{collapse:function(e){i.add(e),s===e&&(s=null),p()},expand:u,maximize:function(e){a=e,p()},mount:function(e,i){return n.set(e,{...i,original:i}),t.push(e),o&&function(e,t){let n=new WeakMap;for(let i of t)n.set(i,function(e,t){let n=[],i=t;for(;i!==e;){let t=i.parentElement;if(!t)break;let l=Array.from(t.childNodes).indexOf(i);if(n.unshift(l),t===e)break;i=t}return n}(e,i));t.sort((e,t)=>{let i=n.get(e)||ir,l=n.get(t)||ir,o=Math.max(i.length,l.length);for(let e=0;e<o;e+=1){let t=i[e]||-1,n=l[e]||-1;if(t!==n)return t-n}return 0})}(o,t),u(e),()=>{let i=t.indexOf(e);i>-1&&t.splice(i,1),n.delete(e),a===e&&(a=null),p()}},resize:function(e,i,o){let r=t.indexOf(i),s=n.get(i);if(!s)return;let a=t[r+1],u=n.get(a);if(u){if("start"===e&&(c=!0,l.left={element:i,flex:s.flex||1,width:i.offsetWidth},l.right={element:a,flex:u.flex||1,width:a.offsetWidth},p()),"move"===e&&l.left&&l.right){let e,t,n,r,c,m,h,g,f,x,b,y;d=new Map;let{leftW:v,rightW:j,leftFlex:w,rightFlex:S}=(e={flex:l.left.flex+l.right.flex,width:l.left.width+l.right.width},t=s.minWidth??204,n=u.minWidth??204,r=Math.min(s.maxWidth||1/0,e.width-n),c=Math.min(u.maxWidth||1/0,e.width-t),m=t-l.left.width,m<(h=l.right.width-c)&&(m=h),g=l.right.width-n,g>(f=r-l.left.width)&&(g=f),x=Math.min(Math.max(o,m),g),b=l.left.width+x,y=l.right.width-x,{leftFlex:b/e.width*e.flex,leftW:b,rightFlex:y/e.width*e.flex,rightW:y});d.set(i,{flex:w,width:v}),d.set(a,{flex:S,width:j}),p()}if("end"===e){c=!1;let e=d.get(i),t=d.get(a);n.set(i,{...s,currentMinWidth:0,currentMaxWidth:s.maxWidth??1/0,flex:e?.flex??s.flex}),n.set(a,{...u,currentMinWidth:0,currentMaxWidth:s.maxWidth??1/0,flex:t?.flex??u.flex}),d=new Map,delete l.left,delete l.right,p()}}},setRootElement:function(e){o=e},setRootWidth:function(e){r=e,p()},subscribe:function(t){return e.push(t),()=>{let n=e.push(t);n>-1&&e.splice(n,1)}}};function p(){if(!r)return;let l=[];for(let e of t)e!==s&&l.unshift(e);s&&l.unshift(s);let o=new WeakMap,u=l.length,p=l[0],m=r-(u-1)*51;for(let e of l){let t=n.get(e);if(!t)continue;let l=t.currentMinWidth||t.minWidth||204,r=e===p,s=i.has(e),c=l>m,u=!r&&(s||c),h=d.get(e);o.set(e,{element:e,collapsed:u,currentMinWidth:h?.width??t.currentMinWidth,currentMaxWidth:h?.width??t.currentMaxWidth,flex:h?.flex??t.flex??1,maximized:e===a}),u?m-=51:m-=l-51}let h=[];for(let e of t){let t=o.get(e);t&&h.push(t)}for(let n of e)n({expandedElement:s||t[t.length-1]||null,panes:h,resizing:c})}}()}function id(e){let t,o,r,s=(0,i.c)(12),{children:a,currentMinWidth:d,flex:c,minWidth:u,paneKey:p,title:m,tone:h}=e,g=void 0===m?"Error":m,f=void 0===h?"critical":h;return s[0]!==g?(t=(0,n.jsx)(n7,{title:g}),s[0]=g,s[1]=t):t=s[1],s[2]!==a?(o=(0,n.jsx)(nG,{overflow:"auto",children:(0,n.jsx)(l.Box,{paddingX:4,paddingY:5,children:a})}),s[2]=a,s[3]=o):o=s[3],s[4]!==d||s[5]!==c||s[6]!==u||s[7]!==p||s[8]!==t||s[9]!==o||s[10]!==f?(r=(0,n.jsxs)(nN,{currentMinWidth:d,flex:c,id:p,minWidth:u,tone:f,children:[t,o]}),s[4]=d,s[5]=c,s[6]=u,s[7]=p,s[8]=t,s[9]=o,s[10]=f,s[11]=r):r=s[11],r}function ic(e){let t,l,o,s=(0,i.c)(6),{children:a,ms:d}=e,c=void 0===d?0:d,[u,p]=(0,r.useState)(c<=0);if(s[0]!==c?(t=()=>{if(c<=0)return;let e=setTimeout(()=>p(!0),c);return()=>{clearTimeout(e)}},l=[c],s[0]=c,s[1]=t,s[2]=l):(t=s[1],l=s[2]),(0,r.useEffect)(t,l),!u||!a){let e;return s[3]===Symbol.for("react.memo_cache_sentinel")?(e=(0,n.jsx)(n.Fragment,{}),s[3]=e):e=s[3],e}return s[4]!==a?(o="function"==typeof a?a():a,s[4]=a,s[5]=o):o=s[5],o}function iu(e){let t=[{ms:300,messageKey:"panes.resolving.default-message"},{ms:5e3,messageKey:"panes.resolving.slow-resolve-message"}];if(u.isDev){let n=["Check console for errors?","Is your observable/promise resolving?",e.length>0?`Structure path: ${e.join(" âž ")}`:""];t.push({ms:1e4,message:n.join(`
`)})}let n=(0,eE.of)(null);return(0,eD.merge)(...t.map(e=>n.pipe((0,e9.mapTo)("messageKey"in e?{messageKey:e.messageKey}:{message:e.message}),(0,te.delay)(e.ms))))}let ip=(0,eI.styled)(l.Flex).withConfig({displayName:"Content",componentId:"sc-1viiodb-0"})`opacity:0;transition:opacity 200ms;&[data-mounted]{opacity:1;}`,im=(0,r.memo)(e=>{let t,l,s,a,d,c,p,m,h,g,f=(0,i.c)(28),{delay:x,flex:b,message:y,minWidth:v,paneKey:j,path:w,selected:S,title:I,tone:C}=e,_=void 0===x?300:x,R=void 0===y?iu:y,{t:P}=(0,u.useTranslation)(T);e:{if("function"==typeof R){let e;f[0]!==R||f[1]!==w?(e=R(w?w.split(";"):[]),f[0]=R,f[1]=w,f[2]=e):e=f[2],t=e;break e}t=R}let k=t;f[3]!==k||f[4]!==P?(l=()=>"string"==typeof k?k:P("panes.resolving.default-message"),f[3]=k,f[4]=P,f[5]=l):l=f[5];let[E,D]=(0,r.useState)(l);f[6]!==k||f[7]!==P?(s=()=>{if("object"!=typeof k||"function"!=typeof k.subscribe)return;let e=k.subscribe(e=>{D("messageKey"in e?P(e.messageKey):e.message)});return()=>e.unsubscribe()},a=[k,P],f[6]=k,f[7]=P,f[8]=s,f[9]=a):(s=f[8],a=f[9]),(0,r.useEffect)(s,a);let[F,A]=(0,r.useState)(null),[V,M]=(0,r.useState)(!1);f[10]!==F?(d=()=>{if(F)return(0,o._raf2)(()=>M(!0))},c=[F],f[10]=F,f[11]=d,f[12]=c):(d=f[11],c=f[12]),(0,r.useEffect)(d,c);let L=V?"":void 0,z=I||E;f[13]!==z?(p=(0,n.jsx)(u.LoadingBlock,{showText:!0,title:z}),f[13]=z,f[14]=p):p=f[14],f[15]!==p||f[16]!==L?(m=(0,n.jsx)(ip,{align:"center","data-mounted":L,direction:"column",height:"fill",justify:"center",ref:A,children:p}),f[15]=p,f[16]=L,f[17]=m):m=f[17];let O=m;return f[18]!==O||f[19]!==_?(h=(0,n.jsx)(nG,{children:O}),f[18]=O,f[19]=_,f[20]=h):h=f[20],f[21]!==b||f[22]!==v||f[23]!==j||f[24]!==S||f[25]!==h||f[26]!==C?(g=(0,n.jsx)(nN,{flex:b,id:j,minWidth:v,selected:S,tone:C,children:h}),f[21]=b,f[22]=v,f[23]=j,f[24]=S,f[25]=h,f[26]=C,f[27]=g):g=f[27],g});function ih(){let e=(0,r.useContext)(s.DocumentPaneContext);if(!e)throw Error("DocumentPane: missing context value");return e}function ig(e){let t,l,o=(0,i.c)(8),{children:r,documentId:s,documentType:a}=e;return o[0]!==r||o[1]!==s||o[2]!==a?(t=(0,n.jsx)(ix,{documentId:s,documentType:a,children:r}),o[0]=r,o[1]=s,o[2]=a,o[3]=t):t=o[3],o[4]!==s||o[5]!==a||o[6]!==t?(l=(0,n.jsx)(u.CommentsEnabledProvider,{documentId:s,documentType:a,children:t}),o[4]=s,o[5]=a,o[6]=t,o[7]=l):l=o[7],l}function ix(e){let t,l,o,s,a,d,c=(0,i.c)(28),{children:p,documentId:m,documentType:g}=e,{enabled:f}=(0,u.useCommentsEnabled)(),{connectionState:x,onPathOpen:b,inspector:y,openInspector:v}=ih(),{selectedReleaseId:j}=(0,u.usePerspective)(),{params:w,setParams:S}=lr(),{resolveIntentLink:I}=(0,h.useRouter)(),C=w?.comment,_=w?.scheduledDraft,T=(0,r.useRef)(w);c[0]!==w?(t=()=>{T.current=w},l=[w],c[0]=w,c[1]=t,c[2]=l):(t=c[1],l=c[2]),(0,r.useLayoutEffect)(t,l),c[3]!==m||c[4]!==g||c[5]!==I||c[6]!==_||c[7]!==j?(o=e=>{let t=j&&!_?[["perspective",j]]:[],n=I("edit",{id:m,type:g,inspect:u.COMMENTS_INSPECTOR_NAME,comment:e,..._?{scheduledDraft:_}:{}},t);return`${window.location.origin}${n}`},c[3]=m,c[4]=g,c[5]=I,c[6]=_,c[7]=j,c[8]=o):o=c[8];let R=o;c[9]!==S?(s=()=>{S({...T.current,comment:void 0})},c[9]=S,c[10]=s):s=c[10];let P=s;c[11]!==y?.name||c[12]!==v?(a=()=>{y?.name!==u.COMMENTS_INSPECTOR_NAME&&v(u.COMMENTS_INSPECTOR_NAME)},c[11]=y?.name,c[12]=v,c[13]=a):a=c[13];let k=a;if(!f){let e;return c[14]!==p?(e=(0,n.jsx)(n.Fragment,{children:p}),c[14]=p,c[15]=e):e=c[15],e}let E=y?.name===u.COMMENTS_INSPECTOR_NAME,D="connecting"===x;return c[16]!==p||c[17]!==m||c[18]!==g||c[19]!==R||c[20]!==P||c[21]!==k||c[22]!==b||c[23]!==C||c[24]!==j||c[25]!==E||c[26]!==D?(d=(0,n.jsx)(u.CommentsProvider,{documentId:m,documentType:g,getCommentLink:R,isCommentsOpen:E,isConnecting:D,onClearSelectedComment:P,onCommentsOpen:k,onPathOpen:b,selectedCommentId:C,sortOrder:"desc",type:"field",releaseId:j,children:p}),c[16]=p,c[17]=m,c[18]=g,c[19]=R,c[20]=P,c[21]=k,c[22]=b,c[23]=C,c[24]=j,c[25]=E,c[26]=D,c[27]=d):d=c[27],d}function ib(e){let t,l,o,s,a,d,c=(0,i.c)(20),{children:p}=e,{data:m}=(0,u.useActiveReleases)(),{actions:h,editState:g,isInitialValueLoading:f,revisionId:x}=ih(),b=(0,r.useRef)(null);if(c[0]!==m||c[1]!==g?.release){let e;c[3]!==g?.release?(e=e=>e===g?.release,c[3]=g?.release,c[4]=e):e=c[4],t=m.map(iy).find(e),c[0]=m,c[1]=g?.release,c[2]=t}else t=c[2];let y=t;c[5]!==g||c[6]!==f||c[7]!==y||c[8]!==x?(l=g?{...g,release:y,revision:x||void 0,initialValueResolved:!f}:null,c[5]=g,c[6]=f,c[7]=y,c[8]=x,c[9]=l):l=c[9];let v=l;if(!v)return null;c[10]===Symbol.for("react.memo_cache_sentinel")?(o=()=>b.current?.(),c[10]=o):o=c[10],c[11]!==v?(s={...v,onComplete:o},c[11]=v,c[12]=s):s=c[12];let j=h||u.EMPTY_ARRAY;return c[13]!==v||c[14]!==p?(a=e=>{let{states:t}=e;return(0,n.jsx)(ij,{states:t,actionProps:v,children:p})},c[13]=v,c[14]=p,c[15]=a):a=c[15],c[16]!==s||c[17]!==j||c[18]!==a?(d=(0,n.jsx)(u.GetHookCollectionState,{args:s,hooks:j,resetRef:b,children:a}),c[16]=s,c[17]=j,c[18]=a,c[19]=d):d=c[19],d}function iy(e){return(0,u.getReleaseIdFromReleaseDocumentId)(e._id)}im.displayName="Memo(LoadingPane)";let iv=["delete","duplicate","publish","unpublish","unlinkFromCanvas","editInCanvas","linkToCanvas","schedule","discardVersion","unpublishVersion"];function ij(e){let t,l,o,r=(0,i.c)(9),{states:a,children:d,actionProps:c}=e,{t:p}=(0,u.useTranslation)(T);r[0]!==c?(t=(0,u.getDocumentIdForCanvasLink)(c),r[0]=c,r[1]=t):t=r[1];let{isLinked:m}=(0,u.useCanvasCompanionDoc)(t);return r[2]!==m||r[3]!==a||r[4]!==p?(l=m?a.map(e=>e.action&&iv.includes(e.action)?e:{...e,disabled:!0,title:p("action.disabled-by-canvas.tooltip")}):a,r[2]=m,r[3]=a,r[4]=p,r[5]=l):l=r[5],r[6]!==d||r[7]!==l?(o=(0,n.jsx)(s.DocumentActionsStateContext.Provider,{value:l,children:d}),r[6]=d,r[7]=l,r[8]=o):o=r[8],o}function iw(){let e=(0,r.useContext)(s.StructureToolContext);if(!e)throw Error("StructureTool: missing context value");return e}let iS={},iI="inspect:",iC=[{id:"inspectors"},{id:"links"}],i_="sanity/structure/history";function iT(e){let t,l,o,s,a,d,c,p,m,h=(0,i.c)(22),{documentId:g,documentType:f,inspectors:x,onMenuItems:b}=e,y=x.length;h[0]!==y?(t=()=>Array.from(Array(y)),h[0]=y,h[1]=t):t=h[1];let[v,j]=(0,r.useState)(t);h[2]!==y||h[3]!==v?(l=()=>{if(v.length!==y){let e=Array.from(Array(y));for(let t=0;t<y;t++)e[t]=v[t];j(e)}},o=[y,v],h[2]=y,h[3]=v,h[4]=l,h[5]=o):(l=h[4],o=h[5]),(0,r.useEffect)(l,o),h[6]===Symbol.for("react.memo_cache_sentinel")?(s=(e,t)=>{j(n=>{let i=[...n];return i[e]=t,i})},h[6]=s):s=h[6];let w=s;if(h[7]!==v||h[8]!==b?(a=()=>{b(v.filter(Boolean))},d=[v,b],h[7]=v,h[8]=b,h[9]=a,h[10]=d):(a=h[9],d=h[10]),(0,r.useEffect)(a,d),h[11]!==g||h[12]!==f||h[13]!==x){let e;h[15]!==g||h[16]!==f?(e=(e,t)=>e.useMenuItem?[function({documentId:e,documentType:t,index:n,setMenuItem:l,useMenuItem:o}){return(0,r.memo)(function(){let s,a,d,c=(0,i.c)(4);c[0]===Symbol.for("react.memo_cache_sentinel")?(s={documentId:e,documentType:t},c[0]=s):s=c[0];let p=o(s),m=(0,u.useUnique)(p);return c[1]!==m?(a=()=>{l(n,m)},d=[m],c[1]=m,c[2]=a,c[3]=d):(a=c[2],d=c[3]),(0,r.useEffect)(a,d),null})}({documentId:g,documentType:f,index:t,setMenuItem:w,useMenuItem:e.useMenuItem}),e.name]:[iP,""],h[15]=g,h[16]=f,h[17]=e):e=h[17],c=x.map(e),h[11]=g,h[12]=f,h[13]=x,h[14]=c}else c=h[14];let S=c;return h[18]!==S?(p=S.map(iR),h[18]=S,h[19]=p):p=h[19],h[20]!==p?(m=(0,n.jsx)(n.Fragment,{children:p}),h[20]=p,h[21]=m):m=h[21],m}function iR(e){let[t,i]=e;return i&&(0,n.jsx)(t,{},i)}function iP(){return null}function ik(){let e,t,n,l,o=(0,i.c)(22),{connectionState:r,schemaType:s,editState:a,isDeleted:d,lastRevisionDocument:c}=ih(),{selectedPerspectiveName:p}=(0,u.usePerspective)(),{t:m}=(0,u.useTranslation)(T);e:{if(d){e=c;break e}if(p&&(0,u.isPublishedPerspective)(p)){e=a?.published;break e}e=a?.version||a?.draft||a?.published}let h=e,g=!!h;t:{if(d&&c&&s)try{let e;o[0]!==c||o[1]!==s?(e=(0,u.prepareForPreview)(c,s),o[0]=c,o[1]=s,o[2]=e):e=o[2],t=e;break t}catch(e){console.warn("Failed to prepare preview for deleted document:",e),t=null;break t}t=null}let f=t,x=g&&!d;o[3]!==h||o[4]!==s||o[5]!==x?(n={enabled:x,schemaType:s,value:h},o[3]=h,o[4]=s,o[5]=x,o[6]=n):n=o[6];let{error:b,value:y}=(0,u.useValuePreview)(n);if("connecting"===r&&!g){let e;return o[7]===Symbol.for("react.memo_cache_sentinel")?(e={error:void 0,title:void 0},o[7]=e):e=o[7],e}if(d&&f){let e;return o[8]!==f.title?(e={error:void 0,title:f.title},o[8]=f.title,o[9]=e):e=o[9],e}if(!y&&!d){let e,t,n=s?.title||s?.name;return o[10]!==m||o[11]!==n?(e=m("panes.document-header-title.new.text",{schemaType:n}),o[10]=m,o[11]=n,o[12]=e):e=o[12],o[13]!==e?(t={error:void 0,title:e},o[13]=e,o[14]=t):t=o[14],t}if(b){let e,t;return o[15]!==b.message||o[16]!==m?(e=m("panes.document-list-pane.error.text",{error:b.message}),o[15]=b.message,o[16]=m,o[17]=e):e=o[17],o[18]!==e?(t={error:e,title:void 0},o[18]=e,o[19]=t):t=o[19],t}let v=y?.title;return o[20]!==v?(l={error:void 0,title:v},o[20]=v,o[21]=l):l=o[21],l}iT.displayName="DocumentInspectorMenuItemsResolver";let iE=["patch","commit"],iD=(0,r.memo)(function(){let e,t,l,s,a,d=(0,i.c)(13),{push:c}=(0,o.useToast)(),{documentId:p,documentType:m,value:h}=ih(),g=ik(),f=g.error,x=(0,u.useDocumentOperationEvent)(p,m),b=(0,r.useRef)(x),y=lr(),{t:v}=(0,u.useTranslation)(T),{handleOpenDialog:j}=(0,u.useDocumentLimitsUpsellContext)();e:{if(!g.title&&!f&&!iE.includes(x?.op)&&"string"==typeof h.title&&x?.type==="success"){e=h.title;break e}e=g.title}let w=e;d[0]!==v||d[1]!==w?(t=w||v("panes.document-operation-results.operation-undefined-title"),d[0]=v,d[1]=w,d[2]=t):t=d[2];let S=t;d[3]!==S?(l=S.length>25?`${S.slice(0,25)}...`:S,d[3]=S,d[4]=l):l=d[4];let I=l;return d[5]!==I||d[6]!==x||d[7]!==j||d[8]!==y||d[9]!==c||d[10]!==v?(s=()=>{let e;if(x&&x!==b.current){if("error"===x.type){if((0,u.isDocumentLimitError)(x.error))return void j("document_action");c({closable:!0,duration:3e4,status:"error",title:v("panes.document-operation-results.operation-error",{context:x.op}),description:(0,n.jsxs)("details",{children:[(0,n.jsx)("summary",{children:v("panes.document-operation-results.error.summary.title")}),x.error.message]})})}return"success"!==x.type||iE.includes(x.op)||c({closable:!0,status:"success",title:(0,n.jsx)(u.Translate,{context:x.op,i18nKey:"panes.document-operation-results.operation-success",t:v,values:{op:x.op,title:I},components:{Strong:"strong"}})}),"success"===x.type&&"delete"===x.op&&(e=setTimeout(()=>y.closeCurrentAndAfter(),0)),b.current=x,()=>clearTimeout(e)}},a=[x,y,c,v,I,j],d[5]=I,d[6]=x,d[7]=j,d[8]=y,d[9]=c,d[10]=v,d[11]=s,d[12]=a):(s=d[11],a=d[12]),(0,r.useEffect)(s,a),null}),iF=(0,eI.styled)(l.Card).withConfig({displayName:"Root",componentId:"sc-1anmotz-0"})({position:"relative",zIndex:"1",lineHeight:"0"});function iA(e){let t,o,r,s,a,d,c,p,h,g,x,b,y=(0,i.c)(25);y[0]!==e?({as:r,children:t,closeButtonLabel:o,onClose:s,title:d,...a}=e,y[0]=e,y[1]=t,y[2]=o,y[3]=r,y[4]=s,y[5]=a,y[6]=d):(t=y[1],o=y[2],r=y[3],s=y[4],a=y[5],d=y[6]);let{t:v}=(0,u.useTranslation)(T);return y[7]!==d?(c=(0,n.jsx)(l.Box,{flex:1,padding:3,children:(0,n.jsx)(l.Text,{as:"h1",size:1,weight:"medium",children:d})}),y[7]=d,y[8]=c):c=y[8],y[9]!==v?(p=v("document-inspector.close-button.tooltip"),y[9]=v,y[10]=p):p=y[10],y[11]!==p?(h={content:p},y[11]=p,y[12]=h):h=y[12],y[13]!==o||y[14]!==s||y[15]!==h?(g=(0,n.jsx)(l.Box,{flex:"none",padding:1,children:(0,n.jsx)(m.Button,{"aria-label":o,icon:f.CloseIcon,mode:"bleed",onClick:s,tooltipProps:h})}),y[13]=o,y[14]=s,y[15]=h,y[16]=g):g=y[16],y[17]!==c||y[18]!==g?(x=(0,n.jsxs)(l.Flex,{padding:2,children:[c,g]}),y[17]=c,y[18]=g,y[19]=x):x=y[19],y[20]!==t||y[21]!==r||y[22]!==a||y[23]!==x?(b=(0,n.jsxs)(iF,{...a,as:r,children:[x,t]}),y[20]=t,y[21]=r,y[22]=a,y[23]=x,y[24]=b):b=y[24],b}function iV(e){let t,o,r,s=(0,i.c)(14),{documentId:a,documentType:d,flex:c}=e,{collapsed:p}=nH(),{closeInspector:m,inspector:h}=ih(),{features:g}=iw();s[0]!==m||s[1]!==h?(t=()=>{h&&m(h.name)},s[0]=m,s[1]=h,s[2]=t):t=s[2];let f=t;if(p||!h)return null;let x=h.component;s[3]!==x||s[4]!==a||s[5]!==d||s[6]!==f?(o=(0,n.jsx)(x,{onClose:f,documentId:a,documentType:d}),s[3]=x,s[4]=a,s[5]=d,s[6]=f,s[7]=o):o=s[7];let b=o;if(g.resizablePanes){let e;return s[8]!==b||s[9]!==c?(e=(0,n.jsx)(u.Resizable,{as:"aside","data-ui":"DocumentInspectorPanel",flex:c,resizerPosition:"left",maxWidth:540,minWidth:320,children:b}),s[8]=b,s[9]=c,s[10]=e):e=s[10],e}return s[11]!==b||s[12]!==c?(r=(0,n.jsx)(l.Box,{as:"aside","data-ui":"DocumentInspectorPanel",flex:c,children:b}),s[11]=b,s[12]=c,s[13]=r):r=s[13],r}function iM(e,t,n){let l,o,r,s,a=(0,i.c)(16),d=(0,u.useKeyValueStore)();a[0]!==t||a[1]!==e?(l=["studio.structure-tool",e,t].filter(Boolean),a[0]=t,a[1]=e,a[2]=l):l=a[2];let c=l.join(".");if(a[3]!==n||a[4]!==d||a[5]!==c){let e;a[7]!==n?(e=e=>null===e?n:e,a[7]=n,a[8]=e):e=a[8],o=d.getKey(c).pipe((0,ek.map)(e)),a[3]=n,a[4]=d,a[5]=c,a[6]=o}else o=a[6];let p=(0,e_.useObservable)(o,n);a[9]!==d||a[10]!==c||a[11]!==p?(r=async e=>{e!==p&&await d.setKey(c,e)},a[9]=d,a[10]=c,a[11]=p,a[12]=r):r=a[12];let m=r;return a[13]!==m||a[14]!==p?(s=[p,m],a[13]=m,a[14]=p,a[15]=s):s=a[15],s}let iL={id:"parsed",title:"document-inspector.view-mode.parsed"},iz={id:"raw",title:"document-inspector.view-mode.raw-json"},iO=[iL,iz],iB=new tv.default({maxSize:1e3});function iN(e){let{path:t}=e,n=iB.get(t);void 0!==n&&iB.set(t,!n)}function i$(e){let t=window.getSelection();if(t){let n=document.createRange();t.removeAllRanges(),n.selectNodeContents(e),t.addRange(n)}}function iH(e){i$(e.target)}function iG(e){65===e.keyCode&&(e.metaKey||e.ctrlKey)&&(e.preventDefault(),i$(e.currentTarget))}let iU=eI.styled.div.withConfig({displayName:"JSONInspectorWrapper",componentId:"sc-1nlr6yd-0"})(({theme:e})=>{let{color:t,fonts:n,space:i}=e.sanity;return eI.css`
    & .json-inspector,
    & .json-inspector .json-inspector__selection {
      font-family: ${n.code.family};
      font-size: ${n.code.sizes[1].fontSize}px;
      line-height: ${n.code.sizes[1].lineHeight}px;
      color: var(--card-code-fg-color);
    }

    & .json-inspector .json-inspector__leaf {
      padding-left: ${(0,l.rem)(i[4])};
    }

    & .json-inspector .json-inspector__leaf.json-inspector__leaf_root {
      padding-top: ${(0,l.rem)(i[3])};
      padding-left: 0;
    }

    & .json-inspector > .json-inspector__leaf_root > .json-inspector__line > .json-inspector__key {
      display: none;
    }

    & .json-inspector .json-inspector__line {
      display: block;
      position: relative;
      cursor: default;
    }

    & .json-inspector .json-inspector__line::after {
      content: '';
      position: absolute;
      top: 0;
      left: -200px;
      right: -50px;
      bottom: 0;
      z-index: -1;
      pointer-events: none;
    }

    & .json-inspector .json-inspector__line:hover::after {
      background: var(--card-code-bg-color);
    }

    & .json-inspector .json-inspector__leaf_composite > .json-inspector__line {
      cursor: pointer;
    }

    & .json-inspector .json-inspector__leaf_composite > .json-inspector__line::before {
      content: 'â–¸ ';
      margin-left: calc(0 - ${(0,l.rem)(i[4])} + 3px);
      font-size: ${n.code.sizes[1].fontSize}px;
      line-height: ${n.code.sizes[1].lineHeight}px;
    }

    &
      .json-inspector
      .json-inspector__leaf_expanded.json-inspector__leaf_composite
      > .json-inspector__line::before {
      content: 'â–¾ ';
      font-size: ${n.code.sizes[1].fontSize}px;
      line-height: ${n.code.sizes[1].lineHeight}px;
    }

    & .json-inspector .json-inspector__radio,
    & .json-inspector .json-inspector__flatpath {
      display: none;
    }

    & .json-inspector .json-inspector__value {
      margin-left: ${(0,l.rem)(i[4]/2)};
    }

    &
      .json-inspector
      > .json-inspector__leaf_root
      > .json-inspector__line
      > .json-inspector__key
      + .json-inspector__value {
      margin: 0;
    }

    & .json-inspector .json-inspector__key {
      color: ${t.syntax.property};
    }

    & .json-inspector .json-inspector__value_helper,
    & .json-inspector .json-inspector__value_null {
      color: ${t.syntax.constant};
    }

    & .json-inspector .json-inspector__not-found {
      padding-top: ${(0,l.rem)(i[3])};
    }

    & .json-inspector .json-inspector__value_string {
      color: ${t.syntax.string};
    }

    & .json-inspector .json-inspector__value_boolean {
      color: ${t.syntax.boolean};
    }

    & .json-inspector .json-inspector__value_number {
      color: ${t.syntax.number};
    }

    & .json-inspector .json-inspector__show-original {
      display: inline-block;
      padding: 0 6px;
      cursor: pointer;
    }

    & .json-inspector .json-inspector__show-original:hover {
      color: inherit;
    }

    & .json-inspector .json-inspector__show-original::before {
      content: 'â†”';
    }

    & .json-inspector .json-inspector__show-original:hover::after {
      content: ' expand';
    }
  `});function iq(e){let t,o,r,s=(0,i.c)(8),{onChange:a,query:d}=e;s[0]!==a?(t=e=>a(e.target.value),s[0]=a,s[1]=t):t=s[1];let c=t,{t:p}=(0,u.useTranslation)(T);s[2]!==p?(o=p("document-inspector.search.placeholder"),s[2]=p,s[3]=o):o=s[3];let m=d||"";return s[4]!==c||s[5]!==o||s[6]!==m?(r=(0,n.jsx)(l.TextInput,{icon:f.SearchIcon,onChange:c,placeholder:o,radius:2,value:m}),s[4]=c,s[5]=o,s[6]=m,s[7]=r):r=s[7],r}function iW(e){let t,r,s,a,d,c,p,h,g,f,x,b,y,v,j,w,S=(0,i.c)(49),{value:I}=e,{onInspectClose:C,paneKey:_}=ih(),R=`${_}_inspect_`,[P,k]=iM("inspect-view-mode",null,"parsed");S[0]!==P?(t=iO.find(e=>e.id===P),S[0]=P,S[1]=t):t=S[1];let E=t;S[2]!==k?(r=async()=>{await k(iL.id)},S[2]=k,S[3]=r):r=S[3];let D=r;S[4]!==k?(s=async()=>{await k(iz.id)},S[4]=k,S[5]=s):s=S[5];let F=s,{t:A}=(0,u.useTranslation)(T),V=`${R}dialog`;S[6]!==A||S[7]!==I?(a=(0,u.isRecord)(I)&&(0,u.isString)(I._id)&&(0,u.isString)(I._type)?(0,n.jsx)(u.Translate,{t:A,i18nKey:"document-inspector.dialog.title",components:{DocumentTitle:()=>(0,n.jsx)("em",{children:(0,n.jsx)(sj,{document:I})})}}):(0,n.jsx)("em",{children:A("document-inspector.dialog.title-no-value")}),S[6]=A,S[7]=I,S[8]=a):a=S[8],S[9]===Symbol.for("react.memo_cache_sentinel")?(d={position:"sticky",bottom:0,zIndex:3},S[9]=d):d=S[9];let M=`${R}tabpanel`,L=`${R}tab-${iL.id}`;S[10]!==A?(c=A(iL.title),S[10]=A,S[11]=c):c=S[11];let z=E===iL;S[12]!==D||S[13]!==M||S[14]!==L||S[15]!==c||S[16]!==z?(p=(0,n.jsx)(m.Tab,{"aria-controls":M,id:L,label:c,onClick:D,selected:z}),S[12]=D,S[13]=M,S[14]=L,S[15]=c,S[16]=z,S[17]=p):p=S[17];let O=`${R}tabpanel`,B=`${R}tab-${iz.id}`;S[18]!==A?(h=A(iz.title),S[18]=A,S[19]=h):h=S[19];let N=E===iz;S[20]!==F||S[21]!==O||S[22]!==B||S[23]!==h||S[24]!==N?(g=(0,n.jsx)(m.Tab,{"aria-controls":O,id:B,label:h,onClick:F,selected:N}),S[20]=F,S[21]=O,S[22]=B,S[23]=h,S[24]=N,S[25]=g):g=S[25],S[26]!==p||S[27]!==g?(f=(0,n.jsx)(l.Card,{padding:3,paddingTop:0,shadow:1,style:d,children:(0,n.jsxs)(l.TabList,{space:1,children:[p,g]})}),S[26]=p,S[27]=g,S[28]=f):f=S[28];let $=`${R}tab-${P}`,H=`${R}tabpanel`;return S[29]===Symbol.for("react.memo_cache_sentinel")?(x={outline:"none"},S[29]=x):x=S[29],S[30]!==I||S[31]!==E?(b=E===iL&&(0,n.jsx)(iU,{children:(0,n.jsx)(ty.JsonInspector,{data:I,isExpanded:function e(t,n){let i=iB.get(t);return void 0===i?(iB.set(t,Array.isArray(n)||(0,u.isRecord)(n)),e(t,n)):i},onClick:iN,search:iq,filterOptions:{ignoreCase:!0}})}),S[30]=I,S[31]=E,S[32]=b):b=S[32],S[33]!==I||S[34]!==E?(y=E===iz&&(0,n.jsx)(l.Code,{language:"json",tabIndex:0,onKeyDown:iG,onDoubleClick:iH,size:1,children:JSON.stringify(I,null,2)}),S[33]=I,S[34]=E,S[35]=y):y=S[35],S[36]!==$||S[37]!==H||S[38]!==b||S[39]!==y?(v=(0,n.jsxs)(o.TabPanel,{"aria-labelledby":$,flex:1,id:H,overflow:"auto",padding:4,style:x,children:[b,y]}),S[36]=$,S[37]=H,S[38]=b,S[39]=y,S[40]=v):v=S[40],S[41]!==f||S[42]!==v?(j=(0,n.jsxs)(l.Flex,{direction:"column",height:"fill",children:[f,v]}),S[41]=f,S[42]=v,S[43]=j):j=S[43],S[44]!==C||S[45]!==j||S[46]!==V||S[47]!==a?(w=(0,n.jsx)(m.Dialog,{bodyHeight:"fill",id:V,header:a,onClose:C,onClickOutside:C,padding:!1,width:2,children:j}),S[44]=C,S[45]=j,S[46]=V,S[47]=a,S[48]=w):w=S[48],w}function iK(e){let t,o,r,s,a,d,c,u,p,h,g,f=(0,i.c)(22);f[0]!==e?({action:o,content:r,icon:t,tone:a,paddingY:d,...s}=e,f[0]=e,f[1]=t,f[2]=o,f[3]=r,f[4]=s,f[5]=a,f[6]=d):(t=f[1],o=f[2],r=f[3],s=f[4],a=f[5],d=f[6]);let x=void 0===a?"transparent":a,b=void 0===d?2:d;return f[7]!==t?(c=t&&(0,n.jsx)(l.Text,{size:0,children:(0,n.jsx)(t,{})}),f[7]=t,f[8]=c):c=f[8],f[9]!==r?(u=(0,n.jsx)(l.Flex,{align:"center",flex:1,gap:2,paddingY:2,children:r}),f[9]=r,f[10]=u):u=f[10],f[11]!==o?(p=o&&(0,n.jsx)(m.Button,{...o,mode:o.mode||"ghost",tone:o.tone||"default"}),f[11]=o,f[12]=p):p=f[12],f[13]!==c||f[14]!==u||f[15]!==p?(h=(0,n.jsxs)(l.Flex,{align:"center",gap:3,paddingX:2,children:[c,u,p]}),f[13]=c,f[14]=u,f[15]=p,f[16]=h):h=f[16],f[17]!==b||f[18]!==s||f[19]!==h||f[20]!==x?(g=(0,n.jsx)(l.Box,{padding:1,children:(0,n.jsx)(l.Card,{radius:3,paddingX:2,paddingY:b,tone:x,...s,children:h})}),f[17]=b,f[18]=s,f[19]=h,f[20]=x,f[21]=g):g=f[21],g}function iY(){let e=(0,i.c)(3),{isDeleted:t,isDeleting:l,ready:o}=ih(),{selectedPerspective:r}=(0,u.usePerspective)();if(!o)return null;if(!(0,u.isPublishedPerspective)(r)&&!(0,u.isDraftPerspective)(r)&&(0,u.isReleaseDocument)(r)&&"archived"===r.state){let t;return e[0]!==r?(t=(0,n.jsx)(iJ,{release:r}),e[0]=r,e[1]=t):t=e[1],t}if(t&&!l){let t;return e[2]===Symbol.for("react.memo_cache_sentinel")?(t=(0,n.jsx)(iX,{}),e[2]=t):t=e[2],t}}function iX(){let e,t,o,r,s,a,d=(0,i.c)(17),{documentId:c,documentType:p}=ih(),{restore:m}=(0,u.useDocumentOperation)(c,p),{navigateIntent:g}=(0,h.useRouter)();d[0]!==c||d[1]!==p||d[2]!==g||d[3]!==m?(e=()=>{m.execute("lastRevision"),g("edit",{id:c,type:p})},d[0]=c,d[1]=p,d[2]=g,d[3]=m,d[4]=e):e=d[4];let x=e,{t:b}=(0,u.useTranslation)(T);return d[5]!==b?(t=b("banners.deleted-document-banner.restore-button.text"),d[5]=b,d[6]=t):t=d[6],d[7]!==x||d[8]!==t?(o={onClick:x,text:t},d[7]=x,d[8]=t,d[9]=o):o=d[9],d[10]!==b?(r=b("banners.deleted-document-banner.text"),d[10]=b,d[11]=r):r=d[11],d[12]!==r?(s=(0,n.jsx)(l.Text,{size:1,weight:"medium",children:r}),d[12]=r,d[13]=s):s=d[13],d[14]!==o||d[15]!==s?(a=(0,n.jsx)(iK,{action:o,content:s,"data-testid":"deleted-document-banner",icon:f.ReadOnlyIcon}),d[14]=o,d[15]=s,d[16]=a):a=d[16],a}let iJ=e=>{let t,o,r,s=(0,i.c)(8),{release:a}=e,{t:d}=(0,u.useTranslation)();return s[0]!==a.metadata?.title||s[1]!==d?(t=a.metadata?.title||d("release.placeholder-untitled-release"),s[0]=a.metadata?.title,s[1]=d,s[2]=t):t=s[2],s[3]!==t?(o={title:t},s[3]=t,s[4]=o):o=s[4],s[5]!==d||s[6]!==o?(r=(0,n.jsx)(iK,{tone:"caution",content:(0,n.jsx)(l.Text,{size:1,weight:"medium",children:(0,n.jsx)(u.Translate,{t:d,i18nKey:"banners.deleted-release-banner.text",values:o})}),"data-testid":"deleted-release-banner",icon:f.DocumentRemoveIcon}),s[5]=d,s[6]=o,s[7]=r):r=s[7],r};function iZ(){let e,t,o=(0,i.c)(5),{schemaType:r}=ih(),{t:s}=(0,u.useTranslation)(T);return(0,p.isDeprecatedSchemaType)(r)?(o[0]!==s?(e=(0,n.jsx)(u.Translate,{t:s,i18nKey:"banners.deprecated-document-type-banner.text"}),o[0]=s,o[1]=e):e=o[1],o[2]!==r.deprecated.reason||o[3]!==e?(t=(0,n.jsx)(iK,{content:(0,n.jsxs)(l.Text,{size:1,weight:"medium",children:[e," ",r.deprecated.reason]}),"data-testid":"deprecated-document-type-banner",icon:f.ErrorOutlineIcon}),o[2]=r.deprecated.reason,o[3]=e,o[4]=t):t=o[4],t):null}let iQ=(0,tc.defineEvent)({name:"Ask To Edit Dialog Opened",version:1,description:'User clicked the "Ask to edit" button in the document permissions banner'}),i0=(0,tc.defineEvent)({name:"Ask To Edit Request Sent",version:1,description:"User sent a role change request from the dialog"}),i1=(0,eI.styled)(l.Box).withConfig({displayName:"DialogBody",componentId:"sc-68p9pn-0"})`box-sizing:border-box;`;function i2(e){let t,s,a,d,c,p,h,g,f,x,b,y,v,j,w,S=(0,i.c)(56),{onClose:I,onRequestSubmitted:C}=e,{t:_}=(0,u.useTranslation)(T),R=(0,td.useTelemetry)(),P=`request-permissions-${(0,r.useId)()}`,k=(0,u.useProjectId)();S[0]===Symbol.for("react.memo_cache_sentinel")?(t={apiVersion:"2024-09-26"},S[0]=t):t=S[0];let E=(0,u.useClient)(t),D=(0,o.useToast)(),F=(0,u.useZIndex)(),[A,V]=(0,r.useState)(!1),[M,L]=(0,r.useState)(""),[z,O]=(0,r.useState)(),[B,N]=(0,r.useState)(!1),[$,H]=(0,r.useState)(!1);e:{let e,t="administrator";if(!k||!E){let e;S[1]===Symbol.for("react.memo_cache_sentinel")?(e=(0,eE.of)(t),S[1]=e):e=S[1],s=e;break e}if(S[2]!==E.observable||S[3]!==k){let n,i;S[5]===Symbol.for("react.memo_cache_sentinel")?(n=e=>e.filter(i4).find(i3)?"editor":t,S[5]=n):n=S[5],S[6]===Symbol.for("react.memo_cache_sentinel")?(i=()=>(0,eE.of)(t),S[6]=i):i=S[6],e=E.observable.request({url:`/projects/${k}/roles`}).pipe((0,ek.map)(n),(0,eF.startWith)(t),(0,eA.catchError)(i)),S[2]=E.observable,S[3]=k,S[4]=e}else e=S[4];s=e}let G=(0,e_.useObservable)(s);S[7]!==E||S[8]!==M||S[9]!==C||S[10]!==k||S[11]!==G||S[12]!==R||S[13]!==D?(a=()=>{V(!0),E.request({url:`/access/project/${k}/requests`,method:"post",body:{note:M,requestUrl:window?.location.href,requestedRole:G,type:"role"}}).then(e=>{e&&(C&&C(),R.log(i0),D.push({title:"Edit access requested"}))}).catch(e=>{let t=e?.response?.statusCode,n=e?.response?.body?.message;429===t&&(N(!0),O(n)),409===t?(H(!0),O(n)):D.push({title:"There was a problem submitting your request.",status:"error"})}).finally(()=>{V(!1)})},S[7]=E,S[8]=M,S[9]=C,S[10]=k,S[11]=G,S[12]=R,S[13]=D,S[14]=a):a=S[14];let U=a,q=F.fullscreen;S[15]!==_?(d=_("request-permission-dialog.header.text"),S[15]=_,S[16]=d):d=S[16],S[17]!==_?(c=_("confirm-dialog.cancel-button.fallback-text"),S[17]=_,S[18]=c):c=S[18],S[19]!==I||S[20]!==c?(p={onClick:I,text:c},S[19]=I,S[20]=c,S[21]=p):p=S[21];let W=B||$;return S[22]!==_?(h=_("request-permission-dialog.confirm-button.text"),S[22]=_,S[23]=h):h=S[23],S[24]!==A||S[25]!==U||S[26]!==W||S[27]!==h?(g={onClick:U,loading:A,disabled:W,text:h,tone:"primary",type:"submit"},S[24]=A,S[25]=U,S[26]=W,S[27]=h,S[28]=g):g=S[28],S[29]!==g||S[30]!==p?(f={cancelButton:p,confirmButton:g},S[29]=g,S[30]=p,S[31]=f):f=S[31],S[32]!==_?(x=_("request-permission-dialog.description.text"),S[32]=_,S[33]=x):x=S[33],S[34]!==x?(b=(0,n.jsx)(l.Text,{children:x}),S[34]=x,S[35]=b):b=S[35],S[36]!==$||S[37]!==B||S[38]!==A||S[39]!==z||S[40]!==M||S[41]!==U||S[42]!==_?(y=B||$?(0,n.jsx)(l.Card,{tone:"caution",padding:3,radius:2,shadow:1,children:(0,n.jsxs)(l.Text,{size:1,children:[B&&(0,n.jsx)(n.Fragment,{children:z??_("request-permission-dialog.warning.limit-reached.text")}),$&&(0,n.jsx)(n.Fragment,{children:z??_("request-permission-dialog.warning.denied.text")})]})}):(0,n.jsxs)(l.Stack,{space:3,paddingBottom:0,children:[(0,n.jsx)(l.TextInput,{placeholder:_("request-permission-dialog.note-input.placeholder.text"),disabled:A,onKeyDown:e=>{"Enter"===e.key&&U()},maxLength:150,value:M,onChange:e=>{L(e.currentTarget.value)}}),(0,n.jsx)(l.Text,{align:"right",muted:!0,size:1,children:`${M.length}/150`})]}),S[36]=$,S[37]=B,S[38]=A,S[39]=z,S[40]=M,S[41]=U,S[42]=_,S[43]=y):y=S[43],S[44]!==b||S[45]!==y?(v=(0,n.jsx)(i1,{children:(0,n.jsxs)(l.Stack,{space:4,children:[b,y]})}),S[44]=b,S[45]=y,S[46]=v):v=S[46],S[47]!==P||S[48]!==I||S[49]!==f||S[50]!==v||S[51]!==d?(j=(0,n.jsx)(m.Dialog,{width:1,id:P,header:d,footer:f,onClose:I,onClickOutside:I,children:v}),S[47]=P,S[48]=I,S[49]=f,S[50]=v,S[51]=d,S[52]=j):j=S[52],S[53]!==j||S[54]!==F.fullscreen?(w=(0,n.jsx)(o.DialogProvider,{position:"fixed",zOffset:q,children:j}),S[53]=j,S[54]=F.fullscreen,S[55]=w):w=S[55],w}function i3(e){return"editor"===e.name}function i4(e){return e?.appliesToUsers}(0,eI.styled)(l.Flex).attrs({align:"center",direction:"column",justify:"center"}).withConfig({displayName:"LoadingContainer",componentId:"sc-68p9pn-1"})`height:110px;`;let i5={loading:!0,error:!1,status:void 0},i6={loading:!1,error:!1,status:"none"},i8={loading:!1,error:!1,status:"declined"},i7={loading:!1,error:!1,status:"pending"},i9={loading:!1,error:!1,status:"expired"};function le(e){let t,o,s,a,d,c,p,m,h=(0,i.c)(29),{requiredPermission:g}=e,x=(0,u.useCurrentUser)(),{data:b,loading:y,error:v}=(()=>{let e,t,n,l=(0,i.c)(9);l[0]===Symbol.for("react.memo_cache_sentinel")?(e={apiVersion:"2024-07-01"},l[0]=e):e=l[0];let o=(0,u.useClient)(e),r=(0,u.useProjectId)();e:{var s,a;let e;if(!o||!r){let e;l[1]===Symbol.for("react.memo_cache_sentinel")?(e=(0,eE.of)(i6),l[1]=e):e=l[1],t=e;break e}l[2]!==o||l[3]!==r?(s=o,a=r,e=s.observable.request({url:"/access/requests/me",tag:"use-role-requests-status"}).pipe((0,ek.map)(e=>{if(!e||0===e.length)return i6;let t=e.filter(e=>e.resourceId===a&&"role"===e.type),n=t.find(e=>"declined"===e.status);return n&&(0,tj.isAfter)((0,tw.addWeeks)(new Date(n.createdAt),2),new Date)?i8:t.find(e=>"pending"===e.status&&(0,tj.isAfter)((0,tw.addWeeks)(new Date(e.createdAt),2),new Date))?i7:t.find(e=>"pending"===e.status&&(0,tS.isBefore)((0,tw.addWeeks)(new Date(e.createdAt),2),new Date))?i9:i6}),(0,eA.catchError)(e=>(console.error("Failed to fetch access requests",e),(0,eE.of)({loading:!1,error:!0,status:void 0}))),(0,eF.startWith)(i5)),l[2]=o,l[3]=r,l[4]=e):e=l[4],t=e}let d=t,{loading:c,error:p,status:m}=(0,e_.useObservable)(d,i5);return l[5]!==p||l[6]!==c||l[7]!==m?(n={data:m,loading:c,error:p},l[5]=p,l[6]=c,l[7]=m,l[8]=n):n=l[8],n})(),[j,w]=(0,r.useState)(!1),S="pending"===b||"declined"===b||j,I=x?.roles||[],C=1===I.length&&"viewer"===I[0].name,[_,R]=(0,r.useState)(!1);h[0]===Symbol.for("react.memo_cache_sentinel")?(t={style:"short"},h[0]=t):t=h[0];let P=(0,u.useListFormat)(t),{t:k}=(0,u.useTranslation)(T),E=(0,td.useTelemetry)(),D=I.map(ln),F=P.formatToParts(D).map(lt);return h[1]!==F?(o={Roles:()=>(0,n.jsx)(n.Fragment,{children:F})},h[1]=F,h[2]=o):o=h[2],h[3]!==D||h[4]!==F.length?(s={count:F.length,roles:D},h[3]=D,h[4]=F.length,h[5]=s):s=h[5],h[6]!==g||h[7]!==k||h[8]!==o||h[9]!==s?(a=(0,n.jsx)(l.Text,{size:1,weight:"medium",children:(0,n.jsx)(u.Translate,{t:k,i18nKey:"banners.permission-check-banner.missing-permission",components:o,values:s,context:g})}),h[6]=g,h[7]=k,h[8]=o,h[9]=s,h[10]=a):a=h[10],h[11]!==C||h[12]!==S||h[13]!==v||h[14]!==y||h[15]!==b||h[16]!==R||h[17]!==k||h[18]!==E?(d=C&&b&&!v&&!y?{onClick:S?void 0:()=>{R(!0),E.log(iQ)},text:k(S?"banners.permission-check-banner.request-permission-button.sent":"banners.permission-check-banner.request-permission-button.text"),tone:S?"default":"primary",disabled:S,mode:S?"bleed":void 0}:void 0,h[11]=C,h[12]=S,h[13]=v,h[14]=y,h[15]=b,h[16]=R,h[17]=k,h[18]=E,h[19]=d):d=h[19],h[20]!==a||h[21]!==d?(c=(0,n.jsx)(iK,{content:a,action:d,"data-testid":"permission-check-banner",icon:f.ReadOnlyIcon}),h[20]=a,h[21]=d,h[22]=c):c=h[22],h[23]!==R||h[24]!==_?(p=_&&(0,n.jsx)(i2,{onClose:()=>R(!1),onRequestSubmitted:()=>{w(!0),R(!1)}}),h[23]=R,h[24]=_,h[25]=p):p=h[25],h[26]!==c||h[27]!==p?(m=(0,n.jsxs)(n.Fragment,{children:[c,p]}),h[26]=c,h[27]=p,h[28]=m):m=h[28],m}function lt(e){return"element"===e.type?(0,n.jsx)("code",{children:e.value},e.value):e.value}function ln(e){return e.title}let li=(0,r.memo)(()=>{let e,t,o,r,s,a,d,p,m=(0,i.c)(32),h=(0,u.useDocumentPreviewStore)(),{selectedPerspectiveName:g}=(0,u.usePerspective)(),{params:x,groupIndex:b,routerPanesState:y,replaceCurrent:v,BackLink:j}=lr(),w=y[b]?.[0].id,S=y[b-1]?.[0],I=S?.id,C=!!S?.params?.rev;m[0]!==x?(e=x?.parentRefPath&&(0,ts.fromString)(x.parentRefPath)||null,m[0]=x,m[1]=e):e=m[1];let _=e,{t:R}=(0,u.useTranslation)(T);e:{let e,n=_?.[0];if(!I||!n||!_){let e;m[2]===Symbol.for("react.memo_cache_sentinel")?(e=(0,eE.of)({loading:!1}),m[2]=e):e=m[2],t=e;break e}if(m[3]!==h||m[4]!==I||m[5]!==_||m[6]!==n||m[7]!==g){let t,i,l=(0,c.getPublishedId)(I),o=(0,ts.fromString)(n),r=o.findIndex(ll);m[9]!==g?(t=(0,u.isSystemBundle)(g)?void 0:g,m[9]=g,m[10]=t):t=m[10],m[11]!==_?(i=e=>{let{draft:t,published:n,version:i}=e;return{loading:!1,result:{availability:{draft:t.availability,published:n.availability,...i?.availability?{version:i.availability}:{}},refValue:(0,ts.get)(i?.snapshot||t.snapshot||n.snapshot,_)?._ref}}},m[11]=_,m[12]=i):i=m[12],e=(0,eV.concat)((0,eE.of)({loading:!0}),h.unstable_observePathsDocumentPair(l,-1===r?o:o.slice(0,r),{version:t}).pipe((0,tt.debounceTime)(750),(0,ek.map)(i))),m[3]=h,m[4]=I,m[5]=_,m[6]=n,m[7]=g,m[8]=e}else e=m[8];t=e}let P=t;m[13]===Symbol.for("react.memo_cache_sentinel")?(o={loading:!0},m[13]=o):o=m[13];let k=(0,e_.useObservable)(P,o);m[14]!==x||m[15]!==k.loading||m[16]!==k.result||m[17]!==v?(r=()=>{k.loading||k.result?.refValue&&v({id:k.result.refValue,params:x})},m[14]=x,m[15]=k.loading,m[16]=k.result,m[17]=v,m[18]=r):r=m[18];let E=r;return I&&_&&!C&&!k.loading&&(k.result?.availability.draft.available||k.result?.availability.published.available)&&k.result?.refValue!==w?(m[19]!==j||m[20]!==E||m[21]!==k.result?.refValue||m[22]!==R?(s=k.result?.refValue?{onClick:E,icon:f.SyncIcon,text:R("banners.reference-changed-banner.reason-changed.reload-button.text")}:{as:j,icon:f.CloseIcon,text:R("banners.reference-changed-banner.reason-removed.close-button.text")},m[19]=j,m[20]=E,m[21]=k.result?.refValue,m[22]=R,m[23]=s):s=m[23],m[24]!==k.result?.refValue||m[25]!==R?(a=R(k.result?.refValue?"banners.reference-changed-banner.reason-changed.text":"banners.reference-changed-banner.reason-removed.text"),m[24]=k.result?.refValue,m[25]=R,m[26]=a):a=m[26],m[27]!==a?(d=(0,n.jsx)(l.Text,{size:1,weight:"medium",children:a}),m[27]=a,m[28]=d):d=m[28],m[29]!==s||m[30]!==d?(p=(0,n.jsx)(iK,{action:s,"data-testid":"reference-changed-banner",content:d,icon:f.WarningOutlineIcon,tone:"caution"}),m[29]=s,m[30]=d,m[31]=p):p=m[31],p):null});function ll(e){return"object"==typeof e&&"_key"in e}function lo(e){let t,o=(0,i.c)(2),{releaseId:r,draftDocument:s}=e,{t:a}=(0,u.useTranslation)(T),{firstDocument:d}=(0,u.useScheduledDraftDocument)(r),p=s?._id?(0,c.getPublishedId)(s._id):null,m=d?._id?(0,c.getPublishedId)(d._id):null,h=s?._rev,g=d?._system?.base?.rev;return p!==m||h&&g&&h===g?null:(o[0]!==a?(t=(0,n.jsx)(iK,{tone:"caution",icon:f.WarningOutlineIcon,content:(0,n.jsx)(l.Text,{size:1,children:(0,n.jsx)(u.Translate,{t:a,i18nKey:"banners.scheduled-draft-override-banner.text"})})}),o[0]=a,o[1]=t):t=o[1],t)}function lr(){return(0,r.useContext)(s.PaneRouterContext)}function ls(){let e,t,o,r,s,a,d,c,p=(0,i.c)(24),{t:m}=(0,u.useTranslation)(T),{t:h}=(0,u.useTranslation)(),{data:g}=(0,u.useArchivedReleases)(),{params:f,setParams:x}=lr();p[0]!==f||p[1]!==x?(e=()=>{x({...f,rev:f?.historyEvent||void 0,since:void 0,historyVersion:void 0})},p[0]=f,p[1]=x,p[2]=e):e=p[2];let b=e;if(p[3]!==g||p[4]!==f?.historyVersion){let e;p[6]!==f?.historyVersion?(e=e=>(0,u.getReleaseIdFromReleaseDocumentId)(e._id)===f?.historyVersion,p[6]=f?.historyVersion,p[7]=e):e=p[7],t=g.find(e),p[3]=g,p[4]=f?.historyVersion,p[5]=t}else t=p[5];let y=t;e:{if(y?.state==="published"){o="banners.published-release.description";break e}if(y&&(0,u.isCardinalityOneRelease)(y)){o="banners.archived-scheduled-draft.description";break e}o="banners.archived-release.description"}let v=o,j=y?.metadata.title;return p[8]!==h?(r=h("release.placeholder-untitled-release"),p[8]=h,p[9]=r):r=p[9],p[10]!==v||p[11]!==y||p[12]!==m?(s=e=>{let{displayTitle:t}=e;return(0,n.jsx)(u.Translate,{t:m,i18nKey:v,values:{title:t},components:{VersionBadge:e=>{let{children:t}=e,i=(0,u.getVersionInlineBadge)(y);return(0,n.jsx)(i,{children:t})}}})},p[10]=v,p[11]=y,p[12]=m,p[13]=s):s=p[13],p[14]!==j||p[15]!==r||p[16]!==s?(a=(0,n.jsx)(l.Text,{size:1,children:(0,n.jsx)(u.ReleaseTitle,{title:j,fallback:r,children:s})}),p[14]=j,p[15]=r,p[16]=s,p[17]=a):a=p[17],p[18]!==b||p[19]!==f?.archivedRelease?(d=f?.archivedRelease?void 0:{text:"Go back to published version",onClick:b},p[18]=b,p[19]=f?.archivedRelease,p[20]=d):d=p[20],p[21]!==a||p[22]!==d?(c=(0,n.jsx)(iK,{tone:"caution",content:a,action:d}),p[21]=a,p[22]=d,p[23]=c):c=p[23],c}li.displayName="Memo(ReferenceChangedBanner)";let la=eI.styled.img.withConfig({displayName:"Image",componentId:"sc-9vwcvu-0"})`object-fit:cover;width:100%;height:100%;height:180px;display:flex;`,ld=e=>{let t,o,s,a,d,c,p,h,g,x,b,y,v=(0,i.c)(24),{onClose:j,isLockedByCanvas:w}=e,{t:S}=(0,u.useTranslation)(T),I=(0,r.useRef)(null);v[0]===Symbol.for("react.memo_cache_sentinel")?(t=()=>[I.current],v[0]=t):t=v[0],(0,l.useClickOutsideEvent)(j,t),v[1]!==w||v[2]!==S?(o=S(w?"canvas.banner.popover-heading":"canvas.banner.editable.popover-heading"),v[1]=w,v[2]=S,v[3]=o):o=v[3];let C=o;v[4]!==w||v[5]!==S?(s=S(w?"canvas.banner.popover-description":"canvas.banner.editable.popover-description"),v[4]=w,v[5]=S,v[6]=s):s=v[6];let _=s;return v[7]===Symbol.for("react.memo_cache_sentinel")?(a=(0,n.jsx)(la,{src:"https://cdn.sanity.io/images/pyrmmpch/production/b47224e2f3a7d1747e43b9da1ac31739250e628b-632x376.png",alt:"Canvas"}),v[7]=a):a=v[7],v[8]===Symbol.for("react.memo_cache_sentinel")?(d=(0,n.jsx)(l.Text,{size:1,weight:"semibold",children:"Canvas"}),v[8]=d):d=v[8],v[9]===Symbol.for("react.memo_cache_sentinel")?(c=(0,n.jsxs)(l.Flex,{paddingY:1,gap:2,children:[d,(0,n.jsx)(l.Text,{size:1,muted:!0,children:(0,n.jsx)(f.ComposeSparklesIcon,{})})]}),v[9]=c):c=v[9],v[10]!==C?(p=(0,n.jsx)(l.Box,{paddingTop:3,children:(0,n.jsx)(l.Heading,{size:1,children:C})}),v[10]=C,v[11]=p):p=v[11],v[12]!==_?(h=(0,n.jsx)(l.Box,{paddingTop:4,children:(0,n.jsx)(l.Text,{size:1,children:_})}),v[12]=_,v[13]=h):h=v[13],v[14]!==p||v[15]!==h?(g=(0,n.jsxs)(l.Flex,{paddingX:4,paddingBottom:4,paddingTop:3,direction:"column",children:[c,p,h]}),v[14]=p,v[15]=h,v[16]=g):g=v[16],v[17]!==S?(x=S("canvas.banner.popover-button-text"),v[17]=S,v[18]=x):x=v[18],v[19]!==x?(b=(0,n.jsx)(l.Flex,{width:"full",gap:3,justify:"flex-end",paddingX:4,paddingBottom:4,children:(0,n.jsx)(m.Button,{mode:"bleed",text:x,autoFocus:!0,tone:"primary",href:"https://snty.link/canvas-docs",target:"_blank",rel:"noopener noreferrer",as:"a",iconRight:f.LaunchIcon})}),v[19]=x,v[20]=b):b=v[20],v[21]!==b||v[22]!==g?(y=(0,n.jsx)(l.Card,{radius:3,overflow:"hidden",width:0,ref:I,children:(0,n.jsxs)(l.Container,{width:0,children:[a,g,b]})}),v[21]=b,v[22]=g,v[23]=y):y=v[23],y},lc=e=>{let t,o,s,a,d,c,p,h,g=(0,i.c)(21),{documentId:x}=e,{t:b}=(0,u.useTranslation)(T),[y,v]=(0,r.useState)(!1),j=(0,u.getDocumentVariantType)(x),{isLockedByCanvas:w}=(0,u.useCanvasCompanionDoc)(x);e:{let e;if(!w){let e;g[0]!==b?(e=b("canvas.banner.editable.linked-text"),g[0]=b,g[1]=e):e=g[1],t=e;break e}if("published"===j){let e;g[2]!==b?(e=b("canvas.banner.linked-text.published"),g[2]=b,g[3]=e):e=g[3],t=e;break e}if("draft"===j){let e;g[4]!==b?(e=b("canvas.banner.linked-text.draft"),g[4]=b,g[5]=e):e=g[5],t=e;break e}g[6]!==b?(e=b("canvas.banner.linked-text.version"),g[6]=b,g[7]=e):e=g[7],t=e}let S=t;g[8]===Symbol.for("react.memo_cache_sentinel")?(o=()=>v(lp),g[8]=o):o=g[8];let I=o;g[9]===Symbol.for("react.memo_cache_sentinel")?(s=()=>v(!1),g[9]=s):s=g[9];let C=s;return g[10]!==S?(a=(0,n.jsx)(l.Text,{size:1,weight:"medium",children:S}),g[10]=S,g[11]=a):a=g[11],g[12]!==w?(d=(0,n.jsx)(ld,{onClose:C,isLockedByCanvas:w}),g[12]=w,g[13]=d):d=g[13],g[14]===Symbol.for("react.memo_cache_sentinel")?(c=(0,n.jsx)(m.Button,{tooltipProps:null,mode:"bleed",tone:"default",icon:f.InfoOutlineIcon,onClick:I}),g[14]=c):c=g[14],g[15]!==y||g[16]!==d?(p=(0,n.jsx)(m.Popover,{open:y,size:0,tone:"default",portal:!0,placement:"bottom-start",content:d,children:c}),g[15]=y,g[16]=d,g[17]=p):p=g[17],g[18]!==a||g[19]!==p?(h=(0,n.jsxs)(l.Flex,{align:"center",gap:2,children:[a,p]}),g[18]=a,g[19]=p,g[20]=h):h=g[20],h};function lu(){let e,t,l,o,r=(0,i.c)(10),{documentId:s,displayed:a}=ih(),{t:d}=(0,u.useTranslation)(T),c=a?._id||s,{companionDoc:p}=(0,u.useCanvasCompanionDoc)(c),m=(0,u.useNavigateToCanvasDoc)(p?.canvasDocumentId,"banner");return p?(r[0]!==c?(e=(0,n.jsx)(lc,{documentId:c}),r[0]=c,r[1]=e):e=r[1],r[2]!==d?(t=d("canvas.banner.edit-in-canvas-action"),r[2]=d,r[3]=t):t=r[3],r[4]!==m||r[5]!==t?(l={mode:"ghost",text:t,onClick:m},r[4]=m,r[5]=t,r[6]=l):l=r[6],r[7]!==e||r[8]!==l?(o=(0,n.jsx)(iK,{tone:"neutral","data-test-id":"canvas-linked-banner",paddingY:0,content:e,action:l}),r[7]=e,r[8]=l,r[9]=o):o=r[9],o):null}function lp(e){return!e}let lm=e=>{let t,o,r,s,a,d,c,p,m,h,g=(0,i.c)(32),{schemaType:x,selectedPerspective:b,reason:y}=e,{t:v}=(0,u.useTranslation)(T),{t:j}=(0,u.useTranslation)(),{document:w}=(0,u.useWorkspace)(),{drafts:S}=w,{enabled:I}=S;g[0]!==I||g[1]!==x?(t=e=>{let{perspective:t}=e;return{disabled:!(0,u.isPerspectiveWriteable)({selectedPerspective:t,isDraftModelEnabled:I,schemaType:x}).result}},g[0]=I,g[1]=x,g[2]=t):t=g[2];let C=t,_=(0,u.isReleaseDocument)(b)?b:void 0;g[3]!==_||g[4]!==j?(o=_?_.metadata.title||j("release.placeholder-untitled-release"):void 0,g[3]=_,g[4]=j,g[5]=o):o=g[5];let R=o;return g[6]!==y||g[7]!==v?(r="PUBLISHED_NOT_WRITEABLE"===y&&v("banners.choose-new-document-destination.cannot-create-published-document"),g[6]=y,g[7]=v,g[8]=r):r=g[8],g[9]!==y||g[10]!==v?(s="DRAFTS_NOT_WRITEABLE"===y&&v("banners.choose-new-document-destination.cannot-create-draft-document"),g[9]=y,g[10]=v,g[11]=s):s=g[11],g[12]!==y||g[13]!==_||g[14]!==R||g[15]!==v||g[16]!==j?(a="RELEASE_NOT_ACTIVE"===y&&_&&R&&(0,n.jsx)(u.Translate,{t:v,i18nKey:"banners.choose-new-document-destination.release-inactive",values:{title:R},components:{VersionBadge:e=>{let{children:t}=e,i=(0,u.getVersionInlineBadge)(_);return(0,n.jsx)(u.ReleaseTitle,{title:_.metadata.title,fallback:j("release.placeholder-untitled-release"),children:()=>(0,n.jsx)(i,{children:t})})}}}),g[12]=y,g[13]=_,g[14]=R,g[15]=v,g[16]=j,g[17]=a):a=g[17],g[18]!==v?(d=v("banners.choose-new-document-destination.choose-destination"),g[18]=v,g[19]=d):d=g[19],g[20]!==d?(c=(0,n.jsxs)(n.Fragment,{children:[" ",d]}),g[20]=d,g[21]=c):c=g[21],g[22]!==r||g[23]!==s||g[24]!==a||g[25]!==c?(p=(0,n.jsxs)(l.Text,{size:1,children:[r,s,a,c]}),g[22]=r,g[23]=s,g[24]=a,g[25]=c,g[26]=p):p=g[26],g[27]!==C?(m=(0,n.jsx)(u.ReleasesNav,{menuItemProps:C}),g[27]=C,g[28]=m):m=g[28],g[29]!==p||g[30]!==m?(h=(0,n.jsx)(iK,{tone:"caution",icon:f.WarningOutlineIcon,content:(0,n.jsxs)(l.Flex,{align:"center",gap:2,children:[p,m]})}),g[29]=p,g[30]=m,g[31]=h):h=g[31],h};function lh(){let e,t,l=(0,i.c)(5),{value:o}=ih(),{documentLinkedBannerContent:r}=(0,u.useSanityCreateConfig)().components??{};l[0]!==o?(e=(0,u.getSanityCreateLinkMetadata)(o),l[0]=o,l[1]=e):e=l[1];let s=e;return r&&s?(l[2]!==r||l[3]!==s?(t=(0,n.jsx)(iK,{tone:"transparent","data-test-id":"sanity-create-read-only-banner",content:(0,n.jsx)(r,{metadata:s})}),l[2]=r,l[3]=s,l[4]=t):t=l[4],t):null}function lg(e){let t,s,a,d,c,p,m,h,g,f,x,b=(0,i.c)(41),{documentId:y,currentRelease:v,isScheduledRelease:j}=e,w=v??u.LATEST;b[0]!==w?(t=(0,u.getReleaseTone)(w),b[0]=w,b[1]=t):t=b[1];let S=t,{t:I}=(0,u.useTranslation)(T),{t:C}=(0,u.useTranslation)(),{createVersion:_}=(0,u.useVersionOperations)(),R="string"==typeof v;b[2]!==v||b[3]!==R||b[4]!==C?(s=R?v:v?.metadata?.title||C("release.placeholder-untitled-release"),b[2]=v,b[3]=R,b[4]=C,b[5]=s):s=b[5];let P=s,[k,E]=(0,r.useState)(),D=(0,o.useToast)();b[6]!==_||b[7]!==v||b[8]!==y||b[9]!==R||b[10]!==I||b[11]!==D?(a=async()=>{if(R||v._id){E({status:"creating",lastUpdate:new Date});let e=R?v:(0,u.getReleaseIdFromReleaseDocumentId)(v._id);try{await _(e,y),E({status:"created",lastUpdate:new Date})}catch(e){D.push({status:"error",closable:!0,title:I("banners.release.error.title"),description:I("banners.release.error.description",{message:e.message})}),E(void 0)}}},b[6]=_,b[7]=v,b[8]=y,b[9]=R,b[10]=I,b[11]=D,b[12]=a):a=b[12];let F=a,A=function(e){let t,n,l,o=(0,i.c)(4);o[0]===Symbol.for("react.memo_cache_sentinel")?(t=new Date,o[0]=t):t=o[0];let[s,a]=(0,r.useState)(t);return 200!==o[1]?(n=()=>{let e=setInterval(()=>{a(new Date)},200);return()=>clearInterval(e)},l=[200],o[1]=200,o[2]=n,o[3]=l):(n=o[2],l=o[3]),(0,r.useEffect)(n,l),s}(200),V=k?.status==="created"&&A.getTime()-k.lastUpdate.getTime()>1e3;return b[13]!==I?(d=I("banners.release.waiting.title"),b[13]=I,b[14]=d):d=b[14],b[15]!==I?(c=I("banners.release.waiting.description"),b[15]=I,b[16]=c):c=b[16],b[17]!==V||b[18]!==d||b[19]!==c?(p={status:"info",id:"add-document-to-release",enabled:V,closable:!0,title:d,description:c},b[17]=V,b[18]=d,b[19]=c,b[20]=p):p=b[20],(0,u.useConditionalToast)(p),b[21]!==P?(m={title:P},b[21]=P,b[22]=m):m=b[22],b[23]!==v||b[24]!==R||b[25]!==C?(h={VersionBadge:e=>{let{children:t}=e,i=(0,u.getVersionInlineBadge)(v);return R?(0,n.jsx)(i,{children:t}):(0,n.jsx)(u.ReleaseTitle,{title:v.metadata?.title,fallback:C("release.placeholder-untitled-release"),children:()=>(0,n.jsx)(i,{children:t})})}},b[23]=v,b[24]=R,b[25]=C,b[26]=h):h=b[26],b[27]!==I||b[28]!==h||b[29]!==m?(g=(0,n.jsx)(l.Text,{size:1,children:(0,n.jsx)(u.Translate,{i18nKey:"banners.release.not-in-release",t:I,values:m,components:h})}),b[27]=I,b[28]=h,b[29]=m,b[30]=g):g=b[30],b[31]!==F||b[32]!==j||b[33]!==I||b[34]!==S||b[35]!==k?(f=j?void 0:{text:I("banners.release.action.add-to-release"),tone:S,disabled:!!k,onClick:F,mode:"default"},b[31]=F,b[32]=j,b[33]=I,b[34]=S,b[35]=k,b[36]=f):f=b[36],b[37]!==g||b[38]!==f||b[39]!==S?(x=(0,n.jsx)(iK,{tone:S,content:g,action:f}),b[37]=g,b[38]=f,b[39]=S,b[40]=x):x=b[40],x}let lf=(0,tc.defineEvent)({name:"LiveEdit Draft Resolved",version:1,description:"User resolved a draft of a live edit document to continue editing"}),lx=e=>{let t,o,s,a,d,p,h,g,x,b,y,v,j,w,S,I=(0,i.c)(47),{displayed:C,documentId:_,schemaType:R,i18nKey:P,isEditBlocking:k}=e,{t:E}=(0,u.useTranslation)(T),[D,F]=(0,r.useState)(!1),[A,V]=(0,r.useState)(!1),M=(0,td.useTelemetry)(),{publish:L,discardChanges:z}=(0,u.useDocumentOperation)(_,C?._type||"");I[0]!==L||I[1]!==M?(t=()=>{L.execute(),F(!0),M.log(lf,{liveEditResolveType:"publish"})},I[0]=L,I[1]=M,I[2]=t):t=I[2];let O=t;I[3]!==z||I[4]!==M?(o=()=>{z.execute(),V(!0),M.log(lf,{liveEditResolveType:"discard"})},I[3]=z,I[4]=M,I[5]=o):o=I[5];let B=o;I[6]===Symbol.for("react.memo_cache_sentinel")?(s=()=>()=>{F(!1),V(!1)},I[6]=s):s=I[6],(0,r.useEffect)(s);let N=nc();I[7]!==N||I[8]!==C?._id||I[9]!==R.name?(a=()=>{typeof C?._id>"u"||N.navigateDiffView({mode:"version",previousDocument:{type:R.name,id:(0,c.getPublishedId)(C?._id)},nextDocument:{type:R.name,id:(0,c.getDraftId)(C?._id)}})},I[7]=N,I[8]=C?._id,I[9]=R.name,I[10]=a):a=I[10];let $=a;return I[11]!==R.title?(d={schemaType:R.title},I[11]=R.title,I[12]=d):d=I[12],I[13]!==P||I[14]!==E||I[15]!==d?(p=(0,n.jsx)(l.Text,{size:1,weight:"medium",children:(0,n.jsx)(u.Translate,{t:E,i18nKey:P,values:d})}),I[13]=P,I[14]=E,I[15]=d,I[16]=p):p=I[16],I[17]!==E?(h=E("banners.obsolete-draft.actions.compare-draft.text"),I[17]=E,I[18]=h):h=I[18],I[19]!==$||I[20]!==h?(g=(0,n.jsx)(m.Button,{text:h,mode:"ghost",onClick:$}),I[19]=$,I[20]=h,I[21]=g):g=I[21],I[22]!==E?(x=E("banners.obsolete-draft.actions.publish-draft.text"),I[22]=E,I[23]=x):x=I[23],I[24]!==k||I[25]!==E?(b=k?{content:E("banners.live-edit-draft-banner.publish.tooltip")}:{},I[24]=k,I[25]=E,I[26]=b):b=I[26],I[27]!==O||I[28]!==D||I[29]!==b||I[30]!==x?(y=(0,n.jsx)(m.Button,{onClick:O,text:x,tooltipProps:b,loading:D,tone:"positive"}),I[27]=O,I[28]=D,I[29]=b,I[30]=x,I[31]=y):y=I[31],I[32]!==E?(v=E("banners.obsolete-draft.actions.discard-draft.text"),I[32]=E,I[33]=v):v=I[33],I[34]!==k||I[35]!==E?(j=k?{content:E("banners.live-edit-draft-banner.discard.tooltip")}:{},I[34]=k,I[35]=E,I[36]=j):j=I[36],I[37]!==B||I[38]!==A||I[39]!==v||I[40]!==j?(w=(0,n.jsx)(m.Button,{onClick:B,text:v,tooltipProps:j,loading:A,tone:"caution"}),I[37]=B,I[38]=A,I[39]=v,I[40]=j,I[41]=w):w=I[41],I[42]!==y||I[43]!==w||I[44]!==p||I[45]!==g?(S=(0,n.jsx)(iK,{content:(0,n.jsxs)(l.Flex,{align:"center",justify:"space-between",gap:2,children:[p,g,y,w]}),"data-testid":"live-edit-type-banner",icon:f.ErrorOutlineIcon}),I[42]=y,I[43]=w,I[44]=p,I[45]=g,I[46]=S):S=I[46],S};function lb(e){let t,l,o=(0,i.c)(4),{documentId:r,isPinnedDraftOrPublished:s}=e;o[0]!==r?(t={documentId:r},o[0]=r,o[1]=t):t=o[1];let a=(0,u.useOnlyHasVersions)(t);return(0,c.isVersionId)(r)&&a&&s?(o[2]!==r?(l=(0,n.jsx)(ly,{documentId:r}),o[2]=r,o[3]=l):l=o[3],l):null}function ly(e){let t,o,r,s,a,d,p,m,h,g,f,x=(0,i.c)(37),{documentId:b}=e,{data:y}=(0,u.useActiveReleases)(),v=(0,u.useSetPerspective)();x[0]!==b?(t=(0,c.getVersionFromId)(b)??"",x[0]=b,x[1]=t):t=x[1];let j=t;if(x[2]!==y||x[3]!==j){let e;x[5]!==j?(e=e=>e._id.includes(j),x[5]=j,x[6]=e):e=x[6],o=y.find(e),x[2]=y,x[3]=j,x[4]=o}else o=x[4];let w=o,{t:S}=(0,u.useTranslation)();x[7]!==b?(r={documentId:b},x[7]=b,x[8]=r):r=x[8];let{data:I}=(0,u.useDocumentVersions)(r);if(x[9]!==y||x[10]!==I){let e;x[12]!==I?(e=e=>I.find(t=>{let n=(0,c.getVersionFromId)(t)??"";return(0,u.getReleaseIdFromReleaseDocumentId)(e._id)===n})&&!(0,u.isCardinalityOneRelease)(e),x[12]=I,x[13]=e):e=x[13],s=y.filter(e),x[9]=y,x[10]=I,x[11]=s}else s=x[11];let C=s;x[14]!==w?(a=w&&(0,u.getReleaseTone)(w),x[14]=w,x[15]=a):a=x[15];let _=a,{t:R}=(0,u.useTranslation)(T);x[16]!==j||x[17]!==v?(d=async()=>{v(j)},x[16]=j,x[17]=v,x[18]=d):d=x[18];let P=d;if(0===C.length)return null;let k=C[0];x[19]!==S?(p=S("release.placeholder-untitled-release"),x[19]=S,x[20]=p):p=x[20];let E=p;return x[21]!==C.length||x[22]!==R?(m=e=>{let{displayTitle:t}=e;return C.length>1?(0,n.jsx)(u.Translate,{t:R,i18nKey:"banners.release.navigate-to-edit-description-multiple",components:{VersionBadge:()=>(0,n.jsx)(u.VersionInlineBadge,{children:t})},values:{count:C.length-1}}):(0,n.jsx)(u.Translate,{t:R,i18nKey:"banners.release.navigate-to-edit-description-single",components:{VersionBadge:()=>(0,n.jsx)(u.VersionInlineBadge,{children:t})}})},x[21]=C.length,x[22]=R,x[23]=m):m=x[23],x[24]!==E||x[25]!==k.metadata.title||x[26]!==m?(h=(0,n.jsx)(l.Text,{size:1,children:(0,n.jsx)(l.Flex,{direction:"row",gap:1,wrap:"wrap",children:(0,n.jsx)(u.ReleaseTitle,{title:k.metadata.title,fallback:E,children:m})})}),x[24]=E,x[25]=k.metadata.title,x[26]=m,x[27]=h):h=x[27],x[28]!==C.length||x[29]!==P||x[30]!==R||x[31]!==_?(g=C.length>0?{text:R("banners.release.action.open-to-edit"),tone:_,onClick:P,mode:"default"}:void 0,x[28]=C.length,x[29]=P,x[30]=R,x[31]=_,x[32]=g):g=x[32],x[33]!==g||x[34]!==h||x[35]!==_?(f=(0,n.jsx)(iK,{tone:_,"data-testid":"open-release-to-edit-banner",content:h,action:g}),x[33]=g,x[34]=h,x[35]=_,x[36]=f):f=x[36],f}function lv(){let e,t=(0,i.c)(2),{t:o}=(0,u.useTranslation)(T);return t[0]!==o?(e=(0,n.jsx)(iK,{tone:"caution",icon:f.PauseIcon,content:(0,n.jsx)(l.Text,{size:1,children:(0,n.jsx)(u.Translate,{t:o,i18nKey:"banners.paused-scheduled-draft.text"})})}),t[0]=o,t[1]=e):e=t[1],e}function lj(){let e,t,o=(0,i.c)(4),{revisionNotFound:r}=ih(),{t:s}=(0,u.useTranslation)(T);return r?(o[0]!==s?(e=s("banners.revision-not-found.description"),o[0]=s,o[1]=e):e=o[1],o[2]!==e?(t=(0,n.jsx)(iK,{tone:"caution","data-test-id":"revision-not-found-banner",icon:f.WarningOutlineIcon,content:(0,n.jsx)(l.Text,{size:1,children:e})}),o[2]=e,o[3]=t):t=o[3],t):null}function lw(e){let t,o,r,s,a,d=(0,i.c)(12),{currentRelease:c}=e,p=c??u.LATEST;d[0]!==p?(t=(0,u.getReleaseTone)(p),d[0]=p,d[1]=t):t=d[1];let m=t,{t:h}=(0,u.useTranslation)();return d[2]!==c?(o=(0,u.formatRelativeLocalePublishDate)(c),d[2]=c,d[3]=o):o=d[3],d[4]!==o?(r={date:o},d[4]=o,d[5]=r):r=d[5],d[6]!==r||d[7]!==h?(s=(0,n.jsx)(l.Text,{size:1,children:(0,n.jsx)(u.Translate,{t:h,i18nKey:"release.banner.scheduled-for-publishing-on",values:r})}),d[6]=r,d[7]=h,d[8]=s):s=d[8],d[9]!==s||d[10]!==m?(a=(0,n.jsx)(iK,{tone:m,icon:f.LockIcon,content:s}),d[9]=s,d[10]=m,d[11]=a):a=d[11],a}function lS(){let e=(0,i.c)(17),{value:t,editState:o}=ih(),{selectedPerspective:r}=(0,u.usePerspective)(),s=(0,u.isGoingToUnpublish)(t)||o?.version&&(0,u.isGoingToUnpublish)(o?.version),{t:a}=(0,u.useTranslation)(T),{t:d}=(0,u.useTranslation)();if((0,u.isReleaseDocument)(r)&&s){let t,i,o,s,c,p;e[0]!==r.metadata?.title||e[1]!==d?(t=r.metadata?.title||d("release.placeholder-untitled-release"),e[0]=r.metadata?.title,e[1]=d,e[2]=t):t=e[2];let m=t;return e[3]!==m?(i={title:m},e[3]=m,e[4]=i):i=e[4],e[5]!==r||e[6]!==d?(o={VersionBadge:e=>{let{children:t}=e,i=(0,u.getVersionInlineBadge)(r);return(0,n.jsx)(u.ReleaseTitle,{title:r.metadata?.title,fallback:d("release.placeholder-untitled-release"),children:()=>(0,n.jsx)(i,{children:t})})}},e[5]=r,e[6]=d,e[7]=o):o=e[7],e[8]!==a||e[9]!==i||e[10]!==o?(s=(0,n.jsx)(l.Text,{size:1,children:(0,n.jsx)(u.Translate,{t:a,i18nKey:"banners.unpublished-release-banner.text",values:i,components:o})}),e[8]=a,e[9]=i,e[10]=o,e[11]=s):s=e[11],e[12]!==a?(c=(0,n.jsx)(l.Text,{size:1,children:(0,n.jsx)(u.Translate,{t:a,i18nKey:"banners.unpublished-release-banner.text-with-published"})}),e[12]=a,e[13]=c):c=e[13],e[14]!==s||e[15]!==c?(p=(0,n.jsx)(iK,{tone:"critical",content:(0,n.jsxs)(l.Stack,{space:2,children:[s,c]}),icon:f.UnpublishIcon}),e[14]=s,e[15]=c,e[16]=p):p=e[16],p}return null}let lI=(0,eI.styled)(l.Stack).withConfig({displayName:"TitleContainer",componentId:"sc-e3cjxp-0"})`${({theme:e})=>eI.css`
      @supports not (container-type: inline-size) {
        display: none !important;
      }

      container-type: inline-size;

      [data-heading] {
        font-size: ${e.sanity.fonts.heading.sizes[4].fontSize}px;
        line-height: ${e.sanity.fonts.heading.sizes[4].lineHeight}px;
        overflow-wrap: break-word;
        text-wrap: pretty;
      }

      @container (max-width: 560px) {
        [data-heading] {
          font-size: ${e.sanity.fonts.heading.sizes[3].fontSize}px;
          line-height: ${e.sanity.fonts.heading.sizes[3].lineHeight}px;
        }
      }

      @container (max-width: 420px) {
        [data-heading] {
          font-size: ${e.sanity.fonts.heading.sizes[2].fontSize}px;
          line-height: ${e.sanity.fonts.heading.sizes[2].lineHeight}px;
        }
      }
    `}`,lC=e=>{let t,o,r,s,a=(0,i.c)(14),{documentId:d,schemaType:c,title:p}=e,h=d===c.name,g=c.description,{t:x}=(0,u.useTranslation)(T);if(!1===c.__experimental_formPreviewTitle)return null;a[0]!==g||a[1]!==h||a[2]!==c.name||a[3]!==c.title?(t=!h&&(0,n.jsxs)(l.Inline,{space:1,children:[(0,n.jsx)(l.Text,{muted:!0,size:1,children:c.title??c.name}),g&&(0,n.jsx)(m.Tooltip,{content:g,placement:"right",children:(0,n.jsx)(f.InfoOutlineIcon,{"data-testid":"schema-description-icon"})})]}),a[0]=g,a[1]=h,a[2]=c.name,a[3]=c.title,a[4]=t):t=a[4];let b=!p;return a[5]!==x||a[6]!==p?(o=p??x("document-view.form-view.form-title-fallback"),a[5]=x,a[6]=p,a[7]=o):o=a[7],a[8]!==b||a[9]!==o?(r=(0,n.jsx)(l.Heading,{as:"h2","data-heading":!0,muted:b,"data-testid":"document-panel-document-title",children:o}),a[8]=b,a[9]=o,a[10]=r):r=a[10],a[11]!==t||a[12]!==r?(s=(0,n.jsxs)(lI,{marginBottom:6,space:4,children:[t,r]}),a[11]=t,a[12]=r,a[13]=s):s=a[13],s},l_=e=>e.preventDefault(),lT=(0,r.forwardRef)(function(e,t){let s,a,d,c,p,m,h,g,f,x,b,y,v,j,w,S=(0,i.c)(77),{hidden:I,margins:C}=e,{collapsedFieldSets:_,collapsedPaths:R,displayed:P,editState:k,documentId:E,documentType:D,fieldActions:F,onChange:A,validation:V,ready:M,formState:L,onFocus:z,connectionState:O,onBlur:B,onSetCollapsedPath:N,onPathOpen:$,onSetCollapsedFieldSet:H,onSetActiveFieldGroup:G,openPath:U,compareValue:q,hasUpstreamVersion:W}=ih(),{selectedReleaseId:K,selectedPerspective:Y}=(0,u.usePerspective)(),X=(0,u.useDocumentStore)(),J=(0,u.useDocumentPresence)(E),{title:Z}=ik(),[Q]=(0,r.useState)(lR),ee=k?.transactionSyncLock?.enabled,{t:et}=(0,u.useTranslation)(T);S[0]!==et?(s=et("document-view.form-view.sync-lock-toast.title"),S[0]=et,S[1]=s):s=S[1],S[2]!==et?(a=et("document-view.form-view.sync-lock-toast.description"),S[2]=et,S[3]=a):a=S[3],S[4]!==ee||S[5]!==s||S[6]!==a?(d={id:"sync-lock",status:"warning",enabled:ee,title:s,description:a,closable:!0},S[4]=ee,S[5]=s,S[6]=a,S[7]=d):d=S[7],(0,u.useConditionalToast)(d),S[8]!==E||S[9]!==X.pair||S[10]!==D||S[11]!==Q||S[12]!==K?(c=()=>{let e=X.pair.documentEvents(E,D,K).pipe((0,eJ.tap)(e=>{var t,n;let i,l,o;"mutation"===e.type&&Q.publish((i=(t=e).mutations.map(e=>e.patch).filter(Boolean),{type:"mutation",snapshot:t.document,patches:(0,u.fromMutationPatches)(t.origin,i)})),"rebase"===e.type&&Q.publish((l=(n=e).remoteMutations.map(e=>e.patch).filter(Boolean),o=n.localMutations.map(e=>e.patch).filter(Boolean),{type:"rebase",snapshot:n.document,patches:(0,u.fromMutationPatches)("remote",l).concat((0,u.fromMutationPatches)("local",o))}))})).subscribe();return()=>{e.unsubscribe()}},S[8]=E,S[9]=X.pair,S[10]=D,S[11]=Q,S[12]=K,S[13]=c):c=S[13],S[14]!==E||S[15]!==X||S[16]!==D||S[17]!==Q||S[18]!==K?(p=[E,X,D,Q,K],S[14]=E,S[15]=X,S[16]=D,S[17]=Q,S[18]=K,S[19]=p):p=S[19],(0,r.useEffect)(c,p);let en=!!P?._rev;S[20]!==Q||S[21]!==P?(m=()=>{Q.publish({type:"mutation",patches:[],snapshot:P})},S[20]=Q,S[21]=P,S[22]=m):m=S[22];let ei=(0,r.useEffectEvent)(m);S[23]!==ei||S[24]!==en?(h=()=>{en&&ei()},S[23]=ei,S[24]=en,S[25]=h):h=S[25],S[26]!==en?(g=[en],S[26]=en,S[27]=g):g=S[27],(0,r.useEffect)(h,g);let[el,eo]=(0,r.useState)(null),[er,es]=(0,r.useState)(!1);S[28]!==er||S[29]!==el||S[30]!==L?.focusPath.length||S[31]!==M?(f=()=>{!er&&M&&!L?.focusPath.length&&el&&(es(!0),(0,o.focusFirstDescendant)(el))},S[28]=er,S[29]=el,S[30]=L?.focusPath.length,S[31]=M,S[32]=f):f=S[32];let ea=L?.focusPath.length;S[33]!==er||S[34]!==el||S[35]!==M||S[36]!==ea?(x=[er,el,ea,M],S[33]=er,S[34]=el,S[35]=M,S[36]=ea,S[37]=x):x=S[37],(0,r.useEffect)(f,x),S[38]!==t?(b=e=>{eo(e),"function"==typeof t?t(e):t&&(t.current=e)},S[38]=t,S[39]=b):b=S[39];let ed=b,ec="reconnecting"===O||L?.readOnly||!k?.ready,eu=ec?"true":void 0;return S[40]!==_||S[41]!==R||S[42]!==q||S[43]!==O||S[44]!==E||S[45]!==k?.draft||S[46]!==k?.published||S[47]!==F||S[48]!==L||S[49]!==W||S[50]!==I||S[51]!==ec||S[52]!==B||S[53]!==A||S[54]!==z||S[55]!==$||S[56]!==G||S[57]!==H||S[58]!==N||S[59]!==U||S[60]!==Q||S[61]!==J||S[62]!==Y||S[63]!==et||S[64]!==Z||S[65]!==V?(y="connecting"!==O||k?.draft||k?.published?null===L||I?(0,n.jsx)(l.Box,{padding:2,children:(0,n.jsx)(l.Text,{children:et("document-view.form-view.form-hidden")})}):(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(lC,{documentId:E,schemaType:L.schemaType,title:Z}),(0,n.jsx)(u.FormBuilder,{__internal_fieldActions:F,__internal_patchChannel:Q,changed:L.changed,collapsedFieldSets:_,collapsedPaths:R,compareValue:q??void 0,focused:L.focused,focusPath:L.focusPath,groups:L.groups,id:"root",members:L.members,onChange:A,onFieldGroupSelect:G,onPathBlur:B,onPathFocus:z,onPathOpen:$,onSetFieldSetCollapsed:H,onSetPathCollapsed:N,openPath:U,perspective:Y,hasUpstreamVersion:W,presence:J,readOnly:ec,schemaType:L.schemaType,validation:V,value:L.value})]}):(0,n.jsx)(ic,{ms:300,children:(0,n.jsxs)(l.Flex,{align:"center",direction:"column",height:"fill",justify:"center",children:[(0,n.jsx)(l.Spinner,{muted:!0}),(0,n.jsx)(l.Box,{marginTop:3,children:(0,n.jsx)(l.Text,{align:"center",muted:!0,size:1,children:et("document-view.form-view.loading")})})]})}),S[40]=_,S[41]=R,S[42]=q,S[43]=O,S[44]=E,S[45]=k?.draft,S[46]=k?.published,S[47]=F,S[48]=L,S[49]=W,S[50]=I,S[51]=ec,S[52]=B,S[53]=A,S[54]=z,S[55]=$,S[56]=G,S[57]=H,S[58]=N,S[59]=U,S[60]=Q,S[61]=J,S[62]=Y,S[63]=et,S[64]=Z,S[65]=V,S[66]=y):y=S[66],S[67]!==ed||S[68]!==eu||S[69]!==y?(v=(0,n.jsx)(l.Box,{as:"form",onSubmit:l_,ref:ed,"data-testid":"form-view","data-read-only":eu,children:y}),S[67]=ed,S[68]=eu,S[69]=y,S[70]=v):v=S[70],S[71]!==C||S[72]!==v?(j=(0,n.jsx)(u.PresenceOverlay,{margins:C,children:v}),S[71]=C,S[72]=v,S[73]=j):j=S[73],S[74]!==I||S[75]!==j?(w=(0,n.jsx)(l.Container,{hidden:I,paddingX:4,paddingTop:5,paddingBottom:9,sizing:"border",width:1,children:j}),S[74]=I,S[75]=j,S[76]=w):w=S[76],w});function lR(){return(0,u.createPatchChannel)()}function lP(){let e,t,o=(0,i.c)(11),{activeViewId:r,paneKey:s,views:a}=ih(),d=`${s}tabpanel`;if(o[0]!==r||o[1]!==s||o[2]!==d||o[3]!==a){let t;o[5]!==r||o[6]!==s||o[7]!==d?(t=(e,t)=>(0,n.jsx)(lk,{icon:e.icon,id:`${s}tab-${e.id}`,isActive:r===e.id,label:e.title,tabPanelId:d,viewId:0===t?null:e.id??null},e.id),o[5]=r,o[6]=s,o[7]=d,o[8]=t):t=o[8],e=a.map(t),o[0]=r,o[1]=s,o[2]=d,o[3]=a,o[4]=e}else e=o[4];return o[9]!==e?(t=(0,n.jsx)(l.TabList,{space:1,children:e}),o[9]=e,o[10]=t):t=o[10],t}function lk(e){let t,l,o,r,s,a,d,c,u,p=(0,i.c)(20);p[0]!==e?({icon:t,id:l,isActive:o,label:r,tabPanelId:a,viewId:d,...s}=e,p[0]=e,p[1]=t,p[2]=l,p[3]=o,p[4]=r,p[5]=s,p[6]=a,p[7]=d):(t=p[1],l=p[2],o=p[3],r=p[4],s=p[5],a=p[6],d=p[7]);let{ready:h,editState:g}=ih(),{setView:f}=lr();p[8]!==f||p[9]!==d?(c=()=>f(d),p[8]=f,p[9]=d,p[10]=c):c=p[10];let x=c,b=!h&&!g?.draft&&!g?.published;return p[11]!==x||p[12]!==t||p[13]!==l||p[14]!==o||p[15]!==r||p[16]!==s||p[17]!==b||p[18]!==a?(u=(0,n.jsx)(m.Tab,{...s,"aria-controls":a,disabled:b,icon:t,id:l,label:r,onClick:x,selected:o}),p[11]=x,p[12]=t,p[13]=l,p[14]=o,p[15]=r,p[16]=s,p[17]=b,p[18]=a,p[19]=u):u=p[19],u}let lE={paneDataItems:[],routerPanes:[],resolvedPanes:[],maximizedPane:null,setMaximizedPane:()=>{}};function lD(){return(0,r.useContext)(s.ResolvedPanesContext)??lE}let lF=Object.freeze({}),lA=Symbol("LOADING_PANE"),lV="documentPanelPortalElement",lM=(0,tc.defineEvent)({name:"Maximized Document Pane Clicked",version:1,description:"User pressed to maximize a document by click the focus pane button"}),lL=(0,tc.defineEvent)({name:"Maximized Document Pane Collapsed",version:1,description:"User disabled the maximization on a document pane by clicking the focus pane button"}),lz=(0,tc.defineEvent)({name:"Maximized Document Pane Navigated Via Breadcrumbs",version:1,description:"User navigated to a different document pane via the breadcrumbs in the document header"});function lO(e){let t,l,o,r,s,a,d,c,p=(0,i.c)(27),{paneData:g,index:f}=e,{pane:x}=g,b=(0,h.useRouter)(),{t:y}=(0,u.useTranslation)(T),v=(0,h.useRouterState)(),j=(0,td.useTelemetry)();p[0]!==v?.panes?(t=v?.panes||[],p[0]=v?.panes,p[1]=t):t=p[1];let w=t,{perspectiveStack:S}=(0,u.usePerspective)(),I=x!==lA&&"title"in x?x.title:null,C=x!==lA&&"document"===x.type?x.options.id:null,_=x!==lA&&"document"===x.type?x.options.type:null,R=C??"",P=_??"";p[2]!==S||p[3]!==R||p[4]!==P?(l={documentId:R,documentType:P,perspectiveStack:S},p[2]=S,p[3]=R,p[4]=P,p[5]=l):l=p[5];let{value:k,isLoading:E}=(0,u.useDocumentPreviewValues)(l);e:{if(C&&!E){let e;p[6]!==k?.title||p[7]!==y?(e=k?.title||y("panes.document-header-title.untitled.text"),p[6]=k?.title,p[7]=y,p[8]=e):e=p[8],o=e;break e}o=I}let D=o;p[9]!==g.groupIndex||p[10]!==b||p[11]!==w||p[12]!==j?(r=()=>{j.log(lz),b.navigate({panes:w.slice(0,g.groupIndex)})},p[9]=g.groupIndex,p[10]=b,p[11]=w,p[12]=j,p[13]=r):r=p[13];let F=r;if(!D&&!E)return null;p[14]!==D||p[15]!==y?(s=D||y("panes.document-header-title.untitled.text"),p[14]=D,p[15]=y,p[16]=s):s=p[16],p[17]!==D||p[18]!==y?(a=D||y("panes.document-header-title.untitled.text"),p[17]=D,p[18]=y,p[19]=a):a=p[19],p[20]!==a?(d={content:a},p[20]=a,p[21]=d):d=p[21];let A=+(0!==f);return p[22]!==F||p[23]!==A||p[24]!==s||p[25]!==d?(c=(0,n.jsx)(m.Button,{mode:"bleed",text:s,tooltipProps:d,onClick:F,paddingLeft:A}),p[22]=F,p[23]=A,p[24]=s,p[25]=d,p[26]=c):c=p[26],c}function lB(e){let t,o,s=(0,i.c)(7),{paneDataItems:a,currentPaneIndex:d}=e;if(s[0]!==d||s[1]!==a){let e;s[3]!==d?(e=(e,t)=>{if(t>d)return null;let i=e.pane!==lA&&"document"===e.pane.type;return(0,n.jsxs)(r.Fragment,{children:[(0,n.jsx)(lO,{paneData:e,index:t}),t<d&&(i?(0,n.jsx)(l.Box,{padding:1,children:(0,n.jsx)(f.ArrowRightIcon,{})}):(0,n.jsx)(l.Text,{children:"/"}))]},`breadcrumb-item-${e.key}-${t}`)},s[3]=d,s[4]=e):e=s[4],t=a.map(e),s[0]=d,s[1]=a,s[2]=t}else t=s[2];return s[5]!==t?(o=(0,n.jsx)(l.Flex,{direction:"row",align:"center","data-testid":"document-header-breadcrumb",children:t}),s[5]=t,s[6]=o):o=s[6],o}function lN(){let e,t,l,o=(0,i.c)(23),{connectionState:r,schemaType:s,title:a,value:d,index:c}=ih(),{paneDataItems:p}=lD(),{title:m,error:h}=ik(),{t:g}=(0,u.useTranslation)(T);o[0]!==p?(e=p.some(l$),o[0]=p,o[1]=e):e=o[1];let f=e;if("connecting"===r&&!d){let e;return o[2]===Symbol.for("react.memo_cache_sentinel")?(e=(0,n.jsx)(n.Fragment,{}),o[2]=e):e=o[2],e}if(a){let e;return o[3]!==a?(e=(0,n.jsx)(n.Fragment,{children:a}),o[3]=a,o[4]=e):e=o[4],e}if(!d){let e,t,i=s?.title||s?.name;return o[5]!==g||o[6]!==i?(e=g("panes.document-header-title.new.text",{schemaType:i}),o[5]=g,o[6]=i,o[7]=e):e=o[7],o[8]!==e?(t=(0,n.jsx)(n.Fragment,{children:e}),o[8]=e,o[9]=t):t=o[9],t}if(h){let e,t;return o[10]!==h||o[11]!==g?(e=g("panes.document-header-title.error.text",{error:h}),o[10]=h,o[11]=g,o[12]=e):e=o[12],o[13]!==e?(t=(0,n.jsx)(n.Fragment,{children:e}),o[13]=e,o[14]=t):t=o[14],t}return o[15]!==m||o[16]!==f||o[17]!==c||o[18]!==p||o[19]!==g?(t=f?(0,n.jsx)(lB,{paneDataItems:p,currentPaneIndex:c}):m||(0,n.jsx)("span",{style:{color:"var(--card-muted-fg-color)"},children:g("panes.document-header-title.untitled.text")}),o[15]=m,o[16]=f,o[17]=c,o[18]=p,o[19]=g,o[20]=t):t=o[20],o[21]!==t?(l=(0,n.jsx)(n.Fragment,{children:t}),o[21]=t,o[22]=l):l=o[22],l}function l$(e){return e.maximized}let lH=e=>{let t,o,r,s,a,d,c=(0,i.c)(16);c[0]!==e?({documentExists:t,...o}=e,c[0]=e,c[1]=t,c[2]=o):(t=c[1],o=c[2]);let{isFavorited:p,isReady:h,favorite:g,unfavorite:x}=(0,u.useManageFavorite)(o),{t:b}=(0,u.useTranslation)(T),y=p?"document.favorites.remove-from-favorites":"document.favorites.add-to-favorites";c[3]!==b||c[4]!==y?(r=b(y),c[3]=b,c[4]=y,c[5]=r):r=c[5];let v=r,j=p?x:g,w=!h||!t;return c[6]!==v?(s={content:(0,n.jsx)(l.Text,{size:1,children:v}),placement:"right"},c[6]=v,c[7]=s):s=c[7],c[8]!==p?(a=(0,n.jsx)(l.Text,{size:1,children:p?(0,n.jsx)(f.StarFilledIcon,{}):(0,n.jsx)(f.StarIcon,{})}),c[8]=p,c[9]=a):a=c[9],c[10]!==v||c[11]!==j||c[12]!==w||c[13]!==s||c[14]!==a?(d=(0,n.jsx)(m.Button,{mode:"bleed",onClick:j,disabled:w,"aria-label":v,"aria-live":"assertive",tooltipProps:s,children:a}),c[10]=v,c[11]=j,c[12]=w,c[13]=s,c[14]=a,c[15]=d):d=c[15],d},lG=(0,r.memo)(function(){let e,t,l,o,r,s,a=(0,i.c)(24),{editState:d,connectionState:c,views:p,documentId:h,displayed:g}=ih(),{features:x}=iw(),{index:b,BackLink:y}=lr(),{activeWorkspace:v}=(0,u.useActiveWorkspace)(),j=p.length>1,{collapsed:w,isLast:S}=nH(),I=S&&!w?-1:0,C=x.backButton&&b>0,{t:_}=(0,u.useTranslation)(T);a[0]===Symbol.for("react.memo_cache_sentinel")?(e=(0,n.jsx)(lN,{}),a[0]=e):e=a[0];let R=e;a[1]!==j?(t=j&&(0,n.jsx)(lP,{}),a[1]=j,a[2]=t):t=a[2];let P=t;a[3]!==y||a[4]!==C||a[5]!==_?(l=C&&(0,n.jsx)(m.Button,{as:y,"data-as":"a",icon:f.ArrowLeftIcon,mode:"bleed",tooltipProps:{content:_("pane-header.back-button.text")}}),a[3]=y,a[4]=C,a[5]=_,a[6]=l):l=a[6];let k=l,E=g?._id??h,D=g?._type??"";a[7]!==v.dataset||a[8]!==v.projectId?(o=[v.projectId,v.dataset],a[7]=v.dataset,a[8]=v.projectId,a[9]=o):o=a[9];let F=o.join("."),A=(d?.ready&&(d.version??d.draft??d.published)!==null)??!1;a[10]!==v.dataset||a[11]!==v.name||a[12]!==v.projectId||a[13]!==E||a[14]!==D||a[15]!==F||a[16]!==A?(r=(0,n.jsx)(u.CapabilityGate,{capability:"comlink",condition:"available",children:(0,n.jsx)(lH,{resourceType:"studio",documentId:E,documentType:D,resourceId:F,schemaName:v.name,projectId:v.projectId,dataset:v.dataset,documentExists:A})}),a[10]=v.dataset,a[11]=v.name,a[12]=v.projectId,a[13]=E,a[14]=D,a[15]=F,a[16]=A,a[17]=r):r=a[17];let V=r,M="connecting"===c&&!d?.draft&&!d?.published;return a[18]!==k||a[19]!==V||a[20]!==M||a[21]!==I||a[22]!==P?(s=(0,n.jsx)(n7,{loading:M,title:R,tabs:P,tabIndex:I,backButton:k,appendTitle:V}),a[18]=k,a[19]=V,a[20]=M,a[21]=I,a[22]=P,a[23]=s):s=a[23],s}),lU=(0,eI.styled)(l.Box).withConfig({displayName:"DocumentBox",componentId:"sc-10i0hcs-0"})({position:"relative"}),lq=(0,eI.styled)(u.ScrollContainer).withConfig({displayName:"Scroller",componentId:"sc-10i0hcs-1"})(({$disabled:e})=>e?{height:"100%"}:eI.css`
    height: 100%;
    overflow: auto;
    position: relative;
    scroll-behavior: smooth;
    outline: none;
  `),lW=function(e){let t,o,s,a,d,p,m,h,g,f,x,b,y,v,j,w,S=(0,i.c)(114),{footerHeight:I,headerHeight:C,isInspectOpen:_,rootElement:T,setDocumentPanelPortalElement:R,footer:P}=e,{activeViewId:k,displayed:E,documentId:D,editState:F,inspector:A,value:V,views:M,ready:L,schemaType:z,permissions:O,isPermissionsLoading:B}=ih();if(S[0]!==V){let e=(0,u.getSanityCreateLinkMetadata)(V);t=(0,u.isSanityCreateLinked)(e),S[0]=V,S[1]=t}else t=S[1];let N=t,{params:$}=lr(),{collapsed:H}=nL(),{collapsed:G}=nH(),U=(0,l.usePortal)(),{features:q}=iw(),[W,K]=(0,r.useState)(null),[Y,X]=(0,r.useState)(null),J=(0,r.useRef)(null),Z=(0,u.useWorkspace)(),Q=V._createdAt?"update":"create";S[2]!==k||S[3]!==M?(o=M.find(e=>e.id===k)||M[0]||{type:"form"},S[2]=k,S[3]=M,S[4]=o):o=S[4];let ee=o,et=q.splitPanes&&W||U.element;e:{let e;if(H){let e,t=C||0,n=I?I+2:2;S[5]!==t||S[6]!==n?(e=[t,0,n,0],S[5]=t,S[6]=n,S[7]=e):e=S[7],s=e;break e}S[8]===Symbol.for("react.memo_cache_sentinel")?(e=[0,0,2,0],S[8]=e):e=S[8],s=e}let en=s,ei="form"!==ee.type;S[9]!==ee.component||S[10]!==ee.options||S[11]!==ee.type||S[12]!==E||S[13]!==D||S[14]!==F?.draft||S[15]!==F?.published||S[16]!==z||S[17]!==V?(a=()=>{if("component"===ee.type&&ee.component){let e=ee.component;return(0,n.jsx)(e,{document:{draft:F?.draft||null,displayed:E||V,historical:E,published:F?.published||null},documentId:D,options:ee.options,schemaType:z})}return!1},S[9]=ee.component,S[10]=ee.options,S[11]=ee.type,S[12]=E,S[13]=D,S[14]=F?.draft,S[15]=F?.published,S[16]=z,S[17]=V,S[18]=a):a=S[18],S[19]!==a?(d=a(),S[19]=a,S[20]=d):d=S[20];let el=d,eo=(0,r.useRef)(void 0);S[21]!==D||S[22]!==Y?(p=()=>{if(Y?.scrollTo){if(void 0===eo.current){eo.current=D;return}eo.current!==D&&(Y.scrollTo(0,0),eo.current=D)}},m=[D,Y],S[21]=D,S[22]=Y,S[23]=p,S[24]=m):(p=S[23],m=S[24]),(0,r.useEffect)(p,m),S[25]!==et||S[26]!==R?(h=()=>{et&&R(et)},g=[et,R],S[25]=et,S[26]=R,S[27]=h,S[28]=g):(h=S[27],g=S[28]),(0,r.useEffect)(h,g),S[29]!==E||S[30]!==_||S[31]!==V?(f=_?(0,n.jsx)(iW,{value:E||V}):null,S[29]=E,S[30]=_,S[31]=V,S[32]=f):f=S[32];let er=f,es=!!(!G&&A),{selectedPerspective:ea,selectedReleaseId:ed,selectedPerspectiveName:ec}=(0,u.usePerspective)(),eu=$?.historyVersion;S[33]!==E||S[34]!==D||S[35]!==eu?(x={historyVersion:eu,displayed:E,documentId:D},S[33]=E,S[34]=D,S[35]=eu,S[36]=x):x=S[36];let ep=(0,u.useFilteredReleases)(x),{isPaused:em}=(0,u.usePausedScheduledDraft)();t:{let e,t,i,l,o,r,s,a,d,p,m,h,g,f,x;if($?.historyVersion){let e;S[37]===Symbol.for("react.memo_cache_sentinel")?(e=(0,n.jsx)(ls,{}),S[37]=e):e=S[37],b=e;break t}S[38]!==ea?(e=(0,u.isReleaseDocument)(ea)&&(0,u.isReleaseScheduledOrScheduling)(ea),S[38]=ea,S[39]=e):e=S[39];let y=e,v=!!(y&&E?._id&&(0,c.getVersionFromId)(E?._id)===ed);if(S[40]!==F||S[41]!==z||S[42]!==ea||S[43]!==Z.document.drafts.enabled?(i=function({isSelectedPerspectiveWriteable:e,editState:t}){return(0,u.isNewDocument)(t)&&!e.result}({isSelectedPerspectiveWriteable:t=(0,u.isPerspectiveWriteable)({selectedPerspective:ea,isDraftModelEnabled:Z.document.drafts.enabled,schemaType:z}),editState:F}),S[40]=F,S[41]=z,S[42]=ea,S[43]=Z.document.drafts.enabled,S[44]=t,S[45]=i):(t=S[44],i=S[45]),i){let e;S[46]!==t.reason||S[47]!==t.result||S[48]!==z||S[49]!==ea?(e=!t.result&&(0,n.jsx)(lm,{schemaType:z,selectedPerspective:ea,reason:t.reason}),S[46]=t.reason,S[47]=t.result,S[48]=z,S[49]=ea,S[50]=e):e=S[50],b=e;break t}if(em&&E?._id){let e;S[51]===Symbol.for("react.memo_cache_sentinel")?(e=(0,n.jsx)(lv,{}),S[51]=e):e=S[51],b=e;break t}if(v){let e;S[52]!==ea?(e=(0,n.jsx)(lw,{currentRelease:ea}),S[52]=ea,S[53]=e):e=S[53],b=e;break t}S[54]!==ep.currentReleases||S[55]!==ep.notCurrentReleases?(l=[...ep.currentReleases,...ep.notCurrentReleases].find(lK),S[54]=ep.currentReleases,S[55]=ep.notCurrentReleases,S[56]=l):l=S[56];let j=l,w=E?._id&&(0,c.isDraftId)(E._id);if("drafts"===ea&&j&&w){let e;S[57]!==E||S[58]!==j._id?(e=(0,n.jsx)(lo,{releaseId:j._id,draftDocument:E}),S[57]=E,S[58]=j._id,S[59]=e):e=S[59],b=e;break t}S[60]!==ea?(o=(0,u.isSystemBundle)(ea),S[60]=ea,S[61]=o):o=S[61];let I=o,C=F?.version&&(0,u.isGoingToUnpublish)(F?.version);if(!(0,u.isSystemBundle)(ea)&&E?._id&&(0,c.getVersionFromId)(E._id)!==ec&&L&&!I&&!1===(0,u.isNewDocument)(F)&&!C){let e;S[62]!==y||S[63]!==ea||S[64]!==V._id?(e=(0,n.jsx)(lg,{documentId:V._id,currentRelease:ea,isScheduledRelease:y}),S[62]=y,S[63]=ea,S[64]=V._id,S[65]=e):e=S[65],b=e;break t}let _=function({editState:e,workspace:t,schemaType:n}){if(!e?.ready)return{result:void 0};let i=null!==e.draft,{document:{drafts:{enabled:l}}}=t;return i?l?!0===n.liveEdit?{result:!0,reason:"LIVE_EDIT_ACTIVE"}:{result:!1}:{result:!0,reason:"DRAFT_MODEL_INACTIVE"}:{result:!1}}({editState:F,workspace:Z,schemaType:z});if("form"===ee.type&&!ed&&_.result){if("DRAFT_MODEL_INACTIVE"===_.reason){let e;S[66]!==E||S[67]!==D||S[68]!==z?(e=(0,n.jsx)(lx,{displayed:E,documentId:D,schemaType:z,i18nKey:"banners.obsolete-draft.draft-model-inactive.text"}),S[66]=E,S[67]=D,S[68]=z,S[69]=e):e=S[69],b=e;break t}if("LIVE_EDIT_ACTIVE"===_.reason){let e;S[70]!==E||S[71]!==D||S[72]!==z?(e=(0,n.jsx)(lx,{displayed:E,documentId:D,schemaType:z,i18nKey:"banners.live-edit-draft-banner.text",isEditBlocking:!0}),S[70]=E,S[71]=D,S[72]=z,S[73]=e):e=S[73],b=e;break t}}if("form"!==ee.type||B){b=null;break t}S[74]!==N?(r=N&&(0,n.jsx)(lh,{}),S[74]=N,S[75]=r):r=S[75],S[76]!==O?.granted||S[77]!==Q?(s=!O?.granted&&(0,n.jsx)(le,{requiredPermission:Q}),S[76]=O?.granted,S[77]=Q,S[78]=s):s=S[78],S[79]===Symbol.for("react.memo_cache_sentinel")?(a=(0,n.jsx)(lj,{}),d=(0,n.jsx)(li,{}),p=(0,n.jsx)(iZ,{}),m=(0,n.jsx)(lu,{}),h=(0,n.jsx)(iY,{}),g=(0,n.jsx)(lS,{}),S[79]=a,S[80]=d,S[81]=p,S[82]=m,S[83]=h,S[84]=g):(a=S[79],d=S[80],p=S[81],m=S[82],h=S[83],g=S[84]);let T=E?._id??D;S[85]!==I||S[86]!==T?(f=(0,n.jsx)(lb,{documentId:T,isPinnedDraftOrPublished:I}),S[85]=I,S[86]=T,S[87]=f):f=S[87],S[88]!==r||S[89]!==s||S[90]!==f?(x=(0,n.jsxs)(n.Fragment,{children:[r,s,a,d,p,m,h,g,f]}),S[88]=r,S[89]=s,S[90]=f,S[91]=x):x=S[91],b=x}let eh=b;S[92]!==Y?(y={documentScrollElement:Y},S[92]=Y,S[93]=y):y=S[93];let eg=y,ef=q.resizablePanes||!es;return S[94]!==el||S[95]!==eh||S[96]!==Y||S[97]!==P||S[98]!==ei||S[99]!==er||S[100]!==H||S[101]!==en||S[102]!==et||S[103]!==eg||S[104]!==ef?(v=ef&&(0,n.jsxs)(l.Flex,{height:"fill",direction:"column",width:"fill",flex:2,children:[(0,n.jsxs)(u.LegacyLayerProvider,{zOffset:"paneHeader",children:[eh,(0,n.jsx)(lG,{})]}),(0,n.jsx)(lU,{flex:2,children:(0,n.jsx)(l.PortalProvider,{element:et,__unstable_elements:eg,children:(0,n.jsx)(l.BoundaryElementProvider,{element:Y,children:(0,n.jsxs)(u.VirtualizerScrollInstanceProvider,{scrollElement:Y,containerElement:J,children:[(0,n.jsxs)(lq,{$disabled:H||!1,"data-testid":"document-panel-scroller",ref:X,children:[(0,n.jsx)(lT,{hidden:ei,margins:en,ref:J}),el]}),er,(0,n.jsx)("div",{"data-testid":"document-panel-portal",ref:K})]})})})}),P]}),S[94]=el,S[95]=eh,S[96]=Y,S[97]=P,S[98]=ei,S[99]=er,S[100]=H,S[101]=en,S[102]=et,S[103]=eg,S[104]=ef,S[105]=v):v=S[105],S[106]!==D||S[107]!==T||S[108]!==z||S[109]!==es?(j=es&&(0,n.jsx)(l.BoundaryElementProvider,{element:T,children:(0,n.jsx)(iV,{documentId:D,documentType:z.name,flex:1})}),S[106]=D,S[107]=T,S[108]=z,S[109]=es,S[110]=j):j=S[110],S[111]!==v||S[112]!==j?(w=(0,n.jsx)(nG,{children:(0,n.jsxs)(l.Flex,{height:"fill",children:[v,j]})}),S[111]=v,S[112]=j,S[113]=w):w=S[113],w};function lK(e){return(0,u.isCardinalityOneRelease)(e)&&((0,u.isReleaseScheduledOrScheduling)(e)||(0,u.isPausedCardinalityOneRelease)(e))}lW.displayName="DocumentPanel";let lY=e=>{let t,n,l,o,s,a,d,c=(0,i.c)(26),{id:p,type:m,revision:g,release:x}=e,{restore:b}=(0,u.useDocumentOperation)(p,m,x),{revisionNotFound:y}=ih(),v=(0,u.useDocumentOperationEvent)(p,m),{navigateIntent:j}=(0,h.useRouter)(),w=(0,r.useRef)(v),[S,I]=(0,r.useState)(!1),{t:C}=(0,u.useTranslation)(T);c[0]!==b||c[1]!==g?(t=()=>{b.execute(g),I(!1)},c[0]=b,c[1]=g,c[2]=t):t=c[2];let _=t;c[3]===Symbol.for("react.memo_cache_sentinel")?(n=()=>{I(!1)},c[3]=n):n=c[3];let R=n;c[4]!==v||c[5]!==p||c[6]!==j||c[7]!==m?(l=()=>{v&&v!==w.current&&("success"===v.type&&"restore"===v.op&&j("edit",{id:p,type:m}),w.current=v)},o=[v,p,j,m],c[4]=v,c[5]=p,c[6]=j,c[7]=m,c[8]=l,c[9]=o):(l=c[8],o=c[9]),(0,r.useEffect)(l,o),c[10]===Symbol.for("react.memo_cache_sentinel")?(s=()=>{I(!0)},c[10]=s):s=c[10];let P=s;e:{if(S){let e,t;c[11]!==C?(e=C("action.restore.confirm.message"),c[11]=C,c[12]=e):e=c[12],c[13]!==_||c[14]!==e?(t={type:"confirm",tone:"critical",onCancel:R,onConfirm:_,message:e},c[13]=_,c[14]=e,c[15]=t):t=c[15],a=t;break e}a=null}let k=a,E="@initial"===g,D=void 0===g;t:{let e,t,n;if(D||y){d=null;break t}c[16]!==C?(e=C("action.restore.label"),c[16]=C,c[17]=e):e=c[17];let i=E?"action.restore.disabled.cannot-restore-initial":"action.restore.tooltip";c[18]!==C||c[19]!==i?(t=C(i),c[18]=C,c[19]=i,c[20]=t):t=c[20],c[21]!==k||c[22]!==E||c[23]!==t||c[24]!==e?(n={label:e,tone:"caution",onHandle:P,title:t,icon:f.RevertIcon,dialog:k,disabled:E},c[21]=k,c[22]=E,c[23]=t,c[24]=e,c[25]=n):n=c[25],d=n}return d};function lX(e){return("item"===e.type||"group"===e.type)&&e.renderAsButton}lY.action="restore",lY.displayName="HistoryRestoreAction";let lJ=(0,e3.default)(lX);function lZ(e){let{fieldActions:t=[],menuItems:n,menuItemGroups:i}=e,l=[],o=0;for(let e=0;e<t.length;e+=1){let n=t[e];l.push(function e(t,n){return"divider"===t.type?{type:"divider",key:n}:"group"===t.type?{type:"group",key:n,children:t.children.map((t,i)=>e(t,`${n}-${i}-${t.type}`)),disabled:t.disabled,expanded:t.expanded??!0,icon:t.icon,title:t.title,i18n:t.i18n,renderAsButton:t.renderAsButton??!1}:{type:"item",key:n,intent:t.intent,disabled:t.disabled,icon:t.icon,iconRight:t.iconRight,onAction:t.onAction,renderAsButton:t.renderAsButton??!1,selected:t.selected,title:t.title,i18n:t.i18n,tone:t.tone}}(n,`${e}-${n.type}`))}o+=l.length;let r=[];for(let e of i)r.find(t=>t.key===e.id)||r.push({type:"group",key:e.id,children:[],expanded:!0,renderAsButton:!1,title:e.title,i18n:e.i18n});let s=[];for(let t=0;t<n.length;t+=1){let i=n[t],l=i.group&&r.find(e=>e.key===i.group),a="string"==typeof i.disabled?{reason:i.disabled}:i.disabled;i.group&&!l&&(l={type:"group",key:i.group,disabled:a,expanded:!0,icon:i.icon,title:i.group,children:[],renderAsButton:!1},r.push(l)),l?l.children.push({type:"item",key:`${o+t}-item`,hideSelectionIndicator:i.params?.hideSelectionIndicator===!0,hotkey:i.shortcut,icon:i.icon,intent:i.intent,disabled:a,onAction:()=>e.actionHandler(i),renderAsButton:i.showAsAction??!1,selected:i.selected,title:i.title,i18n:i.i18n,tone:i.tone}):s.push({type:"item",key:`${o+t}-item`,hideSelectionIndicator:i.params?.hideSelectionIndicator===!0,hotkey:i.shortcut,icon:i.icon,intent:i.intent,disabled:a,onAction:()=>e.actionHandler(i),renderAsButton:i.showAsAction??!1,selected:i.selected,title:i.title,i18n:i.i18n,tone:i.tone})}return[...s,...r,...l]}let lQ=["left","bottom"],l0={small:0,medium:1,large:2,full:"auto"};function l1(e){let t,l,o,r=(0,i.c)(16),{dialog:s,referenceElement:a}=e,{t:d}=(0,u.useTranslation)(T),{cancelButtonIcon:c,cancelButtonText:p,confirmButtonIcon:m,confirmButtonText:h,message:g,onCancel:f,onConfirm:x,tone:b}=s;return r[0]!==p||r[1]!==d?(t=p||d("confirm-dialog.cancel-button.fallback-text"),r[0]=p,r[1]=d,r[2]=t):t=r[2],r[3]!==h||r[4]!==d?(l=h||d("confirm-dialog.confirm-button.fallback-text"),r[3]=h,r[4]=d,r[5]=l):l=r[5],r[6]!==c||r[7]!==m||r[8]!==g||r[9]!==f||r[10]!==x||r[11]!==a||r[12]!==t||r[13]!==l||r[14]!==b?(o=(0,n.jsx)(ta.ConfirmPopover,{cancelButtonIcon:c,cancelButtonText:t,confirmButtonIcon:m,confirmButtonText:l,message:g,onCancel:f,onConfirm:x,open:!0,referenceElement:a,tone:b,placement:"top",fallbackPlacements:lQ}),r[6]=c,r[7]=m,r[8]=g,r[9]=f,r[10]=x,r[11]=a,r[12]=t,r[13]=l,r[14]=b,r[15]=o):o=r[15],o}function l2(e){let t,s,a,d=(0,i.c)(12),{dialog:c}=e,p=(0,r.useId)();d[0]!==c.footer?(t=c.footer&&(0,n.jsx)(l.Box,{paddingX:4,paddingY:3,children:c.footer}),d[0]=c.footer,d[1]=t):t=d[1];let m=t,h=!1===c.showCloseButton,g=void 0===c.width?1:l0[c.width];return d[2]!==c.content?(s=(0,n.jsx)(l.Box,{padding:4,children:c.content}),d[2]=c.content,d[3]=s):s=d[3],d[4]!==c.header||d[5]!==c.onClose||d[6]!==p||d[7]!==m||d[8]!==h||d[9]!==g||d[10]!==s?(a=(0,n.jsx)(u.LegacyLayerProvider,{zOffset:"fullscreen",children:(0,n.jsx)(o.Dialog,{animate:!0,__unstable_hideCloseButton:h,footer:m,header:c.header,id:p,onClose:c.onClose,onClickOutside:c.onClose,width:g,children:s})}),d[4]=c.header,d[5]=c.onClose,d[6]=p,d[7]=m,d[8]=h,d[9]=g,d[10]=s,d[11]=a):a=d[11],a}function l3(e){let t,o,r=(0,i.c)(5),{dialog:s,referenceElement:a}=e;return r[0]!==s?(t=(0,n.jsx)(l4,{dialog:s}),r[0]=s,r[1]=t):t=r[1],r[2]!==a||r[3]!==t?(o=(0,n.jsx)(l.Popover,{content:t,fallbackPlacements:lQ,open:!0,placement:"top",portal:!0,preventOverflow:!0,referenceElement:a}),r[2]=a,r[3]=t,r[4]=o):o=r[4],o}function l4(e){let t,o,s,a=(0,i.c)(6),{dialog:d}=e,{content:c,onClose:u}=d,{isTopLayer:p}=(0,l.useLayer)(),m=(0,r.useRef)(null);return a[0]!==p||a[1]!==u?(t=e=>{"Escape"===e.key&&p&&u()},a[0]=p,a[1]=u,a[2]=t):t=a[2],(0,l.useGlobalKeyDown)(t),a[3]===Symbol.for("react.memo_cache_sentinel")?(o=()=>[m.current],a[3]=o):o=a[3],(0,l.useClickOutsideEvent)(p&&u,o),a[4]!==c?(s=(0,n.jsx)("div",{ref:m,children:c}),a[4]=c,a[5]=s):s=a[5],s}function l5(e){let t,o=(0,i.c)(3),{children:r}=e,{element:s,elements:a}=(0,l.usePortal)(),d=a?.[lV]||s;return o[0]!==r||o[1]!==d?(t=(0,n.jsx)(l.PortalProvider,{element:d,children:r}),o[0]=r,o[1]=d,o[2]=t):t=o[2],t}function l6(e){let t,o,s=(0,i.c)(17),{dialog:a,referenceElement:d}=e,c=void 0===d?null:d,u=(0,r.useId)();if("confirm"===a.type){let e;return s[0]!==a||s[1]!==c?(e=(0,n.jsx)(l1,{dialog:a,referenceElement:c}),s[0]=a,s[1]=c,s[2]=e):e=s[2],e}if("popover"===a.type){let e;return s[3]!==a||s[4]!==c?(e=(0,n.jsx)(l3,{dialog:a,referenceElement:c}),s[3]=a,s[4]=c,s[5]=e):e=s[5],e}if("dialog"===a.type||!a.type){let e;return s[6]!==a?(e=(0,n.jsx)(l5,{children:(0,n.jsx)(l2,{dialog:a})}),s[6]=a,s[7]=e):e=s[7],e}if("custom"===a.type){let e,t=a?.component;return s[8]!==t?(e=(0,n.jsx)(l5,{children:t}),s[8]=t,s[9]=e):e=s[9],e}return console.warn(`Unsupported modal type ${a.type}`),s[10]!==a.content||s[11]!==a.type?(t=a.content||(0,n.jsxs)(l.Text,{size:1,children:["Unexpected modal type (",(0,n.jsx)("code",{children:a.type}),")"]}),s[10]=a.content,s[11]=a.type,s[12]=t):t=s[12],s[13]!==u||s[14]!==t||s[15]!==a.onClose?(o=(0,n.jsx)(m.Dialog,{id:u,onClose:a.onClose,onClickOutside:a.onClose,width:1,children:t}),s[13]=u,s[14]=t,s[15]=a.onClose,s[16]=o):o=s[16],o}let l8=(0,r.memo)(function(e){let t,l,o,s,a=(0,i.c)(9),{actionStates:d,children:c,referenceElement:p}=e,[m,h]=(0,r.useState)(-1),g=d[m];a[0]===Symbol.for("react.memo_cache_sentinel")?(t=e=>{h(e)},a[0]=t):t=a[0];let f=t;a[1]!==c?(l=c({handleAction:f}),a[1]=c,a[2]=l):l=a[2];let x=l;return a[3]!==g||a[4]!==p?(o=g&&g.dialog&&(0,n.jsx)(u.LegacyLayerProvider,{zOffset:"paneFooter",children:(0,n.jsx)(l6,{dialog:g.dialog,referenceElement:p})}),a[3]=g,a[4]=p,a[5]=o):o=a[5],a[6]!==x||a[7]!==o?(s=(0,n.jsxs)(n.Fragment,{children:[o,x]}),a[6]=x,a[7]=o,a[8]=s):s=a[8],s});function l7(e){let t,o,s,a=(0,i.c)(10),{actionStates:d,disabled:c}=e,p=(0,r.useId)(),[h,g]=(0,r.useState)(null);a[0]===Symbol.for("react.memo_cache_sentinel")?(t={placement:"top-end",portal:!0,preventOverflow:!0},a[0]=t):t=a[0];let f=t,{t:x}=(0,u.useTranslation)(T);a[1]!==d||a[2]!==c||a[3]!==p||a[4]!==x?(o=e=>{let{handleAction:t}=e;return(0,n.jsx)(m.MenuButton,{id:`${p}-action-menu`,button:(0,n.jsx)(u.ContextMenuButton,{"aria-label":x("buttons.action-menu-button.aria-label"),disabled:c,"data-testid":"action-menu-button",tooltipProps:{content:x("buttons.action-menu-button.tooltip")}}),menu:(0,n.jsx)(l.Menu,{padding:1,children:d.map((e,i)=>(0,n.jsx)(l9,{actionState:e,disabled:c,index:i,onAction:t},i))}),popover:f,ref:g})},a[1]=d,a[2]=c,a[3]=p,a[4]=x,a[5]=o):o=a[5];let b=o;return a[6]!==d||a[7]!==h||a[8]!==b?(s=(0,n.jsx)(l8,{actionStates:d,referenceElement:h,children:b}),a[6]=d,a[7]=h,a[8]=b,a[9]=s):s=a[9],s}function l9(e){let t,l,o,r,s,a=(0,i.c)(20),{actionState:d,disabled:c,index:u,onAction:p}=e,{onHandle:h}=d;a[0]!==u||a[1]!==p||a[2]!==h?(t=()=>{p(u),h&&h()},a[0]=u,a[1]=p,a[2]=h,a[3]=t):t=a[3];let g=t;a[4]!==d.shortcut?(l=d.shortcut?String(d.shortcut).split("+").map(oe):void 0,a[4]=d.shortcut,a[5]=l):l=a[5];let f=l;a[6]!==d.label?(o=d.label.replace(" ",""),a[6]=d.label,a[7]=o):o=a[7];let x=`action-${o}`,b=c||!!d.disabled;return a[8]!==d.disabled||a[9]!==d.title?(r=d.disabled&&{tooltipProps:{content:d.title}},a[8]=d.disabled,a[9]=d.title,a[10]=r):r=a[10],a[11]!==d.icon||a[12]!==d.label||a[13]!==d.tone||a[14]!==g||a[15]!==f||a[16]!==x||a[17]!==b||a[18]!==r?(s=(0,n.jsx)(m.MenuItem,{"data-testid":x,disabled:b,hotkeys:f,icon:d.icon,onClick:g,text:d.label,tone:d.tone,...r}),a[11]=d.icon,a[12]=d.label,a[13]=d.tone,a[14]=g,a[15]=f,a[16]=x,a[17]=b,a[18]=r,a[19]=s):s=a[19],s}function oe(e){return e.slice(0,1).toUpperCase()+e.slice(1)}function ot(e){var t,o;let s,a,d,p,h,g,x,b,y,v,j,w,S=(0,i.c)(43),{nonReleaseVersions:I,selectedPerspective:C,onSelectBundle:_,onCopyToDraftsNavigate:T,documentType:R,releasesLoading:P,releases:k}=e,{t:E}=(0,u.useTranslation)(),[D,F]=(0,r.useState)(!1),[A,V]=(0,r.useState)(null);S[0]!==C?(a=e=>(0,c.getVersionFromId)(e)===C,S[0]=C,S[1]=a):a=S[1],S[2]!==I||S[3]!==a?(t=I,o=a,d=[-1===(s=t.findIndex(o))?void 0:t[s],-1===s?t:t.slice(0,s).concat(t.slice(s+1))],S[2]=I,S[3]=a,S[4]=d):d=S[4];let[M,L]=d,z=(0,r.useRef)(null);if(S[5]===Symbol.for("react.memo_cache_sentinel")?(p=e=>{e.target&&"matches"in e.target&&"function"==typeof e.target.matches&&e.target.matches("[data-portal] *")||F(!1)},h=()=>[z.current],S[5]=p,S[6]=h):(p=S[5],h=S[6]),(0,l.useClickOutsideEvent)(p,h),0===I.length)return null;if(S[7]!==R||S[8]!==T||S[9]!==_||S[10]!==k||S[11]!==P||S[12]!==M?(g=M&&(w=(0,c.getVersionFromId)(M),(0,n.jsx)(u.VersionChip,{selected:!0,text:w,tone:"default",onClick:()=>_(w),onCopyToDraftsNavigate:T,contextValues:{documentId:(0,c.getPublishedId)(M),releases:k,releasesLoading:P,documentType:R,bundleId:w,isVersion:!0}},M)),S[7]=R,S[8]=T,S[9]=_,S[10]=k,S[11]=P,S[12]=M,S[13]=g):g=S[13],S[14]!==D||S[15]!==L.length||S[16]!==E?(x=L.length>0?(0,n.jsx)(m.Tooltip,{content:E("release.chip.tooltip.other-versions",{count:L.length}),fallbackPlacements:[],portal:!0,placement:D?"top":"bottom",children:(0,n.jsx)(u.Chip,{mode:"bleed",fontSize:1,muted:!0,selected:D,iconRight:D?f.ChevronUpIcon:f.ChevronDownIcon,ref:V,onClick:()=>F(on),text:E("release.chip.button.other-versions",{count:L.length})})}):null,S[14]=D,S[15]=L.length,S[16]=E,S[17]=x):x=S[17],S[18]!==R||S[19]!==T||S[20]!==_||S[21]!==L||S[22]!==k||S[23]!==P||S[24]!==C){let e;S[26]!==R||S[27]!==T||S[28]!==_||S[29]!==k||S[30]!==P||S[31]!==C?(e=e=>{let t=(0,c.getVersionFromId)(e);return(0,n.jsx)(u.VersionChip,{selected:C===t,text:t,disabled:!1,contextMenuPortal:!1,tone:"default",onClick:()=>_(t),onCopyToDraftsNavigate:T,contextValues:{documentId:(0,c.getPublishedId)(e),releases:k,releasesLoading:P,documentType:R,bundleId:t,isVersion:!0}},e)},S[26]=R,S[27]=T,S[28]=_,S[29]=k,S[30]=P,S[31]=C,S[32]=e):e=S[32],b=L.map(e),S[18]=R,S[19]=T,S[20]=_,S[21]=L,S[22]=k,S[23]=P,S[24]=C,S[25]=b}else b=S[25];return S[33]!==b?(y=(0,n.jsx)(l.Container,{width:1,children:(0,n.jsx)(l.Flex,{width:1,padding:3,gap:2,wrap:"wrap",children:b})}),S[33]=b,S[34]=y):y=S[34],S[35]!==D||S[36]!==A||S[37]!==y?(v=(0,n.jsx)(m.Popover,{animate:!1,open:D,portal:!0,arrow:!0,ref:z,placement:"bottom",referenceElement:A,zOffset:10,content:y}),S[35]=D,S[36]=A,S[37]=y,S[38]=v):v=S[38],S[39]!==g||S[40]!==x||S[41]!==v?(j=(0,n.jsxs)(n.Fragment,{children:[g,x,v]}),S[39]=g,S[40]=x,S[41]=v,S[42]=j):j=S[42],j}function on(e){return!e}let oi=e=>{let t=(0,i.c)(16),{release:o}=e,{t:r}=(0,u.useTranslation)();if("archived"===o.state){let e,i;return t[0]!==r?(e=r("release.chip.tooltip.archived"),t[0]=r,t[1]=e):e=t[1],t[2]!==e?(i=(0,n.jsx)(l.Text,{size:1,children:e}),t[2]=e,t[3]=i):i=t[3],i}if("asap"===o.metadata.releaseType){let e,i;return t[4]!==r?(e=r("release.type.asap"),t[4]=r,t[5]=e):e=t[5],t[6]!==e?(i=(0,n.jsx)(l.Text,{size:1,children:e}),t[6]=e,t[7]=i):i=t[7],i}if("scheduled"===o.metadata.releaseType){let e,i="active"===o.state;return t[8]!==i||t[9]!==o||t[10]!==r?(e=o.metadata.intendedPublishAt&&(0,n.jsx)(l.Text,{size:1,children:i?(0,n.jsx)(u.Translate,{t:r,i18nKey:"release.chip.tooltip.intended-for-date",values:{date:(0,u.formatRelativeLocalePublishDate)(o)}}):(0,n.jsx)(u.Translate,{t:r,i18nKey:"release.chip.tooltip.scheduled-for-date",values:{date:(0,u.formatRelativeLocalePublishDate)(o)}})}),t[8]=i,t[9]=o,t[10]=r,t[11]=e):e=t[11],e}if("undecided"===o.metadata.releaseType){let e,i;return t[12]!==r?(e=r("release.type.undecided"),t[12]=r,t[13]=e):e=t[13],t[14]!==e?(i=(0,n.jsx)(l.Text,{size:1,children:e}),t[14]=e,t[15]=i):i=t[15],i}return null},ol={dateStyle:"medium",timeStyle:"short"},oo=(0,r.memo)(function(){let e,t,o,r,s,a,d,p,m,h,g,f,x,b,y,v,j,w,S,I,C,_,T=(0,i.c)(112),{selectedReleaseId:R,selectedPerspectiveName:P}=(0,u.usePerspective)(),{t:k}=(0,u.useTranslation)(),E=(0,u.useSetPerspective)(),{params:D,setParams:F}=lr(),A=(0,u.useDateTimeFormat)(ol),{loading:V}=(0,u.useActiveReleases)(),M=(0,u.useSchema)(),{editState:L,displayed:z,documentType:O,documentId:B}=ih(),N=z&&!z._createdAt,$=(0,u.useGetDefaultPerspective)(),H=D?.historyVersion;T[0]!==z||T[1]!==B||T[2]!==H?(e={historyVersion:H,displayed:z,documentId:B},T[0]=z,T[1]=B,T[2]=H,T[3]=e):e=T[3];let G=(0,u.useFilteredReleases)(e);T[4]!==B?(t={documentId:B},T[4]=B,T[5]=t):t=T[5];let{data:U}=(0,u.useDocumentVersions)(t);T[6]!==U?(o=U&&U.length>0&&!U.some(or),T[6]=U,T[7]=o):o=T[7];let q=o,W=(0,u.useWorkspace)(),{onSetScheduledDraftPerspective:K}=(0,u.useSingleDocRelease)();T[8]!==K||T[9]!==D?.scheduledDraft||T[10]!==E?(r=()=>{D?.scheduledDraft?K(""):E("drafts")},T[8]=K,T[9]=D?.scheduledDraft,T[10]=E,T[11]=r):r=T[11];let Y=r;T[12]!==$||T[13]!==K||T[14]!==D||T[15]!==F||T[16]!==E?(s=e=>{if((0,u.isReleaseDocument)(e)&&(0,u.isCardinalityOneRelease)(e))return void K((0,u.getReleaseIdFromReleaseDocumentId)(e._id));"published"===e&&D?.historyVersion&&F({...D,rev:D?.historyEvent||void 0,since:void 0,historyVersion:void 0});let t=(0,u.isReleaseDocument)(e)?(0,u.getReleaseIdFromReleaseDocumentId)(e._id):e===$?"":e;D?.scheduledDraft?F({...D,scheduledDraft:void 0},{perspective:t}):E(t)},T[12]=$,T[13]=K,T[14]=D,T[15]=F,T[16]=E,T[17]=s):s=T[17];let X=s;if(T[18]!==O||T[19]!==M){let e=M.get(O);a=!!e&&!0===e.liveEdit,T[18]=O,T[19]=M,T[20]=a}else a=T[20];let J=a;e:{if(J&&!R){d=!1;break e}d=!L?.published}let Z=d;T[21]!==z?._id||T[22]!==L?.version||T[23]!==D?(p=e=>{if(!D?.historyVersion){let t=L?.version&&(0,u.isGoingToUnpublish)(L?.version)&&(0,u.getReleaseIdFromReleaseDocumentId)(e._id)===(0,c.getVersionFromId)(L?.version?._id);return{selected:!!((0,u.getReleaseIdFromReleaseDocumentId)(e._id)===(0,c.getVersionFromId)(z?._id||"")||t)}}let t=(0,u.getReleaseIdFromReleaseDocumentId)(e._id)===D.historyVersion;return{selected:t,disabled:t}},T[21]=z?._id,T[22]=L?.version,T[23]=D,T[24]=p):p=T[24];let Q=p;T[25]!==z?._id||T[26]!==L?.draft?._id||T[27]!==J||T[28]!==P||T[29]!==R?(m=()=>!!(J&&!L?.draft?._id&&!R||(0,c.isPublishedId)(z?._id||"")&&(0,u.isPublishedPerspective)(P||"")),T[25]=z?._id,T[26]=L?.draft?._id,T[27]=J,T[28]=P,T[29]=R,T[30]=m):m=T[30];let ee=m();t:{let e=z?._id||"";if(ee||D?.historyVersion||P||(0,c.isVersionId)(e)){h=!1;break t}if((0,c.isDraftId)(e)){h=!0;break t}if((0,c.isPublishedId)(e)&&L?.published&&(0,u.isPublishedPerspective)(P||"")){h=!1;break t}h=!0}let et=h;T[31]!==L?.draft||T[32]!==N||T[33]!==J||T[34]!==q||T[35]!==R?(g=()=>!!q||!!N&&!!R||(!!L?.draft||!!J)&&!!(N&&R||J),T[31]=L?.draft,T[32]=N,T[33]=J,T[34]=q,T[35]=R,T[36]=g):g=T[36];let en=g(),ei=W.document.drafts?.enabled;if(T[37]!==U||T[38]!==G.currentReleases){let e;T[40]!==G.currentReleases?(e=e=>!((0,c.isPublishedId)(e)||(0,c.isDraftId)(e))&&!G.currentReleases.some(t=>(0,u.getReleaseIdFromReleaseDocumentId)(t._id)===(0,c.getVersionFromId)(e)),T[40]=G.currentReleases,T[41]=e):e=T[41],f=U.filter(e),T[37]=U,T[38]=G.currentReleases,T[39]=f}else f=T[39];let el=f;T[42]!==A||T[43]!==L?.published||T[44]!==k?(x=(0,n.jsx)(l.Text,{size:1,children:L?.published&&L?.published?._updatedAt?(0,n.jsx)(u.Translate,{t:k,i18nKey:"release.chip.tooltip.published-date",values:{date:A.format(new Date(L?.published._updatedAt))}}):(0,n.jsx)(n.Fragment,{children:k("release.chip.tooltip.not-published")})}),T[42]=A,T[43]=L?.published,T[44]=k,T[45]=x):x=T[45],T[46]!==X?(b=()=>X("published"),T[46]=X,T[47]=b):b=T[47],T[48]!==k?(y=k("release.chip.published"),T[48]=k,T[49]=y):y=T[49];let eo=L?.published?._id||L?.id||"",er=!L?.published;return T[50]!==O||T[51]!==G.notCurrentReleases||T[52]!==V||T[53]!==eo||T[54]!==er?(v={documentId:eo,releases:G.notCurrentReleases,releasesLoading:V,documentType:O,bundleId:"published",isVersion:!1,disabled:er},T[50]=O,T[51]=G.notCurrentReleases,T[52]=V,T[53]=eo,T[54]=er,T[55]=v):v=T[55],T[56]!==Y||T[57]!==ee||T[58]!==Z||T[59]!==x||T[60]!==b||T[61]!==y||T[62]!==v?(j=(0,n.jsx)(u.VersionChip,{tooltipContent:x,disabled:Z,onClick:b,selected:ee,text:y,tone:"positive",onCopyToDraftsNavigate:Y,contextValues:v}),T[56]=Y,T[57]=ee,T[58]=Z,T[59]=x,T[60]=b,T[61]=y,T[62]=v,T[63]=j):j=T[63],T[64]!==A||T[65]!==O||T[66]!==L?.draft||T[67]!==L?.id||T[68]!==L?.published?._id||T[69]!==G.notCurrentReleases||T[70]!==Y||T[71]!==X||T[72]!==en||T[73]!==ei||T[74]!==et||T[75]!==J||T[76]!==V||T[77]!==k?(w=ei&&(0,n.jsx)(u.VersionChip,{tooltipContent:(0,n.jsx)(l.Text,{size:1,children:L?.draft?(0,n.jsx)(n.Fragment,{children:L?.draft._updatedAt?(0,n.jsx)(u.Translate,{t:k,i18nKey:"release.chip.tooltip.edited-date",values:{date:A.format(new Date(L?.draft._updatedAt))}}):(0,n.jsx)(u.Translate,{t:k,i18nKey:"release.chip.tooltip.created-date",values:{date:A.format(new Date(L?.draft._createdAt))}})}):(0,n.jsx)(n.Fragment,{children:k(J?"release.chip.tooltip.draft-disabled.live-edit":"release.chip.tooltip.no-edits")})}),selected:et,disabled:en,text:k("release.chip.draft"),tone:L?.draft?"caution":"neutral",onClick:()=>X("drafts"),onCopyToDraftsNavigate:Y,contextValues:{documentId:L?.draft?._id||L?.published?._id||L?.id||"",documentType:O,releases:G.notCurrentReleases,releasesLoading:V,bundleId:"draft",isVersion:!1}}),T[64]=A,T[65]=O,T[66]=L?.draft,T[67]=L?.id,T[68]=L?.published?._id,T[69]=G.notCurrentReleases,T[70]=Y,T[71]=X,T[72]=en,T[73]=ei,T[74]=et,T[75]=J,T[76]=V,T[77]=k,T[78]=w):w=T[78],T[79]!==z?._id||T[80]!==O||T[81]!==G.inCreation||T[82]!==G.notCurrentReleases||T[83]!==Y||T[84]!==V||T[85]!==k?(S=G.inCreation&&(0,n.jsx)(u.ReleaseTitle,{title:G.inCreation.metadata.title,fallback:k("release.placeholder-untitled-release"),enableTooltip:!1,children:e=>{let{displayTitle:t,fullTitle:i,isTruncated:o}=e;return(0,n.jsx)(u.VersionChip,{tooltipContent:o?(0,n.jsxs)(l.Stack,{space:2,style:{maxWidth:"300px"},children:[(0,n.jsx)(l.Text,{size:1,weight:"medium",children:i}),(0,n.jsx)(oi,{release:G.inCreation})]}):(0,n.jsx)(oi,{release:G.inCreation}),selected:!0,onClick:os,locked:!1,tone:(0,u.getReleaseTone)(G.inCreation),text:t,onCopyToDraftsNavigate:Y,contextValues:{documentId:z?._id||"",documentType:O,disabled:!0,releases:G.notCurrentReleases,releasesLoading:V,bundleId:(0,u.getReleaseIdFromReleaseDocumentId)(G.inCreation._id),isVersion:!0,release:G.inCreation}})}}),T[79]=z?._id,T[80]=O,T[81]=G.inCreation,T[82]=G.notCurrentReleases,T[83]=Y,T[84]=V,T[85]=k,T[86]=S):S=T[86],T[87]!==z||T[88]!==O||T[89]!==L?.version||T[90]!==G.currentReleases||T[91]!==G.notCurrentReleases||T[92]!==Q||T[93]!==Y||T[94]!==X||T[95]!==V||T[96]!==k?(I=z&&G.currentReleases?.map(e=>(0,n.jsx)(u.ReleaseTitle,{title:e.metadata.title,fallback:k("release.placeholder-untitled-release"),enableTooltip:!1,children:t=>{let{displayTitle:i,fullTitle:o,isTruncated:r}=t;return(0,n.jsx)(u.VersionChip,{tooltipContent:r?(0,n.jsxs)(l.Stack,{space:2,style:{maxWidth:"300px"},children:[(0,n.jsx)(l.Text,{size:1,weight:"medium",children:o}),(0,n.jsx)(oi,{release:e})]}):(0,n.jsx)(oi,{release:e}),...Q(e),onClick:()=>X(e),text:i,tone:(0,u.getReleaseTone)(e),locked:(0,u.isReleaseScheduledOrScheduling)(e),onCopyToDraftsNavigate:Y,contextValues:{documentId:z?._id||"",documentType:O,releases:G.notCurrentReleases,releasesLoading:V,bundleId:(0,u.getReleaseIdFromReleaseDocumentId)(e._id),isVersion:!0,release:e,isGoingToUnpublish:!!L?.version&&(0,u.isGoingToUnpublish)(L?.version)}})}},e._id)),T[87]=z,T[88]=O,T[89]=L?.version,T[90]=G.currentReleases,T[91]=G.notCurrentReleases,T[92]=Q,T[93]=Y,T[94]=X,T[95]=V,T[96]=k,T[97]=I):I=T[97],T[98]!==O||T[99]!==G.notCurrentReleases||T[100]!==Y||T[101]!==X||T[102]!==V||T[103]!==el||T[104]!==P?(C=(0,n.jsx)(ot,{nonReleaseVersions:el,selectedPerspective:P,onSelectBundle:X,onCopyToDraftsNavigate:Y,releases:G.notCurrentReleases,releasesLoading:V,documentType:O}),T[98]=O,T[99]=G.notCurrentReleases,T[100]=Y,T[101]=X,T[102]=V,T[103]=el,T[104]=P,T[105]=C):C=T[105],T[106]!==j||T[107]!==w||T[108]!==S||T[109]!==I||T[110]!==C?(_=(0,n.jsxs)(n.Fragment,{children:[j,w,S,I,C]}),T[106]=j,T[107]=w,T[108]=S,T[109]=I,T[110]=C,T[111]=_):_=T[111],_});function or(e){return!(0,c.isVersionId)(e)}function os(){}let oa=(0,eI.styled)(l.Card).withConfig({displayName:"HorizontalScroller",componentId:"sc-4smkq-0"})(e=>{let t=(0,tC.getTheme_v2)(e.theme);return eI.css`
    scrollbar-width: none;
    z-index: 1;
    flex: 1;
    position: relative;
    > div {
      &::-webkit-scrollbar {
        width: 0;
        height: 0;
      }
    }

    ${e.$showGradient&&eI.css`
      &::after {
        content: '';
        display: block;
        position: absolute;
        top: 0;
        right: 0;
        bottom: 0;
        width: 150px;
        background: linear-gradient(to right, ${(0,tC.rgba)(t.color.bg,0)}, var(--card-bg-color));
        transition: 'opacity 300ms ease-out';
        pointer-events: none;
      }
    `}
  `}),od=(0,r.memo)((0,r.forwardRef)(function(e,t){let o,s,a,d,c,p,h,g=(0,i.c)(41),{menuItems:x}=e,{editState:b,onMenuAction:y,onPaneClose:v,onPaneSplit:j,onSetMaximizedPane:w,menuItemGroups:S,schemaType:I,connectionState:C,views:_,unstable_languageFilter:R,documentId:P}=ih(),{features:k}=iw(),{index:E,BackLink:D,hasGroupSiblings:F}=lr(),{maximizedPane:A}=lD(),{actions:V}=(0,u.useFieldActions)(),[M,L]=(0,r.useState)(null),z=(0,r.useRef)(null),O=function(e){let t,n,l=(0,i.c)(3),[o,s]=(0,r.useState)(!1);return l[0]!==e?(t=()=>{let t=()=>{let t=e.current;if(!t)return;let{scrollWidth:n,clientWidth:i}=t;if(!(n>i))return void s(!1);let{scrollLeft:l}=t;s(!(l+i>=n))},{intersectionObserver:n,mutationObserver:i}=function(){t();let n=e.current;if(!n)return{intersectionObserver:null,mutationObserver:null};let i=new IntersectionObserver(e=>{let t=e[0];t&&s(!t.isIntersecting)}),l=()=>{i.disconnect();let e=n.children[n.children.length-1];i.observe(e)};l();let o=new MutationObserver(()=>{l(),t()});return o.observe(n,{childList:!0,subtree:!1}),{intersectionObserver:i,mutationObserver:o}}();return()=>{n?.disconnect(),i?.disconnect()}},n=[e],l[0]=e,l[1]=t,l[2]=n):(t=l[1],n=l[2]),(0,r.useEffect)(t,n),o}(z),B=(0,td.useTelemetry)();g[0]!==V||g[1]!==S||g[2]!==x||g[3]!==y?(o=lZ({actionHandler:y,fieldActions:V,menuItems:x,menuItemGroups:S}),g[0]=V,g[1]=S,g[2]=x,g[3]=y,g[4]=o):o=g[4];let N=o;g[5]!==N?(s=N.filter(lX),g[5]=N,g[6]=s):s=g[6];let $=s;g[7]!==N?(a=N.filter(lJ),g[7]=N,g[8]=a):a=g[8];let H=a,{collapsed:G,isLast:U}=nH(),q=U&&!G?-1:0,W=k.splitViews&&j&&_.length>1,K=W&&F,Y=k.backButton&&E>0,X=!K&&!Y&&!!D,{t:J}=(0,u.useTranslation)(T),Z=A?.pane&&"object"==typeof A.pane&&"document"===A.pane.type&&A.pane.options.id===P;g[9]!==Z||g[10]!==w||g[11]!==B?(d=()=>{w?.(),Z?B.log(lL):B.log(lM)},g[9]=Z,g[10]=w,g[11]=B,g[12]=d):d=g[12];let Q=d;g[13]===Symbol.for("react.memo_cache_sentinel")?(c=(0,n.jsx)(lN,{}),g[13]=c):c=g[13];let ee=c;g[14]!==D||g[15]!==Y||g[16]!==J?(p=Y&&(0,n.jsx)(m.Button,{as:D,"data-as":"a",icon:f.ArrowLeftIcon,mode:"bleed",tooltipProps:{content:J("pane-header.back-button.text")}}),g[14]=D,g[15]=Y,g[16]=J,g[17]=p):p=g[17];let et=p;return g[18]!==D||g[19]!==et||g[20]!==G||g[21]!==C||g[22]!==H||g[23]!==b||g[24]!==Q||g[25]!==Z||g[26]!==$||g[27]!==v||g[28]!==j||g[29]!==w||g[30]!==t||g[31]!==M||g[32]!==I||g[33]!==O||g[34]!==X||g[35]!==W||g[36]!==K||g[37]!==J||g[38]!==q||g[39]!==R?(h=(0,n.jsx)(m.TooltipDelayGroupProvider,{children:G?(0,n.jsx)(n7,{border:!0,ref:t,loading:"connecting"===C&&!b?.draft&&!b?.published,title:ee,tabIndex:q,backButton:et}):(0,n.jsx)(l.Card,{hidden:G,style:{lineHeight:0},borderBottom:!0,children:(0,n.jsxs)(l.Flex,{gap:3,paddingY:3,children:[(0,n.jsx)(oa,{$showGradient:O,children:(0,n.jsx)(l.Flex,{flex:1,gap:1,overflow:"auto",paddingX:3,"data-testid":"document-perspective-list",ref:z,children:(0,n.jsx)(oo,{})})}),(0,n.jsx)(l.Box,{flex:"none",paddingRight:3,children:(0,n.jsxs)(l.Flex,{align:"center",gap:1,children:[R.length>0&&(0,n.jsx)(n.Fragment,{children:R.map((e,t)=>(0,n.jsx)(e,{schemaType:I},`language-filter-${t}`))}),$.map(op),b&&(0,n.jsx)(ai,{group:"paneActions",children:e=>{let{states:t}=e;return(0,n.jsx)(oc,{contextMenuNodes:H,setReferenceElement:L,referenceElement:M,states:t})}}),W&&(0,n.jsx)(m.Button,{"aria-label":J("buttons.split-pane-button.aria-label"),icon:f.SplitVerticalIcon,mode:"bleed",onClick:j,tooltipProps:{content:J("buttons.split-pane-button.tooltip")}},"split-pane-button"),w&&(0,n.jsx)(m.Button,{"aria-label":J(Z?"buttons.focus-pane-button.aria-label.collapse":"buttons.focus-pane-button.aria-label.focus"),icon:Z?f.CollapseIcon:f.ExpandIcon,mode:"bleed",onClick:Q,tooltipProps:{content:J(Z?"buttons.focus-pane-button.tooltip.collapse":"buttons.focus-pane-button.tooltip.focus")},"data-testid":Z?"focus-pane-button-collapse":"focus-pane-button-focus"},"focus-pane-button"),K&&(0,n.jsx)(m.Button,{icon:f.CloseIcon,mode:"bleed",onClick:v,tooltipProps:{content:J("buttons.split-pane-close-button.title")}},"close-view-button"),X&&(0,n.jsx)(m.Button,{icon:f.CloseIcon,mode:"bleed",tooltipProps:{content:J("buttons.split-pane-close-group-button.title")},as:D},"close-view-button")]})})]})})}),g[18]=D,g[19]=et,g[20]=G,g[21]=C,g[22]=H,g[23]=b,g[24]=Q,g[25]=Z,g[26]=$,g[27]=v,g[28]=j,g[29]=w,g[30]=t,g[31]=M,g[32]=I,g[33]=O,g[34]=X,g[35]=W,g[36]=K,g[37]=J,g[38]=q,g[39]=R,g[40]=h):h=g[40],h})),oc=(0,r.memo)(function(e){let t,l,o=(0,i.c)(7),{setReferenceElement:s,referenceElement:a,contextMenuNodes:d}=e,c=(0,r.useDeferredValue)(e.states);return o[0]!==c?(t=c.filter(om),o[0]=c,o[1]=t):t=o[1],o[2]!==d||o[3]!==a||o[4]!==s||o[5]!==t?(l=(0,n.jsx)(ou,{setReferenceElement:s,referenceElement:a,contextMenuNodes:d,states:t}),o[2]=d,o[3]=a,o[4]=s,o[5]=t,o[6]=l):l=o[6],l}),ou=(0,r.memo)(function(e){let t,l,o=(0,i.c)(8),{states:r,setReferenceElement:s,contextMenuNodes:a,referenceElement:d}=e;o[0]!==a||o[1]!==s||o[2]!==r?(t=e=>{let{handleAction:t}=e;return(0,n.jsx)("div",{ref:s,children:(0,n.jsx)(nQ,{nodes:a,actionsNodes:r.length>0?r.map((e,i)=>(0,n.jsx)(l9,{actionState:e,disabled:!!e.disabled,index:i,onAction:t},e.label)):void 0},"context-menu")})},o[0]=a,o[1]=s,o[2]=r,o[3]=t):t=o[3];let c=t;return o[4]!==d||o[5]!==c||o[6]!==r?(l=(0,n.jsx)(l8,{actionStates:r,referenceElement:d,children:c}),o[4]=d,o[5]=c,o[6]=r,o[7]=l):l=o[7],l});function op(e){return(0,n.jsx)(ie,{node:e},e.key)}function om(e){return!e.action||e.action!==lY.action}function oh(e){let t,l,o=(0,i.c)(3),{size:r}=e;return o[0]===Symbol.for("react.memo_cache_sentinel")?(t={pointerEvents:"none",visibility:"hidden",width:0},o[0]=t):t=o[0],o[1]!==r?(l=(0,n.jsx)(m.Button,{"aria-hidden":!0,disabled:!0,size:r,style:t,text:"-"}),o[1]=r,o[2]=l):l=o[2],l}let og={primary:"primary",success:"positive",warning:"caution",danger:"critical"},of=(0,r.memo)(function(e){let t,o,r=(0,i.c)(4),{states:s}=e;return 0===s.length?null:(r[0]!==s?(t=s.map(ov),r[0]=s,r[1]=t):t=r[1],r[2]!==t?(o=(0,n.jsx)(l.Inline,{space:1,children:t}),r[2]=t,r[3]=o):o=r[3],o)}),ox=(0,r.memo)(function(e){let t,l=(0,i.c)(2),o=(0,r.useDeferredValue)(e.states);return l[0]!==o?(t=(0,n.jsx)(of,{states:o}),l[0]=o,l[1]=t):t=l[1],t});function ob(){let e,t=(0,i.c)(3),{badges:l,editState:o}=ih();return o&&l?(t[0]!==l||t[1]!==o?(e=(0,n.jsx)(al,{badges:l,badgeProps:o,children:oy}),t[0]=l,t[1]=o,t[2]=e):e=t[2],e):null}function oy(e){let{states:t}=e;return(0,n.jsx)(ox,{states:t})}function ov(e,t){return(0,n.jsx)(m.Tooltip,{content:e.title,disabled:!e.title,placement:"top",portal:!0,children:(0,n.jsx)(l.Badge,{fontSize:1,mode:"outline",paddingX:2,paddingY:1,radius:4,tone:e.color?og[e.color]:void 0,style:{whiteSpace:"nowrap"},children:e.label})},`${e.label}-${t}`)}let oj={NOTHING_TO_DELETE:"action.delete.disabled.nothing-to-delete",NOT_READY:"action.delete.disabled.not-ready"},ow=e=>{let t,l,o,s,a,d,p,m,h=(0,i.c)(41),{id:g,type:x,draft:b,version:y}=e;h[0]!==y?(t=y?._id&&(0,c.getVersionFromId)(y._id),h[0]=y,h[1]=t):t=h[1];let v=t,{delete:j}=(0,u.useDocumentOperation)(g,x,v),[w,S]=(0,r.useState)(!1),[I,C]=(0,r.useState)(!1),{t:_}=(0,u.useTranslation)(T);h[2]!==g?(l={documentId:g},h[2]=g,h[3]=l):l=h[3];let{sortedDocumentList:R}=(0,u.useDocumentVersionTypeSortedList)(l);h[4]!==R?(o=R.some(u.isReleaseScheduledOrScheduling),h[4]=R,h[5]=o):o=h[5];let P=o;h[6]===Symbol.for("react.memo_cache_sentinel")?(s=()=>{C(!1)},h[6]=s):s=h[6];let k=s;h[7]!==j?(a=e=>{C(!1),S(!0),j.execute(e),S(!1)},h[7]=j,h[8]=a):a=h[8];let E=a;h[9]===Symbol.for("react.memo_cache_sentinel")?(d=()=>{C(!0)},h[9]=d):d=h[9];let D=d;h[10]!==v||h[11]!==g||h[12]!==x?(p={id:g,type:x,version:v,permission:"delete"},h[10]=v,h[11]=g,h[12]=x,h[13]=p):p=h[13];let[F,A]=(0,u.useDocumentPairPermissions)(p),V=(0,u.useCurrentUser)();e:{let e,t,i,l,o;if(!A&&!F?.granted){let e,t,i;h[14]!==_?(e=_("action.delete.label"),h[14]=_,h[15]=e):e=h[15],h[16]!==V?(t=(0,n.jsx)(u.InsufficientPermissionsMessage,{context:"delete-document",currentUser:V}),h[16]=V,h[17]=t):t=h[17],h[18]!==t||h[19]!==e?(i={tone:"critical",icon:f.TrashIcon,disabled:!0,label:e,title:t},h[18]=t,h[19]=e,h[20]=i):i=h[20],m=i;break e}h[21]!==j.disabled||h[22]!==P||h[23]!==_?(e=()=>P?_("action.delete.disabled.scheduled-release"):j.disabled?_(oj[j.disabled]):"",h[21]=j.disabled,h[22]=P,h[23]=_,h[24]=e):e=h[24];let r=e,s=w||P||!!j.disabled||A;h[25]!==r?(t=r(),h[25]=r,h[26]=t):t=h[26],h[27]!==w||h[28]!==_?(i=_(w?"action.delete.running.label":"action.delete.label"),h[27]=w,h[28]=_,h[29]=i):i=h[29],h[30]!==b?._id||h[31]!==E||h[32]!==g||h[33]!==I||h[34]!==x?(l=I&&{type:"custom",component:(0,n.jsx)(sK,{action:"delete",id:b?._id||g,type:x,onCancel:k,onConfirm:E})},h[30]=b?._id,h[31]=E,h[32]=g,h[33]=I,h[34]=x,h[35]=l):l=h[35],h[36]!==s||h[37]!==t||h[38]!==i||h[39]!==l?(o={tone:"critical",icon:f.TrashIcon,disabled:s,title:t,label:i,shortcut:"Ctrl+Alt+D",onHandle:D,dialog:l},h[36]=s,h[37]=t,h[38]=i,h[39]=l,h[40]=o):o=h[40],m=o}return m};function oS(e){let t,o,s,a,d,c,p=(0,i.c)(18),{publishedExists:h,onCancel:g,onConfirm:f}=e,{t:x}=(0,u.useTranslation)(T),b=`deletion-confirmation-${(0,r.useId)()}`;return p[0]!==x?(t=x("action.discard-changes.confirm-dialog.header.text"),p[0]=x,p[1]=t):t=p[1],p[2]!==x?(o=x("action.discard-changes.label"),p[2]=x,p[3]=o):o=p[3],p[4]!==f||p[5]!==o?(s={confirmButton:{text:o,onClick:f}},p[4]=f,p[5]=o,p[6]=s):s=p[6],p[7]!==h||p[8]!==x?(a=x(h?"action.discard-changes.confirm-dialog.confirm-discard-changes":"action.discard-changes.confirm-dialog.confirm-discard-changes-draft"),p[7]=h,p[8]=x,p[9]=a):a=p[9],p[10]!==a?(d=(0,n.jsx)(l.Text,{size:1,children:a}),p[10]=a,p[11]=d):d=p[11],p[12]!==b||p[13]!==g||p[14]!==t||p[15]!==s||p[16]!==d?(c=(0,n.jsx)(m.Dialog,{width:1,id:b,header:t,footer:s,onClose:g,onClickOutside:g,children:d}),p[12]=b,p[13]=g,p[14]=t,p[15]=s,p[16]=d,p[17]=c):c=p[17],c}ow.action="delete",ow.displayName="DeleteAction";let oI={NO_CHANGES:"action.discard-changes.disabled.no-change",NOT_PUBLISHED:"action.discard-changes.disabled.not-published",NOT_READY:"action.discard-changes.disabled.not-ready"},oC=e=>{let t,l,o,s,a,d,p=(0,i.c)(31),{id:m,type:h,published:g,version:x,draft:b}=e;p[0]!==x?(t=x?._id&&(0,c.getVersionFromId)(x._id),p[0]=x,p[1]=t):t=p[1];let y=t,{discardChanges:v}=(0,u.useDocumentOperation)(m,h,y),[j,w]=(0,r.useState)(!1);p[2]!==y||p[3]!==m||p[4]!==h?(l={id:m,type:h,version:y,permission:"discardDraft"},p[2]=y,p[3]=m,p[4]=h,p[5]=l):l=p[5];let[S,I]=(0,u.useDocumentPairPermissions)(l),C=(0,u.useCurrentUser)(),{displayed:_}=ih(),{t:R}=(0,u.useTranslation)(T),P=_?._id&&(0,c.isPublishedId)(_?._id);p[6]!==v?(o=()=>{v.execute(),w(!1)},p[6]=v,p[7]=o):o=p[7];let k=o;p[8]===Symbol.for("react.memo_cache_sentinel")?(s=()=>{w(!1)},p[8]=s):s=p[8];let E=s;p[9]===Symbol.for("react.memo_cache_sentinel")?(a=()=>{w(!0)},p[9]=a):a=p[9];let D=a;e:{let e,t,i,l;if(!x&&!b||P){d=null;break e}if(!I&&!S?.granted){let e,t,i;p[10]!==R?(e=R("action.discard-changes.label"),p[10]=R,p[11]=e):e=p[11],p[12]!==C?(t=(0,n.jsx)(u.InsufficientPermissionsMessage,{context:"discard-changes",currentUser:C}),p[12]=C,p[13]=t):t=p[13],p[14]!==e||p[15]!==t?(i={tone:"critical",icon:f.ResetIcon,disabled:!0,label:e,title:t},p[14]=e,p[15]=t,p[16]=i):i=p[16],d=i;break e}let o=!!v.disabled||I,r=v.disabled&&oI[v.disabled]||"";p[17]!==R||p[18]!==r?(e=R(r),p[17]=R,p[18]=r,p[19]=e):e=p[19],p[20]!==R?(t=R("action.discard-changes.label"),p[20]=R,p[21]=t):t=p[21],p[22]!==k||p[23]!==j||p[24]!==g?(i=j&&{type:"custom",component:(0,n.jsx)(oS,{onCancel:E,onConfirm:k,publishedExists:!!g})},p[22]=k,p[23]=j,p[24]=g,p[25]=i):i=p[25],p[26]!==t||p[27]!==i||p[28]!==o||p[29]!==e?(l={tone:"critical",icon:f.ResetIcon,disabled:o,title:e,label:t,onHandle:D,dialog:i},p[26]=t,p[27]=i,p[28]=o,p[29]=e,p[30]=l):l=p[30],d=l}return d};oC.action="discardChanges",oC.displayName="DiscardChangesAction";let o_={NOTHING_TO_DUPLICATE:"action.duplicate.disabled.nothing-to-duplicate",NOT_READY:"action.duplicate.disabled.not-ready"},oT=e=>{let t,l,o,s,a=(0,i.c)(31),{id:d,type:p,release:m,mapDocument:g,version:x}=e,b=(0,u.useDocumentStore)();a[0]!==x?(t=x?._id&&(0,c.getVersionFromId)(x._id),a[0]=x,a[1]=t):t=a[1];let y=t,{duplicate:v}=(0,u.useDocumentOperation)(d,p,y),{navigateIntent:j}=(0,h.useRouter)(),[w,S]=(0,r.useState)(!1);a[2]!==d||a[3]!==m||a[4]!==p?(l={id:d,type:p,version:m,permission:"duplicate"},a[2]=d,a[3]=m,a[4]=p,a[5]=l):l=a[5];let[I,C]=(0,u.useDocumentPairPermissions)(l),{t:_}=(0,u.useTranslation)(T),R=(0,u.useCurrentUser)();a[6]!==b.pair||a[7]!==v||a[8]!==d||a[9]!==g||a[10]!==j||a[11]!==p?(o=async()=>{let e=(0,eS.uuid)();S(!0);let t=(0,eM.firstValueFrom)(b.pair.operationEvents(d,p).pipe((0,eP.filter)(oR)));v.execute(e,{mapDocument:g}),await t,j("edit",{id:e,type:p}),S(!1)},a[6]=b.pair,a[7]=v,a[8]=d,a[9]=g,a[10]=j,a[11]=p,a[12]=o):o=a[12];let P=o;e:{let e,t,i;if(!C&&!I?.granted){let e,t,i;a[13]!==_?(e=_("action.duplicate.label"),a[13]=_,a[14]=e):e=a[14],a[15]!==R?(t=(0,n.jsx)(u.InsufficientPermissionsMessage,{context:"duplicate-document",currentUser:R}),a[15]=R,a[16]=t):t=a[16],a[17]!==e||a[18]!==t?(i={icon:f.CopyIcon,disabled:!0,label:e,title:t},a[17]=e,a[18]=t,a[19]=i):i=a[19],s=i;break e}let l=w||!!v.disabled||C;a[20]!==w||a[21]!==_?(e=_(w?"action.duplicate.running.label":"action.duplicate.label"),a[20]=w,a[21]=_,a[22]=e):e=a[22],a[23]!==v.disabled||a[24]!==_?(t=v.disabled?_(o_[v.disabled]):"",a[23]=v.disabled,a[24]=_,a[25]=t):t=a[25],a[26]!==P||a[27]!==l||a[28]!==e||a[29]!==t?(i={icon:f.CopyIcon,disabled:l,label:e,title:t,onHandle:P},a[26]=P,a[27]=l,a[28]=e,a[29]=t,a[30]=i):i=a[30],s=i}return s};function oR(e){return"duplicate"===e.op&&"success"===e.type}oT.action="duplicate",oT.displayName="DuplicateAction";let oP=(0,tc.defineEvent)({name:"Document Published",version:1,description:'User clicked the "Publish" button in the document pane'}),ok={LIVE_EDIT_ENABLED:"action.publish.live-edit.publish-disabled",ALREADY_PUBLISHED:"action.publish.already-published.no-time-ago.tooltip",NO_CHANGES:"action.publish.no-changes.tooltip",NOT_READY:"action.publish.disabled.not-ready"},oE={status:"published"};function oD(e,t,i){return"ALREADY_PUBLISHED"===e&&t?(0,n.jsx)(oF,{publishedAt:t}):i(ok[e])}function oF(e){let t,o,r,s=(0,i.c)(6),{publishedAt:a}=e,{t:d}=(0,u.useTranslation)(T);s[0]===Symbol.for("react.memo_cache_sentinel")?(t={useTemporalPhrase:!0},s[0]=t):t=s[0];let c=(0,u.useRelativeTime)(a,t);return s[1]!==d||s[2]!==c?(o=d("action.publish.already-published.tooltip",{timeSincePublished:c}),s[1]=d,s[2]=c,s[3]=o):o=s[3],s[4]!==o?(r=(0,n.jsx)(l.Text,{children:o}),s[4]=o,s[5]=r):r=s[5],r}let oA=e=>{let t,l,s,a,d,m,h,g,x,b,y,v,j=(0,i.c)(86),{id:w,type:S,liveEdit:I,draft:C,published:_,release:R,version:P}=e,{selectedPerspective:k}=(0,u.usePerspective)(),[E,D]=(0,r.useState)(null);j[0]!==P?(t=P?._id&&(0,c.getVersionFromId)(P._id),j[0]=P,j[1]=t):t=j[1];let F=t,{publish:A}=(0,u.useDocumentOperation)(w,S,F),{changesOpen:V,documentId:M,documentType:L,value:z}=ih(),O=(0,u.useValidationStatus)(z._id,S,!R),B=(0,u.useSyncState)(w,S),N=(0,u.useEditState)(M,L,"default",F),{t:$}=(0,u.useTranslation)(T);j[2]!==N?.draft||j[3]!==N?.published||j[4]!==N?.version?(l=N?.version||N?.draft||N?.published||{},j[2]=N?.draft,j[3]=N?.published,j[4]=N?.version,j[5]=l):l=j[5];let H=l._rev,G=(0,o.useToast)();j[6]!==O.validation?(s=O.validation.some(p.isValidationErrorMarker),j[6]=O.validation,j[7]=s):s=j[7];let U=s,[q,W]=(0,r.useState)(!1),K=B.isSyncing,Y=O.isValidating;j[8]!==w||j[9]!==S?(a={id:w,type:S,permission:"publish"},j[8]=w,j[9]=S,j[10]=a):a=j[10];let[X,J]=(0,u.useDocumentPairPermissions)(a),Z=(0,u.useCurrentUser)();j[11]!==U||j[12]!==A.disabled||j[13]!==_||j[14]!==$?(d=A.disabled?oD(A.disabled,(_||{})._updatedAt,$)||"":U?$("action.publish.validation-issues.tooltip"):"",j[11]=U,j[12]=A.disabled,j[13]=_,j[14]=$,j[15]=d):d=j[15];let Q=d,ee=_?._rev;j[16]!==ee||j[17]!==A?(m=()=>{A.execute(),D({status:"publishing",publishRevision:ee})},j[16]=ee,j[17]=A,j[18]=m):m=j[18];let et=m;j[19]!==et||j[20]!==U||j[21]!==K||j[22]!==q||j[23]!==H||j[24]!==$||j[25]!==G||j[26]!==O.isValidating||j[27]!==O.revision?(h=()=>{let e=!O.isValidating&&O.revision===H;q&&!K&&e&&(U?G.push({title:$("action.publish.validation-issues-toast.title"),description:$("action.publish.validation-issues-toast.description"),status:"error"}):et(),W(!1))},j[19]=et,j[20]=U,j[21]=K,j[22]=q,j[23]=H,j[24]=$,j[25]=G,j[26]=O.isValidating,j[27]=O.revision,j[28]=h):h=j[28],j[29]!==et||j[30]!==U||j[31]!==K||j[32]!==Y||j[33]!==q||j[34]!==H||j[35]!==$||j[36]!==G||j[37]!==O.isValidating||j[38]!==O.revision?(g=[K,et,U,q,O.revision,H,Y,O.isValidating,G,$],j[29]=et,j[30]=U,j[31]=K,j[32]=Y,j[33]=q,j[34]=H,j[35]=$,j[36]=G,j[37]=O.isValidating,j[38]=O.revision,j[39]=g):g=j[39],(0,r.useEffect)(h,g),j[40]!==ee||j[41]!==E?(x=()=>{let e=E?.status==="publishing"&&ee!==E.publishRevision,t=e?oE:null,n=setTimeout(()=>{D(t)},e?200:4e3);return()=>clearTimeout(n)},j[40]=ee,j[41]=E,j[42]=x):x=j[42],j[43]!==V||j[44]!==ee||j[45]!==E?(b=[V,E,ee],j[43]=V,j[44]=ee,j[45]=E,j[46]=b):b=j[46],(0,r.useEffect)(x,b);let en=(0,td.useTelemetry)();j[47]!==et||j[48]!==C?._createdAt||j[49]!==_||j[50]!==H||j[51]!==B.isSyncing||j[52]!==en||j[53]!==O.isValidating||j[54]!==O.revision?(y=()=>{en.log(oP,{publishedImmediately:!C?._createdAt,previouslyPublished:!!_}),B.isSyncing||O.isValidating||O.revision!==H?W(!0):et()},j[47]=et,j[48]=C?._createdAt,j[49]=_,j[50]=H,j[51]=B.isSyncing,j[52]=en,j[53]=O.isValidating,j[54]=O.revision,j[55]=y):y=j[55];let ei=y;e:{let e,t,i;if((0,u.isPublishedPerspective)(k)||R&&P||I&&!P){v=null;break e}if(_&&!C&&!P){let e,t,n;j[56]!==$?(e=$("action.publish.label"),j[56]=$,j[57]=e):e=j[57];let i=_?._updatedAt;j[58]!==$||j[59]!==i?(t=oD("ALREADY_PUBLISHED",i,$),j[58]=$,j[59]=i,j[60]=t):t=j[60],j[61]!==e||j[62]!==t?(n={tone:"default",icon:f.PublishIcon,label:e,title:t,disabled:!0},j[61]=e,j[62]=t,j[63]=n):n=j[63],v=n;break e}if(!J&&!X?.granted){let e,t,i;j[64]!==$?(e=$("action.publish.label"),j[64]=$,j[65]=e):e=j[65],j[66]!==Z?(t=(0,n.jsx)(u.InsufficientPermissionsMessage,{context:"publish-document",currentUser:Z}),j[66]=Z,j[67]=t):t=j[67],j[68]!==e||j[69]!==t?(i={tone:"default",icon:f.PublishIcon,label:e,title:t,disabled:!0},j[68]=e,j[69]=t,j[70]=i):i=j[70],v=i;break e}let l=!!(q||N?.transactionSyncLock?.enabled||E?.status==="publishing"||E?.status==="published"||U||A.disabled),o=l||J;j[71]!==q||j[72]!==E?.status||j[73]!==$?(e=E?.status==="published"?$("action.publish.published.label"):q?$("action.publish.validation-in-progress.label"):E?.status==="publishing"?$("action.publish.running.label"):$("action.publish.draft.label"),j[71]=q,j[72]=E?.status,j[73]=$,j[74]=e):e=j[74],j[75]!==q||j[76]!==E?.status||j[77]!==$||j[78]!==Q?(t=q?$("action.publish.waiting"):E?.status==="published"||E?.status==="publishing"?null:Q,j[75]=q,j[76]=E?.status,j[77]=$,j[78]=Q,j[79]=t):t=j[79];let r=l||q?null:"Ctrl+Alt+P";j[80]!==ei||j[81]!==o||j[82]!==e||j[83]!==t||j[84]!==r?(i={disabled:o,tone:"default",label:e,icon:f.PublishIcon,title:t,shortcut:r,onHandle:ei},j[80]=ei,j[81]=o,j[82]=e,j[83]=t,j[84]=r,j[85]=i):i=j[85],v=i}return v};oA.action="publish",oA.displayName="PublishAction";let oV={NOT_PUBLISHED:"action.unpublish.disabled.not-published",NOT_READY:"action.unpublish.disabled.not-ready",LIVE_EDIT_ENABLED:"action.unpublish.disabled.live-edit-enabled"},oM=e=>{let t,l,o,s,a,d,c=(0,i.c)(22),{id:p,type:m,draft:h,liveEdit:g,release:x}=e,{unpublish:b}=(0,u.useDocumentOperation)(p,m),[y,v]=(0,r.useState)(!1);c[0]!==p||c[1]!==m?(t={id:p,type:m,permission:"unpublish"},c[0]=p,c[1]=m,c[2]=t):t=c[2];let[j,w]=(0,u.useDocumentPairPermissions)(t),S=(0,u.useCurrentUser)(),{t:I}=(0,u.useTranslation)(T),{selectedPerspective:C}=(0,u.usePerspective)(),_="drafts"===C;c[3]===Symbol.for("react.memo_cache_sentinel")?(l=()=>{v(!1)},c[3]=l):l=c[3];let R=l;c[4]!==b?(o=()=>{v(!1),b.execute()},c[4]=b,c[5]=o):o=c[5];let P=o;e:{if(y){let e,t=h?._id||p;c[6]!==P||c[7]!==t||c[8]!==m?(e={type:"dialog",onClose:R,content:(0,n.jsx)(sK,{id:t,type:m,action:"unpublish",onCancel:R,onConfirm:P})},c[6]=P,c[7]=t,c[8]=m,c[9]=e):e=c[9],s=e;break e}s=null}let k=s;return c[10]!==S||c[11]!==k||c[12]!==_||c[13]!==w||c[14]!==g||c[15]!==j?.granted||c[16]!==x||c[17]!==I||c[18]!==b.disabled?(a=()=>x||_||g?null:w||j?.granted?{tone:"critical",icon:f.UnpublishIcon,disabled:!!b.disabled||w,label:I("action.unpublish.label"),title:b.disabled?I(oV[b.disabled]):"",onHandle:()=>v(!0),dialog:k}:{tone:"critical",icon:f.UnpublishIcon,label:"Unpublish",title:(0,n.jsx)(u.InsufficientPermissionsMessage,{context:"unpublish-document",currentUser:S}),disabled:!0},c[10]=S,c[11]=k,c[12]=_,c[13]=w,c[14]=g,c[15]=j?.granted,c[16]=x,c[17]=I,c[18]=b.disabled,c[19]=a):a=c[19],c[20]!==a?(d=a(),c[20]=a,c[21]=d):d=c[21],d};oM.action="unpublish",oM.displayName="UnpublishAction";let oL=(0,r.memo)(function(e){let t,o,s,a,d,c,p,h,g,f=(0,i.c)(39),{disabled:x,states:b}=e,{__internal_tasks:y}=(0,u.useSource)(),{editState:v}=ih(),{params:j}=lr(),w=!!j?.rev,{selectedReleaseId:S}=(0,u.usePerspective)();f[0]!==b?([t,...o]=b,f[0]=b,f[1]=t,f[2]=o):(t=f[1],o=f[2]);let[I,C]=(0,r.useState)(null),{isPaused:_}=(0,u.usePausedScheduledDraft)();e:{let e,i,o,r;if(!t||!t.title&&!t.shortcut){s=null;break e}f[3]===Symbol.for("react.memo_cache_sentinel")?(e={maxWidth:300},f[3]=e):e=f[3],f[4]!==t.title?(i=t.title&&(0,n.jsx)(l.Text,{size:1,children:t.title}),f[4]=t.title,f[5]=i):i=f[5],f[6]!==t.shortcut?(o=t.shortcut&&(0,n.jsx)(m.Hotkeys,{"data-testid":"document-status-bar-hotkeys",fontSize:1,style:{marginTop:-4,marginBottom:-4},keys:String(t.shortcut).split("+").map(oG)}),f[6]=t.shortcut,f[7]=o):o=f[7],f[8]!==i||f[9]!==o?(r=(0,n.jsxs)(l.Flex,{style:e,align:"center",gap:3,children:[i,o]}),f[8]=i,f[9]=o,f[10]=r):r=f[10],s=r}let T=s,R=t?.action==="schedule"&&_;f[11]!==v?.liveEdit||f[12]!==v?.version||f[13]!==t||f[14]!==S||f[15]!==R||f[16]!==w?(a=w?!!t:S?t&&(R||!(0,u.isSanityDefinedAction)(t)):t&&(!v?.liveEdit||v?.version),f[11]=v?.liveEdit,f[12]=v?.version,f[13]=t,f[14]=S,f[15]=R,f[16]=w,f[17]=a):a=f[17];let P=a;f[18]!==t||f[19]!==o||f[20]!==P?(d=P?o:[t,...o].filter(Boolean),f[18]=t,f[19]=o,f[20]=P,f[21]=d):d=f[21];let k=d,E=y&&y.footerAction;return f[22]!==x||f[23]!==t||f[24]!==P||f[25]!==T?(c=P&&(0,n.jsx)(l.LayerProvider,{zOffset:200,children:(0,n.jsx)(m.Tooltip,{disabled:!T,content:T,placement:"top",children:(0,n.jsx)(l.Stack,{children:(0,n.jsx)(m.Button,{"data-testid":`action-${nU(t.label)}`,disabled:x||!!t.disabled,icon:t.icon,onClick:t.onHandle,ref:C,text:t.label,tone:t.tone||"primary"})})})}),f[22]=x,f[23]=t,f[24]=P,f[25]=T,f[26]=c):c=f[26],f[27]!==x||f[28]!==k?(p=k.length>0&&(0,n.jsx)(l7,{actionStates:k,disabled:x}),f[27]=x,f[28]=k,f[29]=p):p=f[29],f[30]!==I||f[31]!==t||f[32]!==P?(h=P&&t&&t.dialog&&(0,n.jsx)(l6,{dialog:t.dialog,referenceElement:I}),f[30]=I,f[31]=t,f[32]=P,f[33]=h):h=f[33],f[34]!==E||f[35]!==c||f[36]!==p||f[37]!==h?(g=(0,n.jsxs)(l.Flex,{align:"center",gap:1,children:[E,c,p,h]}),f[34]=E,f[35]=c,f[36]=p,f[37]=h,f[38]=g):g=f[38],g}),oz=(0,r.memo)(function(){let e,t=(0,i.c)(1);return t[0]===Symbol.for("react.memo_cache_sentinel")?(e=(0,n.jsx)(ai,{group:"default",children:oU}),t[0]=e):e=t[0],e});function oO(e){let t,l,o=(0,i.c)(6),{connectionState:r,documentId:s}=ih();o[0]!==e.states?(t=e.states.filter(oB),o[0]=e.states,o[1]=t):t=o[1];let a=t;if(0===a.length)return null;let d="connected"!==r;return o[2]!==s||o[3]!==a||o[4]!==d?(l=(0,n.jsx)(oL,{disabled:d,states:a},s),o[2]=s,o[3]=a,o[4]=d,o[5]=l):l=o[5],l}function oB(e){return!e.action||e.action!==lY.action}let oN=(0,r.memo)(function(){let e,t=(0,i.c)(1);return t[0]===Symbol.for("react.memo_cache_sentinel")?(e=(0,n.jsx)(ai,{group:"default",children:oq}),t[0]=e):e=t[0],e});function o$(e){let t,l,o,r=(0,i.c)(8),{states:s}=e,{connectionState:a,editState:d,revisionId:c}=ih();r[0]!==d?.draft||r[1]!==d?.published?(t=d?.draft||d?.published||{},r[0]=d?.draft,r[1]=d?.published,r[2]=t):t=r[2];let u=t._rev===c,p="connected"!==a||!!u;return r[3]!==s?(l=s.filter(oH).slice(-1),r[3]=s,r[4]=l):l=r[4],r[5]!==p||r[6]!==l?(o=(0,n.jsx)(oL,{disabled:p,states:l}),r[5]=p,r[6]=l,r[7]=o):o=r[7],o}function oH(e){return!!e.action&&e.action===lY.action}function oG(e){return e.slice(0,1).toUpperCase()+e.slice(1).toLowerCase()}function oU(e){let{states:t}=e;return(0,n.jsx)(oO,{states:t})}function oq(e){let{states:t}=e;return(0,n.jsx)(o$,{states:t})}let oW={create:f.AddIcon,delete:f.TrashIcon,discardDraft:f.CloseIcon,initial:f.AddIcon,editDraft:f.EditIcon,editLive:f.EditIcon,publish:f.PublishIcon,unpublish:f.UnpublishIcon},oK=(0,eI.styled)(f.ChevronLeftIcon).withConfig({displayName:"FlipIcon",componentId:"sc-13ovfi5-0"})`transition:transform 200ms;&[data-expanded='true']{transform:rotate(-90deg);}`;function oY(e){let t,l,o,r,s,a=(0,i.c)(14),{isExpanded:d,onExpand:c}=e,{t:p}=(0,u.useTranslation)(T);a[0]!==d||a[1]!==c?(t=e=>{e.stopPropagation(),function(e){if(e)return;let t=document.getElementById(rt);if(t){let e=t.children[0];if(!(e.scrollHeight>e.clientHeight)){let t=getComputedStyle(e).overflowY;e.style.overflowY="hidden",setTimeout(()=>{e.style.overflowY=t},0)}}}(d),c()},a[0]=d,a[1]=c,a[2]=t):t=a[2];let h=t;return a[3]!==d?(l=(0,n.jsx)(oK,{"data-expanded":d}),a[3]=d,a[4]=l):l=a[4],a[5]!==d||a[6]!==p?(o=p(d?"timeline-item.menu.action-collapse":"timeline-item.menu.action-expand"),a[5]=d,a[6]=p,a[7]=o):o=a[7],a[8]!==o?(r={content:o},a[8]=o,a[9]=r):r=a[9],a[10]!==h||a[11]!==l||a[12]!==r?(s=(0,n.jsx)(m.Button,{mode:"bleed",icon:l,tooltipProps:r,onClick:h}),a[10]=h,a[11]=l,a[12]=r,a[13]=s):s=a[13],s}let oX=(0,eI.styled)(l.Stack).withConfig({displayName:"StackWrapper",componentId:"sc-1ai615s-0"})`max-width:200px;`,oJ=(0,eI.styled)(l.Flex).withConfig({displayName:"ListWrapper",componentId:"sc-1ai615s-1"})`max-height:${e=>e.$maxHeight};min-width:244px;`,oZ=(0,eI.styled)(l.Box).withConfig({displayName:"Root",componentId:"sc-1ai615s-2"})(({$visible:e})=>eI.css`
    opacity: 0;
    pointer-events: none;
    transition: opacity 0.2s;

    ${e&&eI.css`
        opacity: 1;
        pointer-events: auto;
      `}
  `),oQ={initial:"timeline.operation.created-initial",create:"timeline.operation.created",publish:"timeline.operation.published",editLive:"timeline.operation.edited-live",editDraft:"timeline.operation.edited-draft",unpublish:"timeline.operation.unpublished",discardDraft:"timeline.operation.draft-discarded",delete:"timeline.operation.deleted"};function o0(e){let t,o,r=(0,i.c)(9),{maxLength:s,userIds:a,size:d,withTooltip:c}=e,p=void 0===c||c;if(r[0]!==a||r[1]!==p){let e;r[3]!==p?(e=e=>(0,n.jsx)(u.UserAvatar,{user:e,withTooltip:p},e),r[3]=p,r[4]=e):e=r[4],t=a.map(e),r[0]=a,r[1]=p,r[2]=t}else t=r[2];return r[5]!==s||r[6]!==d||r[7]!==t?(o=(0,n.jsx)(l.AvatarStack,{maxLength:s,size:d,children:t}),r[5]=s,r[6]=d,r[7]=t,r[8]=o):o=r[8],o}let o1=(0,eI.styled)(l.Flex).withConfig({displayName:"IconBox",componentId:"sc-19iwr6i-0"})(e=>{let t=(0,tC.getTheme_v2)(e.theme),n=e.$color;return eI.css`
    --card-icon-color: ${t.color.avatar[n].fg};
    background-color: ${t.color.avatar[n].bg};
    box-shadow: 0 0 0 1px var(--card-bg-color);

    position: absolute;
    width: ${t.avatar.sizes[0].size}px;
    height: ${t.avatar.sizes[0].size}px;
    right: -3px;
    bottom: -3px;
    border-radius: 50%;
  `}),o2={initial:"blue",create:"blue",publish:"green",editLive:"green",editDraft:"yellow",unpublish:"orange",discardDraft:"orange",delete:"red",withinSelection:"magenta"},o3={minimal:!0,useTemporalPhrase:!0},o4=(0,eI.styled)(o.Skeleton).withConfig({displayName:"NameSkeleton",componentId:"sc-19iwr6i-1"})(e=>{let t=(0,tC.getTheme_v2)(e.theme);return eI.css`
    width: 6ch;
    height: ${t.font.text.sizes[0].lineHeight}px;
  `}),o5=e=>{let t,o,r,s=(0,i.c)(10),{userId:a}=e,[d,c]=(0,u.useUser)(a);return s[0]!==c||s[1]!==d?(t=(0,n.jsx)(l.Box,{children:c||!d?(0,n.jsx)(u.AvatarSkeleton,{animated:!0}):(0,n.jsx)(u.UserAvatar,{user:d})}),s[0]=c,s[1]=d,s[2]=t):t=s[2],s[3]!==c||s[4]!==d?(o=(0,n.jsx)(l.Box,{children:c||!d?.displayName?(0,n.jsx)(l.Text,{size:1,children:(0,n.jsx)(o4,{animated:!0})}):(0,n.jsx)(l.Text,{muted:!0,size:1,children:d.displayName})}),s[3]=c,s[4]=d,s[5]=o):o=s[5],s[6]!==t||s[7]!==o||s[8]!==a?(r=(0,n.jsxs)(l.Flex,{align:"center",gap:2,padding:1,children:[t,o]},a),s[6]=t,s[7]=o,s[8]=a,s[9]=r):r=s[9],r},o6=e=>{let t,o,r,s,a=(0,i.c)(9),{collaborators:d}=e,{t:c}=(0,u.useTranslation)("studio");return a[0]!==c?(t=c("timeline.changes.title"),a[0]=c,a[1]=t):t=a[1],a[2]!==t?(o=(0,n.jsx)(l.Box,{padding:1,paddingBottom:2,children:(0,n.jsx)(l.Text,{size:1,weight:"medium",children:t})}),a[2]=t,a[3]=o):o=a[3],a[4]!==d?(r=d.map(o7),a[4]=d,a[5]=r):r=a[5],a[6]!==o||a[7]!==r?(s=(0,n.jsxs)(l.Stack,{paddingBottom:1,children:[o,r]}),a[6]=o,a[7]=r,a[8]=s):s=a[8],s};function o8(e){let t,o,r,s,a,d,c,p,h,g,f,x,b,y,v,j,w,S,I,C,_,T=(0,i.c)(55),{chunk:R,isSelected:P,onSelect:k,collaborators:E,optionsMenu:D}=e,{t:F}=(0,u.useTranslation)("studio"),{type:A,endTimestamp:V}=R;T[0]!==A?(t=oW[A],T[0]=A,T[1]=t):t=T[1];let M=t;T[2]!==R.authors?(o=Array.from(R.authors),T[2]=R.authors,T[3]=o):o=T[3];let L=o;T[4]!==E?(r=E?Array.from(E):[],T[4]=E,T[5]=r):r=T[5];let z=r,O="delete"!==A;T[6]===Symbol.for("react.memo_cache_sentinel")?(s={dateStyle:"medium",timeStyle:"short"},T[6]=s):s=T[6];let B=(0,u.useDateTimeFormat)(s);T[7]!==V?(a=new Date(V),T[7]=V,T[8]=a):a=T[8];let N=(0,u.useRelativeTime)(a||"",o3);if(T[9]!==B||T[10]!==V){let e=new Date(V);d=B.format(e),T[9]=B,T[10]=V,T[11]=d}else d=T[11];let $=d;T[12]!==R||T[13]!==O||T[14]!==k?(c=e=>{e.preventDefault(),e.stopPropagation(),O&&k(R)},T[12]=R,T[13]=O,T[14]=k,T[15]=c):c=T[15];let H=c;T[16]===Symbol.for("react.memo_cache_sentinel")?(p={position:"relative"},T[16]=p):p=T[16],T[17]!==L?(h=(0,n.jsx)(o0,{maxLength:3,userIds:L,size:2}),T[17]=L,T[18]=h):h=T[18];let G=o2[A];return T[19]!==M?(g=M&&(0,n.jsx)(M,{}),T[19]=M,T[20]=g):g=T[20],T[21]!==g?(f=(0,n.jsx)(l.Text,{size:0,children:g}),T[21]=g,T[22]=f):f=T[22],T[23]!==G||T[24]!==f?(x=(0,n.jsx)(o1,{align:"center",justify:"center",$color:G,children:f}),T[23]=G,T[24]=f,T[25]=x):x=T[25],T[26]!==x||T[27]!==h?(b=(0,n.jsxs)("div",{style:p,children:[h,x]}),T[26]=x,T[27]=h,T[28]=b):b=T[28],T[29]!==F||T[30]!==A?(y=F(oQ[A])||(0,n.jsx)("code",{children:A}),T[29]=F,T[30]=A,T[31]=y):y=T[31],T[32]!==y?(v=(0,n.jsx)(l.Text,{size:1,weight:"medium",children:y}),T[32]=y,T[33]=v):v=T[33],T[34]!==$||T[35]!==V||T[36]!==N?(j=(0,n.jsx)(l.Text,{as:"time",size:1,muted:!0,dateTime:V,title:$,children:N}),T[34]=$,T[35]=V,T[36]=N,T[37]=j):j=T[37],T[38]!==v||T[39]!==j?(w=(0,n.jsxs)(l.Stack,{space:2,children:[v,j]}),T[38]=v,T[39]=j,T[40]=w):w=T[40],T[41]!==z?(S=z.length>0&&(0,n.jsx)(l.Flex,{flex:1,justify:"flex-end",align:"center",children:(0,n.jsx)(m.Tooltip,{placement:"top",content:(0,n.jsx)(o6,{collaborators:z}),portal:!0,children:(0,n.jsx)(l.Box,{paddingLeft:2,paddingY:2,children:(0,n.jsx)(o0,{maxLength:3,userIds:z,size:0,withTooltip:!1})})})}),T[41]=z,T[42]=S):S=T[42],T[43]!==b||T[44]!==w||T[45]!==S?(I=(0,n.jsxs)(l.Flex,{align:"center",gap:3,children:[b,w,S]}),T[43]=b,T[44]=w,T[45]=S,T[46]=I):I=T[46],T[47]!==R.id||T[48]!==H||T[49]!==P||T[50]!==I?(C=(0,n.jsx)(l.Card,{as:"button",onClick:H,padding:2,pressed:P,radius:2,"data-ui":"timelineItem","data-testid":"timeline-item-button","data-chunk-id":R.id,children:I}),T[47]=R.id,T[48]=H,T[49]=P,T[50]=I,T[51]=C):C=T[51],T[52]!==D||T[53]!==C?(_=(0,n.jsxs)(l.Flex,{align:"center",gap:1,children:[C,D]}),T[52]=D,T[53]=C,T[54]=_):_=T[54],_}function o7(e){return(0,n.jsx)(o5,{userId:e},e)}let o9=e=>"publish"!==e.type,re=e=>"publish"===e.type,rt="timeline-list-wrapper",rn=e=>{let t,o,s,a,d,c,p,m,h,g,f,x,b,y,v,j,w=(0,i.c)(51),{chunks:S,hasMoreChunks:I,lastChunk:C,onLoadMore:_,onSelect:T,listMaxHeight:R}=e,P=void 0===R?"calc(100vh - 280px)":R,[k,E]=(0,r.useState)(!1),{t:D}=(0,u.useTranslation)("studio"),F=C?.id;w[0]!==S?(t=function(e){let t=[];for(let n of e){if(re(n)){t.push({...n,type:"publish",children:[],collaborators:new Set});continue}if(o9(n)){let e=function(e){let t=null;for(let n=e.length-1;n>=0;n--){let i=e[n];if(re(i)){t=i;break}if("editDraft"!==i.type)break}return t}(t);if("editDraft"===n.type&&e?.type==="publish"){Array.from(n.authors).forEach(t=>{e.collaborators.add(t)}),e.children.push(n.id),t.push({...n,parentId:e.id});continue}}o9(n)&&t.push(n)}return t}(S),w[0]=S,w[1]=t):t=w[1];let A=t;w[2]!==A||w[3]!==F?(o=()=>{if(F){let e=A.find(e=>e.id===F);if(e&&o9(e)&&e.parentId)return new Set([e.parentId])}return new Set},w[2]=A,w[3]=F,w[4]=o):o=w[4];let[V,M]=(0,r.useState)(o);if(w[5]!==A||w[6]!==F?(s=()=>{if(F){let e=A.find(e=>e.id===F);if(e&&o9(e)&&e.parentId){let t=e.parentId;M(e=>{if(e.has(t))return e;let n=new Set(e);return n.add(t),n})}}},a=[A,F],w[5]=A,w[6]=F,w[7]=s,w[8]=a):(s=w[7],a=w[8]),(0,r.useEffect)(s,a),w[9]!==A||w[10]!==V){let e;w[12]!==V?(e=e=>!!re(e)||!e.parentId||V.has(e.parentId),w[12]=V,w[13]=e):e=w[13],d=A.filter(e),w[9]=A,w[10]=V,w[11]=d}else d=w[11];let L=d;w[14]!==L.length||w[15]!==I||w[16]!==_?(c=()=>{L.length<16&&I&&_()},w[14]=L.length,w[15]=I,w[16]=_,w[17]=c):c=w[17],w[18]!==L||w[19]!==I||w[20]!==_?(p=[L,I,_],w[18]=L,w[19]=I,w[20]=_,w[21]=p):p=w[21],(0,r.useEffect)(c,p),w[22]===Symbol.for("react.memo_cache_sentinel")?(m=e=>()=>M(t=>{let n=new Set(t);return t.has(e)?n.delete(e):n.add(e),n}),w[22]=m):m=w[22];let z=m;w[23]!==L||w[24]!==F?(h=F?L.findIndex(e=>e.id===F):-1,w[23]=L,w[24]=F,w[25]=h):h=w[25];let O=h;w[26]!==S||w[27]!==T?(g=e=>{let t=S.find(t=>t.id===e.id);t?T(t):(console.error("TimelineItem: chunk not found"),T(e))},w[26]=S,w[27]=T,w[28]=g):g=w[28];let B=g;w[29]!==V||w[30]!==L.length||w[31]!==B||w[32]!==I||w[33]!==F?(f=(e,t)=>{let{activeIndex:i}=t;return(0,n.jsxs)(l.Box,{paddingBottom:1,paddingTop:+(0===i),paddingRight:1,paddingLeft:o9(e)&&e.parentId?4:1,children:[(0,n.jsx)(o8,{chunk:e,isSelected:F===e.id,onSelect:B,collaborators:re(e)?e.collaborators:void 0,optionsMenu:re(e)&&e.children.length>0?(0,n.jsx)(oY,{isExpanded:V.has(e.id),onExpand:z(e.id)}):null}),i===L.length-1&&I&&(0,n.jsx)(u.LoadingBlock,{})]})},w[29]=V,w[30]=L.length,w[31]=B,w[32]=I,w[33]=F,w[34]=f):f=w[34];let N=f;w[35]===Symbol.for("react.memo_cache_sentinel")?(x=()=>E(!0),b=[],w[35]=x,w[36]=b):(x=w[35],b=w[36]),(0,r.useEffect)(x,b);let $=!O||k;return w[37]!==L.length||w[38]!==D?(y=0===L.length&&(0,n.jsxs)(oX,{padding:3,space:3,children:[(0,n.jsx)(l.Text,{size:1,weight:"medium",children:D("timeline.error.no-document-history-title")}),(0,n.jsx)(l.Text,{muted:!0,size:1,children:D("timeline.error.no-document-history-description")})]}),w[37]=L.length,w[38]=D,w[39]=y):y=w[39],w[40]!==L||w[41]!==P||w[42]!==_||w[43]!==N||w[44]!==O||w[45]!==D?(v=L.length>0&&(0,n.jsx)(oJ,{direction:"column",$maxHeight:P,id:rt,children:(0,n.jsx)(u.CommandList,{activeItemDataAttr:"data-hovered",ariaLabel:D("timeline.list.aria-label"),autoFocus:"list",initialIndex:O,initialScrollAlign:"center",itemHeight:57,items:L,onEndReached:_,onEndReachedIndexOffset:20,overscan:5,renderItem:N,wrapAround:!1})}),w[40]=L,w[41]=P,w[42]=_,w[43]=N,w[44]=O,w[45]=D,w[46]=v):v=w[46],w[47]!==$||w[48]!==y||w[49]!==v?(j=(0,n.jsxs)(oZ,{$visible:$,"data-ui":"timeline",children:[y,v]}),w[47]=$,w[48]=y,w[49]=v,w[50]=j):j=w[50],j};function ri(e){let t,o,r,s,a,d,c=(0,i.c)(14),{versionError:p}=e,{t:m}=(0,u.useTranslation)("studio");return c[0]===Symbol.for("react.memo_cache_sentinel")?(t=(0,n.jsx)(u.TextWithTone,{tone:"critical",children:(0,n.jsx)(f.ErrorOutlineIcon,{})}),c[0]=t):t=c[0],c[1]!==m||c[2]!==p?(o=m(p?"timeline.error.load-document-changes-version-title":"timeline.error.load-document-changes-title"),c[1]=m,c[2]=p,c[3]=o):o=c[3],c[4]!==o?(r=(0,n.jsx)(u.TextWithTone,{size:1,tone:"critical",weight:"medium",children:o}),c[4]=o,c[5]=r):r=c[5],c[6]!==m||c[7]!==p?(s=m(p?"timeline.error.load-document-changes-version-description":"timeline.error.load-document-changes-description"),c[6]=m,c[7]=p,c[8]=s):s=c[8],c[9]!==s?(a=(0,n.jsx)(u.TextWithTone,{size:1,tone:"critical",children:s}),c[9]=s,c[10]=a):a=c[10],c[11]!==r||c[12]!==a?(d=(0,n.jsxs)(l.Flex,{align:"flex-start",gap:3,padding:4,children:[t,(0,n.jsxs)(l.Stack,{space:4,children:[r,a]})]}),c[11]=r,c[12]=a,c[13]=d):d=c[13],d}let rl=(0,eI.styled)(m.Popover).withConfig({displayName:"Root",componentId:"sc-5dzvio-0"})`overflow:hidden;overflow:clip;`,ro="timeline-menu";function rr(e){let t,s,a,d,c,p,h,g,x,b,y,v,j,w,S,I,C=(0,i.c)(62),{chunk:_,mode:T,placement:R}=e,{setTimelineRange:P,timelineError:k,ready:E,timelineStore:D}=ih(),[F,A]=(0,r.useState)(!1),[V,M]=(0,r.useState)(null),[L,z]=(0,r.useState)(null),O=(0,o.useToast)(),B=(0,u.useTimelineSelector)(D,ru),N=(0,u.useTimelineSelector)(D,rc),$=(0,u.useTimelineSelector)(D,rd),H=(0,u.useTimelineSelector)(D,ra),G=(0,u.useTimelineSelector)(D,rs),{t:U}=(0,u.useTranslation)("studio");C[0]===Symbol.for("react.memo_cache_sentinel")?(t=()=>{A(!0)},C[0]=t):t=C[0];let q=t;C[1]===Symbol.for("react.memo_cache_sentinel")?(s=()=>{A(!1)},C[1]=s):s=C[1];let W=s;C[2]!==V||C[3]!==F?(a=e=>{F&&("Escape"===e.key||"Tab"===e.key)&&(W(),V?.focus())},C[2]=V,C[3]=F,C[4]=a):a=C[4],(0,l.useGlobalKeyDown)(a),C[5]!==V||C[6]!==L?(d=()=>[V,L],C[5]=V,C[6]=L,C[7]=d):d=C[7],(0,l.useClickOutsideEvent)(F&&W,d),C[8]!==P||C[9]!==U||C[10]!==D||C[11]!==O?(c=e=>{try{(()=>{let[t,n]=D?.findRangeForRev(e)||[null,null];P(t,n)})()}catch(e){O.push({closable:!0,description:e.message,status:"error",title:U("timeline.error.unable-to-load-revision")})}},C[8]=P,C[9]=U,C[10]=D,C[11]=O,C[12]=c):c=C[12];let K=c;C[13]!==P||C[14]!==U||C[15]!==D||C[16]!==O?(p=e=>{try{(()=>{let[t,n]=D?.findRangeForSince(e)||[null,null];P(t,n)})()}catch(e){O.push({closable:!0,description:e.message,status:"error",title:U("timeline.error.unable-to-load-revision")})}},C[13]=P,C[14]=U,C[15]=D,C[16]=O,C[17]=p):p=C[17];let Y=p;C[18]!==N||C[19]!==D?(h=()=>{N||D?.loadMore()},C[18]=N,C[19]=D,C[20]=h):h=C[20];let X=h;e:{let e,t;if(k){let e;C[21]===Symbol.for("react.memo_cache_sentinel")?(e=(0,n.jsx)(ri,{}),C[21]=e):e=C[21],g=e;break e}if("rev"===T){let e;C[22]!==B||C[23]!==X||C[24]!==$||C[25]!==H||C[26]!==K?(e=(0,n.jsx)(rn,{chunks:B,hasMoreChunks:$,lastChunk:H,onLoadMore:X,onSelect:K}),C[22]=B,C[23]=X,C[24]=$,C[25]=H,C[26]=K,C[27]=e):e=C[27],g=e;break e}C[28]!==B||C[29]!==H?(e=H?B.filter(e=>e.index<H.index):B,C[28]=B,C[29]=H,C[30]=e):e=C[30];let i=e;C[31]!==i||C[32]!==X||C[33]!==$||C[34]!==Y||C[35]!==G?(t=(0,n.jsx)(rn,{chunks:i,hasMoreChunks:$,lastChunk:G,onLoadMore:X,onSelect:Y}),C[31]=i,C[32]=X,C[33]=$,C[34]=Y,C[35]=G,C[36]=t):t=C[36],g=t}let J=g;if(C[37]!==_||C[38]!==U){let e={timestamp:{dateStyle:"medium",timeStyle:"short"}};x=_?U(oQ[_.type],{context:"timestamp",timestamp:new Date(_?.endTimestamp),formatParams:e}):U("timeline.latest-revision"),b=_?U("timeline.since",{timestamp:new Date(_?.endTimestamp),formatParams:e}):U("timeline.since-version-missing"),C[37]=_,C[38]=U,C[39]=x,C[40]=b}else x=C[39],b=C[40];let Z="rev"===T?x:b;C[41]!==L?(y={[ro]:L},C[41]=L,C[42]=y):y=C[42];let Q=y,ee=F&&J,et=F?"timeline-menu-close-button":"timeline-menu-open-button",en=!E,ei=F?W:q;return C[43]===Symbol.for("react.memo_cache_sentinel")?(v={maxWidth:"100%"},C[43]=v):v=C[43],C[44]!==Z||C[45]!==E||C[46]!==U?(j=E?Z:U("timeline.loading-history"),C[44]=Z,C[45]=E,C[46]=U,C[47]=j):j=C[47],C[48]!==F||C[49]!==et||C[50]!==en||C[51]!==ei||C[52]!==j?(w=(0,n.jsx)(l.Flex,{width:"fill",children:(0,n.jsx)(m.Button,{"data-testid":et,disabled:en,mode:"ghost",onClick:ei,ref:M,selected:F,width:"fill",tooltipProps:null,justify:"space-between",style:v,iconRight:f.ChevronDownIcon,text:j})}),C[48]=F,C[49]=et,C[50]=en,C[51]=ei,C[52]=j,C[53]=w):w=C[53],C[54]!==F||C[55]!==R||C[56]!==ee||C[57]!==w?(S=(0,n.jsx)(rl,{"data-testid":"timeline-menu",constrainSize:!0,content:ee,"data-ui":"versionMenu",open:F,placement:R,matchReferenceWidth:!0,portal:!0,ref:z,children:w}),C[54]=F,C[55]=R,C[56]=ee,C[57]=w,C[58]=S):S=C[58],C[59]!==Q||C[60]!==S?(I=(0,n.jsx)(l.PortalProvider,{__unstable_elements:Q,children:S}),C[59]=Q,C[60]=S,C[61]=I):I=C[61],I}function rs(e){return e.sinceTime}function ra(e){return e.realRevChunk}function rd(e){return e.hasMoreChunks}function rc(e){return e.isLoading}function ru(e){return e.chunks}let rp=(0,eI.styled)(a.motion.path).withConfig({displayName:"StyledMotionPath",componentId:"sc-1l2ln4p-0"})`transform-origin:center;`,rm=e=>{let t,l=(0,i.c)(2);return l[0]!==e?(t=(0,n.jsx)(a.motion.circle,{fill:"none",r:"8",cx:"12.5",cy:"12.5",strokeWidth:"1.2",...e}),l[0]=e,l[1]=t):t=l[1],t},rh=e=>{let t,l=(0,i.c)(2);return l[0]!==e?(t=(0,n.jsx)(rp,{fill:"none",d:"M14 17.5619L11.5 20.5L14.5 23.0619M11 7.43811L13.5 4.50001L10.5 1.93811",...e}),l[0]=e,l[1]=t):t=l[1],t},rg=e=>{let t,l=(0,i.c)(2);return l[0]!==e?(t=(0,n.jsx)(a.motion.path,{d:"M9.5 12.1316L11.7414 14.5L16 10",...e}),l[0]=e,l[1]=t):t=l[1],t},rf=eI.keyframes`
  0% {
    transform: rotate(0);
  }
  100% {
    transform: rotate(360deg);
  }
`,rx=eI.styled.g.withConfig({displayName:"RotateGroup",componentId:"sc-1l2ln4p-1"})`transform-origin:center;&[data-rotate]{animation:${rf} 1s ease-in-out infinite;}`,rb={syncing:{scale:1,transition:{duration:0}},saved:{scale:[1,.8,1.2,.9,1.1,.95,1.05,.99,1],transition:{duration:.5,delay:.2}},changes:{transition:{duration:0}}},ry={syncing:{strokeDasharray:"0, 0, 23, 3, 23, 3",strokeDashoffset:10,opacity:1,transition:{duration:0}},saved:{strokeDasharray:"0, 0, 23, 0, 23, 0",strokeDashoffset:10,opacity:1,transition:{duration:.2}},changes:{strokeDasharray:"0, 60, 23, 0, 23, 0",strokeDashoffset:0,opacity:0,transition:{duration:.5}}},rv={syncing:{opacity:1,transition:{duration:0}},saved:{opacity:0,transition:{duration:.2}},changes:{opacity:0}},rj={syncing:{pathLength:0,transition:{duration:0}},saved:{pathLength:1,transition:{delay:.4,duration:.3}},changes:{pathLength:0,transition:{duration:.2}}};function rw(e){let t,l,o,r,s,d=(0,i.c)(13),{status:c}=e;if(!c)return null;let u="changes"===c?void 0:"";return d[0]!==c?(t=(0,n.jsx)(rh,{variants:rv,initial:c,animate:c}),l=(0,n.jsx)(rm,{variants:ry,initial:c,animate:c}),d[0]=c,d[1]=t,d[2]=l):(t=d[1],l=d[2]),d[3]!==u||d[4]!==t||d[5]!==l?(o=(0,n.jsxs)(rx,{"data-rotate":u,children:[t,l]}),d[3]=u,d[4]=t,d[5]=l,d[6]=o):o=d[6],d[7]!==c?(r=(0,n.jsx)(rg,{variants:rj,initial:c,animate:c}),d[7]=c,d[8]=r):r=d[8],d[9]!==c||d[10]!==o||d[11]!==r?(s=(0,n.jsx)("svg",{width:"1em",height:"1em",viewBox:"0 0 25 25",fill:"none",stroke:"currentColor",strokeWidth:"1.2","data-sanity-icon":"animated-status-icon",children:(0,n.jsxs)(a.motion.g,{variants:rb,initial:c,animate:c,children:[o,r]})}),d[9]=c,d[10]=o,d[11]=r,d[12]=s):s=d[12],s}let rS={saved:{i18nKey:"status-bar.document-status-pulse.status.saved.text",tone:"positive"},syncing:{i18nKey:"status-bar.document-status-pulse.status.syncing.text",tone:"default"}},rI=e=>{let t,o,r,s,a,d=(0,i.c)(13),{status:c}=e,{t:p}=(0,u.useTranslation)(T);if("saved"!==c&&"syncing"!==c)return null;let m=rS[c];return d[0]!==c?(t=(0,n.jsx)(rw,{status:c}),d[0]=c,d[1]=t):t=d[1],d[2]!==m.tone||d[3]!==t?(o=(0,n.jsx)(u.TextWithTone,{size:1,tone:m.tone,children:t}),d[2]=m.tone,d[3]=t,d[4]=o):o=d[4],d[5]!==m.i18nKey||d[6]!==p?(r=p(m.i18nKey),d[5]=m.i18nKey,d[6]=p,d[7]=r):r=d[7],d[8]!==r?(s=(0,n.jsx)(l.Text,{muted:!0,size:1,children:r}),d[8]=r,d[9]=s):s=d[9],d[10]!==o||d[11]!==s?(a=(0,n.jsxs)(l.Flex,{align:"center",gap:2,"data-testid":"pane-footer-document-status-pulse",children:[o,s]}),d[10]=o,d[11]=s,d[12]=a):a=d[12],a},rC={minimal:!0,useTemporalPhrase:!0},r_=a.motion.create(l.Button),rT=a.motion.create(l.Box);function rR(e){return"timeline.operation.published"===e?"document-status.last-published":e}let rP=()=>{let e,t,r=(0,i.c)(2);return r[0]===Symbol.for("react.memo_cache_sentinel")?(e=(0,n.jsx)("div",{style:{margin:-5},children:(0,n.jsx)(u.AvatarSkeleton,{$size:0,animated:!0})}),r[0]=e):e=r[0],r[1]===Symbol.for("react.memo_cache_sentinel")?(t=(0,n.jsxs)(l.Flex,{align:"center",gap:3,paddingLeft:1,paddingRight:2,paddingY:2,children:[e,(0,n.jsx)(o.Skeleton,{animated:!0,style:{width:"80px",height:"15px"},radius:2})]}),r[1]=t):t=r[1],t},rk=e=>{let t,o,r,s,a,d,c,p,m=(0,i.c)(17),{author:h,translationKey:g,timestamp:f}=e,{onHistoryOpen:x,inspector:b,onHistoryClose:y}=ih(),{t:v}=(0,u.useTranslation)(),j=(0,u.useRelativeTime)(void 0===f?"":f,rC);m[0]===Symbol.for("react.memo_cache_sentinel")?(t={opacity:1},o={opacity:0},r={opacity:0},m[0]=t,m[1]=o,m[2]=r):(t=m[0],o=m[1],r=m[2]);let w=b?.name===i_?y:x;return m[3]!==h?(s=h&&(0,n.jsx)("div",{style:{margin:-5},children:(0,n.jsx)(u.UserAvatar,{user:h,size:0})}),m[3]=h,m[4]=s):s=m[4],m[5]!==v||m[6]!==g?(a=v(g),m[5]=v,m[6]=g,m[7]=a):a=m[7],m[8]!==j||m[9]!==a?(d=(0,n.jsxs)(l.Text,{muted:!0,size:1,children:[a," ",j]}),m[8]=j,m[9]=a,m[10]=d):d=m[10],m[11]!==s||m[12]!==d?(c=(0,n.jsxs)(l.Flex,{align:"center",flex:"none",gap:3,children:[s,d]}),m[11]=s,m[12]=d,m[13]=c):c=m[13],m[14]!==w||m[15]!==c?(p=(0,n.jsx)(r_,{"data-testid":"pane-footer-document-status",animate:t,initial:o,exit:r,mode:"bleed",onClick:w,padding:2,muted:!0,children:c}),m[14]=w,m[15]=c,m[16]=p):p=m[16],p},rE=()=>{let e,t,l=(0,i.c)(6),{editState:o}=ih(),{selectedPerspective:r}=(0,u.usePerspective)();l[0]!==o||l[1]!==r?(e=(0,u.isPublishedPerspective)(r)&&o?.published?._updatedAt?{translationKey:u.TIMELINE_ITEM_I18N_KEY_MAPPING.published.createDocumentVersion,timestamp:o.published._updatedAt}:o?.version?._updatedAt?{translationKey:o.version._updatedAt===o.version._createdAt?u.TIMELINE_ITEM_I18N_KEY_MAPPING.version.createDocumentVersion:u.TIMELINE_ITEM_I18N_KEY_MAPPING.version.editDocumentVersion,timestamp:o.version._updatedAt}:o?.draft?._updatedAt?{translationKey:o.draft._updatedAt===o.draft._createdAt?u.TIMELINE_ITEM_I18N_KEY_MAPPING.draft.createDocumentVersion:u.TIMELINE_ITEM_I18N_KEY_MAPPING.draft.editDocumentVersion,timestamp:o.draft._updatedAt}:null,l[0]=o,l[1]=r,l[2]=e):e=l[2];let s=e;return s?(l[3]!==s.timestamp||l[4]!==s.translationKey?(t=(0,n.jsx)(rk,{author:"",translationKey:s.translationKey,timestamp:s.timestamp}),l[3]=s.timestamp,l[4]=s.translationKey,l[5]=t):t=l[5],t):null},rD=()=>{let e,t,l=(0,i.c)(8),{events:o,loading:r}=(0,u.useEvents)(),s=o?.[0];if(!s&&r){let e;return l[0]===Symbol.for("react.memo_cache_sentinel")?(e=(0,n.jsx)(rP,{}),l[0]=e):e=l[0],e}if(!s){let e;return l[1]===Symbol.for("react.memo_cache_sentinel")?(e=(0,n.jsx)(rE,{}),l[1]=e):e=l[1],e}let a=s.author,d=u.TIMELINE_ITEM_I18N_KEY_MAPPING[s.documentVariantType][s.type];return l[2]!==d?(e=rR(d),l[2]=d,l[3]=e):e=l[3],l[4]!==s.author||l[5]!==s.timestamp||l[6]!==e?(t=(0,n.jsx)(rk,{author:a,translationKey:e,timestamp:s.timestamp}),l[4]=s.author,l[5]=s.timestamp,l[6]=e,l[7]=t):t=l[7],t},rF=()=>{let e,t,l,o=(0,i.c)(10),{timelineStore:r}=ih(),s=(0,u.useTimelineSelector)(r,rV),a=(0,u.useTimelineSelector)(r,rM),d=s?.[0];if(!d&&a){let e;return o[0]===Symbol.for("react.memo_cache_sentinel")?(e=(0,n.jsx)(rP,{}),o[0]=e):e=o[0],e}if(!d){let e;return o[1]===Symbol.for("react.memo_cache_sentinel")?(e=(0,n.jsx)(rE,{}),o[1]=e):e=o[1],e}o[2]!==d.authors?(e=Array.from(d.authors),o[2]=d.authors,o[3]=e):e=o[3];let c=e[0],p=oQ[d.type];return o[4]!==p?(t=rR(p),o[4]=p,o[5]=t):t=o[5],o[6]!==c||o[7]!==d.endTimestamp||o[8]!==t?(l=(0,n.jsx)(rk,{author:c,translationKey:t,timestamp:d.endTimestamp}),o[6]=c,o[7]=d.endTimestamp,o[8]=t,o[9]=l):l=o[9],l};function rA(){let e,t,l,o,s,a,c,p=(0,i.c)(18),{documentId:m,documentType:h,editState:g,value:f}=ih(),[x,b]=(0,r.useState)(null),y=(0,u.useSource)().beta?.eventsAPI?.documents,v=(0,u.useSyncState)(m,h,g?.release),j=f?._updatedAt;return p[0]!==x||p[1]!==v.isSyncing?(e=()=>{if("syncing"===x&&!v.isSyncing){let e=setTimeout(()=>b("saved"),1e3);return()=>clearTimeout(e)}if("saved"===x){let e=setTimeout(()=>b(null),3e3);return()=>clearTimeout(e)}},p[0]=x,p[1]=v.isSyncing,p[2]=e):e=p[2],p[3]!==j||p[4]!==x||p[5]!==v.isSyncing?(t=[x,j,v.isSyncing],p[3]=j,p[4]=x,p[5]=v.isSyncing,p[6]=t):t=p[6],(0,r.useEffect)(e,t),p[7]===Symbol.for("react.memo_cache_sentinel")?(l=()=>{b(null)},p[7]=l):l=p[7],p[8]!==m?(o=[m],p[8]=m,p[9]=o):o=p[9],(0,r.useLayoutEffect)(l,o),p[10]!==v.isSyncing?(s=()=>{v.isSyncing&&b("syncing")},p[10]=v.isSyncing,p[11]=s):s=p[11],p[12]!==j||p[13]!==v.isSyncing?(a=[v.isSyncing,j],p[12]=j,p[13]=v.isSyncing,p[14]=a):a=p[14],(0,r.useLayoutEffect)(s,a),p[15]!==y||p[16]!==x?(c=(0,n.jsx)(d.AnimatePresence,{children:x?(0,n.jsx)(rT,{paddingLeft:2,animate:{opacity:1},initial:{opacity:0},exit:{opacity:0},children:(0,n.jsx)(rI,{status:x||void 0})}):(0,n.jsx)(n.Fragment,{children:y?(0,n.jsx)(rD,{}):(0,n.jsx)(rF,{})})}),p[15]=y,p[16]=x,p[17]=c):c=p[17],c}function rV(e){return e.chunks}function rM(e){return e.isLoading}let rL=(0,eI.styled)(l.Text).withConfig({displayName:"StatusText",componentId:"sc-15z6xze-0"})`color:var(--card-muted-fg-color);em{color:var(--card-fg-color);font-weight:500;font-style:normal;}`;function rz(){let e,t,o,a,d=(0,i.c)(9),{displayed:c,revisionNotFound:p}=ih(),m=(0,r.useContext)(s.EventsContext),h=m?.revision,g=m?.events.find(e=>e.id===h?.revisionId),{t:x}=(0,u.useTranslation)(),b=g?.timestamp||c?._updatedAt||c?._createdAt,y=b?(0,n.jsx)(u.Translate,{t:x,i18nKey:"document-status.revision-from",values:{date:(0,tI.format)(new Date(b),"MMM d, yyyy '@' pp")}}):null;d[0]!==y?(e={name:"revision",text:y,tone:"caution"},d[0]=y,d[1]=e):e=d[1];let v=e;return d[2]===Symbol.for("react.memo_cache_sentinel")?(t=(0,n.jsx)(l.Box,{flex:"none",children:(0,n.jsx)(l.Text,{size:1,children:(0,n.jsx)(f.RestoreIcon,{})})}),d[2]=t):t=d[2],d[3]!==v||d[4]!==p||d[5]!==x?(o=p?(0,n.jsx)(u.Translate,{t:x,i18nKey:"document-status.revision-not-found"}):v.text,d[3]=v,d[4]=p,d[5]=x,d[6]=o):o=d[6],d[7]!==o?(a=(0,n.jsx)(n.Fragment,{children:(0,n.jsxs)(l.Flex,{flex:1,gap:3,padding:2,children:[t,(0,n.jsx)(l.Box,{flex:1,children:(0,n.jsx)(rL,{size:1,textOverflow:"ellipsis",children:o})})]})}),d[7]=o,d[8]=a):a=d[8],a}let rO=a.motion.create(l.Card);function rB(e){let t,o,s,a,d,c,p,m,h=(0,i.c)(22),{actionsBoxRef:g,createLinkMetadata:f}=e,{editState:x,onChange:b,revisionNotFound:y}=ih(),{params:v}=lr(),j=void 0===v?iS:v,{selectedPerspective:w}=(0,u.usePerspective)(),{title:S}=ik(),I=(0,u.useSanityCreateConfig)().components?.documentLinkedActions,C=!!j.rev,[_,T]=(0,r.useState)(null),[R,P]=(0,r.useState)(null);h[0]===Symbol.for("react.memo_cache_sentinel")?(t=e=>{T(e.contentRect.width<480)},h[0]=t):t=h[0];let k=t;h[1]!==R?(o={element:R,onResize:k},h[1]=R,h[2]=o):o=h[2],function(e){let t,n,l=(0,i.c)(4),{element:o,onResize:s}=e;l[0]!==o||l[1]!==s?(t=()=>(o&&u.resizeObserver.observe(o,s),()=>{o&&u.resizeObserver.unobserve(o)}),n=[o,s],l[0]=o,l[1]=s,l[2]=t,l[3]=n):(t=l[2],n=l[3]),(0,r.useLayoutEffect)(t,n)}(o);e:{let e=!!(x?.ready&&"boolean"==typeof _);if(w){if((0,u.isPublishedPerspective)(w)){s=e&&!!x?.published;break e}if((0,u.isReleaseDocument)(w)){s=e&&!!x?.version;break e}}s=e}let E=s;if(f&&(0,u.isSanityCreateLinked)(f)&&I){let e;h[3]!==I||h[4]!==f||h[5]!==b||h[6]!==S?(e=(0,n.jsx)(I,{metadata:f,panelPortalElementId:lV,onDocumentChange:b,documentTitle:S}),h[3]=I,h[4]=f,h[5]=b,h[6]=S,h[7]=e):e=h[7],a=e}else if(C){let e;h[8]===Symbol.for("react.memo_cache_sentinel")?(e=(0,n.jsx)(oN,{}),h[8]=e):e=h[8],a=e}else{let e;h[9]===Symbol.for("react.memo_cache_sentinel")?(e=(0,n.jsx)(oz,{}),h[9]=e):e=h[9],a=e}if(C&&y)return null;let D=C?"revision":"published";h[10]===Symbol.for("react.memo_cache_sentinel")?(d={opacity:.2},h[10]=d):d=h[10],h[11]===Symbol.for("react.memo_cache_sentinel")?(c={opacity:1,transition:{duration:.3}},h[11]=c):c=h[11];let F=C?"caution":void 0;return h[12]!==a||h[13]!==g||h[14]!==_||h[15]!==E||h[16]!==C?(p=E&&(0,n.jsxs)(l.Flex,{align:"stretch",gap:1,justify:"space-between",paddingLeft:+!C,paddingRight:+!C,children:[(0,n.jsxs)(l.Flex,{align:"center",flex:1,gap:_?2:3,wrap:"wrap",paddingRight:3,children:[(0,n.jsxs)(l.Flex,{align:"center",children:[C?(0,n.jsx)(rz,{}):(0,n.jsx)(rA,{}),(0,n.jsx)(oh,{})]}),(0,n.jsx)(ob,{})]}),(0,n.jsxs)(l.Flex,{align:"flex-start",justify:"flex-end",ref:g,style:{flexShrink:0,marginLeft:"auto"},children:[(0,n.jsx)(oh,{}),a]})]}),h[12]=a,h[13]=g,h[14]=_,h[15]=E,h[16]=C,h[17]=p):p=h[17],h[18]!==D||h[19]!==F||h[20]!==p?(m=(0,n.jsx)(rO,{initial:d,animate:c,tone:F,radius:3,ref:P,sizing:"border",padding:2,children:p},D),h[18]=D,h[19]=F,h[20]=p,h[21]=m):m=h[21],m}let rN=(0,r.memo)(function(e){let t,l,o,r,s,a,d,c,p,m,h,g,f,x=(0,i.c)(26);x[0]!==e?({actionsBoxElement:t,activeIndex:l,as:m,children:o,id:r,onActionStart:s,onKeyDown:a,rootRef:c,states:p,...d}=e,x[0]=e,x[1]=t,x[2]=l,x[3]=o,x[4]=r,x[5]=s,x[6]=a,x[7]=d,x[8]=c,x[9]=p,x[10]=m):(t=x[1],l=x[2],o=x[3],r=x[4],s=x[5],a=x[6],d=x[7],c=x[8],p=x[9],m=x[10]);let b=void 0===m?"div":m,y=p[l];x[11]!==s||x[12]!==a||x[13]!==p?(h=e=>{let t=p.filter(t=>t.shortcut&&(0,tb.isHotkey)(t.shortcut,e)),n=t[0];if(t.length>1&&console.warn(`Keyboard shortcut conflict: More than one document action matches the shortcut "${n.shortcut}"`),n&&!n.disabled&&n.onHandle){e.preventDefault(),n.onHandle(),s(p.indexOf(n));return}a&&a(e)},x[11]=s,x[12]=a,x[13]=p,x[14]=h):h=x[14];let v=h;return x[15]!==t||x[16]!==y?(g=y&&y.dialog&&(0,n.jsx)(u.LegacyLayerProvider,{zOffset:"paneFooter",children:(0,n.jsx)(l6,{dialog:y.dialog,referenceElement:t})}),x[15]=t,x[16]=y,x[17]=g):g=x[17],x[18]!==b||x[19]!==o||x[20]!==v||x[21]!==r||x[22]!==d||x[23]!==c||x[24]!==g?(f=(0,n.jsxs)(b,{id:r,onKeyDown:v,tabIndex:-1,...d,ref:c,children:[o,g]}),x[18]=b,x[19]=o,x[20]=v,x[21]=r,x[22]=d,x[23]=c,x[24]=g,x[25]=f):f=x[25],f}),r$=(0,r.memo)(e=>{let t,l,o,s,a,d,c=(0,i.c)(12);c[0]!==e?({actionsBoxElement:t,as:s,children:l,...o}=e,c[0]=e,c[1]=t,c[2]=l,c[3]=o,c[4]=s):(t=c[1],l=c[2],o=c[3],s=c[4]);let u=void 0===s?"div":s,[p,m]=(0,r.useState)(-1);c[5]===Symbol.for("react.memo_cache_sentinel")?(a=e=>{m(e)},c[5]=a):a=c[5];let h=a;return c[6]!==t||c[7]!==p||c[8]!==u||c[9]!==l||c[10]!==o?(d=(0,n.jsx)(ai,{children:e=>{let{states:i}=e;return(0,n.jsx)(rN,{...o,activeIndex:p,actionsBoxElement:t,as:u,onActionStart:h,states:i,children:l})}}),c[6]=t,c[7]=p,c[8]=u,c[9]=l,c[10]=o,c[11]=d):d=c[11],d});r$.displayName="Memo(DocumentActionShortcuts)";let rH=()=>{let e,t=(0,i.c)(1);return t[0]===Symbol.for("react.memo_cache_sentinel")?(e=(0,n.jsx)(f.CheckmarkIcon,{style:{visibility:"hidden"}}),t[0]=e):e=t[0],e};function rG(e){let t,o,r,s,a,d,c,p=(0,i.c)(23),{documentType:m,value:h,currentMinWidth:g,paneKey:f,minWidth:x}=e,{t:b}=(0,u.useTranslation)();return p[0]!==m?(t={documentType:m},p[0]=m,p[1]=t):t=p[1],p[2]!==b||p[3]!==t?(o=(0,n.jsx)(u.Translate,{t:b,i18nKey:"panes.document-pane.document-unknown-type.title",values:t}),p[2]=b,p[3]=t,p[4]=o):o=p[4],p[5]!==m||p[6]!==b?(r=m&&(0,n.jsx)(l.Text,{as:"p",children:(0,n.jsx)(u.Translate,{t:b,i18nKey:"panes.document-pane.document-unknown-type.text",values:{documentType:m}})}),p[5]=m,p[6]=b,p[7]=r):r=p[7],p[8]!==m||p[9]!==b?(s=!m&&(0,n.jsx)(l.Text,{as:"p",children:b("panes.document-pane.document-unknown-type.without-schema.text")}),p[8]=m,p[9]=b,p[10]=s):s=p[10],p[11]!==h?(a=u.isDev&&h&&(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(l.Text,{as:"p",children:"Here is the JSON representation of the document:"}),(0,n.jsx)(l.Card,{padding:3,overflow:"auto",radius:2,shadow:1,tone:"inherit",children:(0,n.jsx)(l.Code,{language:"json",size:[1,1,2],children:JSON.stringify(h,null,2)})})]}),p[11]=h,p[12]=a):a=p[12],p[13]!==r||p[14]!==s||p[15]!==a?(d=(0,n.jsxs)(l.Stack,{space:4,children:[r,s,a]}),p[13]=r,p[14]=s,p[15]=a,p[16]=d):d=p[16],p[17]!==g||p[18]!==x||p[19]!==f||p[20]!==o||p[21]!==d?(c=(0,n.jsx)(id,{currentMinWidth:g,flex:2.5,minWidth:x,paneKey:f,title:o,tone:"caution",children:d}),p[17]=g,p[18]=x,p[19]=f,p[20]=o,p[21]=d,p[22]=c):c=p[22],c}let rU=["fixed","fixed","absolute"];function rq(e){let t,r,s,a,d,c,p=(0,i.c)(16),{documentPanelPortalElement:h,setFooterElement:g,setActionsBoxElement:f}=e,x=(0,u.useZIndex)(),{value:b}=ih();p[0]!==h?(t={[lV]:h},p[0]=h,p[1]=t):t=p[1];let y=t;p[2]!==b?(r=(0,u.getSanityCreateLinkMetadata)(b),p[2]=b,p[3]=r):r=p[3];let v=r;return p[4]!==v||p[5]!==f?(s=(0,n.jsx)(m.TooltipDelayGroupProvider,{children:(0,n.jsx)(rB,{actionsBoxRef:f,createLinkMetadata:v})}),p[4]=v,p[5]=f,p[6]=s):s=p[6],p[7]!==g||p[8]!==s?(a=(0,n.jsx)(n2,{ref:g,padding:1,children:s}),p[7]=g,p[8]=s,p[9]=a):a=p[9],p[10]!==a||p[11]!==x.portal?(d=(0,n.jsx)(o.DialogProvider,{position:rU,zOffset:x.portal,children:a}),p[10]=a,p[11]=x.portal,p[12]=d):d=p[12],p[13]!==y||p[14]!==d?(c=(0,n.jsx)(l.PortalProvider,{__unstable_elements:y,children:d}),p[13]=y,p[14]=d,p[15]=c):c=p[15],c}let rW=[],rK=["fixed","fixed","absolute"],rY=(0,eI.styled)(u.ChangeConnectorRoot).withConfig({displayName:"StyledChangeConnectorRoot",componentId:"sc-tn8aer-0"})`flex:1;display:flex;flex-direction:column;min-height:0;min-width:0;`;function rX(){var e;let t,s,a,d,c,p,m,g,x,b,y,v,j,w,S,I,C,_,R,P,k,E,D=(0,i.c)(82),{changesOpen:F,displayed:A,documentId:V,documentType:M,editState:L,fieldActions:z,focusPath:O,inspectOpen:B,inspector:N,inspectors:$,onFocus:H,onHistoryOpen:G,onMenuAction:U,onPathOpen:q,paneKey:W,schemaType:K,value:Y,previewUrl:X}=ih(),{stickyParams:J}=(0,h.useRouter)(),{params:Z}=lr(),{features:Q}=iw(),{t:ee}=(0,u.useTranslation)(T),{collapsed:et}=nL(),en=(0,u.useZIndex)(),[ei,el]=(0,r.useState)(null),[eo,er]=(0,r.useState)(null),[es,ea]=(0,r.useState)(null),[ed,ec]=(0,r.useState)(null),[eu,ep]=(0,r.useState)(null);D[0]!==O||D[1]!==ei||D[2]!==Y?(t={element:ei,focusPath:O,value:Y},D[0]=O,D[1]=ei,D[2]=Y,D[3]=t):t=D[3],(0,u.useGlobalCopyPasteElementHandler)(t),D[4]===Symbol.for("react.memo_cache_sentinel")?(s=[],D[4]=s):s=D[4];let[em,eh]=(0,r.useState)(s);D[5]===Symbol.for("react.memo_cache_sentinel")?(a=[],D[5]=a):a=D[5];let[eg,ef]=(0,r.useState)(a),ex=(0,o.useElementRect)(eo),eb=(0,o.useElementRect)(es),ey=ex?.height,ev=eb?.height,ej=600+320*!!N,ew=320+320*!!N;D[6]!==N?.name||D[7]!==$?(d=$?.find(e=>e.name===N?.name),D[6]=N?.name,D[7]=$,D[8]=d):d=D[8];let eS=d;D[9]!==A||D[10]!==V||D[11]!==L?(c={displayed:A,documentId:V,editState:L},D[9]=A,D[10]=V,D[11]=L,D[12]=c):c=D[12];let eI=(0,u.useDocumentIdStack)(c),eC=!!Y,e_="true"===J.displayInlineChanges;D[13]!==eS||D[14]!==eI||D[15]!==Q||D[16]!==eC||D[17]!==em||D[18]!==$||D[19]!==X||D[20]!==ee||D[21]!==e_?(k=function({currentInspector:e,hasValue:t,inspectors:n,inspectorMenuItems:i}){return n.map((n,l)=>{let o=i[l];return!o||o.hidden?null:{action:`${iI}${n.name}`,group:o.showAsAction?void 0:"inspectors",icon:o.icon,disabled:!t,selected:e?.name===n.name,shortcut:o.hotkeys?.join("+"),showAsAction:o.showAsAction,title:o.title,tone:o.tone}}).filter(Boolean)}(e={currentInspector:eS,features:Q,hasValue:eC,inspectorMenuItems:em,inspectors:$,previewUrl:X,documentIdStack:eI,t:ee,displayInlineChanges:e_}),E=[function({previewUrl:e,t}){return e?{action:"production-preview",group:"links",title:t("production-preview.menu-item.title"),icon:f.EarthAmericasIcon,shortcut:"Ctrl+Alt+O"}:null}(e),function({documentIdStack:e,t}){let n=typeof e?.previousId>"u"&&{reason:t("compare-versions.menu-item.disabled-reason")};return{action:"compareVersions",group:"inspectors",title:t("compare-versions.menu-item.title"),icon:f.TransferIcon,disabled:n}}(e),function({displayInlineChanges:e,t}){return{action:"toggleInlineChanges",group:"inspectors",title:t("toggle-inline-changes.menu-item.title"),icon:e?f.CheckmarkIcon:rH}}(e)].filter(Boolean),p=[{action:"copy-document-url",showAsAction:!0,title:e.t("action.copy-document-url.label"),icon:f.LinkIcon},...k,function({hasValue:e,t}){return{action:"inspect",group:"inspectors",title:t("document-inspector.menu-item.title"),icon:f.JsonIcon,disabled:!e,shortcut:"Ctrl+Alt+I"}}(e),...E],D[13]=eS,D[14]=eI,D[15]=Q,D[16]=eC,D[17]=em,D[18]=$,D[19]=X,D[20]=ee,D[21]=e_,D[22]=p):p=D[22];let eT=p;D[23]!==eT||D[24]!==U?(m=e=>{for(let t of eT)if(t.shortcut&&(0,tb.isHotkey)(t.shortcut,e)){e.preventDefault(),e.stopPropagation(),U(t);return}},D[23]=eT,D[24]=U,D[25]=m):m=D[25];let eR=m;D[26]!==H||D[27]!==q?(g=e=>{q(e),H(e)},D[26]=H,D[27]=q,D[28]=g):g=D[28];let eP=g;if(!K){let e;return D[29]!==ej||D[30]!==M||D[31]!==ew||D[32]!==W||D[33]!==Y?(e=(0,n.jsx)(rG,{currentMinWidth:ej,documentType:M,minWidth:ew,paneKey:W,value:Y}),D[29]=ej,D[30]=M,D[31]=ew,D[32]=W,D[33]=Y,D[34]=e):e=D[34],e}D[35]!==V||D[36]!==M||D[37]!==$?(x=$.length>0&&(0,n.jsx)(iT,{documentId:V,documentType:M,inspectors:$,onMenuItems:eh}),D[35]=V,D[36]=M,D[37]=$,D[38]=x):x=D[38],D[39]!==V||D[40]!==M||D[41]!==z||D[42]!==K?(b=z.length>0&&K&&(0,n.jsx)(u.FieldActionsResolver,{actions:z,documentId:V,documentType:M,onActions:ef,path:rW,schemaType:K}),D[39]=V,D[40]=M,D[41]=z,D[42]=K,D[43]=b):b=D[43],D[44]!==eT?(y=(0,n.jsx)(od,{ref:ea,menuItems:eT}),D[44]=eT,D[45]=y):y=D[45];let ek=et?void 0:"fill",eE=F&&Z?.changesInspectorTab==="review",eD=ey||null,eF=ev||null;return D[46]!==eu?(v=(0,n.jsx)(rq,{documentPanelPortalElement:eu,setFooterElement:er,setActionsBoxElement:ec}),D[46]=eu,D[47]=v):v=D[47],D[48]!==B||D[49]!==ei||D[50]!==eD||D[51]!==eF||D[52]!==v?(j=(0,n.jsx)(lW,{footerHeight:eD,headerHeight:eF,isInspectOpen:B,rootElement:ei,setDocumentPanelPortalElement:ep,footer:v}),D[48]=B,D[49]=ei,D[50]=eD,D[51]=eF,D[52]=v,D[53]=j):j=D[53],D[54]!==eP||D[55]!==G||D[56]!==eE||D[57]!==j?(w=(0,n.jsx)(rY,{"data-testid":"change-connector-root",isReviewChangesOpen:eE,onOpenReviewChanges:G,onSetFocus:eP,children:j}),D[54]=eP,D[55]=G,D[56]=eE,D[57]=j,D[58]=w):w=D[58],D[59]!==ek||D[60]!==w?(S=(0,n.jsx)(l.Flex,{direction:"column",flex:1,height:ek,children:w}),D[59]=ek,D[60]=w,D[61]=S):S=D[61],D[62]!==S||D[63]!==en.paneDialog?(I=(0,n.jsx)(o.DialogProvider,{position:rK,zOffset:en.paneDialog,children:S}),D[62]=S,D[63]=en.paneDialog,D[64]=I):I=D[64],D[65]===Symbol.for("react.memo_cache_sentinel")?(C=(0,n.jsx)(iD,{}),D[65]=C):C=D[65],D[66]!==ed||D[67]!==ej||D[68]!==eR||D[69]!==ew||D[70]!==W||D[71]!==y||D[72]!==I?(_=(0,n.jsxs)(r$,{actionsBoxElement:ed,as:nN,currentMinWidth:ej,"data-testid":"document-pane",flex:2.5,id:W,minWidth:ew,onKeyUp:eR,rootRef:el,children:[y,I,C]}),D[66]=ed,D[67]=ej,D[68]=eR,D[69]=ew,D[70]=W,D[71]=y,D[72]=I,D[73]=_):_=D[73],D[74]!==eg||D[75]!==_?(R=(0,n.jsx)(ib,{children:(0,n.jsx)(u.FieldActionsProvider,{actions:eg,path:rW,children:_})}),D[74]=eg,D[75]=_,D[76]=R):R=D[76],D[77]!==b||D[78]!==R||D[79]!==x||D[80]!==Y?(P=(0,n.jsxs)(u.GetFormValueProvider,{value:Y,children:[x,b,R]}),D[77]=b,D[78]=R,D[79]=x,D[80]=Y,D[81]=P):P=D[81],P}let rJ=(e,t)=>{let n,l,o,s,a=(0,i.c)(11),d=(0,u.useHistoryStore)(),[c,p]=(0,r.useState)(null),[m,h]=(0,r.useState)(!1);a[0]!==e||a[1]!==t?(n={documentId:e,documentType:t},a[0]=e,a[1]=t,a[2]=n):n=a[2];let g=(0,u.useTimelineStore)(n),f=(0,u.useTimelineSelector)(g,rZ);return a[3]!==e||a[4]!==d||a[5]!==f?(l=()=>{f&&e?(h(!0),d.getDocumentAtRevision(e,f).then(e=>{p(e||null),h(!1)}).catch(()=>{p(null),h(!1)})):(p(null),h(!1))},o=[e,f,d],a[3]=e,a[4]=d,a[5]=f,a[6]=l,a[7]=o):(l=a[6],o=a[7]),(0,r.useEffect)(l,o),a[8]!==c||a[9]!==m?(s={lastRevisionDocument:c,loading:m},a[8]=c,a[9]=m,a[10]=s):s=a[10],s};function rZ(e){return e.lastNonDeletedRevId}let rQ=(0,tc.defineEvent)({name:"DocumentURLCopied",version:1,description:"User copied document URL to clipboard"}),r0=(0,tc.defineEvent)({name:"InlineChangesSwitchedOn",version:1,description:"User switched on display of inline changes"}),r1=(0,tc.defineEvent)({name:"InlineChangesSwitchedOff",version:1,description:"User switched off display of inline changes"});function r2(e){return e.name===i_}function r3(e){let t=(0,u.isRecord)(e)&&"string"==typeof e.message?e.message:"Unknown error";throw Error(`An error was thrown while trying to get your preview url: ${t}`)}function r4(e){let t,l,a,d,p,m,g,f,x,b,y,v,j,w,S,I,C,_,R,P,k,E,D,F,A,V,M,L,z,O,B,N,$,H,G,U=(0,i.c)(204),{children:q,index:W,pane:K,paneKey:Y,onFocusPath:X,onSetMaximizedPane:J,maximized:Z,forcedVersion:Q,historyStore:ee}=e,et=void 0!==Z&&Z,{store:en,error:ei,ready:el,revisionDocument:eo,onOlderRevision:er,sinceDocument:es,isPristine:ea,revisionId:ed,lastNonDeletedRevId:ec}=ee,eu=(0,u.useSchema)(),{setDocumentMeta:ep}=(0,u.useCopyPaste)(),{document:em}=(0,u.useSource)(),{actions:eh,badges:eg,unstable_fieldActions:ef,unstable_languageFilter:ex,drafts:eb}=em,{enabled:ey}=eb,ev=(0,td.useTelemetry)(),ej=(0,h.useRouter)(),ew=lr(),eS=ew.setParams,{push:eI}=(0,o.useToast)(),{options:eC,menuItemGroups:eT,title:eP,views:ek}=K,eD=void 0===eT?iC:eT,eF=void 0===eP?null:eP;U[0]!==ek?(t=void 0===ek?[]:ek,U[0]=ek,U[1]=t):t=U[1];let eV=t,eM=(0,u.useUnique)(eC),eO=eM.id;U[2]!==eO?(l=(0,c.getPublishedId)(eO),U[2]=eO,U[3]=l):l=U[3];let eB=l,eN=eC.type,eH=(0,u.useUnique)(ew.params)||iS,{buildStudioUrl:eG}=(0,u.useStudioUrl)(),eU=(0,u.usePerspective)(),{document:eq,beta:eW}=(0,u.useWorkspace)(),{drafts:eK}=eq,{enabled:eY}=eK,eX=eW?.form?.enhancedObjectDialog?.enabled;e:{let e;if(Q){a=Q;break e}U[4]!==eU.selectedPerspectiveName||U[5]!==eU.selectedReleaseId?(e={selectedPerspectiveName:eU.selectedPerspectiveName,selectedReleaseId:eU.selectedReleaseId},U[4]=eU.selectedPerspectiveName,U[5]=eU.selectedReleaseId,U[6]=e):e=U[6],a=e}let{selectedReleaseId:eJ,selectedPerspectiveName:eZ}=a,{data:eQ}=(0,u.useActiveReleases)(),e0=void 0===eQ?u.EMPTY_ARRAY:eQ,e1=nc();U[7]!==eB||U[8]!==eN||U[9]!==eM||U[10]!==eH?(d={paneOptions:eM,documentId:eB,documentType:eN,params:eH},U[7]=eB,U[8]=eN,U[9]=eM,U[10]=eH,U[11]=d):d=U[11];let e2=(e=>{var t;let n,l,o,r,s,a,d,c,p=(0,i.c)(13),{paneOptions:m,documentType:h,documentId:g,params:f}=e,x=(0,u.useTemplates)(),b=lr(),y=(0,u.useUnique)(b.payload);p[0]!==h||p[1]!==m.template||p[2]!==m.templateParameters||p[3]!==y||p[4]!==f.template||p[5]!==x?(o=(t={documentType:h,templateName:m.template,templateParams:m.templateParameters,panePayload:y,urlTemplate:f.template}).panePayload||{},r=t.templateName,t.urlTemplate&&r&&r!==t.urlTemplate&&console.warn(`Conflicting templates: URL says "${t.urlTemplate}", structure node says "${r}". Using "${r}".`),s=r||t.urlTemplate,a=x.filter(e=>e.schemaType===t.documentType),d={...t.templateParams,..."object"==typeof o&&o||{}},c=s,s||1!==a.length||(c=a[0].id),n={templateName:c,templateParams:d},p[0]=h,p[1]=m.template,p[2]=m.templateParameters,p[3]=y,p[4]=f.template,p[5]=x,p[6]=n):n=p[6];let{templateName:v,templateParams:j}=n;p[7]!==g||p[8]!==h||p[9]!==f.version||p[10]!==v||p[11]!==j?(l={documentId:g,documentType:h,templateName:v,templateParams:j,version:f.version},p[7]=g,p[8]=h,p[9]=f.version,p[10]=v,p[11]=j,p[12]=l):l=p[12];let w=(0,u.useInitialValue)(l);return(0,u.useUnique)(w)})(d),e3=e2.loading;U[12]!==eB||U[13]!==eN||U[14]!==eH||U[15]!==eS?(p={documentId:eB,documentType:eN,params:eH,setParams:eS},U[12]=eB,U[13]=eN,U[14]=eH,U[15]=eS,U[16]=p):p=U[16];let{changesOpen:e4,currentInspector:e5,inspectors:e6,closeInspector:e8,openInspector:e7,handleHistoryClose:e9,handleHistoryOpen:te,handleInspectorAction:tn,inspectOpen:ti,handleLegacyInspectClose:tl}=function(e){let t,n,l,o,s,a,d,c,p,m,h,g,f,x,b=(0,i.c)(54),{documentId:y,documentType:v,params:j,setParams:w}=e,{features:S}=iw(),I=(0,u.useSource)().document.inspectors;b[0]!==y||b[1]!==v||b[2]!==I?(t=I({documentId:y,documentType:v}),b[0]=y,b[1]=v,b[2]=I,b[3]=t):t=b[3];let C=t;b[4]!==j.inspect?(n=()=>j.inspect||null,b[4]=j.inspect,b[5]=n):n=b[5];let[_,T]=(0,r.useState)(n),R=(0,r.useRef)(j.inspect);b[6]!==j.inspect?(l=()=>{R.current!==j.inspect&&(R.current=j.inspect,T(j.inspect||null))},o=[j.inspect],b[6]=j.inspect,b[7]=l,b[8]=o):(l=b[7],o=b[8]),(0,r.useEffect)(l,o),b[9]!==_||b[10]!==C?(s=C?.find(e=>e.name===_),b[9]=_,b[10]=C,b[11]=s):s=b[11];let P=s;b[12]!==C?(a=C.find(r2),b[12]=C,b[13]=a):a=b[13];let k=a,E=P?.name===i_;b[14]!==P||b[15]!==C||b[16]!==j||b[17]!==w?(d=e=>{let t=e&&C.find(t=>t.name===e);if(e&&!t)return void console.warn(`No inspector named "${e}"`);if(P){if(t){let e=t.onClose?.({params:j})??{params:j};T(null),R.current=void 0,w({...e.params,inspect:void 0});return}if(P){let e=P.onClose?.({params:j})??{params:j};T(null),R.current=void 0,w({...e.params,inspect:void 0})}}},b[14]=P,b[15]=C,b[16]=j,b[17]=w,b[18]=d):d=b[18];let D=d;b[19]!==P||b[20]!==C||b[21]!==j||b[22]!==w?(c=(e,t)=>{let n=C.find(t=>t.name===e);if(!n)return void console.warn(`No inspector named "${e}"`);if(P?.name===n.name)return void w({...j,...t,inspect:n.name});let i=j;P&&(i=(n.onClose?.({params:i})??{params:i}).params);let l=n.onOpen?.({params:i})??{params:i};T(n.name),R.current=n.name,w({...l.params,...t,inspect:n.name})},b[19]=P,b[20]=C,b[21]=j,b[22]=w,b[23]=c):c=b[23];let F=c;b[24]!==D||b[25]!==k?(p=()=>{k&&D(k.name)},b[24]=D,b[25]=k,b[26]=p):p=b[26];let A=p;b[27]!==S.reviewChanges||b[28]!==k||b[29]!==F?(m=()=>{S.reviewChanges&&k&&F(k.name,{changesInspectorTab:"review"})},b[27]=S.reviewChanges,b[28]=k,b[29]=F,b[30]=m):m=b[30];let V=m,M="on"===j.inspect;b[31]!==M||b[32]!==j||b[33]!==w?(h=e=>{w((void 0===e?!M:e)?{...j,inspect:"on"}:{...j,inspect:void 0})},b[31]=M,b[32]=j,b[33]=w,b[34]=h):h=b[34];let L=h;b[35]!==L?(g=()=>L(!1),b[35]=L,b[36]=g):g=b[36];let z=g;b[37]!==D||b[38]!==_||b[39]!==C||b[40]!==F||b[41]!==L?(f=e=>{if("inspect"===e.action)return L(!0),!0;if("string"!=typeof e.action)return!1;let t=e.action.slice(iI.length),n=C.find(e=>e.name===t);return!!n&&(n.name===_?D(n.name):F(n.name),!0)},b[37]=D,b[38]=_,b[39]=C,b[40]=F,b[41]=L,b[42]=f):f=b[42];let O=f;return b[43]!==E||b[44]!==D||b[45]!==P||b[46]!==A||b[47]!==V||b[48]!==O||b[49]!==z||b[50]!==M||b[51]!==C||b[52]!==F?(x={changesOpen:E,currentInspector:P,inspectors:C,closeInspector:D,openInspector:F,handleHistoryClose:A,handleHistoryOpen:V,handleInspectorAction:O,handleLegacyInspectClose:z,inspectOpen:M},b[43]=E,b[44]=D,b[45]=P,b[46]=A,b[47]=V,b[48]=O,b[49]=z,b[50]=M,b[51]=C,b[52]=F,b[53]=x):x=b[53],x}(p),[to,tr]=(0,r.useState)(!1),{lastRevisionDocument:ta}=rJ(eB,eN);U[17]!==ea||U[18]!==el?(m=e=>!!el&&!e?.draft&&!e?.published&&!e?.version&&!ea,U[17]=ea,U[18]=el,U[19]=m):m=U[19];let tc=m;U[20]!==e4||U[21]!==es?(g=e=>{let t=(0,u.selectUpstreamVersion)(e);return e4?es||t:t||null},U[20]=e4,U[21]=es,U[22]=g):g=U[22];let tu=g;U[23]!==eN||U[24]!==eu?(f=eu.get(eN),U[23]=eN,U[24]=eu,U[25]=f):f=U[25];let tp=f;U[26]!==tc||U[27]!==to||U[28]!==eY||U[29]!==eH.rev||U[30]!==eU.selectedPerspective||U[31]!==e0||U[32]!==tp||U[33]!==eJ?(x=e=>{let t=tc(e),n=!!eH.rev,i=e0.find(e=>(0,u.getReleaseIdFromReleaseDocumentId)(e._id)===eJ),l=(0,u.isPausedCardinalityOneRelease)(i);return n||to||t||!l&&!(0,u.isPerspectiveWriteable)({selectedPerspective:eU.selectedPerspective,isDraftModelEnabled:eY,schemaType:tp}).result},U[26]=tc,U[27]=to,U[28]=eY,U[29]=eH.rev,U[30]=eU.selectedPerspective,U[31]=e0,U[32]=tp,U[33]=eJ,U[34]=x):x=U[34];let tm=x;U[35]!==ec||U[36]!==ta||U[37]!==er||U[38]!==eo?(b=e=>er?eo||{_id:e._id,_type:e._type}:!e._createdAt&&!e._updatedAt&&ec&&ta?ta:e,U[35]=ec,U[36]=ta,U[37]=er,U[38]=eo,U[39]=b):b=U[39];let th=b;U[40]!==eH.path?(y=eH.path?(0,ts.fromString)(eH.path):u.EMPTY_ARRAY,U[40]=eH.path,U[41]=y):y=U[41];let tg="true"===ej.stickyParams.displayInlineChanges;U[42]!==e4||U[43]!==eB||U[44]!==eN||U[45]!==tu||U[46]!==th||U[47]!==tm||U[48]!==e2||U[49]!==X||U[50]!==eZ||U[51]!==y||U[52]!==tg?(v={changesOpen:e4,documentType:eN,documentId:eB,initialValue:e2,comparisonValue:tu,releaseId:eZ,selectedPerspectiveName:eZ,initialFocusPath:y,readOnly:tm,onFocusPath:X,getFormDocumentValue:th,displayInlineChanges:tg},U[42]=e4,U[43]=eB,U[44]=eN,U[45]=tu,U[46]=th,U[47]=tm,U[48]=e2,U[49]=X,U[50]=eZ,U[51]=y,U[52]=tg,U[53]=v):v=U[53];let{editState:tf,upstreamEditState:tx,hasUpstreamVersion:tb,connectionState:ty,focusPath:tv,onChange:tj,validation:tw,ready:tS,value:tI,formState:tC,permissions:t_,onPathOpen:tT,isPermissionsLoading:tR,formStateRef:tP,onProgrammaticFocus:tk,collapsedFieldSets:tE,collapsedPaths:tD,onBlur:tF,onFocus:tA,onSetActiveFieldGroup:tV,onSetCollapsedPath:tM,onSetCollapsedFieldSet:tL,openPath:tz}=(0,u.useDocumentForm)(v);U[54]!==ey||U[55]!==eH||U[56]!==e0||U[57]!==eZ||U[58]!==eJ||U[59]!==tI?(j=function(e,t,n,i,l,o){let r;switch(!0){case!!e?.rev:r="revision";break;case t&&(0,c.isVersionId)(n._id):{let e=o.find(e=>(0,u.getReleaseIdFromReleaseDocumentId)(e._id)===t);r=e&&(0,u.isCardinalityOneRelease)(e)?"scheduled-draft":"version";break}case"published"===i:r="published";break;case l:r="draft";break;default:r="published"}return r}(eH,eJ,tI,eZ,ey,e0),U[54]=ey,U[55]=eH,U[56]=e0,U[57]=eZ,U[58]=eJ,U[59]=tI,U[60]=j):j=U[60];let tO=j;U[61]!==tO||U[62]!==eB||U[63]!==eN||U[64]!==eJ?(w={schemaType:eN,documentId:eB,versionType:tO,releaseId:eJ},U[61]=tO,U[62]=eB,U[63]=eN,U[64]=eJ,U[65]=w):w=U[65];let tB=w;U[66]!==eh||U[67]!==tB?(S=eh(tB),U[66]=eh,U[67]=tB,U[68]=S):S=U[68];let tN=S;U[69]!==eX||U[70]!==tT||U[71]!==eH||U[72]!==eS?(I=e=>{if(tT(e),eX){let t=(0,u.pathToString)(e);eH.path!==t&&eS({...eH,path:t})}},U[69]=eX,U[70]=tT,U[71]=eH,U[72]=eS,U[73]=I):I=U[73];let t$=I;U[74]!==eg||U[75]!==eB||U[76]!==eN?(C=eg({schemaType:eN,documentId:eB}),U[74]=eg,U[75]=eB,U[76]=eN,U[77]=C):C=U[77];let tH=C;U[78]!==eB||U[79]!==eN||U[80]!==ex?(_=ex({schemaType:eN,documentId:eB}),U[78]=eB,U[79]=eN,U[80]=ex,U[81]=_):_=U[81];let tG=_,tU=(0,u.useUnique)(eV),tq=eH.view||tU[0]&&tU[0].id||null,tW=function(e){let t,n,l,o,s=(0,i.c)(6),{resolveProductionUrl:a}=(0,u.useSource)().document;s[0]===Symbol.for("react.memo_cache_sentinel")?(t=new eL.BehaviorSubject(void 0),s[0]=t):t=s[0];let d=t;return s[1]!==e?(n=()=>{d.next(e)},l=[d,e],s[1]=e,s[2]=n,s[3]=l):(n=s[2],l=s[3]),(0,r.useEffect)(n,l),s[4]!==a?(o=d.asObservable().pipe((0,eR.distinctUntilChanged)(),(0,tt.debounceTime)(500),(0,e$.switchMap)(e=>(0,u.isRecord)(e)&&"string"==typeof e._id&&"string"==typeof e._type?(0,ez.from)(a({document:e})):(0,eE.of)(void 0)),(0,eR.distinctUntilChanged)(),(0,eA.catchError)(r3)),s[4]=a,s[5]=o):o=s[5],(0,e_.useObservable)(o)}(tI),{t:tK}=(0,u.useTranslation)(T);U[82]!==eB||U[83]!==eN||U[84]!==ef||U[85]!==tp?(R=tp?ef({documentId:eB,documentType:eN,schemaType:tp}):[],U[82]=eB,U[83]=eN,U[84]=ef,U[85]=tp,U[86]=R):R=U[86];let tY=R,tX=tS&&(!eH.rev||el||!!ei);U[87]!==th||U[88]!==tI?(P=th(tI),U[87]=th,U[88]=tI,U[89]=P):P=U[89];let tJ=P;U[90]!==tJ||U[91]!==eB||U[92]!==tf?(k={strict:!0,displayed:tJ,documentId:eB,editState:tf},U[90]=tJ,U[91]=eB,U[92]=tf,U[93]=k):k=U[93];let{previousId:tZ}=(0,u.useDocumentIdStack)(k);U[94]!==eH||U[95]!==eS?(E=(e,t)=>{eS({...eH,since:e,rev:t||void 0})},U[94]=eH,U[95]=eS,U[96]=E):E=U[96];let tQ=E;U[97]!==ew?(D=()=>ew.closeCurrent(),U[97]=ew,U[98]=D):D=U[98];let t0=D;U[99]!==ew?(F=()=>ew.duplicateCurrent(),U[99]=ew,U[100]=F):F=U[100];let t1=F;U[101]!==ej||U[102]!==ev?(A=()=>{let e="true"!==ej.stickyParams.displayInlineChanges;ev.log(e?r0:r1),ej.navigate({stickyParams:{displayInlineChanges:String(e)}})},U[101]=ej,U[102]=ev,U[103]=A):A=U[103];let t2=A;U[104]!==eG||U[105]!==e1||U[106]!==eB||U[107]!==eN||U[108]!==te||U[109]!==tn||U[110]!==tW||U[111]!==tZ||U[112]!==eI||U[113]!==tK||U[114]!==ev||U[115]!==t2||U[116]!==tI._id?(V=async e=>{if("production-preview"===e.action&&tW)return window.open(tW),!0;if("copy-document-url"===e.action&&navigator){ev.log(rQ);let e=eG({coreUi:e=>`${e}/intent/edit/id=${eB};type=${eN}`});return await navigator.clipboard.writeText(e),eI({id:"copy-document-url",status:"info",title:tK("panes.document-operation-results.operation-success_copy-url")}),!0}return"reviewChanges"===e.action?(te(),!0):(("inspect"===e.action||"string"==typeof e.action&&e.action.startsWith(iI))&&tn(e),"compareVersions"===e.action&&"u">typeof tZ?(e1.navigateDiffView({mode:"version",previousDocument:{type:eN,id:tZ},nextDocument:{type:eN,id:tI._id}}),!0):"toggleInlineChanges"===e.action&&(t2(),!0))},U[104]=eG,U[105]=e1,U[106]=eB,U[107]=eN,U[108]=te,U[109]=tn,U[110]=tW,U[111]=tZ,U[112]=eI,U[113]=tK,U[114]=ev,U[115]=t2,U[116]=tI._id,U[117]=V):V=U[117];let t3=V;U[118]!==eB||U[119]!==eN||U[120]!==tj||U[121]!==tp||U[122]!==ep?(M=()=>{ep({documentId:eB,documentType:eN,schemaType:tp,onChange:tj})},L=[eB,eN,tp,tj,ep],U[118]=eB,U[119]=eN,U[120]=tj,U[121]=tp,U[122]=ep,U[123]=M,U[124]=L):(M=U[123],L=U[124]),(0,r.useEffect)(M,L),U[125]!==tu||U[126]!==tx?(z=tu(tx),U[125]=tu,U[126]=tx,U[127]=z):z=U[127];let t4=z,t5=tc(tf),t6=er&&!eo&&tX;t:{if(tf.version&&(0,u.isGoingToUnpublish)(tf.version)){O=tf.published;break t}O=tJ}let t8=O,t7=e5||null;U[128]!==eD?(B=eD||[],U[128]=eD,U[129]=B):B=U[129],U[130]!==tN||U[131]!==tq||U[132]!==tH||U[133]!==e4||U[134]!==e8||U[135]!==tE||U[136]!==tD||U[137]!==t4||U[138]!==ty||U[139]!==t8||U[140]!==eB||U[141]!==eO||U[142]!==eN||U[143]!==tf||U[144]!==tY||U[145]!==tv||U[146]!==tC||U[147]!==e9||U[148]!==te||U[149]!==tl||U[150]!==t3||U[151]!==t0||U[152]!==t1||U[153]!==t$||U[154]!==tb||U[155]!==W||U[156]!==ti||U[157]!==e6||U[158]!==t5||U[159]!==to||U[160]!==e3||U[161]!==tR||U[162]!==tG||U[163]!==ec||U[164]!==ta||U[165]!==et||U[166]!==tF||U[167]!==tj||U[168]!==tA||U[169]!==tV||U[170]!==tL||U[171]!==tM||U[172]!==J||U[173]!==e7||U[174]!==tz||U[175]!==Y||U[176]!==t_||U[177]!==tW||U[178]!==tX||U[179]!==ed||U[180]!==t6||U[181]!==tp||U[182]!==eJ||U[183]!==tQ||U[184]!==t7||U[185]!==B||U[186]!==ei||U[187]!==en||U[188]!==eF||U[189]!==tw||U[190]!==tI||U[191]!==tU?(N={actions:tN,activeViewId:tq,badges:tH,changesOpen:e4,closeInspector:e8,collapsedFieldSets:tE,collapsedPaths:tD,compareValue:t4,connectionState:ty,displayed:t8,documentId:eB,documentIdRaw:eO,documentType:eN,editState:tf,fieldActions:tY,focusPath:tv,inspector:t7,inspectors:e6,onBlur:tF,onChange:tj,onFocus:tA,onPathOpen:t$,onHistoryClose:e9,onHistoryOpen:te,onInspectClose:tl,onMenuAction:t3,onPaneClose:t0,onPaneSplit:t1,onSetActiveFieldGroup:tV,onSetCollapsedPath:tM,onSetCollapsedFieldSet:tL,onSetMaximizedPane:J,maximized:et,openInspector:e7,openPath:tz,index:W,inspectOpen:ti,validation:tw,menuItemGroups:B,paneKey:Y,previewUrl:tW,ready:tX,schemaType:tp,hasUpstreamVersion:tb,isPermissionsLoading:tR,isInitialValueLoading:e3,permissions:t_,setTimelineRange:tQ,setIsDeleting:tr,isDeleting:to,isDeleted:t5,timelineError:ei,timelineStore:en,title:eF,value:tI,selectedReleaseId:eJ,views:tU,formState:tC,unstable_languageFilter:tG,revisionId:ed,revisionNotFound:t6,lastNonDeletedRevId:ec,lastRevisionDocument:ta},U[130]=tN,U[131]=tq,U[132]=tH,U[133]=e4,U[134]=e8,U[135]=tE,U[136]=tD,U[137]=t4,U[138]=ty,U[139]=t8,U[140]=eB,U[141]=eO,U[142]=eN,U[143]=tf,U[144]=tY,U[145]=tv,U[146]=tC,U[147]=e9,U[148]=te,U[149]=tl,U[150]=t3,U[151]=t0,U[152]=t1,U[153]=t$,U[154]=tb,U[155]=W,U[156]=ti,U[157]=e6,U[158]=t5,U[159]=to,U[160]=e3,U[161]=tR,U[162]=tG,U[163]=ec,U[164]=ta,U[165]=et,U[166]=tF,U[167]=tj,U[168]=tA,U[169]=tV,U[170]=tL,U[171]=tM,U[172]=J,U[173]=e7,U[174]=tz,U[175]=Y,U[176]=t_,U[177]=tW,U[178]=tX,U[179]=ed,U[180]=t6,U[181]=tp,U[182]=eJ,U[183]=tQ,U[184]=t7,U[185]=B,U[186]=ei,U[187]=en,U[188]=eF,U[189]=tw,U[190]=tI,U[191]=tU,U[192]=N):N=U[192];let t9=N,ne=(0,r.useRef)(void 0);return U[193]!==eX||U[194]!==tP||U[195]!==tk||U[196]!==ew||U[197]!==eH||U[198]!==tX?($=()=>{if(tX&&eH.path){let{path:e,...t}=eH;e!==ne.current&&tk((0,ts.resolveKeyedPath)(tP.current?.value,(0,ts.fromString)(e))),eX||ew.setParams(t)}ne.current=eH.path},H=[tP,tk,ew,eH,tX,eX],U[193]=eX,U[194]=tP,U[195]=tk,U[196]=ew,U[197]=eH,U[198]=tX,U[199]=$,U[200]=H):($=U[199],H=U[200]),(0,r.useEffect)($,H),U[201]!==q||U[202]!==t9?(G=(0,n.jsx)(s.DocumentPaneContext.Provider,{value:t9,children:q}),U[201]=q,U[202]=t9,U[203]=G):G=U[203],G}let r5=e=>{let t,l,o,r,s,a,d,p=(0,i.c)(37),{params:m}=lr(),h=void 0===m?iS:m,g=sc(e.pane.options,h),f=(0,u.useSchema)(),x=g.type,b=!!f.get(g.type)?.liveEdit,{selectedPerspectiveName:y,selectedReleaseId:v,selectedPerspective:j}=(0,u.usePerspective)(),{data:w}=(0,u.useArchivedReleases)();p[0]!==g.id?(t=(0,c.getPublishedId)(g.id),p[0]=g.id,p[1]=t):t=p[1];let S=(0,u.useEditState)(t,x,"default",v),I=b&&"drafts"===j&&!S?.draft,{rev:C,since:_}=h,T=h.historyVersion;e:{if(I){let e;p[2]!==g.id?(e=(0,c.getPublishedId)(g.id),p[2]=g.id,p[3]=e):e=p[3],l=e;break e}if(T&&w.some(e=>(0,u.getReleaseIdFromReleaseDocumentId)(e._id)===T)){let e;p[4]!==T||p[5]!==g.id?(e=(0,c.getVersionId)(g.id,T),p[4]=T,p[5]=g.id,p[6]=e):e=p[6],l=e;break e}if(typeof y>"u"){let e;p[7]!==g.id?(e=(0,c.getDraftId)(g.id),p[7]=g.id,p[8]=e):e=p[8],l=e;break e}if("published"===y){let e;p[9]!==g.id?(e=(0,c.getPublishedId)(g.id),p[9]=g.id,p[10]=e):e=p[10],l=e;break e}if(0!==y.length){let e;p[11]!==g.id||p[12]!==y?(e=(0,c.getVersionId)(g.id,y),p[11]=g.id,p[12]=y,p[13]=e):e=p[13],l=e;break e}l=g.id}let R=l;p[14]!==R||p[15]!==g.type||p[16]!==C||p[17]!==_?(o={documentId:R,documentType:g.type,rev:C,since:_},p[14]=R,p[15]=g.type,p[16]=C,p[17]=_,p[18]=o):o=p[18];let P=(0,u.useEventsStore)(o),k=P.error,E=P.revision?.revisionId||null,D=!!(C&&!P.revision?.loading),F=P.revision?.document||null,A=P.sinceRevision?.document||null,V=!P.loading,M=0===P.events.length;p[19]!==P.events?(r=P.events.find(r6)?.id||null,p[19]=P.events,p[20]=r):r=p[20],p[21]!==P.error||p[22]!==M||p[23]!==r||p[24]!==E||p[25]!==D||p[26]!==F||p[27]!==A||p[28]!==V?(s={error:k,revisionId:E,onOlderRevision:D,revisionDocument:F,sinceDocument:A,ready:V,isPristine:M,lastNonDeletedRevId:r},p[21]=P.error,p[22]=M,p[23]=r,p[24]=E,p[25]=D,p[26]=F,p[27]=A,p[28]=V,p[29]=s):s=p[29];let L=s;return p[30]!==L||p[31]!==T||p[32]!==e?(a=T?(0,n.jsx)(u.PerspectiveProvider,{selectedPerspectiveName:T,excludedPerspectives:u.EMPTY_ARRAY,children:(0,n.jsx)(r4,{...e,historyStore:L})}):(0,n.jsx)(r4,{...e,historyStore:L}),p[30]=L,p[31]=T,p[32]=e,p[33]=a):a=p[33],p[34]!==a||p[35]!==P?(d=(0,n.jsx)(u.EventsProvider,{value:P,children:a}),p[34]=a,p[35]=P,p[36]=d):d=p[36],d};function r6(e){return!(0,u.isDeleteDocumentGroupEvent)(e)&&!(0,u.isDeleteDocumentVersionEvent)(e)}let r8=e=>{let t,l,o,s,a=(0,i.c)(20),{pane:d}=e,p=lr(),m=sc(d.options,p.params),h=p.params||iS,[g,f]=(0,r.useState)(null);a[0]!==m.id?(t=(0,c.getPublishedId)(m.id),a[0]=m.id,a[1]=t):t=a[1],a[2]!==m.type||a[3]!==h.rev||a[4]!==h.since||a[5]!==t?(l={documentId:t,documentType:m.type,onError:f,rev:h.rev,since:h.since},a[2]=m.type,a[3]=h.rev,a[4]=h.since,a[5]=t,a[6]=l):l=a[6];let x=(0,u.useTimelineStore)(l),b=(0,u.useTimelineSelector)(x,r7),y=(0,u.useTimelineSelector)(x,r9),v=(0,u.useTimelineSelector)(x,se),j=(0,u.useTimelineSelector)(x,st),w=(0,u.useTimelineSelector)(x,sn),S=(0,u.useTimelineSelector)(x,si),I=(0,u.useTimelineSelector)(x,sl),C=y?.id||null,_=!!S;a[7]!==I||a[8]!==b||a[9]!==x||a[10]!==C||a[11]!==j||a[12]!==v||a[13]!==_||a[14]!==g||a[15]!==w?(o={store:x,error:g,revisionId:C,onOlderRevision:b,revisionDocument:j,sinceDocument:v,ready:w,isPristine:_,lastNonDeletedRevId:I},a[7]=I,a[8]=b,a[9]=x,a[10]=C,a[11]=j,a[12]=v,a[13]=_,a[14]=g,a[15]=w,a[16]=o):o=a[16];let T=o;return a[17]!==T||a[18]!==e?(s=(0,n.jsx)(r4,{...e,historyStore:T}),a[17]=T,a[18]=e,a[19]=s):s=a[19],s};function r7(e){return e.onOlderRevision}function r9(e){return e.revTime}function se(e){return e.sinceAttributes}function st(e){return e.timelineDisplayed}function sn(e){return e.timelineReady}function si(e){return e.isPristine}function sl(e){return e.lastNonDeletedRevId}function so(e){let t=(0,i.c)(4),{children:l}=e,o=lr(),{excludedPerspectives:r}=(0,u.usePerspective)(),{scheduledDraft:s}=o.params;if(s){let e;return t[0]!==l||t[1]!==r||t[2]!==s?(e=(0,n.jsx)(u.PerspectiveProvider,{selectedPerspectiveName:s,excludedPerspectives:r,children:l}),t[0]=l,t[1]=r,t[2]=s,t[3]=e):e=t[3],e}return l}let sr=(0,r.memo)(e=>{let t,l,o,r=(0,i.c)(9),s=(0,u.useSource)(),{setParams:a,params:d}=lr();r[0]!==d||r[1]!==a?(t=e=>{a({...d,scheduledDraft:e},{perspective:""})},r[0]=d,r[1]=a,r[2]=t):t=r[2];let c=t;return r[3]!==e||r[4]!==s.beta?.eventsAPI?.documents?(l=s.beta?.eventsAPI?.documents?(0,n.jsx)(r5,{...e}):(0,n.jsx)(r8,{...e}),r[3]=e,r[4]=s.beta?.eventsAPI?.documents,r[5]=l):l=r[5],r[6]!==c||r[7]!==l?(o=(0,n.jsx)(so,{children:(0,n.jsx)(u.SingleDocReleaseProvider,{onSetScheduledDraftPerspective:c,children:l})}),r[6]=c,r[7]=l,r[8]=o):o=r[8],o});sr.displayName="Memo(DocumentPaneProviderWrapper)";let ss=(0,r.memo)(function(e){let t,l,o=(0,i.c)(5),{name:r}=(0,u.useSource)(),s=e.pane.source||r;return o[0]!==e?(t=(0,n.jsx)(u.CopyPasteProvider,{children:(0,n.jsx)(sa,{...e})}),o[0]=e,o[1]=t):t=o[1],o[2]!==s||o[3]!==t?(l=(0,n.jsx)(u.SourceProvider,{name:s,children:t}),o[2]=s,o[3]=t,o[4]=l):l=o[4],l});function sa(e){var t,o,s;let a,d,c,p,m,h,g,f,x,b,y,v,j=(0,i.c)(57),{pane:w,paneKey:S}=e,{resolveNewDocumentOptions:I}=(0,u.useSource)().document,{selectedPerspectiveName:C}=(0,u.usePerspective)(),_=lr(),R=sc(w.options,_.params),{documentType:P,isLoaded:k}=(0,u.useDocumentType)(R.id,R.type);!function(){let e,t,n,l,o,s=(0,i.c)(10),{params:a,setParams:d}=lr(),c=void 0===a?iS:a,{selectedPerspectiveName:p}=(0,u.usePerspective)(),m=(0,r.useRef)(!1);s[0]!==c||s[1]!==d?(e=e=>{["since","historyVersion","rev","preserveRev"].some(e=>c[e])&&d({...c,rev:"true"===c.preserveRev?c.rev:void 0,preserveRev:void 0,since:void 0,historyVersion:void 0})},s[0]=c,s[1]=d,s[2]=e):e=s[2];let h=(0,r.useEffectEvent)(e);s[3]!==p||s[4]!==h?(t=()=>{m.current&&h(p)},s[3]=p,s[4]=h,s[5]=t):t=s[5],s[6]!==p?(n=[p],s[6]=p,s[7]=n):n=s[7],(0,r.useEffect)(t,n),s[8]===Symbol.for("react.memo_cache_sentinel")?(l=()=>(m.current=!0,()=>{m.current=!1}),o=[],s[8]=l,s[9]=o):(l=s[8],o=s[9]),(0,r.useEffect)(l,o)}();let E=((v=(0,i.c)(1))[0]===Symbol.for("react.memo_cache_sentinel")?(y={pick:nI,defaultComponent:rX},v[0]=y):y=v[0],(0,u.useMiddlewareComponents)(y));j[0]!==R.id||j[1]!==R.type||j[2]!==I?(a=I({type:"document",documentId:R.id,schemaType:R.type}),j[0]=R.id,j[1]=R.type,j[2]=I,j[3]=a):a=j[3];let D=a;j[4]!==D?(d={templateItems:D},j[4]=D,j[5]=d):d=j[5];let[F,A]=(0,u.useTemplatePermissions)(d),V=k&&!A;j[6]!==P||j[7]!==V||j[8]!==R||j[9]!==e?(c=V&&P&&R.type!==P?(t=e,o=R,s=P,{...t,pane:{...t.pane,options:{...o,type:s}}}):e,j[6]=P,j[7]=V,j[8]=R,j[9]=e,j[10]=c):c=j[10];let M=c,{ReferenceChildLink:L,handleEditReference:z,groupIndex:O,routerPanesState:B}=_;j[11]!==O||j[12]!==B?(p=B[O+1]?.[0].params||{},j[11]=O,j[12]=B,j[13]=p):p=j[13];let N=p,$=B.length,{parentRefPath:H}=N;j[14]!==O||j[15]!==H||j[16]!==$?(m=H?{path:(0,ts.fromString)(H),state:O>=$-1?"none":O>=$-2?"selected":"pressed"}:{path:[],state:"none"},j[14]=O,j[15]=H,j[16]=$,j[17]=m):m=j[17];let G=m,{t:U}=(0,u.useTranslation)(T);if("*"===R.type&&!V){let e,t;return j[18]!==U?(e=U("panes.document-pane.document-not-found.loading"),j[18]=U,j[19]=e):e=j[19],j[20]!==S||j[21]!==e?(t=(0,n.jsx)(im,{flex:2.5,minWidth:320,paneKey:S,title:e}),j[20]=S,j[21]=e,j[22]=t):t=j[22],t}if(!P){let e,t,i,o,r;return j[23]!==U?(e=U("panes.document-pane.document-not-found.title"),j[23]=U,j[24]=e):e=j[24],j[25]!==R.id?(t={id:R.id},j[25]=R.id,j[26]=t):t=j[26],j[27]===Symbol.for("react.memo_cache_sentinel")?(i={Code:sd},j[27]=i):i=j[27],j[28]!==U||j[29]!==t?(o=(0,n.jsx)(l.Stack,{space:4,children:(0,n.jsx)(l.Text,{as:"p",children:(0,n.jsx)(u.Translate,{t:U,i18nKey:"panes.document-pane.document-not-found.text",values:t,components:i})})}),j[28]=U,j[29]=t,j[30]=o):o=j[30],j[31]!==S||j[32]!==e||j[33]!==o?(r=(0,n.jsx)(id,{flex:2.5,minWidth:320,paneKey:S,title:e,children:o}),j[31]=S,j[32]=e,j[33]=o,j[34]=r):r=j[34],r}let q=`${P}-${R.id}-${C||""}`;return j[35]!==E||j[36]!==R.id||j[37]!==R.type?(h=(0,n.jsx)(E,{documentId:R.id,documentType:R.type}),j[35]=E,j[36]=R.id,j[37]=R.type,j[38]=h):h=j[38],j[39]!==R.id||j[40]!==R.type||j[41]!==h?(g=(0,n.jsx)(ig,{documentId:R.id,documentType:R.type,children:h}),j[39]=R.id,j[40]=R.type,j[41]=h,j[42]=g):g=j[42],j[43]!==R.id||j[44]!==R.type||j[45]!==g?(f=(0,n.jsx)(nM,{documentId:R.id,documentType:R.type,children:g}),j[43]=R.id,j[44]=R.type,j[45]=g,j[46]=f):f=j[46],j[47]!==L||j[48]!==G||j[49]!==z||j[50]!==f||j[51]!==F?(x=(0,n.jsx)(u.ReferenceInputOptionsProvider,{EditReferenceLinkComponent:L,onEditReference:z,initialValueTemplateItems:F,activePath:G,children:f}),j[47]=L,j[48]=G,j[49]=z,j[50]=f,j[51]=F,j[52]=x):x=j[52],j[53]!==M||j[54]!==q||j[55]!==x?(b=(0,n.jsx)(sr,{...M,children:x},q),j[53]=M,j[54]=q,j[55]=x,j[56]=b):b=j[56],b}function sd(e){let{children:t}=e;return(0,n.jsx)("code",{children:t})}function sc(e,t){let n,l,o=(0,i.c)(8);o[0]!==t?(n=void 0===t?{}:t,o[0]=t,o[1]=n):n=o[1];let r=n,s=(0,u.useTemplates)();e:{let t,n;if(e.type&&"*"!==e.type){l=e;break e}let i=e.template||r.template;o[2]!==i||o[3]!==s?(t=i?s.find(e=>e.id===i):void 0,o[2]=i,o[3]=s,o[4]=t):t=o[4];let a=t?.schemaType;if(!a){l=e;break e}o[5]!==a||o[6]!==e?(n={...e,type:a},o[5]=a,o[6]=e,o[7]=n):n=o[7],l=n}return l}let su=(0,r.forwardRef)(function(e,t){let l,o,a,d=(0,i.c)(9),{routerPanesState:c,groupIndex:u}=(0,r.useContext)(s.PaneRouterContext);d[0]!==u||d[1]!==c?(l=c.slice(0,u),d[0]=u,d[1]=c,d[2]=l):l=d[2];let p=l;d[3]!==p?(o={panes:p},d[3]=p,d[4]=o):o=d[4];let m=o;return d[5]!==e||d[6]!==t||d[7]!==m?(a=(0,n.jsx)(h.StateLink,{...e,ref:t,state:m}),d[5]=e,d[6]=t,d[7]=m,d[8]=a):a=d[8],a}),sp=(0,r.forwardRef)(function(e,t){let l,o,a,d,c,u,p=(0,i.c)(19);p[0]!==e?({childId:l,childPayload:a,childParameters:o,...d}=e,p[0]=e,p[1]=l,p[2]=o,p[3]=a,p[4]=d):(l=p[1],o=p[2],a=p[3],d=p[4]);let{routerPanesState:m,groupIndex:g}=(0,r.useContext)(s.PaneRouterContext);if(p[5]!==l||p[6]!==o||p[7]!==a||p[8]!==g||p[9]!==m){let e;p[11]!==l||p[12]!==o||p[13]!==a?(e=[{id:l,params:o,payload:a}],p[11]=l,p[12]=o,p[13]=a,p[14]=e):e=p[14],c={panes:[...m.slice(0,g+1),e]},p[5]=l,p[6]=o,p[7]=a,p[8]=g,p[9]=m,p[10]=c}else c=p[10];return p[15]!==t||p[16]!==d||p[17]!==c?(u=(0,n.jsx)(h.StateLink,{...d,ref:t,state:c}),p[15]=t,p[16]=d,p[17]=c,p[18]=u):u=p[18],u}),sm=(0,r.forwardRef)(function(e,t){let l,o,a,d,c,p,m,g=(0,i.c)(20),{routerPanesState:f,groupIndex:x,siblingIndex:b}=(0,r.useContext)(s.PaneRouterContext);g[0]!==e?({params:l,payload:o,...a}=e,g[0]=e,g[1]=l,g[2]=o,g[3]=a):(l=g[1],o=g[2],a=g[3]);let y=(0,u.useUnique)(l),v=(0,u.useUnique)(o),j=f[x],w=j[b],S=y??w.params,I=v??w.payload;g[4]!==w||g[5]!==S||g[6]!==I?(d={...w,params:S,payload:I},g[4]=w,g[5]=S,g[6]=I,g[7]=d):d=g[7];let C=d;g[8]!==j||g[9]!==C||g[10]!==b?(c=[...j.slice(0,b),C,...j.slice(b+1)],g[8]=j,g[9]=C,g[10]=b,g[11]=c):c=g[11];let _=c;g[12]!==f||g[13]!==x||g[14]!==_?(p={panes:[...f.slice(0,x),_,...f.slice(x+1)]},g[12]=f,g[13]=x,g[14]=_,g[15]=p):p=g[15];let T=p;return g[16]!==T||g[17]!==t||g[18]!==a?(m=(0,n.jsx)(h.StateLink,{ref:t,...a,state:T}),g[16]=T,g[17]=t,g[18]=a,g[19]=m):m=g[19],m}),sh=(0,r.forwardRef)(function(e,t){let l,o,r,s,a,d,u,p,m,h,g,f=(0,i.c)(24);f[0]!==e?({documentId:o,documentType:r,parentRefPath:s,children:l,template:d,...a}=e,f[0]=e,f[1]=l,f[2]=o,f[3]=r,f[4]=s,f[5]=a,f[6]=d):(l=f[1],o=f[2],r=f[3],s=f[4],a=f[5],d=f[6]),f[7]!==o?(u=(0,c.getPublishedId)(o),f[7]=o,f[8]=u):u=f[8];let x=d?.params;return f[9]!==s?(p=(0,ts.toString)(s),f[9]=s,f[10]=p):p=f[10],f[11]!==d?(m=d&&{template:d?.id},f[11]=d,f[12]=m):m=f[12],f[13]!==r||f[14]!==p||f[15]!==m?(h={type:r,parentRefPath:p,...m},f[13]=r,f[14]=p,f[15]=m,f[16]=h):h=f[16],f[17]!==l||f[18]!==t||f[19]!==a||f[20]!==u||f[21]!==x||f[22]!==h?(g=(0,n.jsx)(sp,{...a,ref:t,childId:u,childPayload:x,childParameters:h,children:l}),f[17]=l,f[18]=t,f[19]=a,f[20]=u,f[21]=x,f[22]=h,f[23]=g):g=f[23],g}),sg=[];function sf(e){let t,l,o,r,a,d,c,u,p,m,g,f,x,b=(0,i.c)(60),{children:y,flatIndex:v,index:j,params:w,payload:S,siblingIndex:I}=e,{navigate:C,navigateIntent:_,resolvePathFromState:T}=(0,h.useRouter)(),R=(0,h.useRouterState)(),{panes:P,expand:k}=nL(),E=R?.panes||sg,D=P?.[P.length-2],F=j-1;b[0]!==F||b[1]!==E||b[2]!==R||b[3]!==I?(t=e=>{let t=E[F]||[],n=t[I],i=e(t,n),l=[...E.slice(0,F),i,...E.slice(F+1)];return{...R,panes:l}},b[0]=F,b[1]=E,b[2]=R,b[3]=I,b[4]=t):t=b[4];let A=t;b[5]!==A||b[6]!==C?(l=(e,t)=>{let n=A(e);return setTimeout(()=>C(n,t?{stickyParams:t}:void 0),0),n},b[5]=A,b[6]=C,b[7]=l):l=b[7];let V=l;b[8]!==A||b[9]!==T||b[10]!==I?(o=e=>T(A((t,n)=>[...t.slice(0,I),{...n,params:e},...t.slice(I+1)])),b[8]=A,b[9]=T,b[10]=I,b[11]=o):o=b[11];let M=o;b[12]!==V||b[13]!==I?(r=e=>{V((t,n)=>[...t.slice(0,I),{...n,payload:e},...t.slice(I+1)])},b[12]=V,b[13]=I,b[14]=r):r=b[14];let L=r;b[15]!==V||b[16]!==I?(a=(e,t)=>{V((t,n)=>[...t.slice(0,I),{...n,params:e},...t.slice(I+1)],t)},b[15]=V,b[16]=I,b[17]=a):a=b[17];let z=a;b[18]!==F||b[19]!==C||b[20]!==E?(d=e=>{let{id:t,parentRefPath:n,type:i,template:l,version:o}=e;C({panes:[...E.slice(0,F+1),[{id:t,params:{template:l.id,parentRefPath:(0,ts.toString)(n),type:i,version:o},payload:l.params}]]})},b[18]=F,b[19]=C,b[20]=E,b[21]=d):d=b[21];let O=d,B=!!E[F]&&E[F].length>1,N=E[F]?E[F].length:0,$=v?su:void 0;b[22]!==V?(u=e=>{let t=void 0===e?{}:e;V(()=>[{id:t.id||"",payload:t.payload,params:t.params||{}}])},c=()=>{V(sx)},b[22]=V,b[23]=c,b[24]=u):(c=b[23],u=b[24]),b[25]!==k||b[26]!==F||b[27]!==D||b[28]!==C||b[29]!==E?(p=e=>{(void 0===e||e)&&D&&k(D.element),C({panes:E.slice(0,F)})},b[25]=k,b[26]=F,b[27]=D,b[28]=C,b[29]=E,b[30]=p):p=b[30],b[31]!==V||b[32]!==I?(m=e=>{V((t,n)=>{let i={...n,payload:e?.payload||n.payload,params:e?.params||n.params};return[...t.slice(0,I),i,...t.slice(I)]})},b[31]=V,b[32]=I,b[33]=m):m=b[33],b[34]!==w||b[35]!==z?(g=e=>{let t=(0,e4.omit)(w,"view");return z(e?{...t,view:e}:t)},b[34]=w,b[35]=z,b[36]=g):g=b[36],b[37]!==M||b[38]!==v||b[39]!==F||b[40]!==O||b[41]!==_||b[42]!==w||b[43]!==S||b[44]!==E||b[45]!==z||b[46]!==L||b[47]!==I||b[48]!==c||b[49]!==p||b[50]!==m||b[51]!==g||b[52]!==B||b[53]!==N||b[54]!==$||b[55]!==u?(f={index:v,groupIndex:F,siblingIndex:I,payload:S,params:w,hasGroupSiblings:B,groupLength:N,routerPanesState:E,ChildLink:sp,BackLink:$,ReferenceChildLink:sh,handleEditReference:O,ParameterizedLink:sm,replaceCurrent:u,closeCurrent:c,closeCurrentAndAfter:p,duplicateCurrent:m,setView:g,setParams:z,setPayload:L,createPathWithParams:M,navigateIntent:_},b[37]=M,b[38]=v,b[39]=F,b[40]=O,b[41]=_,b[42]=w,b[43]=S,b[44]=E,b[45]=z,b[46]=L,b[47]=I,b[48]=c,b[49]=p,b[50]=m,b[51]=g,b[52]=B,b[53]=N,b[54]=$,b[55]=u,b[56]=f):f=b[56];let H=f;return b[57]!==y||b[58]!==H?(x=(0,n.jsx)(s.PaneRouterContext.Provider,{value:H,children:y}),b[57]=y,b[58]=H,b[59]=x):x=b[59],x}function sx(e,t){return e.length>1?e.filter(e=>e!==t):e}function sb(e){let t,o,r,s,a,d=(0,i.c)(14),{isSelected:c,pane:p,paneKey:m}=e;d[0]!==p?(t=(0,u.isRecord)(p)&&p.type||null,d[0]=p,d[1]=t):t=d[1];let h=t,{t:g}=(0,u.useTranslation)(T);return d[2]!==g?(o=g("panes.unknown-pane-type.title"),d[2]=g,d[3]=o):o=d[3],d[4]!==o?(r=(0,n.jsx)(n7,{title:o}),d[4]=o,d[5]=r):r=d[5],d[6]!==g||d[7]!==h?(s=(0,n.jsx)(nG,{children:(0,n.jsx)(l.Box,{padding:4,children:"string"==typeof h?(0,n.jsx)(l.Text,{as:"p",muted:!0,children:(0,n.jsx)(u.Translate,{t:g,i18nKey:"panes.unknown-pane-type.unknown-type.text",values:{type:h}})}):(0,n.jsx)(l.Text,{as:"p",muted:!0,children:(0,n.jsx)(u.Translate,{t:g,i18nKey:"panes.unknown-pane-type.missing-type.text"})})})}),d[6]=g,d[7]=h,d[8]=s):s=d[8],d[9]!==c||d[10]!==m||d[11]!==r||d[12]!==s?(a=(0,n.jsxs)(nN,{id:m,selected:c,children:[r,s]}),d[9]=c,d[10]=m,d[11]=r,d[12]=s,d[13]=a):a=d[13],a}let sy={component:(0,r.lazy)(()=>e.A(53777)),document:(0,r.lazy)(()=>Promise.resolve().then(function(){return cx})),documentList:(0,r.lazy)(()=>Promise.resolve().then(function(){return cb})),list:(0,r.lazy)(()=>e.A(22275))},sv=(0,r.memo)(function(e){let t,l,o,s,a=(0,i.c)(25),{active:d,childItemId:c,groupIndex:u,index:p,itemId:m,pane:h,paneKey:g,params:f,payload:x,path:b,selected:y,siblingIndex:v,maximized:j,onSetMaximizedPane:w}=e,S=sy[h.type]||sb;a[0]!==g||a[1]!==b||a[2]!==y?(t=(0,n.jsx)(im,{paneKey:g,path:b,selected:y}),a[0]=g,a[1]=b,a[2]=y,a[3]=t):t=a[3];let I=c||"";return a[4]!==S||a[5]!==d||a[6]!==p||a[7]!==m||a[8]!==j||a[9]!==w||a[10]!==h||a[11]!==g||a[12]!==y||a[13]!==I?(l=(0,n.jsx)(S,{childItemId:I,index:p,itemId:m,isActive:d,isSelected:y,paneKey:g,pane:h,maximized:j,onSetMaximizedPane:w}),a[4]=S,a[5]=d,a[6]=p,a[7]=m,a[8]=j,a[9]=w,a[10]=h,a[11]=g,a[12]=y,a[13]=I,a[14]=l):l=a[14],a[15]!==t||a[16]!==l?(o=(0,n.jsx)(r.Suspense,{fallback:t,children:l}),a[15]=t,a[16]=l,a[17]=o):o=a[17],a[18]!==u||a[19]!==p||a[20]!==f||a[21]!==x||a[22]!==v||a[23]!==o?(s=(0,n.jsx)(sf,{flatIndex:p,index:u,params:f,payload:x,siblingIndex:v,children:o}),a[18]=u,a[19]=p,a[20]=f,a[21]=x,a[22]=v,a[23]=o,a[24]=s):s=a[24],s},({params:e={},payload:t=null,...n},{params:i={},payload:l=null,...o})=>{if(!(0,e5.isEqual)(e,i)||!(0,e5.isEqual)(t,l))return!1;for(let e of new Set([...Object.keys(n),...Object.keys(o)]))if(n[e]!==o[e])return!1;return!0});function sj(e){let t,l,o=(0,i.c)(10),{document:r}=e,s=(0,u.useSchema)().get(r._type),{t:a}=(0,u.useTranslation)(T),{title:d}=ik();if(!s){let e,t;return o[0]!==r._type||o[1]!==a?(e=a("doc-title.unknown-schema-type.text",{schemaType:r._type}),o[0]=r._type,o[1]=a,o[2]=e):e=o[2],o[3]!==e?(t=(0,n.jsx)("code",{children:e}),o[3]=e,o[4]=t):t=o[4],t}return o[5]!==a||o[6]!==d?(t=d||(0,n.jsx)("span",{style:{color:"var(--card-muted-fg-color)"},children:a("doc-title.fallback.text")}),o[5]=a,o[6]=d,o[7]=t):t=o[7],o[8]!==t?(l=(0,n.jsx)(n.Fragment,{children:t}),o[8]=t,o[9]=l):l=o[9],l}let sw=(0,eI.styled)(l.Box).withConfig({displayName:"ChevronWrapper",componentId:"sc-1ldyu0k-0"})`margin-left:auto;`,sS=eI.styled.details.withConfig({displayName:"CrossDatasetReferencesDetails",componentId:"sc-1ldyu0k-1"})`flex:none;&[open] ${sw}{transform:rotate(180deg);}`,sI=eI.styled.summary.withConfig({displayName:"CrossDatasetReferencesSummary",componentId:"sc-1ldyu0k-2"})`list-style:none;&::-webkit-details-marker{display:none;}`,sC=eI.styled.table.withConfig({displayName:"Table",componentId:"sc-1ldyu0k-3"})`width:100%;text-align:left;padding:0 ${({theme:e})=>(0,l.rem)(e.sanity.space[2])};border-collapse:collapse;th{padding:${({theme:e})=>(0,l.rem)(e.sanity.space[1])};}td{padding:0 ${({theme:e})=>(0,l.rem)(e.sanity.space[1])};}tr > *:last-child{text-align:right;}`,s_=(0,eI.styled)(l.Flex).withConfig({displayName:"DocumentIdFlex",componentId:"sc-1ldyu0k-4"})`min-height:33px;`,sT=e=>{let t,o,r,s,a,d,c=(0,i.c)(13),{t:p}=(0,u.useTranslation)(T),h=e.totalCount-e.references.length;return h?(c[0]!==h||c[1]!==p?(t=p("confirm-delete-dialog.other-reference-count.title",{count:h}),c[0]=h,c[1]=p,c[2]=t):t=c[2],c[3]!==t?(o=(0,n.jsx)(l.Text,{size:1,muted:!0,children:t}),c[3]=t,c[4]=o):o=c[4],c[5]!==p?(r=p("confirm-delete-dialog.other-reference-count.tooltip"),c[5]=p,c[6]=r):r=c[6],c[7]===Symbol.for("react.memo_cache_sentinel")?(s=(0,n.jsx)(l.Text,{size:1,muted:!0,children:(0,n.jsx)(f.InfoOutlineIcon,{})}),c[7]=s):s=c[7],c[8]!==r?(a=(0,n.jsx)(m.Tooltip,{portal:!0,placement:"top",content:r,children:s}),c[8]=r,c[9]=a):a=c[9],c[10]!==o||c[11]!==a?(d=(0,n.jsx)(l.Box,{padding:2,children:(0,n.jsxs)(l.Inline,{space:2,children:[o,a]})}),c[10]=o,c[11]=a,c[12]=d):d=c[12],d):null};function sR(e){let t,o,r,s,a,d,c,p=(0,i.c)(30),{icon:h,layout:g,presence:f,schemaType:x,sortOrder:b,value:y}=e,v=(0,u.useDocumentVersionInfo)(y._id),{perspectiveStack:j}=(0,u.usePerspective)();e:{let e;if(!b){t=void 0;break e}p[0]!==b.by?(e={ordering:{title:"",name:"",by:b.by}},p[0]=b.by,p[1]=e):e=p[1],t=e}let w=t;p[2]!==j||p[3]!==e.documentPreviewStore||p[4]!==x||p[5]!==y._id||p[6]!==w?(o=(0,u.getPreviewStateObservable)(e.documentPreviewStore,x,y._id,j,w),p[2]=j,p[3]=e.documentPreviewStore,p[4]=x,p[5]=y._id,p[6]=w,p[7]=o):o=p[7];let S=o;p[8]===Symbol.for("react.memo_cache_sentinel")?(r={snapshot:null,isLoading:!0,original:null},p[8]=r):r=p[8];let{snapshot:I,original:C,isLoading:_}=(0,e_.useObservable)(S,r);p[9]!==_||p[10]!==f||p[11]!==v.draft||p[12]!==v.published||p[13]!==v.versions?(s=_?null:(0,n.jsx)(m.TooltipDelayGroupProvider,{children:(0,n.jsxs)(l.Flex,{align:"center",gap:3,children:[f&&f.length>0&&(0,n.jsx)(u.DocumentPreviewPresence,{presence:f}),(0,n.jsx)(u.DocumentStatusIndicator,{draft:v.draft,published:v.published,versions:v.versions})]})}),p[9]=_,p[10]=f,p[11]=v.draft,p[12]=v.published,p[13]=v.versions,p[14]=s):s=p[14];let T=s;p[15]!==v.draft||p[16]!==v.published||p[17]!==v.versions?(a=(0,n.jsx)(u.DocumentStatus,{draft:v.draft,published:v.published,versions:v.versions}),p[15]=v.draft,p[16]=v.published,p[17]=v.versions,p[18]=a):a=p[18];let R=a;return p[19]!==C||p[20]!==I||p[21]!==y?(d=(0,u.getPreviewValueWithFallback)({snapshot:I,original:C,fallback:y}),p[19]=C,p[20]=I,p[21]=y,p[22]=d):d=p[22],p[23]!==h||p[24]!==_||p[25]!==g||p[26]!==T||p[27]!==d||p[28]!==R?(c=(0,n.jsx)(u.SanityDefaultPreview,{...d,isPlaceholder:_,icon:h,layout:g,status:T,tooltip:R}),p[23]=h,p[24]=_,p[25]=g,p[26]=T,p[27]=d,p[28]=R,p[29]=c):c=p[29],c}let sP=[];function sk(e){let t,l,o,r,s=(0,i.c)(16),{onClick:a,type:d,value:p}=e,m=p?._id;s[0]!==m?(t=(0,c.getPublishedId)(m),s[0]=m,s[1]=t):t=s[1];let h=(0,u.useDocumentPresence)(t),g=(0,u.useDocumentPreviewStore)(),{ReferenceChildLink:f}=lr();s[2]!==f||s[3]!==d?.name||s[4]!==p?._id?(l=function(e){return(0,n.jsx)(f,{documentId:p?._id,documentType:d?.name,parentRefPath:sP,...e})},s[2]=f,s[3]=d?.name,s[4]=p?._id,s[5]=l):l=s[5];let x=l,b=d?.icon,y=h?.length>0?h:sP;return s[6]!==g||s[7]!==b||s[8]!==y||s[9]!==d||s[10]!==p?(o=(0,n.jsx)(sR,{documentPreviewStore:g,icon:b,layout:"compact",presence:y,schemaType:d,value:p}),s[6]=g,s[7]=b,s[8]=y,s[9]=d,s[10]=p,s[11]=o):o=s[11],s[12]!==a||s[13]!==x||s[14]!==o?(r=(0,n.jsx)(u.PreviewCard,{__unstable_focusRing:!0,as:x,"data-as":"a",onClick:a,radius:2,children:o}),s[12]=a,s[13]=x,s[14]=o,s[15]=r):r=s[15],r}let sE=(0,eI.styled)(l.Text).withConfig({displayName:"EllipsisText",componentId:"sc-1meclkc-0"})`max-width:120px;`,sD=e=>{let t,o,r,s,a,d,p,m,h,g,f,x,b,y=(0,i.c)(43),{versionId:v,schemaType:j}=e,{t:w}=(0,u.useTranslation)(),S=(0,u.useDocumentPreviewStore)();y[0]!==v?(t=(0,u.getDocumentVariantType)(v),y[0]=v,y[1]=t):t=y[1];let I=t,{data:C}=(0,u.useActiveReleases)();if(y[2]!==S||y[3]!==I||y[4]!==j||y[5]!==v){let e=["version"===I?(0,c.getVersionFromId)(v):"published"===I?"published":"drafts"];o=(0,u.getPreviewStateObservable)(S,j,(0,c.getPublishedId)(v),e),y[2]=S,y[3]=I,y[4]=j,y[5]=v,y[6]=o}else o=y[6];let _=o;y[7]===Symbol.for("react.memo_cache_sentinel")?(r={snapshot:null,isLoading:!0,original:null},y[7]=r):r=y[7];let{snapshot:T,original:R,isLoading:P}=(0,e_.useObservable)(_,r);e:{let e;if("version"!==I){s=void 0;break e}if(y[8]!==C||y[9]!==v){let t;y[11]!==v?(t=e=>(0,u.getReleaseIdFromReleaseDocumentId)(e._id)===(0,c.getVersionFromId)(v),y[11]=v,y[12]=t):t=y[12],e=C.find(t),y[8]=C,y[9]=v,y[10]=e}else e=y[10];s=e}let k=s;t:{let e;if("version"===I){a=void 0;break t}y[13]!==I||y[14]!==w?(e=w("published"===I?"release.chip.published":"release.chip.draft"),y[13]=I,y[14]=w,y[15]=e):e=y[15],a=e}let E=a;y[16]!==I||y[17]!==k?(d=k?(0,u.getReleaseTone)(k):"published"===I?"positive":"caution",y[16]=I,y[17]=k,y[18]=d):d=y[18];let D=d;return y[19]!==R||y[20]!==j.name||y[21]!==T||y[22]!==v?(p=(0,u.getPreviewValueWithFallback)({snapshot:T,original:R,fallback:{_id:v,_type:j.name}}),y[19]=R,y[20]=j.name,y[21]=T,y[22]=v,y[23]=p):p=y[23],y[24]===Symbol.for("react.memo_cache_sentinel")?(m={backgroundColor:"transparent"},y[24]=m):m=y[24],y[25]!==D?(h=(0,n.jsx)(l.Text,{size:1,children:(0,n.jsx)(u.ReleaseAvatarIcon,{tone:D})}),y[25]=D,y[26]=h):h=y[26],y[27]!==I||y[28]!==k?.metadata?.title||y[29]!==E||y[30]!==v?(g="version"===I?(0,n.jsx)(u.ReleaseTitle,{title:k?.metadata?.title,fallback:(0,c.getVersionFromId)(v),children:sA}):(0,n.jsx)(sE,{size:1,weight:"medium",textOverflow:"ellipsis",children:E}),y[27]=I,y[28]=k?.metadata?.title,y[29]=E,y[30]=v,y[31]=g):g=y[31],y[32]!==g||y[33]!==h?(f=(0,n.jsxs)(l.Flex,{align:"center",gap:2,paddingY:2,paddingRight:3,paddingLeft:2,children:[h,g]}),y[32]=g,y[33]=h,y[34]=f):f=y[34],y[35]!==f||y[36]!==D?(x=(0,n.jsx)(l.Card,{border:!0,radius:"full",children:(0,n.jsx)(l.Card,{radius:"full",tone:D,style:m,children:f})}),y[35]=f,y[36]=D,y[37]=x):x=y[37],y[38]!==P||y[39]!==j.icon||y[40]!==x||y[41]!==p?(b=(0,n.jsx)(u.SanityDefaultPreview,{...p,isPlaceholder:P,icon:j.icon,layout:"default",status:x}),y[38]=P,y[39]=j.icon,y[40]=x,y[41]=p,y[42]=b):b=y[42],b},sF=e=>{let t,o,r,s=(0,i.c)(8),{documentType:a,documentVersions:d}=e,c=(0,u.useSchema)();s[0]!==a||s[1]!==c?(t=c.get(a),s[0]=a,s[1]=c,s[2]=t):t=s[2];let p=t;if(!p)throw Error(`Schema type ${a} not found`);return s[3]!==d||s[4]!==p?(o=d?.map(e=>(0,n.jsx)(sD,{versionId:e,schemaType:p},e)),s[3]=d,s[4]=p,s[5]=o):o=s[5],s[6]!==o?(r=(0,n.jsx)(l.Card,{border:!0,padding:1,radius:2,children:(0,n.jsx)(l.Stack,{children:o})}),s[6]=o,s[7]=r):r=s[7],r};function sA(e){let{displayTitle:t}=e;return(0,n.jsx)(sE,{size:1,weight:"medium",textOverflow:"ellipsis",children:t})}function sV(e){let t,r,s,a,d,c,p,h,g,x,b,y,v,j,w,S,I,C,_,R=(0,i.c)(66),{crossDatasetReferences:P,internalReferences:k,documentTitle:E,totalCount:D,action:F,datasetNames:A,hasUnknownDatasetNames:V,documentId:M,documentType:L,onReferenceLinkClick:z,documentVersions:O}=e,B=(0,u.useSchema)(),N=(0,o.useToast)(),{t:$}=(0,u.useTranslation)(T);R[0]!==z||R[1]!==B||R[2]!==$?(t=e=>{let t=B.get(e._type);return t?(0,n.jsx)(sk,{type:t,value:e,onClick:z}):(0,n.jsx)(l.Box,{padding:2,children:(0,n.jsx)(u.SanityDefaultPreview,{icon:f.UnknownIcon,title:$("confirm-delete-dialog.preview-item.preview-unavailable.title"),subtitle:$("confirm-delete-dialog.preview-item.preview-unavailable.subtitle",{documentId:e._id}),layout:"default"})})},R[0]=z,R[1]=B,R[2]=$,R[3]=t):t=R[3];let H=t;R[4]!==F||R[5]!==E||R[6]!==L||R[7]!==O||R[8]!==$?(r=()=>(0,n.jsxs)(l.Stack,{space:4,children:[(0,n.jsx)(l.Text,{as:"p",size:1,children:(0,n.jsx)(u.Translate,{t:$,i18nKey:"confirm-delete-dialog.confirmation.text",context:F,components:{DocumentTitle:()=>(0,n.jsx)("strong",{children:E})}})}),"delete"===F&&(0,n.jsx)(sF,{documentType:L,documentVersions:O})]}),R[4]=F,R[5]=E,R[6]=L,R[7]=O,R[8]=$,R[9]=r):r=R[9];let G=r;if(k?.totalCount===0&&P?.totalCount===0){let e;return R[10]!==G?(e=G(),R[10]=G,R[11]=e):e=R[11],e}R[12]!==V?(s=V?["unavailable"]:[],R[12]=V,R[13]=s):s=R[13],R[14]!==A||R[15]!==s?(a=[...A,...s],R[14]=A,R[15]=s,R[16]=a):a=R[16];let U=a,q=U.length,W=U.join(", "),K=V&&U.length?"unavailable":"";R[17]!==U.length||R[18]!==$||R[19]!==W||R[20]!==K?(d=$("confirm-delete-dialog.cdr-summary.subtitle",{count:q,datasets:W,context:K}),R[17]=U.length,R[18]=$,R[19]=W,R[20]=K,R[21]=d):d=R[21];let Y=d;return R[22]!==G?(c=G(),R[22]=G,R[23]=c):c=R[23],R[24]===Symbol.for("react.memo_cache_sentinel")?(p=(0,n.jsx)(l.Card,{borderTop:!0,padding:1}),R[24]=p):p=R[24],R[25]===Symbol.for("react.memo_cache_sentinel")?(h=(0,n.jsx)(l.Text,{"aria-hidden":"true",size:1,children:(0,n.jsx)(f.WarningOutlineIcon,{})}),R[25]=h):h=R[25],R[26]!==E?(g={DocumentTitle:()=>E},R[26]=E,R[27]=g):g=R[27],R[28]!==D?(x={count:D},R[28]=D,R[29]=x):x=R[29],R[30]!==$||R[31]!==g||R[32]!==x?(b=(0,n.jsxs)("div",{children:[p,(0,n.jsx)(l.Card,{padding:3,radius:2,tone:"caution",flex:"none",children:(0,n.jsxs)(l.Flex,{children:[h,(0,n.jsx)(l.Box,{flex:1,marginLeft:3,children:(0,n.jsx)(l.Text,{size:1,children:(0,n.jsx)(u.Translate,{i18nKey:"confirm-delete-dialog.referring-document-count.text",components:g,t:$,values:x})})})]})})]}),R[30]=$,R[31]=g,R[32]=x,R[33]=b):b=R[33],R[34]!==E?(y={DocumentTitle:()=>E},R[34]=E,R[35]=y):y=R[35],R[36]!==F||R[37]!==$||R[38]!==y?(v=(0,n.jsx)(l.Box,{flex:"none",children:(0,n.jsx)(l.Text,{size:1,children:(0,n.jsx)(u.Translate,{i18nKey:"confirm-delete-dialog.referring-documents-descriptor.text",t:$,context:F,components:y})})}),R[36]=F,R[37]=$,R[38]=y,R[39]=v):v=R[39],R[40]!==k||R[41]!==H?(j=k.totalCount>0&&(0,n.jsxs)(l.Stack,{as:"ul",space:2,"data-testid":"internal-references",children:[k?.references.map(e=>(0,n.jsx)(l.Box,{as:"li",children:H(e)},e._id)),k.totalCount>k.references.length&&(0,n.jsx)(l.Box,{as:"li",padding:3,children:(0,n.jsx)(sT,{...k})})]}),R[40]=k,R[41]=H,R[42]=j):j=R[42],R[43]!==P||R[44]!==Y||R[45]!==M||R[46]!==k.totalCount||R[47]!==U.length||R[48]!==$||R[49]!==N?(w=P.totalCount>0&&(0,n.jsxs)(sS,{"data-testid":"cross-dataset-references",style:{borderTop:k.totalCount>0?"1px solid var(--card-shadow-outline-color)":void 0},children:[(0,n.jsx)(sI,{children:(0,n.jsx)(l.Card,{as:"a",marginTop:2*(k.totalCount>0),radius:2,shadow:1,paddingY:1,children:(0,n.jsxs)(l.Flex,{align:"center",gap:3,paddingX:3,paddingY:1,children:[(0,n.jsx)(l.Text,{size:1,children:(0,n.jsx)(f.DocumentsIcon,{})}),(0,n.jsxs)(l.Stack,{space:2,children:[(0,n.jsx)(l.Text,{textOverflow:"ellipsis",size:1,children:$("confirm-delete-dialog.cdr-summary.title",{count:U.length,documentCount:$("confirm-delete-dialog.cdr-summary.document-count",{count:P.totalCount})})}),(0,n.jsx)(l.Text,{title:Y,textOverflow:"ellipsis",size:1,muted:!0,children:Y})]}),(0,n.jsx)(sw,{children:(0,n.jsx)(l.Text,{muted:!0,size:1,children:(0,n.jsx)(f.ChevronDownIcon,{})})})]})})}),(0,n.jsxs)(l.Box,{overflow:"auto",paddingTop:2,children:[(0,n.jsxs)(sC,{children:[(0,n.jsx)("thead",{children:(0,n.jsxs)("tr",{children:[(0,n.jsx)("th",{children:(0,n.jsx)(l.Text,{muted:!0,size:1,style:{minWidth:"5rem"},weight:"medium",children:$("confirm-delete-dialog.cdr-table.project-id.label")})}),(0,n.jsx)("th",{children:(0,n.jsx)(l.Text,{muted:!0,size:1,weight:"medium",children:$("confirm-delete-dialog.cdr-table.dataset.label")})}),(0,n.jsx)("th",{children:(0,n.jsx)(l.Text,{muted:!0,size:1,weight:"medium",children:$("confirm-delete-dialog.cdr-table.document-id.label")})})]})}),(0,n.jsx)("tbody",{children:P.references.filter(sM).map((e,t)=>{let{projectId:i,datasetName:o,documentId:r}=e;return(0,n.jsxs)("tr",{children:[(0,n.jsx)("td",{children:(0,n.jsx)(l.Text,{size:1,children:i})}),(0,n.jsx)("td",{children:(0,n.jsx)(l.Text,{size:1,children:o||"unavailable"})}),(0,n.jsx)("td",{children:(0,n.jsxs)(s_,{align:"center",gap:2,justify:"flex-end",children:[(0,n.jsx)(l.Text,{textOverflow:"ellipsis",size:1,children:r||"unavailable"}),r&&(0,n.jsx)(m.Button,{mode:"bleed",icon:f.CopyIcon,tooltipProps:{content:$("confirm-delete-dialog.cdr-table.copy-id-button.tooltip")},onClick:()=>{navigator.clipboard.writeText(r).catch(()=>{N.push({status:"error",title:$("confirm-delete-dialog.cdr-table.id-copied-toast.title-failed")})})}})]})})]},`${M}-${t}`)})})]}),(0,n.jsx)(sT,{...P})]})]}),R[43]=P,R[44]=Y,R[45]=M,R[46]=k.totalCount,R[47]=U.length,R[48]=$,R[49]=N,R[50]=w):w=R[50],R[51]!==j||R[52]!==w?(S=(0,n.jsx)(l.Card,{radius:2,shadow:1,flex:"auto",padding:1,children:(0,n.jsxs)(l.Flex,{direction:"column",children:[j,w]})}),R[51]=j,R[52]=w,R[53]=S):S=R[53],R[54]!==E?(I={DocumentTitle:()=>E},R[54]=E,R[55]=I):I=R[55],R[56]!==F||R[57]!==$||R[58]!==I?(C=(0,n.jsx)(l.Box,{flex:"none",children:(0,n.jsx)(l.Text,{size:1,children:(0,n.jsx)(u.Translate,{i18nKey:"confirm-delete-dialog.referential-integrity-disclaimer.text",t:$,context:F,components:I})})}),R[56]=F,R[57]=$,R[58]=I,R[59]=C):C=R[59],R[60]!==b||R[61]!==v||R[62]!==S||R[63]!==C||R[64]!==c?(_=(0,n.jsxs)(l.Flex,{direction:"column",gap:4,children:[c,b,v,S,C]}),R[60]=b,R[61]=v,R[62]=S,R[63]=C,R[64]=c,R[65]=_):_=R[65],_}function sM(e){return"projectId"in e}let sL=()=>(t||(t=(0,eO.fromEvent)(document,"visibilitychange").pipe((0,eF.startWith)(null),(0,ek.map)(()=>"visible"===document.visibilityState),(0,eR.distinctUntilChanged)(),(0,e$.switchMap)(e=>e?(0,eN.timer)(0,5e3):eB.EMPTY),(0,tn.shareReplay)({refCount:!0,bufferSize:1}))),t);function sz(e,t){let{versionedClient:n}=t;return sL().pipe((0,e$.switchMap)(()=>(function(e,{versionedClient:t}){let n=(0,c.getDraftId)(e),i=(0,c.getPublishedId)(e),l={uri:t.getDataUrl("doc",`${n},${i}`),json:!0,query:{excludeContent:"true"},tag:"use-referring-documents.document-existence"};return t.observable.request(l).pipe((0,ek.map)(({omitted:e})=>{let t=e.filter(e=>"existence"===e.reason);if(2!==t.length)return 0===t.length||t.some(e=>e.id===n)?i:n}))})(e,t)),(0,e$.switchMap)(e=>{if(!e)return(0,eE.of)({totalCount:0,references:[]});let t=n.config().dataset;return n.observable.request({url:`/data/references/${t}/documents/${e}/to?excludeInternalReferences=true&excludePaths=true`,tag:"use-referring-documents.external"}).pipe((0,eA.catchError)(e=>{if("object"==typeof e&&e&&"statusCode"in e&&"response"in e&&404===e.statusCode)return(0,eE.of)({totalCount:0,references:[]});throw e}))}))}let sO=(0,u.createHookFromObservableFactory)(([e,t])=>t.listenQuery({fetch:'{"references":*[references($documentId)][0...100]{_id,_type},"totalCount":count(*[references($documentId)])}',listen:"*[references($documentId)]"},{documentId:e},{tag:"use-referring-documents",transitions:["appear","disappear"],throttleTime:5e3})),sB=(0,u.createHookFromObservableFactory)(([e,t])=>sL().pipe((0,e$.switchMap)(()=>sz(e,{versionedClient:t}))));function sN(e){return"string"!=typeof e.datasetName}function s$(e){return!!e&&""!==e}function sH(e){return e?.datasetName||""}function sG(e){return e.projectId}let sU=(0,eI.styled)(l.Box).withConfig({displayName:"DialogBody",componentId:"sc-jawiy-0"})`box-sizing:border-box;`,sq=(0,eI.styled)(l.Flex).attrs({align:"center",direction:"column",justify:"center"}).withConfig({displayName:"LoadingContainer",componentId:"sc-jawiy-1"})`height:110px;`;function sW(e){let t,l,o,s,a,d,p,h,g,f,x,b,y=(0,i.c)(51),{id:v,type:j,action:w,onCancel:S,onConfirm:I}=e,C=void 0===w?"delete":w,{t:_}=(0,u.useTranslation)(T),R=`deletion-confirmation-${(0,r.useId)()}`,{internalReferences:P,crossDatasetReferences:k,isLoading:E,totalCount:D,projectIds:F,datasetNames:A,hasUnknownDatasetNames:V}=function(e){let t,n,l,o,r,s,a,d,p=(0,i.c)(24),m=(0,u.useClient)(u.DEFAULT_STUDIO_CLIENT_OPTIONS),h=(0,u.useDocumentStore)();p[0]!==e?(t=(0,c.getPublishedId)(e),p[0]=e,p[1]=t):t=p[1];let g=t;p[2]!==h||p[3]!==g?(n=[g,h],p[2]=h,p[3]=g,p[4]=n):n=p[4];let[f,x]=sO(n);p[5]!==g||p[6]!==m?(l=[g,m],p[5]=g,p[6]=m,p[7]=l):l=p[7];let[b,y]=sB(l);p[8]!==b?.references?(o=()=>Array.from(new Set(b?.references.map(sG).filter(Boolean))).sort(),p[8]=b?.references,p[9]=o):o=p[9],p[10]!==o?(r=o(),p[10]=o,p[11]=r):r=p[11];let v=r;p[12]!==b?.references?(s=Array.from(new Set(b?.references.map(sH).filter(s$))).sort(),p[12]=b?.references,p[13]=s):s=p[13];let j=s;p[14]!==b?.references?(a=()=>!!b?.references.some(sN),p[14]=b?.references,p[15]=a):a=p[15];let w=a(),S=(f?.totalCount||0)+(b?.totalCount||0),I=x||y;return p[16]!==b||p[17]!==j||p[18]!==w||p[19]!==f||p[20]!==v||p[21]!==S||p[22]!==I?(d={totalCount:S,projectIds:v,datasetNames:j,hasUnknownDatasetNames:w,internalReferences:f,crossDatasetReferences:b,isLoading:I},p[16]=b,p[17]=j,p[18]=w,p[19]=f,p[20]=v,p[21]=S,p[22]=I,p[23]=d):d=p[23],d}(v);y[0]!==v||y[1]!==j?(t={_id:v,_type:j},y[0]=v,y[1]=j,y[2]=t):t=y[2];let M=t;y[3]!==M?(l=(0,n.jsx)(sj,{document:M}),y[3]=M,y[4]=l):l=y[4];let L=l,z=!E;y[5]!==v?(o=(0,c.getPublishedId)(v),y[5]=v,y[6]=o):o=y[6],y[7]!==o?(s={documentId:o},y[7]=o,y[8]=s):s=y[8];let{data:O,loading:B}=(0,u.useDocumentVersions)(s);y[9]!==O||y[10]!==I?(a=()=>{I(O)},y[9]=O,y[10]=I,y[11]=a):a=y[11];let N=a;return y[12]!==C||y[13]!==_?(d=_("confirm-delete-dialog.header.text",{context:C}),y[12]=C,y[13]=_,y[14]=d):d=y[14],y[15]!==_?(p=_("confirm-delete-dialog.cancel-button.text"),y[15]=_,y[16]=p):p=y[16],y[17]!==S||y[18]!==p?(h={onClick:S,text:p},y[17]=S,y[18]=p,y[19]=h):h=y[19],y[20]!==C||y[21]!==N||y[22]!==z||y[23]!==_||y[24]!==D?(g=z?{text:_(D>0?"confirm-delete-dialog.confirm-anyway-button.text":"confirm-delete-dialog.confirm-button.text",{context:C}),onClick:N}:void 0,y[20]=C,y[21]=N,y[22]=z,y[23]=_,y[24]=D,y[25]=g):g=y[25],y[26]!==h||y[27]!==g?(f={cancelButton:h,confirmButton:g},y[26]=h,y[27]=g,y[28]=f):f=y[28],y[29]!==C||y[30]!==k||y[31]!==A||y[32]!==L||y[33]!==O||y[34]!==V||y[35]!==v||y[36]!==P||y[37]!==E||y[38]!==S||y[39]!==F||y[40]!==_||y[41]!==D||y[42]!==j||y[43]!==B?(x=(0,n.jsx)(sU,{children:k&&P&&!E&&!B?(0,n.jsx)(sV,{crossDatasetReferences:k,internalReferences:P,documentTitle:L,isLoading:E,totalCount:D,action:C,projectIds:F,datasetNames:A,hasUnknownDatasetNames:V,onReferenceLinkClick:S,documentId:v,documentType:j,documentVersions:O}):(0,n.jsx)(sq,{"data-testid":"loading-container",children:(0,n.jsx)(u.LoadingBlock,{showText:!0,title:_("confirm-delete-dialog.loading.text")})})}),y[29]=C,y[30]=k,y[31]=A,y[32]=L,y[33]=O,y[34]=V,y[35]=v,y[36]=P,y[37]=E,y[38]=S,y[39]=F,y[40]=_,y[41]=D,y[42]=j,y[43]=B,y[44]=x):x=y[44],y[45]!==R||y[46]!==S||y[47]!==f||y[48]!==x||y[49]!==d?(b=(0,n.jsx)(m.Dialog,{width:1,id:R,header:d,footer:f,onClose:S,onClickOutside:S,children:x}),y[45]=R,y[46]=S,y[47]=f,y[48]=x,y[49]=d,y[50]=b):b=y[50],b}function sK(e){let t,o,s=(0,i.c)(6),{t:a}=(0,u.useTranslation)(T),d=(0,r.useId)(),[c,p]=(0,r.useState)(null);s[0]===Symbol.for("react.memo_cache_sentinel")?(t=()=>p(null),s[0]=t):t=s[0];let h=t;return s[1]!==c||s[2]!==d||s[3]!==e||s[4]!==a?(o=c?(0,n.jsx)(m.Dialog,{id:`dialog-error-${d}`,"data-testid":"confirm-delete-error-dialog",header:a("confirm-delete-dialog.error.title.text"),footer:{confirmButton:{text:a("confirm-delete-dialog.error.retry-button.text"),onClick:h,tone:"default"}},onClose:e.onCancel,children:(0,n.jsx)(l.Box,{padding:4,children:(0,n.jsx)(l.Text,{size:1,children:a("confirm-delete-dialog.error.message.text")})})}):(0,n.jsx)(m.ErrorBoundary,{onCatch:p,children:(0,n.jsx)(sW,{...e})}),s[1]=c,s[2]=d,s[3]=e,s[4]=a,s[5]=o):o=s[5],o}let sY=(0,r.forwardRef)(function(e,t){let l,o,s,a,d=(0,i.c)(10);d[0]!==e?({intent:l,...o}=e,d[0]=e,d[1]=l,d[2]=o):(l=d[1],o=d[2]),d[3]!==l?(s=(0,r.forwardRef)(function(e,t){return(0,n.jsx)(h.IntentLink,{...e,intent:l.type,params:l.params,ref:t,searchParams:l.searchParams})}),d[3]=l,d[4]=s):s=d[4];let c=s;return d[5]!==c||d[6]!==e.disabled||d[7]!==t||d[8]!==o?(a=e.disabled?(0,n.jsx)(m.Button,{...o,as:"a",role:"link","aria-disabled":"true"}):(0,n.jsx)(m.Button,{...o,as:c,"data-as":"a",ref:t}),d[5]=c,d[6]=e.disabled,d[7]=t,d[8]=o,d[9]=a):a=d[9],a});function sX(e){let t,l,o,r=(0,i.c)(12),{reveal:s,context:a,loading:d,children:c}=e,p=(0,u.useCurrentUser)(),{t:h}=(0,u.useTranslation)(T);if(!s){let e;return r[0]!==c?(e=(0,n.jsx)(n.Fragment,{children:c}),r[0]=c,r[1]=e):e=r[1],e}return r[2]!==a||r[3]!==p||r[4]!==d||r[5]!==h?(t=d?h("insufficient-permissions-message-tooltip.loading-text"):(0,n.jsx)(u.InsufficientPermissionsMessage,{context:a,currentUser:p}),r[2]=a,r[3]=p,r[4]=d,r[5]=h,r[6]=t):t=r[6],r[7]!==c?(l=(0,n.jsx)("div",{children:c}),r[7]=c,r[8]=l):l=r[8],r[9]!==t||r[10]!==l?(o=(0,n.jsx)(m.Tooltip,{content:t,portal:!0,children:l}),r[9]=t,r[10]=l,r[11]=o):o=r[11],o}let sJ={constrainSize:!0,placement:"bottom",portal:!0},sZ=(e,t,n)=>{let i=e.find(e=>e.id===t.templateId)?.schemaType;if(!i)return null;let l={template:t.templateId,type:i,version:n,id:t.initialDocumentId};return{type:"create",params:t.parameters?[l,t.parameters]:l,searchParams:n?[["perspective",n]]:void 0}};function sQ(e){let t,o,s,a,d,c,p,g,x=(0,i.c)(60),{templateItems:b}=e,y=(0,u.useTemplates)(),{selectedReleaseId:v}=(0,u.usePerspective)(),{t:j}=(0,u.useTranslation)(T);x[0]!==b||x[1]!==y?(t=[...b,...y],x[0]=b,x[1]=y,x[2]=t):t=x[2];let w=(0,u.useGetI18nText)(t);x[3]!==b?(o={templateItems:b},x[3]=b,x[4]=o):o=x[4];let[S,I]=(0,u.useTemplatePermissions)(o),C=!I&&S?.length!==0&&S?.every(s1);e:{let e;if(!S){let e;x[5]===Symbol.for("react.memo_cache_sentinel")?(e={},x[5]=e):e=x[5],s=e;break e}x[6]!==S?(e=S.reduce(s0,{}),x[6]=S,x[7]=e):e=x[7],s=e}let _=s;if(0===b.length)return null;if(C){let e,t,i;return x[8]!==j?(e=j("pane-header.disabled-created-button.aria-label"),x[8]=j,x[9]=e):e=x[9],x[10]!==e?(t=(0,n.jsx)(m.Button,{"aria-label":e,icon:f.AddIcon,"data-testid":"action-intent-button",disabled:!0,mode:"bleed",tooltipProps:null}),x[10]=e,x[11]=t):t=x[11],x[12]!==I||x[13]!==t?(i=(0,n.jsx)(sX,{context:"create-document-type",reveal:!0,loading:I,children:t}),x[12]=I,x[13]=t,x[14]=i):i=x[14],i}if(1===b.length){let e,t,i,l,o,r,s=b[0],a=!_[s.id]?.granted;x[15]!==s||x[16]!==v||x[17]!==y?(e=sZ(y,s,v),x[15]=s,x[16]=v,x[17]=y,x[18]=e):e=x[18];let d=e;if(!d)return null;x[19]!==s||x[20]!==w?(t=w(s),x[19]=s,x[20]=w,x[21]=t):t=x[21];let c=t.title,u=s.icon||f.AddIcon;return x[22]!==j?(i=j("pane-header.create-new-button.tooltip"),x[22]=j,x[23]=i):i=x[23],x[24]!==i?(l={content:i},x[24]=i,x[25]=l):l=x[25],x[26]!==a||x[27]!==d||x[28]!==t.title||x[29]!==u||x[30]!==l?(o=(0,n.jsx)(sY,{"aria-label":c,icon:u,intent:d,mode:"bleed",disabled:a,"data-testid":"action-intent-button",tooltipProps:l}),x[26]=a,x[27]=d,x[28]=t.title,x[29]=u,x[30]=l,x[31]=o):o=x[31],x[32]!==a||x[33]!==I||x[34]!==o?(r=(0,n.jsx)(sX,{reveal:a,loading:I,context:"create-document-type",children:o}),x[32]=a,x[33]=I,x[34]=o,x[35]=r):r=x[35],r}if(x[36]!==j?(a=j("pane-header.create-new-button.tooltip"),x[36]=j,x[37]=a):a=x[37],x[38]!==a?(d=(0,n.jsx)(m.Button,{icon:f.AddIcon,mode:"bleed","data-testid":"multi-action-intent-button",tooltipProps:{content:a}}),x[38]=a,x[39]=d):d=x[39],x[40]!==w||x[41]!==I||x[42]!==_||x[43]!==v||x[44]!==j||x[45]!==b||x[46]!==y){let e;x[48]!==w||x[49]!==I||x[50]!==_||x[51]!==v||x[52]!==j||x[53]!==y?(e=(e,t)=>{let i=!_[e.id]?.granted,l=sZ(y,e,v),o=y.find(t=>t.id===e.templateId);if(!o||!l)return null;let s=(0,r.forwardRef)((e,t)=>i?(0,n.jsx)("button",{type:"button",disabled:!0,...e,ref:t}):(0,n.jsx)(h.IntentLink,{...e,intent:l.type,params:l.params,searchParams:l.searchParams,ref:t}));s.displayName="Link";let{title:a}=w({...e,title:e.title||w(o).title});return(0,n.jsx)(sX,{context:"create-document-type",reveal:i,loading:I,children:(0,n.jsx)(m.MenuItem,{as:s,"data-as":i?"button":"a",text:a,"aria-label":i?j("pane-header.disabled-created-button.aria-label"):a,disabled:i,"data-testid":`action-intent-button-${t}`})},e.id)},x[48]=w,x[49]=I,x[50]=_,x[51]=v,x[52]=j,x[53]=y,x[54]=e):e=x[54],c=b.map(e),x[40]=w,x[41]=I,x[42]=_,x[43]=v,x[44]=j,x[45]=b,x[46]=y,x[47]=c}else c=x[47];return x[55]!==c?(p=(0,n.jsx)(l.Menu,{children:c}),x[55]=c,x[56]=p):p=x[56],x[57]!==d||x[58]!==p?(g=(0,n.jsx)(m.MenuButton,{button:d,id:"create-menu",menu:p,popover:sJ}),x[57]=d,x[58]=p,x[59]=g):g=x[59],g}function s0(e,t){return e[t.id]=t,e}function s1(e){return!e.granted}function s2(e){return null!=e}let s3=(0,r.memo)(function(e){let t,o,r,s,a,d,c,p,m,h,g=(0,i.c)(28),{initialValueTemplateItems:f,menuItems:x,menuItemGroups:b,actionHandlers:y}=e,v=void 0===f?u.EMPTY_ARRAY:f,j=void 0===x?u.EMPTY_ARRAY:x,w=void 0===b?u.EMPTY_ARRAY:b,S=void 0===y?u.EMPTY_OBJECT:y,I=(0,u.useTemplates)();g[0]!==S?(t=e=>{if(e.id){let t=S.setMenuItemState;if(t&&t({_menuItemId:e.id,...e.params}),!e.action||"setMenuItemState"===e.action)return!!t}if("string"==typeof e.action&&!(e.action in S))return console.warn("No handler for action:",e.action),!1;let t="function"==typeof e.action?e.action:"string"==typeof e.action?S[e.action]:null;return!!t&&(t(e.id?{...e.params,_menuItemId:e.id,isSelected:!e.selected}:{...e.params,isSelected:!e.selected}),!0)},g[0]=S,g[1]=t):t=g[1];let C=t;g[2]!==C||g[3]!==w||g[4]!==j?(o=lZ({actionHandler:C,menuItemGroups:w,menuItems:j.filter(s4)}),g[2]=C,g[3]=w,g[4]=j,g[5]=o):o=g[5];let _=o;g[6]!==_?(r=_.filter(lX),g[6]=_,g[7]=r):r=g[7];let T=r;g[8]!==_?(s=_.filter(lJ),g[8]=_,g[9]=s):s=g[9];let R=s;if(g[10]!==j||g[11]!==I){let e;g[13]!==I?(e=(e,t)=>{if(e.intent?.type!=="create")return null;let{params:n}=e.intent;if(!n)return null;let i=Array.isArray(n)?n[0]:n,l=Array.isArray(n)?n[1]:void 0,o=i.template||i.type;if(!o)return null;let r=I.find(e=>e.id===o);return r?{item:e,template:r,templateParams:l,menuItemIndex:t,initialDocumentId:i.id}:null},g[13]=I,g[14]=e):e=g[14],a=j.map(e).filter(s2).map(s5),g[10]=j,g[11]=I,g[12]=a}else a=g[12];let P=a;g[15]!==P||g[16]!==v?(d=(0,e6.uniqBy)([...P,...v],s6),g[15]=P,g[16]=v,g[17]=d):d=g[17];let k=d;return g[18]!==k?(c=(0,n.jsx)(sQ,{templateItems:k}),g[18]=k,g[19]=c):c=g[19],g[20]!==T?(p=T.map(s8),g[20]=T,g[21]=p):p=g[21],g[22]!==R?(m=R.length>0&&(0,n.jsx)(nQ,{nodes:R}),g[22]=R,g[23]=m):m=g[23],g[24]!==c||g[25]!==p||g[26]!==m?(h=(0,n.jsxs)(l.Flex,{gap:1,children:[c,p,m]}),g[24]=c,g[25]=p,g[26]=m,g[27]=h):h=g[27],h});function s4(e){return e.intent?.type!=="create"}function s5(e){let{initialDocumentId:t,item:n,template:i,menuItemIndex:l,templateParams:o}=e;return{id:`menuItem${l}`,initialDocumentId:t,templateId:i.id,type:"initialValueTemplateItem",title:n.title||i.title,i18n:n.i18n||i.i18n,icon:n.icon,description:i.description,parameters:o,schemaType:i.schemaType}}function s6(e){var t=[e.initialDocumentId,e.templateId,e.parameters];let n=e=>"object"==typeof e&&e?Array.isArray(e)?e.map(n):Object.entries(e).sort(([e],[t])=>e.localeCompare(t,"en")):e;return JSON.stringify(n(JSON.parse(JSON.stringify(t))))}function s8(e){return(0,n.jsx)(ie,{node:e},e.key)}function s7(e){let t,l,o,r,s,a,d,c=(0,i.c)(16),{t:p}=(0,u.useTranslation)(T),{layout:m,value:h}=e;return c[0]===Symbol.for("react.memo_cache_sentinel")?(t={Code:"code"},c[0]=t):t=c[0],c[1]!==h._type?(l={documentType:h._type},c[1]=h._type,c[2]=l):l=c[2],c[3]!==p||c[4]!==l?(o=(0,n.jsx)("em",{children:(0,n.jsx)(u.Translate,{t:p,i18nKey:"pane-item.missing-schema-type.title",components:t,values:l})}),c[3]=p,c[4]=l,c[5]=o):o=c[5],c[6]===Symbol.for("react.memo_cache_sentinel")?(r={Code:"code"},c[6]=r):r=c[6],c[7]!==h._id?(s={documentId:h._id},c[7]=h._id,c[8]=s):s=c[8],c[9]!==p||c[10]!==s?(a=(0,n.jsx)(u.Translate,{t:p,i18nKey:"pane-item.missing-schema-type.subtitle",components:r,values:s}),c[9]=p,c[10]=s,c[11]=a):a=c[11],c[12]!==m||c[13]!==o||c[14]!==a?(d=(0,n.jsx)(u.SanityDefaultPreview,{title:o,subtitle:a,media:s9,layout:m}),c[12]=m,c[13]=o,c[14]=a,c[15]=d):d=c[15],d}function s9(){return(0,n.jsx)(f.WarningOutlineIcon,{})}function ae(e,t,n){return!1!==e&&(e||t&&t.icon||n||!1)}function at(e){let t,o,s,a,d,c,m,h,g=(0,i.c)(43),{icon:x,id:b,layout:y,pressed:v,schemaType:j,selected:w,sortOrder:S,title:I,value:C,margin:_,marginBottom:T,marginTop:R}=e,P=void 0===y?"default":y,k=(0,u.useSchema)(),E=(0,u.useDocumentPreviewStore)(),{ChildLink:D}=lr(),F=(0,u.useDocumentPresence)(b),A=!!(j&&j.name&&k.get(j.name)),[V,M]=(0,r.useState)(!1);e:{let e,i,o,r;if(C&&(0,p.isSanityDocument)(C)){let e,i;if(!j||!A){let e;g[0]!==C?(e=(0,n.jsx)(s7,{value:C}),g[0]=C,g[1]=e):e=g[1],t=e;break e}g[2]!==x||g[3]!==j?(e=ae(x,j,f.DocumentIcon),g[2]=x,g[3]=j,g[4]=e):e=g[4],g[5]!==F||g[6]!==E||g[7]!==P||g[8]!==j||g[9]!==S||g[10]!==e||g[11]!==C?(i=(0,n.jsx)(sR,{documentPreviewStore:E,icon:e,layout:P,schemaType:j,sortOrder:S,value:C,presence:F}),g[5]=F,g[6]=E,g[7]=P,g[8]=j,g[9]=S,g[10]=e,g[11]=C,g[12]=i):i=g[12],t=i;break e}g[13]===Symbol.for("react.memo_cache_sentinel")?(e={opacity:.5},g[13]=e):e=g[13],g[14]===Symbol.for("react.memo_cache_sentinel")?(i=(0,n.jsx)(l.Box,{style:e,children:(0,n.jsx)(l.Text,{muted:!0,size:1,children:(0,n.jsx)(f.ChevronRightIcon,{})})}),g[14]=i):i=g[14],g[15]!==x||g[16]!==j?(o=ae(x,j,f.FolderIcon),g[15]=x,g[16]=j,g[17]=o):o=g[17],g[18]!==o||g[19]!==I?(r=(0,n.jsx)(u.SanityDefaultPreview,{status:i,icon:o,layout:"compact",title:I}),g[18]=o,g[19]=I,g[20]=r):r=g[20],t=r}let L=t;g[21]===Symbol.for("react.memo_cache_sentinel")?(o=e=>{e.metaKey?M(!1):M(!0)},g[21]=o):o=g[21];let z=o;g[22]===Symbol.for("react.memo_cache_sentinel")?(s=()=>M(!1),g[22]=s):s=g[22],g[23]!==w?(a=[w],g[23]=w,g[24]=a):a=g[24],(0,r.useEffect)(s,a);let[O,B]=(0,r.useState)(!1),N=(0,r.useRef)(null);g[25]===Symbol.for("react.memo_cache_sentinel")?(d=()=>{N.current=setTimeout(()=>(0,r.startTransition)(()=>B(!0)),400)},g[25]=d):d=g[25];let $=d;g[26]===Symbol.for("react.memo_cache_sentinel")?(c=()=>{N.current&&clearTimeout(N.current),(0,r.startTransition)(()=>B(!1))},g[26]=c):c=g[26];let H=c,G=`pane-item-${I}`,U=w||V;return g[27]!==b||g[28]!==O||g[29]!==j||g[30]!==C?(m=O&&j?.name&&C&&(0,p.isSanityDocument)(C)&&(0,n.jsx)(an,{documentId:b,documentType:j.name}),g[27]=b,g[28]=O,g[29]=j,g[30]=C,g[31]=m):m=g[31],g[32]!==b||g[33]!==_||g[34]!==T||g[35]!==R||g[36]!==v||g[37]!==L||g[38]!==m||g[39]!==G||g[40]!==D||g[41]!==U?(h=(0,n.jsxs)(u.PreviewCard,{"data-testid":G,__unstable_focusRing:!0,as:D,childId:b,"data-as":"a",margin:_,marginBottom:T,marginTop:R,onClick:z,onMouseEnter:$,onMouseLeave:H,pressed:v,radius:2,selected:U,sizing:"border",tabIndex:-1,tone:"inherit",children:[L,m]}),g[32]=b,g[33]=_,g[34]=T,g[35]=R,g[36]=v,g[37]=L,g[38]=m,g[39]=G,g[40]=D,g[41]=U,g[42]=h):h=g[42],h}function an(e){let t,n=(0,i.c)(2),{documentId:l,documentType:o}=e;return n[0]!==l?(t=(0,c.getPublishedId)(l),n[0]=l,n[1]=t):t=n[1],(0,u.useEditState)(t,o),null}an.displayName="PreloadDocumentPane";let ai=(0,r.memo)(e=>{let t,n=(0,i.c)(4),{children:l,group:o}=e,a=(0,r.useContext)(s.DocumentActionsStateContext);if(null===a)throw Error("DocumentActionsStateContext is not set. This should not happen.");return n[0]!==l||n[1]!==o||n[2]!==a?(t=l({states:o?a.filter(e=>(e.group||["default"]).includes(o)):a}),n[0]=l,n[1]=o,n[2]=a,n[3]=t):t=n[3],t});ai.displayName="Memo(RenderActionCollectionState)";let al=(0,r.memo)(e=>{let t,l=(0,i.c)(4),{badges:o,children:r,badgeProps:s}=e;return l[0]!==s||l[1]!==o||l[2]!==r?(t=(0,n.jsx)(u.GetHookCollectionState,{hooks:o,args:s,children:r}),l[0]=s,l[1]=o,l[2]=r,l[3]=t):t=l[3],t});al.displayName="Memo(RenderBadgeCollectionState)";let ao={documents:[],loading:!0};async function ar(e,{document:t,getClient:n}){let i=await e({document:t,getClient:n});return"string"==typeof i?{filter:i,filterParams:void 0}:i}let as=(0,eI.styled)(l.Box).withConfig({displayName:"IncomingReferencesListContainer",componentId:"sc-17ysjqh-0"})`height:${({$itemCount:e})=>51*Math.min(e,10)}px;`;function aa(e){let t,o,r,s,a,d,c=(0,i.c)(26),{type:p,document:m}=e;c[0]!==m.id||c[1]!==m.type||c[2]!==p?(t=p?.studioUrl?.({id:m.id,type:m.type}),c[0]=m.id,c[1]=m.type,c[2]=p,c[3]=t):t=c[3];let h=t,g=m.id,f=h?"a":"div",x=3*!!h;c[4]!==h?(o=h?{href:h,target:"_blank",rel:"noopener noreferrer",as:"a"}:{},c[4]=h,c[5]=o):o=c[5];let b=m.availability,y=!!h,v=!!h;return c[6]!==m.preview||c[7]!==p?(r=p?{type:p.type,title:m.preview.published?.title,icon:ad,preview:p.preview}:void 0,c[6]=m.preview,c[7]=p,c[8]=r):r=c[8],c[9]!==m.availability||c[10]!==m.dataset||c[11]!==m.id||c[12]!==m.preview||c[13]!==m.projectId||c[14]!==y||c[15]!==v||c[16]!==r?(s=(0,n.jsx)(u.CrossDatasetReferencePreview,{availability:b,hasStudioUrl:y,showStudioUrlIcon:v,preview:m.preview,refType:r,projectId:m.projectId,dataset:m.dataset,id:m.id,showTypeLabel:!1}),c[9]=m.availability,c[10]=m.dataset,c[11]=m.id,c[12]=m.preview,c[13]=m.projectId,c[14]=y,c[15]=v,c[16]=r,c[17]=s):s=c[17],c[18]!==s||c[19]!==f||c[20]!==x||c[21]!==o?(a=(0,n.jsx)(l.Box,{flex:1,children:(0,n.jsx)(u.PreviewCard,{"data-as":f,flex:1,radius:2,paddingRight:x,tone:"inherit",__unstable_focusRing:!0,tabIndex:0,...o,children:s})}),c[18]=s,c[19]=f,c[20]=x,c[21]=o,c[22]=a):a=c[22],c[23]!==m.id||c[24]!==a?(d=(0,n.jsx)(l.Flex,{gap:1,align:"center",children:a},g),c[23]=m.id,c[24]=a,c[25]=d):d=c[25],d}function ad(){return null}let ac={documents:[],loading:!0};function au(e){let t,l,o,r,s=(0,i.c)(17),{onClick:a,type:d,value:p,path:m}=e,h=p?._id;s[0]!==h?(t=(0,c.getPublishedId)(h),s[0]=h,s[1]=t):t=s[1];let g=(0,u.useDocumentPresence)(t),f=(0,u.useDocumentPreviewStore)(),{ChildLink:x}=lr();s[2]!==x||s[3]!==m||s[4]!==d.name||s[5]!==p?._id?(l=function(e){return(0,n.jsx)(x,{childId:(0,c.getPublishedId)(p?._id),childParameters:{type:d.name,path:(0,u.pathToString)(m)},...e})},s[2]=x,s[3]=m,s[4]=d.name,s[5]=p?._id,s[6]=l):l=s[6];let b=l,y=d.icon||!1;return s[7]!==g||s[8]!==f||s[9]!==y||s[10]!==d||s[11]!==p?(o=(0,n.jsx)(sR,{documentPreviewStore:f,icon:y,layout:"default",presence:g,schemaType:d,value:p}),s[7]=g,s[8]=f,s[9]=y,s[10]=d,s[11]=p,s[12]=o):o=s[12],s[13]!==a||s[14]!==b||s[15]!==o?(r=(0,n.jsx)(u.PreviewCard,{__unstable_focusRing:!0,as:b,"data-as":"a",onClick:a,radius:2,children:o}),s[13]=a,s[14]=b,s[15]=o,s[16]=r):r=s[16],r}a.motion.create(l.Flex);let ap=new WeakMap;function am(e){let t=ap.get(e);if(t)return t;let n=(0,e7.nanoid)();return ap.set(e,n),n}let ah={by:[{field:"_updatedAt",direction:"desc"}]},ag={},af=(0,eI.styled)(l.Box).withConfig({displayName:"RootBox",componentId:"sc-1xocekz-0"})`position:relative;opacity:${e=>e.$opacity||1};transition:opacity 0.4s;`,ax=(0,eI.styled)(l.Box).withConfig({displayName:"CommandListBox",componentId:"sc-1xocekz-1"})`position:absolute;left:0;right:0;top:0;bottom:0;`,ab=[...Array(30).keys()];function ay(e){let t,o,r=(0,i.c)(4),{layout:s}=e;return r[0]!==s?(t=ab.map(e=>(0,n.jsx)(u.SanityDefaultPreview,{isPlaceholder:!0,layout:s},e)),r[0]=s,r[1]=t):t=r[1],r[2]!==t?(o=(0,n.jsx)(l.Stack,{paddingX:3,paddingY:2,paddingTop:0,space:1,children:t}),r[2]=t,r[3]=o):o=r[3],o}function av(e){let t,o,s,a,d,p,m,h=(0,i.c)(67),{childItemId:g,error:f,isRetrying:x,autoRetry:b,filterIsSimpleTypeConstraint:y,hasMaxItems:v,hasSearchQuery:j,isActive:w,isLazyLoading:S,muted:I,isLoading:C,isConnected:_,retryCount:R,canRetry:P,items:k,layout:E,loadingVariant:D,onEndReached:F,onRetry:A,paneTitle:V,searchInputElement:M,showIcons:L,sortOrder:z}=e,O=(0,u.useSchema)(),{collapsed:B}=nL(),{collapsed:N,index:$}=nH(),[H,G]=(0,r.useState)(!N),{t:U}=(0,u.useTranslation)(T);h[0]!==F||h[1]!==H?(t=()=>{H&&F()},h[0]=F,h[1]=H,h[2]=t):t=h[2];let q=t;h[3]!==N?(o=()=>{if(N)return;let e=setTimeout(()=>{G(!0)},0);return()=>{clearTimeout(e)}},h[3]=N,h[4]=o):o=h[4],h[5]!==N||h[6]!==k?(s=[N,k],h[5]=N,h[6]=k,h[7]=s):s=h[7],(0,r.useEffect)(o,s),h[8]!==g||h[9]!==v||h[10]!==w||h[11]!==S||h[12]!==k.length||h[13]!==E||h[14]!==O||h[15]!==L||h[16]!==z||h[17]!==U?(a=(e,t)=>{let{activeIndex:i}=t,o=(0,c.getPublishedId)(e._id),r=g===o,s=!w&&r,a=w&&r,d=i===k.length-1,p=d&&S,m=d&&v;return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(at,{icon:!!L&&void 0,id:o,layout:E,marginBottom:1,pressed:s,schemaType:O.get(e._type),selected:a,sortOrder:z,value:e}),p&&(0,n.jsx)(u.LoadingBlock,{}),m&&(0,n.jsx)(l.Box,{marginY:1,paddingX:3,paddingY:4,children:(0,n.jsx)(l.Text,{align:"center",muted:!0,size:1,children:U("panes.document-list-pane.max-items.text",{limit:2e3})})})]})},h[8]=g,h[9]=v,h[10]=w,h[11]=S,h[12]=k.length,h[13]=E,h[14]=O,h[15]=L,h[16]=z,h[17]=U,h[18]=a):a=h[18];let W=a;e:{let e,t;if(j){let e,t;h[19]!==U?(e=U("panes.document-list-pane.no-documents.text"),h[19]=U,h[20]=e):e=h[20],h[21]!==e?(t=(0,n.jsx)(l.Flex,{align:"center",direction:"column",height:"fill",justify:"center",children:(0,n.jsx)(l.Container,{width:1,children:(0,n.jsx)(l.Box,{paddingX:4,paddingY:5,children:(0,n.jsx)(l.Text,{align:"center",muted:!0,children:e})})})}),h[21]=e,h[22]=t):t=h[22],d=t;break e}h[23]!==y||h[24]!==U?(e=U(y?"panes.document-list-pane.no-documents-of-type.text":"panes.document-list-pane.no-matching-documents.text"),h[23]=y,h[24]=U,h[25]=e):e=h[25],h[26]!==e?(t=(0,n.jsx)(l.Flex,{align:"center",direction:"column",height:"fill",justify:"center",children:(0,n.jsx)(l.Container,{width:1,children:(0,n.jsx)(l.Box,{paddingX:4,paddingY:5,children:(0,n.jsx)(l.Text,{align:"center",muted:!0,children:e})})})}),h[26]=e,h[27]=t):t=h[27],d=t}let K=d;t:{let e,t;if(!H){p=null;break t}let i=window.navigator.onLine;if(f){let e,t,o,r,s,a,d;h[28]!==U?(e=U("panes.document-list-pane.error.title"),h[28]=U,h[29]=e):e=h[29],h[30]!==e?(t=(0,n.jsx)(l.Heading,{as:"h3",children:e}),h[30]=e,h[31]=t):t=h[31],h[32]!==f||h[33]!==U?(o=u.isDev?(0,n.jsx)(u.Translate,{t:U,i18nKey:"panes.document-list-pane.error.text.dev",values:{error:f.message},components:{Code:aj}}):U(i?"panes.document-list-pane.error.text":"panes.document-list-pane.error.text.offline"),h[32]=f,h[33]=U,h[34]=o):o=h[34],h[35]!==o?(r=(0,n.jsx)(l.Text,{as:"p",children:o}),h[35]=o,h[36]=r):r=h[36];let c=i&&P?A:void 0;h[37]!==f||h[38]!==x||h[39]!==c?(s=(0,n.jsx)(u.ErrorActions,{error:f,eventId:null,onRetry:c,isRetrying:x}),h[37]=f,h[38]=x,h[39]=c,h[40]=s):s=h[40],h[41]!==b||h[42]!==P||h[43]!==x||h[44]!==R||h[45]!==U?(a=P?(0,n.jsx)(l.Text,{as:"p",muted:!0,size:1,children:x?U("panes.document-list-pane.error.retrying",{count:R}):b?U("panes.document-list-pane.error.will-retry-automatically",{count:R}):U("panes.document-list-pane.error.max-retries-attempted",{count:R})}):null,h[41]=b,h[42]=P,h[43]=x,h[44]=R,h[45]=U,h[46]=a):a=h[46],h[47]!==s||h[48]!==a||h[49]!==t||h[50]!==r?(d=(0,n.jsx)(l.Flex,{align:"center",direction:"column",height:"fill",justify:"center",children:(0,n.jsx)(l.Container,{width:1,children:(0,n.jsxs)(l.Stack,{paddingX:4,paddingY:5,space:4,children:[t,r,s,a]})})}),h[47]=s,h[48]=a,h[49]=t,h[50]=r,h[51]=d):d=h[51],p=d;break t}if(_&&!C&&0===k.length){p=K;break t}if("initial"===D&&C){let e;h[52]!==E?(e=(0,n.jsx)(ic,{ms:300,children:(0,n.jsx)(ay,{layout:E})}),h[52]=E,h[53]=e):e=h[53],p=e;break t}if("spinner"===D&&C){p=null;break t}let o=`${$}-${N}`,r=I?.8:1;h[54]!==q||h[55]!==k||h[56]!==o||h[57]!==V||h[58]!==W||h[59]!==M?(e=(0,n.jsx)(ax,{children:(0,n.jsx)(u.CommandList,{activeItemDataAttr:"data-hovered",ariaLabel:V,canReceiveFocus:!0,inputElement:M,itemHeight:51,items:k,onEndReached:q,onlyShowSelectionWhenActive:!0,overscan:10,paddingBottom:1,paddingX:3,renderItem:W,wrapAround:!1},o)}),h[54]=q,h[55]=k,h[56]=o,h[57]=V,h[58]=W,h[59]=M,h[60]=e):e=h[60],h[61]!==r||h[62]!==e?(t=(0,n.jsx)(af,{overflow:"hidden",height:"fill",$opacity:r,children:e}),h[61]=r,h[62]=e,h[63]=t):t=h[63],p=t}let Y=p,X=B||"initial"===D?"hidden":"auto";return h[64]!==Y||h[65]!==X?(m=(0,n.jsx)(nG,{"data-testid":"document-list-pane",overflow:X,children:Y}),h[64]=Y,h[65]=X,h[66]=m):m=h[66],m}function aj(e){let{children:t}=e;return(0,n.jsx)("code",{children:t})}function aw(e,t={}){try{let n=function e(t){switch(t.type){case"OpCall":{let{left:e,right:n}=t;switch(t.op){case"==":return"AccessAttribute"!==e.type||"_type"!==e.name||e.base?"AccessAttribute"!==n.type||"_type"!==n.name||n.base||"Value"!==e.type||"string"!=typeof e.value?null:new Set([e.value]):"Value"!==n.type||"string"!=typeof n.value?null:new Set([n.value]);case"in":{if("AccessAttribute"!==e.type||"_type"!==e.name||e.base||"Array"!==n.type)return null;let t=new Set;for(let e of n.elements){if(e.isSplat||"Value"!==e.value.type||"string"!=typeof e.value.value)return null;t.add(e.value.value)}return t.size?t:null}default:return null}}case"Group":return e(t.base);case"Or":{let n=e(t.left);if(!n)return null;let i=e(t.right);return i?new Set([...n,...i]):null}case"And":{let n=e(t.left),i=e(t.right);return n||i?new Set([...n||[],...i||[]]):null}default:return null}}((0,t_.parse)(e,{params:t}));return n?Array.from(n).sort():null}catch{return null}}let aS=(0,u.createSWR)({maxSize:100});function aI(e){let{client:t,schema:n,sort:i,perspective:l,limit:o,params:r,filter:s,searchQuery:a,staticTypeNames:d,maxFieldDepth:c,searchStrategy:p}=e,m=i.by,h=i?.extendedProjection,g=(0,eH.defer)(()=>t.listen(`*[${s}]`,r,{events:["welcome","mutation","reconnect"],includeAllVersions:!0,includeResult:!1,visibility:"query",tag:"listen-search-query"})).pipe((0,eG.mergeMap)((e,t)=>{let n=0===t;return n&&"reconnect"===e.type?(0,eU.throwError)(()=>Error("Failed to establish EventSource connection")):n&&"welcome"!==e.type?(0,eU.throwError)(()=>Error(`Received unexpected type of first event "${e.type}"`)):(0,eE.of)(e)}),(0,eq.share)()),[f,x]=(0,eW.partition)(g,e=>"welcome"===e.type),b=JSON.stringify({fiilter:s,limit:o,params:r,searchQuery:a,perspective:l,sort:i,staticTypeNames:d});return(0,eD.merge)(f,x.pipe((0,eK.throttleTime)(1e3,eY.asyncScheduler,{leading:!0,trailing:!0}))).pipe((0,tP.exhaustMapWithTrailing)(e=>(d?(0,eE.of)(d):t.observable.fetch(`array::unique(*[${s}][]._type)`,r)).pipe((0,eG.mergeMap)(g=>{let f=(0,u.getSearchableTypes)(n,d||[]).filter(e=>!!g.includes(e.name)&&(k(e,i.by,!0),!0)),x=(0,u.createSearch)(f,t,{filter:s,params:r,strategy:p,maxDepth:c}),b=()=>x({query:a||"",types:f},{__unstable_extendedProjection:h,comments:[`findability-source: ${a?"list-query":"list"}`],limit:o,skipSortByScore:!0,sort:m,perspective:l}).pipe((0,ek.map)(e=>e.hits.map(({hit:e})=>e)),(0,ek.map)(e=>({type:"result",documents:e})));return"mutation"===e.type&&"query"!==e.visibility?(0,eN.timer)(1200).pipe((0,eG.mergeMap)(b)):"reconnect"===e.type?(0,eE.of)(e):b()}))),(0,ti.scan)((e,t)=>({connected:"reconnect"!==t.type,documents:"result"===t.type?t.documents:e?.documents||[]}),null),(0,eP.filter)(e=>null!==e),aS(b),(0,ek.map)(({fromCache:e,value:t})=>({fromCache:e,...t})))}let aC={error:null,isRetrying:!1,retryCount:0,autoRetry:!1,canRetry:!1,isLoading:!0,isLoadingFullList:!1,fromCache:!1,items:[]};function a_(e,t){if("error"===t.type)return{...e,error:t.error,retryCount:t.retryCount,isRetrying:t.retrying,autoRetry:t.autoRetry,canRetry:t.canRetry};if("result"===t.type){var n;return{...e,error:null,isRetrying:!1,fromCache:t.result.fromCache,connected:t.result.connected,isLoading:!1,items:(n=t.result.documents,(0,u.collate)(n).map(e=>{let t=e.draft||e.published||e.versions[0],n=!!e.draft;return{...t,hasPublished:!!e.published,hasDraft:n}})),isLoadingFullList:!1}}if("loadFullList"===t.type)return{...e,error:null,isLoadingFullList:!0};throw Error(`Unexpected event type: ${t.type}`)}function aT(e){return{type:"result",result:e}}function aR(e){return{type:"result",result:e}}function aP(e){let[,t]=e;return t?.documents.length===100}function ak(){return(0,tR.observableCallback)()}function aE(){return(0,tR.observableCallback)()}let aD="[WARNING: This was thrown as a non-error. Only Error instances should be thrown]",aF=eI.keyframes`
  from {
    transform: rotate(0deg);
  }
  to {
    transform: rotate(360deg);
  }
`,aA=eI.keyframes`
  0% {
    opacity: 0;
  }
  50% {
    opacity: 0.1;
  }
  100% {
    opacity: 0.4;
  }
`,aV=(0,eI.styled)(f.SpinnerIcon).withConfig({displayName:"AnimatedSpinnerIcon",componentId:"sc-1nmsicq-0"})`animation:${aF} 500ms linear infinite;`,aM=(0,eI.styled)(f.SpinnerIcon).withConfig({displayName:"SubtleSpinnerIcon",componentId:"sc-1nmsicq-1"})`animation:${aF} 1500ms linear infinite;opacity:0.4;`,aL=(0,eI.styled)(f.SpinnerIcon).withConfig({displayName:"DelayedSubtleSpinnerIcon",componentId:"sc-1nmsicq-2"})`animation:${aF} 1500ms linear infinite,${aA} 1000ms linear;opacity:0.4;`,az=(0,r.memo)(function(e){var t;let o,s,a,d,c,m,h,g,x,b,y,v,j,w,S,I,C,_,R,P,k,E=(0,i.c)(70),{childItemId:D,isActive:F,pane:A,paneKey:V,sortOrder:M,layout:L}=e,z=(0,u.useSchema)(),O=(0,u.useActiveReleases)(),{perspectiveStack:B}=(0,u.usePerspective)(),{displayOptions:N,options:$}=A,{apiVersion:H,filter:G}=$,U=dr($.params||ag);e:{let e;E[0]!==G||E[1]!==U?(e=aw(G,U),E[0]=G,E[1]=U,E[2]=e):e=E[2];let t=e;if(t?.length===1){o=t[0];break e}o=null}let q=o,W=N?.showIcons!==!1,{t:K}=(0,u.useTranslation)(T),{title:Y}=(0,u.useI18nText)(A),[X,J]=(0,r.useState)(""),[Z,Q]=(0,r.useState)(""),[ee,et]=(0,r.useState)(null);E[3]!==z||E[4]!==M||E[5]!==q?(s=q&&M?(t=z.get(q),(k=M.by.map(e=>{if(e.mapWith)return e;let n=function(e,t){let n=ts.fromString(t),i=e;for(let e of n){if(!i)return;if("string"==typeof e){i=function(e,t){if(!("fields"in e))return;let n=e.fields.find(e=>e.name===t);return n?n.type:void 0}(i,e);continue}if(!((0,p.isKeySegment)(e)||(0,p.isIndexSegment)(e))||"array"!==i.jsonType)return;let[t,n]=i.of||[];if(n||!t)return;if(!(0,p.isReferenceSchemaType)(t)){i=t;continue}let[l,o]=t.to||[];if(o||!l)return;i=l}return i}(t,e.field);return n?!function(e,t){let n=e.type;for(;n;){if(n.name===t||!n.type&&n.jsonType===t)return!0;n=n.type}return!1}(n,"datetime")?"string"===n.jsonType?{...e,mapWith:"lower"}:e:{...e,mapWith:"dateTime"}:e})).every((e,t)=>e===M.by[t])?M:{...M,by:k}):M,E[3]=z,E[4]=M,E[5]=q,E[6]=s):s=E[6];let en=(0,u.useUnique)(s),ei=H||u.DEFAULT_STUDIO_CLIENT_OPTIONS.apiVersion;E[7]!==ei?(a={...u.DEFAULT_STUDIO_CLIENT_OPTIONS,apiVersion:ei},E[7]=ei,E[8]=a):a=E[8];let el=(0,u.useClient)(a);E[9]!==X?(d=X?.trim(),E[9]=X,E[10]=d):d=E[10],E[11]!==el||E[12]!==G||E[13]!==U||E[14]!==B||E[15]!==en||E[16]!==d?(c={client:el,filter:G,perspective:B,params:U,searchQuery:d,sortOrder:en},E[11]=el,E[12]=G,E[13]=U,E[14]=B,E[15]=en,E[16]=d,E[17]=c):c=E[17];let{error:eo,isLoadingFullList:er,isLoading:es,items:ea,fromCache:ed,isRetrying:ec,autoRetry:eu,canRetry:ep,retryCount:em,connected:eh,onLoadFullList:eg,onRetry:ef}=function(e){let t,n,l,o=(0,i.c)(31),{client:s,filter:a,params:d,sortOrder:c,searchQuery:p,perspective:m}=e,{strategy:h}=(0,u.useWorkspace)().search,g=(0,u.useSchema)(),f=(0,u.useSearchMaxFieldDepth)();o[0]!==d||o[1]!==a?(t=aw(a,d),o[0]=d,o[1]=a,o[2]=t):t=o[2];let x=t,[b]=(0,r.useState)(aE),[y,v]=b,[j]=(0,r.useState)(ak),[w,S]=j,I=p||"",C=c||ah;if(o[3]!==s||o[4]!==f||o[5]!==w||o[6]!==y||o[7]!==d||o[8]!==m||o[9]!==g||o[10]!==a||o[11]!==h||o[12]!==I||o[13]!==C||o[14]!==x){let e,t={client:s,filter:a,limit:100,params:d,schema:g,perspective:m,searchQuery:I,sort:C,staticTypeNames:x,maxFieldDepth:f,searchStrategy:h},i=aI(t).pipe((0,tn.shareReplay)({refCount:!0,bufferSize:1})),l=w.pipe((0,tl.withLatestFrom)(i),(0,eP.filter)(aP),(0,to.take)(1),(0,eG.mergeMap)(()=>(0,eV.concat)((0,eE.of)({type:"loadFullList"}),aI({...t,limit:2e3}).pipe((0,ek.map)(aR)))),(0,eq.share)());o[16]!==y?(e=(e,t,n)=>{var i,l;let o=(l=e)instanceof Error?l:"object"==typeof l&&null!==l&&"message"in l&&"string"==typeof l.message?Error(`${l.message} ${aD}`):Error(`${String(l)} ${aD}`),r=window.navigator.onLine,s=r&&!((i=e)instanceof tT.ChannelError)&&(i instanceof tT.ServerError||!(i instanceof tT.ClientError)||403===i.statusCode),a=t<10,d=(0,eD.merge)(r?y:(0,eO.fromEvent)(window,"online"),r&&a?(0,eN.timer)(1e3*t):eX.NEVER).pipe((0,to.take)(1),(0,e$.switchMap)(()=>(0,eD.merge)((0,eE.of)({type:"error",error:o,retrying:!0,autoRetry:a,canRetry:s,retryCount:t}),n)));return(0,eV.concat)((0,eE.of)({type:"error",error:o,retrying:!1,autoRetry:a,canRetry:s,retryCount:t}),d)},o[16]=y,o[17]=e):e=o[17],n=(0,eD.merge)(i.pipe((0,ek.map)(aT),(0,tr.takeUntil)(l)),l).pipe((0,u.catchWithCount)(e),(0,ti.scan)(a_,aC)),o[3]=s,o[4]=f,o[5]=w,o[6]=y,o[7]=d,o[8]=m,o[9]=g,o[10]=a,o[11]=h,o[12]=I,o[13]=C,o[14]=x,o[15]=n}else n=o[15];let _=n,{error:T,items:R,isLoading:P,fromCache:k,connected:E,canRetry:D,isLoadingFullList:F,isRetrying:A,autoRetry:V,retryCount:M}=(0,e_.useObservable)(_,aC);return o[18]!==V||o[19]!==D||o[20]!==E||o[21]!==T||o[22]!==k||o[23]!==P||o[24]!==F||o[25]!==A||o[26]!==R||o[27]!==S||o[28]!==v||o[29]!==M?(l={error:T,onRetry:v,isLoading:P,items:R,isRetrying:A,canRetry:D,retryCount:M,autoRetry:V,connected:E,fromCache:k,onLoadFullList:S,isLoadingFullList:F},o[18]=V,o[19]=D,o[20]=E,o[21]=T,o[22]=k,o[23]=P,o[24]=F,o[25]=A,o[26]=R,o[27]=S,o[28]=v,o[29]=M,o[30]=l):l=o[30],l}(c),ex=es||O.loading;E[18]===Symbol.for("react.memo_cache_sentinel")?(m=e=>e.pipe((0,ek.map)(aO),(0,eJ.tap)(Q),(0,eZ.debounce)(aB),(0,eJ.tap)(J)),E[18]=m):m=E[18];let eb=(0,e_.useObservableEvent)(m);E[19]===Symbol.for("react.memo_cache_sentinel")?(h=()=>{J(""),Q("")},E[19]=h):h=E[19];let ey=h;E[20]===Symbol.for("react.memo_cache_sentinel")?(g=e=>{"Escape"===e.key&&ey()},E[20]=g):g=E[20];let ev=g,[ej,ew]=(0,r.useState)();E[21]!==ej||E[22]!==ex||E[23]!==V?(b=()=>{ej||ex||ew(V)},x=[ej,ex,V],E[21]=ej,E[22]=ex,E[23]=V,E[24]=x,E[25]=b):(x=E[24],b=E[25]),(0,r.useEffect)(b,x),E[26]===Symbol.for("react.memo_cache_sentinel")?(y=()=>{ey(),ew()},E[26]=y):y=E[26],E[27]!==V?(v=[V,ey],E[27]=V,E[28]=v):v=E[28],(0,r.useEffect)(y,v);t:{if(eh&&ex&&ej===V){j="spinner";break t}if(eh&&ed){j="subtle";break t}j="initial"}let eS=j;n:{if("spinner"===eS){w=aV;break n}if(Z&&"subtle"===eS){w=aM;break n}w=f.SearchIcon}let eI=w;(0,u.useReconnectingToast)(!eh),E[29]!==K?(S=K("panes.document-list-pane.search-input.aria-label"),E[29]=K,E[30]=S):S=E[30];let eC=!!X;E[31]===Symbol.for("react.memo_cache_sentinel")?(I=[2,2,1],E[31]=I):I=E[31];let eT=eh&&("subtle"!==eS||Z)?null:aL;E[32]!==K?(C=K("panes.document-list-pane.search-input.placeholder"),E[32]=K,E[33]=C):C=E[33],E[34]!==eb||E[35]!==Z||E[36]!==S||E[37]!==eC||E[38]!==eT||E[39]!==C||E[40]!==eI?(_=(0,n.jsx)(l.Box,{paddingX:3,paddingBottom:3,children:(0,n.jsx)(l.TextInput,{"aria-label":S,autoComplete:"off",border:!1,clearButton:eC,fontSize:I,icon:eI,iconRight:eT,onChange:eb,onClear:ey,onKeyDown:ev,padding:2,placeholder:C,radius:2,ref:et,spellCheck:!1,value:Z})}),E[34]=eb,E[35]=Z,E[36]=S,E[37]=eC,E[38]=eT,E[39]=C,E[40]=eI,E[41]=_):_=E[41];let eR=!!q,eF=2e3===ea.length,eA=!!X,eM="subtle"===eS;return E[42]!==eu||E[43]!==ep||E[44]!==D||E[45]!==eh||E[46]!==eo||E[47]!==F||E[48]!==ex||E[49]!==er||E[50]!==ec||E[51]!==ea||E[52]!==L||E[53]!==eS||E[54]!==eg||E[55]!==ef||E[56]!==V||E[57]!==em||E[58]!==ee||E[59]!==W||E[60]!==en||E[61]!==eR||E[62]!==eF||E[63]!==eA||E[64]!==eM||E[65]!==Y?(R=(0,n.jsx)(av,{childItemId:D,error:eo,filterIsSimpleTypeConstraint:eR,hasMaxItems:eF,hasSearchQuery:eA,isActive:F,isLazyLoading:er,isLoading:ex,autoRetry:eu,canRetry:ep,retryCount:em,isRetrying:ec,isConnected:eh,items:ea,layout:L,muted:eM,loadingVariant:eS,onEndReached:eg,onRetry:ef,paneTitle:Y,searchInputElement:ee,showIcons:W,sortOrder:en},V),E[42]=eu,E[43]=ep,E[44]=D,E[45]=eh,E[46]=eo,E[47]=F,E[48]=ex,E[49]=er,E[50]=ec,E[51]=ea,E[52]=L,E[53]=eS,E[54]=eg,E[55]=ef,E[56]=V,E[57]=em,E[58]=ee,E[59]=W,E[60]=en,E[61]=eR,E[62]=eF,E[63]=eA,E[64]=eM,E[65]=Y,E[66]=R):R=E[66],E[67]!==_||E[68]!==R?(P=(0,n.jsxs)(n.Fragment,{children:[_,R]}),E[67]=_,E[68]=R,E[69]=P):P=E[69],P});function aO(e){return e.target.value}function aB(e){return""===e?(0,eE.of)(""):(0,eN.timer)(300)}let aN=(0,r.memo)(e=>{let t,l,o,r,s,a,d,c,u,p,h,g=(0,i.c)(33),{contentAfter:x,customMenuItemState:b,index:y,initialValueTemplates:v,menuItemGroups:j,menuItems:w,setLayout:S,setSortOrder:I,setCustomMenuItemState:C,title:_}=e;g[0]!==b?(t=void 0===b?{}:b,g[0]=b,g[1]=t):t=g[1];let T=t;g[2]!==v?(l=void 0===v?[]:v,g[2]=v,g[3]=l):l=g[3];let R=l;g[4]!==j?(o=void 0===j?[]:j,g[4]=j,g[5]=o):o=g[5];let P=o;g[6]!==w?(r=void 0===w?[]:w,g[6]=w,g[7]=r):r=g[7];let k=r,{features:E}=iw(),{collapsed:D,isLast:F}=nH(),A=F&&!D?-1:0;g[8]!==S?(s=e=>{let{layout:t}=e;S(t)},g[8]=S,g[9]=s):s=g[9],g[10]!==I?(a=e=>{I(e)},g[10]=I,g[11]=a):a=g[11],g[12]!==T||g[13]!==C?(d=e=>{let t=e._menuItemId,n=e.value??!0;T[t]===n?C(Object.fromEntries(Object.entries(T).filter(e=>{let[n]=e;return n!==t}))):C({...T,[t]:n})},g[12]=T,g[13]=C,g[14]=d):d=g[14],g[15]!==a||g[16]!==d||g[17]!==s?(c={setLayout:s,setSortOrder:a,setMenuItemState:d},g[15]=a,g[16]=d,g[17]=s,g[18]=c):c=g[18];let V=c;return g[19]!==V||g[20]!==R||g[21]!==P||g[22]!==k?(u=(0,n.jsx)(s3,{initialValueTemplateItems:R,actionHandlers:V,menuItemGroups:P,menuItems:k}),g[19]=V,g[20]=R,g[21]=P,g[22]=k,g[23]=u):u=g[23],g[24]!==E.backButton||g[25]!==y?(p=E.backButton&&y>0&&(0,n.jsx)(m.Button,{as:su,"data-as":"a",icon:f.ArrowLeftIcon,mode:"bleed",tooltipProps:{content:"Back"}}),g[24]=E.backButton,g[25]=y,g[26]=p):p=g[26],g[27]!==x||g[28]!==u||g[29]!==p||g[30]!==A||g[31]!==_?(h=(0,n.jsx)(m.TooltipDelayGroupProvider,{children:(0,n.jsx)(n7,{actions:u,backButton:p,contentAfter:x,tabIndex:A,title:_})}),g[27]=x,g[28]=u,g[29]=p,g[30]=A,g[31]=_,g[32]=h):h=g[32],h});function a$(e){let{row:t,table:i}=e,{selectedAnchor:o,setSelectedAnchor:s}=i.options.meta||{},a=(0,r.useCallback)(e=>{if(e.shiftKey&&null!=o){let e=t.index,n=e<o?e:o,l=e<o?o:e,r=i.getRowModel().flatRows.slice(n,l+1).map(({id:e})=>e),s=i.getSelectedRowModel().rows.map(({id:e})=>e);i.setRowSelection(()=>[...r,...s].reduce((e,t)=>({...e,[t]:!0}),{}))}else s&&(s(t.getIsSelected()?null:t.index),t.toggleSelected())},[o,t,s,i]);return(0,n.jsx)(l.Checkbox,{style:{paddingLeft:4},checked:e.row.getIsSelected(),disabled:!e.row.getCanSelect(),onChange:()=>null,onClick:a})}function aH(e){let t,l,o,a,d,c,u,p,m,h,g,f,x,b,y,v,j,w=(0,i.c)(49),{children:S,table:I}=e,[C,_]=(0,r.useState)(null);w[0]===Symbol.for("react.memo_cache_sentinel")?(t=[],w[0]=t):t=w[0];let[T,R]=(0,r.useState)(t);w[1]!==C?.state?(l=e=>{C?.state==="focused"&&document.activeElement instanceof HTMLElement&&document.activeElement.blur(),_(void 0===e?null:e),R([])},w[1]=C?.state,w[2]=l):l=w[2];let P=l;w[3]!==P?(o=()=>P(),w[3]=P,w[4]=o):o=w[4];let k=o;w[5]!==P||w[6]!==C||w[7]!==I?(a=e=>{if(!C)return;let t=I.getVisibleLeafColumns(),n=t.findIndex(e=>e.id===C.colId)+("left"===e?-1:1);n<0||n>=t.length||P({colId:t[n].id,rowIndex:C.rowIndex,state:"selected"})},w[5]=P,w[6]=C,w[7]=I,w[8]=a):a=w[8];let E=a;w[9]!==C?(d=e=>{C&&R(t=>{let{rowIndex:n}=C,i=t=>t+("down"===e?1:-1);if(!t.length){let e=i(n);return e<0?[]:[e]}let l=i(t[t.length-1]);return l<0?t:l===n?[]:t.includes(l)?t.slice(0,-1):[...t,l]})},w[9]=C,w[10]=d):d=w[10];let D=d;w[11]!==P?(c=(e,t)=>{P({colId:e,rowIndex:t,state:"selected"})},w[11]=P,w[12]=c):c=w[12];let F=c;w[13]!==P||w[14]!==C||w[15]!==T.length?(u=()=>{C&&(T.length?R([]):P("selected"===C.state?null:{...C,state:"selected"}))},w[13]=P,w[14]=C,w[15]=T.length,w[16]=u):u=w[16];let A=u;w[17]!==D||w[18]!==C||w[19]!==F?(p=(e,t)=>{if(!C)return;let n="ArrowDown"===t?"down":"up",i="down"===n?1:-1;if(e)D(n);else{let e=C.rowIndex+i;if(e<0)return;F(C.colId,e)}},w[17]=D,w[18]=C,w[19]=F,w[20]=p):p=w[20];let V=p;w[21]!==E||w[22]!==A||w[23]!==V||w[24]!==C?(m=e=>{if(!C)return;let{key:t,shiftKey:n}=e;switch(t){case"Shift":break;case"Escape":A();break;case"ArrowDown":case"ArrowUp":e.preventDefault(),V(n,t);break;case"ArrowLeft":case"ArrowRight":"selected"===C.state&&(e.preventDefault(),E("ArrowLeft"===t?"left":"right"))}},w[21]=E,w[22]=A,w[23]=V,w[24]=C,w[25]=m):m=w[25];let M=m;w[26]!==k||w[27]!==C?(h=e=>{C&&(document.getElementById(`cell-${C.colId}-${C.rowIndex}`)?.contains(e.target)||k())},w[26]=k,w[27]=C,w[28]=h):h=w[28];let L=h;w[29]!==L||w[30]!==M||w[31]!==C?(g=()=>(C&&(document.addEventListener("keydown",M),document.addEventListener("click",L)),()=>{C&&(document.removeEventListener("keydown",M),document.removeEventListener("click",L))}),f=[L,M,C],w[29]=L,w[30]=M,w[31]=C,w[32]=g,w[33]=f):(g=w[32],f=w[33]),(0,r.useEffect)(g,f),w[34]===Symbol.for("react.memo_cache_sentinel")?(x=()=>_(aG),w[34]=x):x=w[34];let z=x;w[35]!==C||w[36]!==T?(b=(e,t)=>C?.colId!==e?null:C.rowIndex===t?"focused"===C.state?"focused":"selectedAnchor":T.includes(t)?"selectedRange":null,w[35]=C,w[36]=T,w[37]=b):b=w[37];let O=b;w[38]!==P||w[39]!==C?(y=()=>{C&&P({colId:C.colId,rowIndex:C.rowIndex+1,state:"selected"})},w[38]=P,w[39]=C,w[40]=y):y=w[40];let B=y;w[41]!==O||w[42]!==k||w[43]!==F||w[44]!==B?(v={focusAnchorCell:z,resetFocusSelection:k,setSelectedAnchorCell:F,getStateByCellId:O,submitFocusedCell:B},w[41]=O,w[42]=k,w[43]=F,w[44]=B,w[45]=v):v=w[45];let N=v;return w[46]!==S||w[47]!==N?(j=(0,n.jsx)(s.DocumentSheetListContext.Provider,{value:N,children:S}),w[46]=S,w[47]=N,w[48]=j):j=w[48],j}function aG(e){return e?{...e,state:"focused"}:null}aN.displayName="Memo(PaneHeader)";let aU=eI.styled.td.withConfig({displayName:"DataCell",componentId:"sc-1b0ndkq-0"})`display:flex;overflow:hidden;box-sizing:border-box;width:${({width:e})=>e}px;border-top:1px solid var(--card-border-color);background-color:var(--card-bg-color);`,aq=(0,eI.styled)(aU).withConfig({displayName:"PinnedDataCell",componentId:"sc-1b0ndkq-1"})`position:sticky;z-index:2;`;function aW(e){let{getValue:t,column:i,row:o,fieldType:a}=e,d=`cell-${i.id}-${o.index}`,[c,u]=(0,r.useState)(()=>t()),[p,m]=(0,r.useState)(!1),h=(0,r.useRef)(null),{focusAnchorCell:g,resetFocusSelection:f,setSelectedAnchorCell:x,getStateByCellId:b,submitFocusedCell:y}=(()=>{let e=(0,r.useContext)(s.DocumentSheetListContext);if(void 0===e)throw Error("useDocumentSheetListContext must be used within an DocumentSheetListProvider");return e})(),v=b(i.id,o.index),j=(0,r.useCallback)(()=>{x(i.id,o.index),g()},[i.id,g,o.index,x]),{patchDocument:w}=e.table.options.meta||{},S=()=>{h.current?.focus(),h.current instanceof HTMLInputElement&&h.current.select()},I=(0,r.useCallback)(e=>{let{key:t}=e;"Enter"===t&&("selectedAnchor"===v&&S(),"focused"===v&&y())},[v,y]),C=(0,r.useCallback)(e=>{let t=e.clipboardData?.getData("Text");("string"==typeof t||"number"==typeof t)&&(u(t),w?.(o.id,i.id,t))},[i.id,w,o.id]),_=(0,r.useCallback)(()=>navigator.clipboard.writeText(c.toString()),[c]);(0,r.useEffect)(()=>(("selectedAnchor"===v||"focused"===v)&&document.addEventListener("keydown",I),("selectedAnchor"===v||"selectedRange"===v)&&document.addEventListener("paste",C),"selectedAnchor"===v&&document.addEventListener("copy",_),()=>{("selectedAnchor"===v||"focused"===v)&&document.removeEventListener("keydown",I),("selectedAnchor"===v||"selectedRange"===v)&&document.removeEventListener("paste",C),"selectedAnchor"===v&&document.removeEventListener("copy",_)}),[d,v,i.id,b,_,I,C,o.index]);let T=()=>"focused"===v?"2px solid blue":"selectedRange"===v?"1px solid green":"selectedAnchor"===v?"1px solid blue":"1px solid transparent",R={onFocus:j,onBlur:()=>{p&&(w?.(o.id,i.id,c),m(!1)),f()},onMouseDown:e=>{2===e.detail?S():(e.preventDefault(),x(i.id,o.index))},"aria-selected":!!v,"data-testid":d,id:d,ref:e=>{h.current=e}};return"boolean"===a.name?(0,n.jsxs)(l.Select,{...R,onChange:()=>null,radius:0,style:{boxShadow:"none",border:T(),padding:0},value:JSON.stringify(c),children:[(0,n.jsx)("option",{value:"True",children:"True"}),(0,n.jsx)("option",{value:"False",children:"False"})]}):(0,n.jsx)(l.TextInput,{...R,size:0,radius:0,border:!1,style:{border:T(),padding:"22px 16px"},value:"string"==typeof c||"number"==typeof c?c:JSON.stringify(c),onChange:e=>{m(!0),u(e.target.value)}})}function aK(e){let t=e.column.getIsPinned(),i=t&&e.column.getIsLastColumn("left")?2:1;return(0,n.jsx)(t?aq:aU,{style:{left:e.column.getStart("left")??void 0,borderRight:`${i}px solid var(--card-border-color)`},width:e.column.getSize(),children:nr(e.column.columnDef.cell,e.getContext?.())},e.row.original._id+e.id)}let aY=e=>{let{documentPreviewStore:t,row:i,schemaType:o}=e,s=(0,r.useMemo)(()=>(0,u.getPreviewStateObservable)(t,o,i.original._id),[t,i.original._id,o]),a=(0,u.useDocumentVersionInfo)(i.original._id),{snapshot:d,isLoading:c}=(0,e_.useObservable)(s,{snapshot:null,isLoading:!0});if(c)return(0,n.jsx)(l.Text,{size:1,muted:!0,children:"Loading..."});let p=d?.title??"Untitled";return(0,n.jsxs)(l.Flex,{align:"center",gap:3,children:[(0,n.jsx)(u.DocumentStatusIndicator,{draft:a.draft,published:a.published,versions:void 0}),(0,n.jsx)(l.Text,{size:1,children:p})]})},aX=(e,t)=>"function"==typeof e?{...t,accessorFn:e}:{...t,accessorKey:e},aJ=["string","number","boolean"],aZ=(e,t)=>e.fields.reduce((e,i)=>{let{type:l,name:o}=i;return aJ.includes(l.name)?[...e,aX(t?`${t}.${i.name}`:i.name,{id:t?`${t}_${i.name}`:i.name,header:i.type.title,enableHiding:!0,cell:e=>(0,n.jsx)(aW,{...e,fieldType:l})})]:"object"===l.name&&(0,p.isObjectSchemaType)(l)&&!t?[...e,{header:o,columns:aZ(l,i.name)}]:e},[]),aQ=e=>e.flatMap(e=>"accessorKey"in e?e:"columns"in e&&e.columns?aQ(e.columns):[]);function a0({table:e}){let{t}=(0,u.useTranslation)(),i=e.getVisibleLeafColumns().filter(e=>e.getCanHide()).length>=5,o=(0,r.useCallback)(()=>{e.resetColumnVisibility()},[e]);return(0,n.jsx)(m.MenuButton,{button:(0,n.jsx)(m.Button,{mode:"bleed",text:t("sheet-list.edit-columns")}),id:"columns-control",menu:(0,n.jsx)(l.Menu,{padding:3,paddingTop:4,style:{width:240},children:(0,n.jsxs)(l.Flex,{direction:"column",height:"fill",gap:3,children:[(0,n.jsx)(l.Text,{weight:"semibold",size:1,children:t("sheet-list.select-fields")}),(0,n.jsx)(l.Flex,{style:{flex:"1 1 auto",maxHeight:320,overflowY:"scroll"},children:(0,n.jsx)(l.Stack,{children:e.getAllLeafColumns().filter(e=>e.getCanHide()).map(t=>{let o,r,s=t.id.replace(/ /g,"-");return(0,n.jsxs)(l.Flex,{marginY:2,align:"center",children:[(0,n.jsx)(l.Checkbox,{readOnly:(o=t.getIsVisible(),r=1===e.getVisibleLeafColumns().filter(e=>e.getCanHide()).length,i&&!o||r&&o),checked:t.getIsVisible(),onChange:()=>{t.toggleVisibility()},id:`col-visibility-${s}`,style:{display:"block"}}),(0,n.jsx)(l.Box,{flex:1,paddingLeft:3,children:(0,n.jsx)(l.Text,{size:1,children:(0,n.jsx)("label",{htmlFor:`col-visibility-${s}`,children:t.columnDef.header?.toString()})})})]},t.id)})})}),(0,n.jsx)(m.Button,{width:"fill",mode:"ghost",text:t("sheet-list.reset-columns"),onClick:o})]})}),placement:"bottom",popover:{portal:!0}})}let a1=(0,eI.styled)(l.Flex).withConfig({displayName:"SearchContainer",componentId:"sc-rt1blp-0"})`flex-shrink:0;`;function a2(){let e,t,l,o=(0,i.c)(5),{state:r}=(0,u.useSearchState)(),{filtersVisible:s}=r;return o[0]===Symbol.for("react.memo_cache_sentinel")?(e=(0,n.jsx)(u.SearchHeader,{}),o[0]=e):e=o[0],o[1]!==s?(t=s&&(0,n.jsx)(u.Filters,{showTypeFilter:!1}),o[1]=s,o[2]=t):t=o[2],o[3]!==t?(l=(0,n.jsxs)(a1,{children:[e,t]}),o[3]=t,o[4]=l):l=o[4],l}let a3=eI.styled.th.withConfig({displayName:"Header",componentId:"sc-1l8g8jw-0"})`margin:16px;z-index:1;padding:22px 0px;border-top:1px solid var(--card-border-color);background-color:var(--card-badge-default-bg-color);box-sizing:border-box;text-align:left;width:${({width:e})=>e}px;max-width:${({width:e})=>e}px;`,a4=(0,eI.styled)(a3).withConfig({displayName:"PinnedHeader",componentId:"sc-1l8g8jw-1"})`position:sticky;z-index:2;`,a5=eI.styled.div.withConfig({displayName:"HoverMenu",componentId:"sc-1l8g8jw-2"})`visibility:hidden;${a3}:hover &{visibility:visible;}`;function a6(e){let{header:t,headerGroup:i}=e,{t:o}=(0,u.useTranslation)(),r=t.column.getIsPinned(),s=i.depth>0&&!t.column.parent?null:(0,n.jsx)(l.Text,{size:1,weight:"semibold",textOverflow:"ellipsis",children:nr(t.column.columnDef.header,t.getContext())}),a=t.column.getCanHide()&&(0===i.depth?!t.column.columns.length:t.column.parent),d=r&&t.column.getIsLastColumn("left")?2:1;return(0,n.jsx)(r?a4:a3,{style:{left:t.column.getStart("left")??void 0,borderRight:`${d}px solid var(--card-border-color)`},"data-testid":`header-${t.id}`,width:t.getSize(),children:(0,n.jsxs)(l.Flex,{justify:"space-between",marginX:2,align:"baseline",children:[(0,n.jsx)(m.Tooltip,{delay:500,content:s,children:(0,n.jsx)(l.Box,{style:{boxSizing:"border-box"},marginLeft:3,marginRight:3,children:s})}),a&&(0,n.jsx)(a5,{children:(0,n.jsx)(m.MenuButton,{button:(0,n.jsx)(m.Button,{tooltipProps:{content:"Open field menu"},mode:"bleed",icon:f.EllipsisHorizontalIcon,"data-testid":"field-menu-button"}),id:"field menu",popover:{placement:"bottom-end"},menu:(0,n.jsx)(l.Menu,{children:(0,n.jsx)(m.MenuItem,{text:o("sheet-list.hide-field"),icon:f.CloseIcon,onClick:()=>t.column.toggleVisibility()})})})})]})},t.id)}function a8({table:e}){return(0,n.jsx)(m.TooltipDelayGroupProvider,{children:(0,n.jsxs)(l.Flex,{gap:3,align:"center",children:[(0,n.jsx)(m.Button,{onClick:()=>e.setPageIndex(0),disabled:!e.getCanPreviousPage(),icon:f.DoubleChevronLeftIcon,tooltipProps:{content:"Go to first page"}}),(0,n.jsx)(m.Button,{onClick:()=>e.previousPage(),disabled:!e.getCanPreviousPage(),icon:f.ChevronLeftIcon,tooltipProps:{content:"Go to previous page"}}),(0,n.jsxs)(l.Text,{style:{whiteSpace:"nowrap"},children:[e.getState().pagination.pageIndex+1," of ",e.getPageCount()]}),(0,n.jsx)(m.Button,{onClick:()=>e.nextPage(),disabled:!e.getCanNextPage(),icon:f.ChevronRightIcon,tooltipProps:{content:"Go to next page"}}),(0,n.jsx)(m.Button,{onClick:()=>e.setPageIndex(e.getPageCount()-1),disabled:!e.getCanNextPage(),icon:f.DoubleChevronRightIcon,tooltipProps:{content:"Go to last page"}}),(0,n.jsx)("select",{value:e.getState().pagination.pageSize,onChange:t=>{e.setPageSize(Number(t.target.value))},children:[25,50,100].map(e=>(0,n.jsx)("option",{value:e,children:e},e))})]})})}function a7(e,t){switch(t.type){case"DOCUMENTS_SET":{let n=t.documents.reduce((e,t)=>({...e,[t._id]:t}),{});return{...e,documents:n}}case"DOCUMENT_RECEIVED":{let n=t.payload;return{...e,documents:{...e.documents,[n._id]:n}}}case"DOCUMENT_DELETED":{let{[t.id]:n,...i}=e.documents;return{...e,documents:i}}case"DOCUMENT_UPDATED":{let n=t.payload,i=n._id,l={...e.documents[i],...n};return{...e,documents:{...e.documents,[i]:l}}}default:return e}}let a9={events:["welcome","mutation","reconnect"],includeResult:!0,visibility:"query",includeAllVersions:!0,tag:"document-sheet-list-store"},de=(0,eI.styled)(l.Flex).withConfig({displayName:"PaneContainer",componentId:"sc-t7phoh-0"})`height:100%;`,dt=eI.styled.div.withConfig({displayName:"TableContainer",componentId:"sc-t7phoh-1"})`overflow:auto;position:relative;`,dn=eI.styled.table.withConfig({displayName:"Table",componentId:"sc-t7phoh-2"})`border-collapse:separate;border-spacing:0;font-family:arial,sans-serif;white-space:nowrap;width:100%;border:1px solid lightgray;thead{display:grid;position:sticky;top:0;z-index:10;}tr{padding:0;}tr:last-child{border-bottom:none;}`;function di({documentSchemaType:e}){let{dispatch:t,state:o}=(0,u.useSearchState)(),{columns:s,initialColumnsVisibility:a}=function(e){let t=(0,u.useDocumentPreviewStore)(),i=(0,r.useMemo)(()=>e?[{id:"selected",enableHiding:!1,header:e=>(0,n.jsxs)(l.Box,{children:[(0,n.jsx)(l.Checkbox,{style:{paddingLeft:4},indeterminate:e.table.getIsSomeRowsSelected(),onChange:e.table.getToggleAllPageRowsSelectedHandler()}),e.table.getSelectedRowModel().rows.length," selected"]}),cell:a$},aX("Preview",{enableHiding:!1,id:"Preview",cell:i=>(0,n.jsx)(aY,{...i,documentPreviewStore:t,schemaType:e})}),...aZ(e)]:[],[t,e]),[o]=(0,r.useMemo)(()=>aQ(i).reduce(([e,t],n)=>{if(!n.id)throw Error("Column must have an id");let i=n.id;return n.enableHiding?5===t?[{...e,[i]:!1},t]:[{...e,[i]:!0},t+1]:[{...e,[i]:!0},t]},[{},0]),[i]);return{columns:i,initialColumnsVisibility:o}}(e),{data:d}=function(e){let t,n,l,o,s=(0,i.c)(12),{typeName:a}=e,{state:d}=(0,u.useSearchState)();s[0]!==d.result.hits?(t=new Map,d.result.hits.forEach(e=>t.set((0,c.getPublishedId)(e.hit._id),e.hit)),s[0]=d.result.hits,s[1]=t):t=s[1];let p=t,m=`_type == "${a}"`;s[2]!==m?(n={filter:m},s[2]=m,s[3]=n):n=s[3];let{data:h,isLoading:g}=function(e){let t,n,l,o,s,a,d,p,m,h,g=(0,i.c)(27),{filter:f,params:x,apiVersion:b}=e,y=`*[${f}][0...2000]`,v=b||u.DEFAULT_STUDIO_CLIENT_OPTIONS.apiVersion;g[0]!==v?(t={...u.DEFAULT_STUDIO_CLIENT_OPTIONS,apiVersion:v},g[0]=v,g[1]=t):t=g[1];let j=(0,u.useClient)(t);g[2]===Symbol.for("react.memo_cache_sentinel")?(n={documents:{}},g[2]=n):n=g[2];let[w,S]=(0,r.useReducer)(a7,n),[I,C]=(0,r.useState)(null!==j),[_,T]=(0,r.useState)(null);g[3]!==y||g[4]!==j||g[5]!==x?(l=async()=>{if(!j)return void C(!1);try{let e=await j.fetch(y,x);S({type:"DOCUMENTS_SET",documents:e}),C(!1)}catch(e){T(e)}},g[3]=y,g[4]=j,g[5]=x,g[6]=l):l=g[6];let R=l;g[7]!==R?(o=async e=>{if("welcome"===e.type&&(C(!0),await R(),C(!1)),"reconnect"===e.type&&C(!0),"mutation"===e.type){if("appear"===e.transition){let t=e.result;t&&S({type:"DOCUMENT_RECEIVED",payload:t})}if("disappear"===e.transition&&S({type:"DOCUMENT_DELETED",id:e.documentId}),"update"===e.transition){let t=e.result;t&&S({type:"DOCUMENT_UPDATED",payload:t})}}},g[7]=R,g[8]=o):o=g[8];let P=o;e:{let e;if(!j){let e;g[9]===Symbol.for("react.memo_cache_sentinel")?(e=(0,eE.of)(),g[9]=e):e=g[9],s=e;break e}if(g[10]!==y||g[11]!==j.observable||g[12]!==x){let t;g[14]===Symbol.for("react.memo_cache_sentinel")?(t=e=>(T(e),(0,eE.of)(e)),g[14]=t):t=g[14],e=j.observable.listen(y,x,a9).pipe((0,eA.catchError)(t)),g[10]=y,g[11]=j.observable,g[12]=x,g[13]=e}else e=g[13];s=e}let k=s;g[15]!==P||g[16]!==k?(a=()=>{let e=k.subscribe(P);return()=>{e?.unsubscribe()}},d=[P,k],g[15]=P,g[16]=k,g[17]=a,g[18]=d):(a=g[17],d=g[18]),(0,r.useEffect)(a,d),g[19]!==w.documents?(p=Object.keys(w.documents).reduce((e,t)=>{let n=w.documents[t],i=n._id===(0,c.getDraftId)(n._id),l=i?n._id:(0,c.getDraftId)(n._id);return e[l]&&!i||(e[l]=n),e},{}),g[19]=w.documents,g[20]=p):p=g[20];let E=p;g[21]!==E?(m=Object.values(E),g[21]=E,g[22]=m):m=g[22];let D=m;return g[23]!==D||g[24]!==_||g[25]!==I?(h={data:D,isLoading:I,error:_},g[23]=D,g[24]=_,g[25]=I,g[26]=h):h=g[26],h}(n);if(s[4]!==h||s[5]!==p){let e;s[7]!==p?(e=e=>p.has((0,c.getPublishedId)(e._id)),s[7]=p,s[8]=e):e=s[8],l=h.filter(e),s[4]=h,s[5]=p,s[6]=l}else l=s[6];let f=l;return s[9]!==f||s[10]!==g?(o={data:f,isLoading:g},s[9]=f,s[10]=g,s[11]=o):o=s[11],o}({typeName:e.name}),[p,m]=(0,r.useState)(null),h=o.result.hits.length,g=function(e){let t={state:{},onStateChange:()=>{},renderFallbackValue:null,...e},[n]=r.useState(()=>({current:function(e){var t,n;let i=[...no,...null!=(t=e._features)?t:[]],l={_features:i},o=l._features.reduce((e,t)=>Object.assign(e,null==t.getDefaultOptions?void 0:t.getDefaultOptions(l)),{}),r={...null!=(n=e.initialState)?n:{}};l._features.forEach(e=>{var t;r=null!=(t=null==e.getInitialState?void 0:e.getInitialState(r))?t:r});let s=[],a=!1,d={_features:i,options:{...o,...e},initialState:r,_queue:e=>{s.push(e),a||(a=!0,Promise.resolve().then(()=>{for(;s.length;)s.shift()();a=!1}).catch(e=>setTimeout(()=>{throw e})))},reset:()=>{l.setState(l.initialState)},setOptions:e=>{var t;t=tk(e,l.options),l.options=l.options.mergeOptions?l.options.mergeOptions(o,t):{...o,...t}},getState:()=>l.options.state,setState:e=>{null==l.options.onStateChange||l.options.onStateChange(e)},_getRowId:(e,t,n)=>{var i;return null!=(i=null==l.options.getRowId?void 0:l.options.getRowId(e,t,n))?i:`${n?[n.id,t].join("."):t}`},getCoreRowModel:()=>(l._getCoreRowModel||(l._getCoreRowModel=l.options.getCoreRowModel(l)),l._getCoreRowModel()),getRowModel:()=>l.getPaginationRowModel(),getRow:(e,t)=>{let n=(t?l.getPrePaginationRowModel():l.getRowModel()).rowsById[e];if(!n&&!(n=l.getCoreRowModel().rowsById[e]))throw Error();return n},_getDefaultColumnDef:tF(()=>[l.options.defaultColumn],e=>{var t;return e=null!=(t=e)?t:{},{header:e=>{let t=e.header.column.columnDef;return t.accessorKey?t.accessorKey:t.accessorFn?t.id:null},cell:e=>{var t,n;return null!=(t=null==(n=e.renderValue())||null==n.toString?void 0:n.toString())?t:null},...l._features.reduce((e,t)=>Object.assign(e,null==t.getDefaultColumnDef?void 0:t.getDefaultColumnDef()),{}),...e}},tA(e,"debugColumns","_getDefaultColumnDef")),_getColumnDefs:()=>l.options.columns,getAllColumns:tF(()=>[l._getColumnDefs()],e=>{let t=function(e,n,i){return void 0===i&&(i=0),e.map(e=>{let o=function(e,t,n,i){var l,o;let r,s={...e._getDefaultColumnDef(),...t},a=s.accessorKey,d=null!=(l=null!=(o=s.id)?o:a?"function"==typeof String.prototype.replaceAll?a.replaceAll(".","_"):a.replace(/\./g,"_"):void 0)?l:"string"==typeof s.header?s.header:void 0;if(s.accessorFn?r=s.accessorFn:a&&(r=a.includes(".")?e=>{let t=e;for(let e of a.split(".")){var n;t=null==(n=t)?void 0:n[e]}return t}:e=>e[s.accessorKey]),!d)throw Error();let c={id:`${String(d)}`,accessorFn:r,parent:i,depth:n,columnDef:s,columns:[],getFlatColumns:tF(()=>[!0],()=>{var e;return[c,...null==(e=c.columns)?void 0:e.flatMap(e=>e.getFlatColumns())]},tA(e.options,"debugColumns","column.getFlatColumns")),getLeafColumns:tF(()=>[e._getOrderColumnsFn()],e=>{var t;return null!=(t=c.columns)&&t.length?e(c.columns.flatMap(e=>e.getLeafColumns())):[c]},tA(e.options,"debugColumns","column.getLeafColumns"))};for(let t of e._features)null==t.createColumn||t.createColumn(c,e);return c}(l,e,i,n);return o.columns=e.columns?t(e.columns,o,i+1):[],o})};return t(e)},tA(e,"debugColumns","getAllColumns")),getAllFlatColumns:tF(()=>[l.getAllColumns()],e=>e.flatMap(e=>e.getFlatColumns()),tA(e,"debugColumns","getAllFlatColumns")),_getAllFlatColumnsById:tF(()=>[l.getAllFlatColumns()],e=>e.reduce((e,t)=>(e[t.id]=t,e),{}),tA(e,"debugColumns","getAllFlatColumnsById")),getAllLeafColumns:tF(()=>[l.getAllColumns(),l._getOrderColumnsFn()],(e,t)=>t(e.flatMap(e=>e.getLeafColumns())),tA(e,"debugColumns","getAllLeafColumns")),getColumn:e=>l._getAllFlatColumnsById()[e]};Object.assign(l,d);for(let e=0;e<l._features.length;e++){let t=l._features[e];null==t||null==t.createTable||t.createTable(l)}return l}(t)})),[i,l]=r.useState(()=>n.current.initialState);return n.current.setOptions(t=>({...t,...e,state:{...i,...e.state},onStateChange:t=>{l(t),null==e.onStateChange||e.onStateChange(t)}})),n.current}({data:d,columns:s,getCoreRowModel:e=>tF(()=>[e.options.data],t=>{let n={rows:[],flatRows:[],rowsById:{}},i=function(t,l,o){void 0===l&&(l=0);let r=[];for(let a=0;a<t.length;a++){let d=tz(e,e._getRowId(t[a],a,o),t[a],a,l,void 0,null==o?void 0:o.id);if(n.flatRows.push(d),n.rowsById[d.id]=d,r.push(d),e.options.getSubRows){var s;d.originalSubRows=e.options.getSubRows(t[a],a),null!=(s=d.originalSubRows)&&s.length&&(d.subRows=i(d.originalSubRows,l+1,d))}}return r};return n.rows=i(t),n},tA(e.options,"debugTable","getRowModel",()=>e._autoResetPageIndex())),getFilteredRowModel:e=>tF(()=>[e.getPreFilteredRowModel(),e.getState().columnFilters,e.getState().globalFilter],(t,n,i)=>{var l,o,r,s,a,d,c,u,p,m;let h,g,f,x,b,y,v,j,w,S;if(!t.rows.length||!(null!=n&&n.length)&&!i){for(let e=0;e<t.flatRows.length;e++)t.flatRows[e].columnFilters={},t.flatRows[e].columnFiltersMeta={};return t}let I=[],C=[];(null!=n?n:[]).forEach(t=>{var n;let i=e.getColumn(t.id);if(!i)return;let l=i.getFilterFn();l&&I.push({id:t.id,filterFn:l,resolvedValue:null!=(n=null==l.resolveFilterValue?void 0:l.resolveFilterValue(t.value))?n:t.value})});let _=(null!=n?n:[]).map(e=>e.id),T=e.getGlobalFilterFn(),R=e.getAllLeafColumns().filter(e=>e.getCanGlobalFilter());i&&T&&R.length&&(_.push("__global__"),R.forEach(e=>{var t;C.push({id:e.id,filterFn:T,resolvedValue:null!=(t=null==T.resolveFilterValue?void 0:T.resolveFilterValue(i))?t:i})}));for(let e=0;e<t.flatRows.length;e++){let n=t.flatRows[e];if(n.columnFilters={},I.length)for(let e=0;e<I.length;e++){let t=(h=I[e]).id;n.columnFilters[t]=h.filterFn(n,t,h.resolvedValue,e=>{n.columnFiltersMeta[t]=e})}if(C.length){for(let e=0;e<C.length;e++){let t=(g=C[e]).id;if(g.filterFn(n,t,g.resolvedValue,e=>{n.columnFiltersMeta[t]=e})){n.columnFilters.__global__=!0;break}}!0!==n.columnFilters.__global__&&(n.columnFilters.__global__=!1)}}return l=t.rows,o=e=>{for(let t=0;t<_.length;t++)if(!1===e.columnFilters[_[t]])return!1;return!0},e.options.filterFromLeafRows?(r=l,s=o,f=[],x={},b=null!=(d=(a=e).options.maxLeafRowFilterDepth)?d:100,{rows:(y=function(e,t){void 0===t&&(t=0);let n=[];for(let l=0;l<e.length;l++){var i;let o=e[l],r=tz(a,o.id,o.original,o.index,o.depth,void 0,o.parentId);if(r.columnFilters=o.columnFilters,null!=(i=o.subRows)&&i.length&&t<b){if(r.subRows=y(o.subRows,t+1),s(o=r)&&!r.subRows.length||s(o)||r.subRows.length){n.push(o),x[o.id]=o,f.push(o);continue}}else s(o=r)&&(n.push(o),x[o.id]=o,f.push(o))}return n})(r),flatRows:f,rowsById:x}):(c=l,u=o,v=[],j={},w=null!=(m=(p=e).options.maxLeafRowFilterDepth)?m:100,{rows:(S=function(e,t){void 0===t&&(t=0);let n=[];for(let l=0;l<e.length;l++){let o=e[l];if(u(o)){var i;if(null!=(i=o.subRows)&&i.length&&t<w){let e=tz(p,o.id,o.original,o.index,o.depth,void 0,o.parentId);e.subRows=S(o.subRows,t+1),o=e}n.push(o),v.push(o),j[o.id]=o}}return n})(c),flatRows:v,rowsById:j})},tA(e.options,"debugTable","getFilteredRowModel",()=>e._autoResetPageIndex())),getPaginationRowModel:e=>tF(()=>[e.getState().pagination,e.getPrePaginationRowModel(),e.options.paginateExpandedRows?void 0:e.getState().expanded],(t,n)=>{let i;if(!n.rows.length)return n;let{pageSize:l,pageIndex:o}=t,{rows:r,flatRows:s,rowsById:a}=n,d=l*o;if(r=r.slice(d,d+l),e.options.paginateExpandedRows)i={rows:r,flatRows:s,rowsById:a};else{var c;let e,t;c={rows:r,flatRows:s,rowsById:a},e=[],t=n=>{var i;e.push(n),null!=(i=n.subRows)&&i.length&&n.getIsExpanded()&&n.subRows.forEach(t)},c.rows.forEach(t),i={rows:e,flatRows:c.flatRows,rowsById:c.rowsById}}i.flatRows=[];let u=e=>{i.flatRows.push(e),e.subRows.length&&e.subRows.forEach(u)};return i.rows.forEach(u),i},tA(e.options,"debugTable","getPaginationRowModel")),autoResetPageIndex:!1,initialState:{columnPinning:{left:["selected","Preview"]},pagination:{pageSize:25},columnVisibility:a},getRowId:e=>e._id,meta:{selectedAnchor:p,setSelectedAnchor:m,patchDocument:(e,t,n)=>null}}),{rows:f}=g.getRowModel();(0,r.useEffect)(()=>(t({type:"TERMS_TYPE_ADD",schemaType:e}),()=>{t({type:"TERMS_TYPE_REMOVE",schemaType:e})}),[e,t]);let x=(0,r.useCallback)(e=>(0,n.jsx)(l.Box,{as:"tr",paddingY:2,style:{display:"flex",width:"100%"},children:e.getVisibleCells().map(t=>(0,n.jsx)(aK,{...t},e.original._id+t.id))},e.original._id+e.id),[]),b=`Total: ${h} rows, showing ${f.length} rows`;return(0,n.jsxs)(de,{direction:"column",paddingX:3,"data-testid":"document-sheet-list-pane",children:[(0,n.jsxs)(l.Flex,{direction:"row",align:"center",paddingY:3,paddingX:1,justify:"space-between",children:[(0,n.jsxs)(l.Flex,{direction:"row",align:"center",children:[(0,n.jsx)(a2,{}),(0,n.jsx)(l.Text,{size:0,muted:!0,children:b})]}),(0,n.jsx)(a0,{table:g})]}),(0,n.jsx)(dt,{children:(0,n.jsx)(aH,{table:g,children:(0,n.jsxs)(dn,{children:[(0,n.jsx)("thead",{children:g.getHeaderGroups().map(e=>(0,n.jsx)(l.Box,{as:"tr",children:e.headers.map(t=>(0,n.jsx)(a6,{header:t,headerGroup:e},t.id))},e.id))}),(0,n.jsx)("tbody",{children:g.getRowModel().rows.map(x)})]})})}),(0,n.jsx)(l.Flex,{justify:"flex-end",padding:3,gap:4,paddingY:5,children:(0,n.jsx)(a8,{table:g})})]})}function dl(e){let t,l,o,r=(0,i.c)(7),s=(0,u.useSchema)(),a=e.pane.schemaTypeName;if(r[0]!==s||r[1]!==a?(l=!(t=s.get(a))||!(0,p.isDocumentSchemaType)(t),r[0]=s,r[1]=a,r[2]=t,r[3]=l):(t=r[2],l=r[3]),l)throw Error(`Schema type "${a}" not found or not a document schema`);return r[4]!==e||r[5]!==t?(o=(0,n.jsx)(u.SearchProvider,{children:(0,n.jsx)(di,{...e,documentSchemaType:t})}),r[4]=e,r[5]=t,r[6]=o):o=r[6],o}function dr(e){let[t,n]=(0,r.useState)(e);return(0,e8.default)(t,e)?t:(n(e),e)}let ds=(0,r.memo)(function(e){let t,l,o,s,a,d,c,p,m,h,g,f=(0,i.c)(41),{index:x,isSelected:b,pane:y,paneKey:v}=e,{name:j}=(0,u.useSource)(),{defaultLayout:w,initialValueTemplates:S,menuItemGroups:I,menuItems:C,options:_}=y,T=void 0===S?u.EMPTY_ARRAY:S,{defaultOrdering:R,filter:P}=_,k=void 0===R?u.EMPTY_ARRAY:R,E=dr(_.params||ag),D=y.source;e:{let e;f[0]!==P||f[1]!==E?(e=aw(P,E),f[0]=P,f[1]=E,f[2]=e):e=f[2];let n=e;if(n?.length===1){t=n[0];break e}t=null}let F=t,[A,V]=iM("layout",F??y.id,void 0===w?"default":w),{title:M}=(0,u.useI18nText)(y);f[3]!==k?(l=k?.length>0?{by:k}:ah,f[3]=k,f[4]=l):l=f[4];let L=l,[z,O]=iM("sort-order",F??y.id,L);f[5]===Symbol.for("react.memo_cache_sentinel")?(o={},f[5]=o):o=f[5];let[B,N]=(0,r.useState)(o);f[6]!==C?(s=C?.map(e=>e.id?e:{...e,id:am(e)}),f[6]=C,f[7]=s):s=f[7];let $=s;f[8]!==B||f[9]!==A||f[10]!==$||f[11]!==z?(a=(e=>{let{menuItems:t,sortOrderRaw:n,layout:i,customMenuItemState:l={}}=e;return t?.map(e=>{if(e.params?.layout)return{...e,selected:i===e.params?.layout};if(e?.params?.by)return{...e,selected:(0,e5.isEqual)(n?.by,e?.params?.by||u.EMPTY_ARRAY)};if(e.id&&e.id in l){let t=l[e.id],n=e.params?.value??!0;return{...e,selected:(0,e5.isEqual)(t,n)}}return{...e,selected:e.selected??!1}})})({menuItems:$,sortOrderRaw:z,layout:A,customMenuItemState:B}),f[8]=B,f[9]=A,f[10]=$,f[11]=z,f[12]=a):a=f[12];let H=a,G="sheetList"===A;f[13]!==G||f[14]!==A||f[15]!==e||f[16]!==z?(d=G?(0,n.jsx)(dl,{...e},e.pane.id):(0,n.jsx)(az,{...e,sortOrder:z,layout:A}),f[13]=G,f[14]=A,f[15]=e,f[16]=z,f[17]=d):d=f[17];let U=d,q=D||j;return f[18]!==G?(c=G?{}:{currentMaxWidth:350,maxWidth:640},f[18]=G,f[19]=c):c=f[19],f[20]!==y.source?(p=!1,f[20]=y.source,f[21]=p):p=f[21],f[22]!==B||f[23]!==x||f[24]!==T||f[25]!==I||f[26]!==H||f[27]!==V||f[28]!==O||f[29]!==M?(m=(0,n.jsx)(aN,{customMenuItemState:B,index:x,initialValueTemplates:T,menuItemGroups:I,menuItems:H,setLayout:V,setSortOrder:O,setCustomMenuItemState:N,title:M}),f[22]=B,f[23]=x,f[24]=T,f[25]=I,f[26]=H,f[27]=V,f[28]=O,f[29]=M,f[30]=m):m=f[30],f[31]!==b||f[32]!==v||f[33]!==U||f[34]!==c||f[35]!==p||f[36]!==m?(h=(0,n.jsxs)(nN,{"data-ui":"DocumentListPane",id:v,minWidth:320,...c,selected:b,children:[p,m,U]}),f[31]=b,f[32]=v,f[33]=U,f[34]=c,f[35]=p,f[36]=m,f[37]=h):h=f[37],f[38]!==h||f[39]!==q?(g=(0,n.jsx)(u.SourceProvider,{name:q,children:h}),f[38]=h,f[39]=q,f[40]=g):g=f[40],g});ds.displayName="Memo(PaneContainer)";let da=e=>{let{liveEditSchemaType:t,version:n}=e;return t&&!n?{label:"Live",color:"danger"}:null};da.displayName="LiveEditBadge";let dd={activePanes:[]};function dc(e){dd.activePanes=e}function du(e,t,n,i){let l=n?.panes||[],o=dd.activePanes||[],r=t.id||(0,eS.uuid)();for(let n=o.length-1;n>=0;n--){let s=o[n];if("object"==typeof s&&(s.canHandleIntent?.(e,t,{pane:s,index:n})||"documentList"===s.type&&s.schemaTypeName===t.type&&"_type == $type"===s.options.filter)){let o=function(e,{template:t,version:n,inspect:i,comment:l,task:o,scheduledDraft:r}){switch(e){case"create":return{template:t,version:n};case"edit":return{inspect:i,comment:l,task:o,scheduledDraft:r};default:return lF}}(e,t);return{panes:l.slice(0,n).concat([[{id:r,params:o,payload:i}]])}}}return{intent:e,params:t,payload:i}}let dp=(0,eI.styled)(u.ScrollContainer).withConfig({displayName:"Scroller",componentId:"sc-jiqgdv-0"})`height:100%;overflow:auto;position:relative;scroll-behavior:smooth;`,dm=(0,eI.styled)(l.Box).withConfig({displayName:"Grid",componentId:"sc-jiqgdv-1"})`&:not([hidden]){display:grid;}grid-template-columns:48px 1fr;align-items:center;gap:0.25em;`;function dh(e){let t,o,s,a,d,c,p,m,h,g,f,x,b=(0,i.c)(39),{showChanges:y}=e,{documentId:v,schemaType:j,timelineError:w,timelineStore:S,value:I}=ih(),{selectedReleaseId:C}=(0,u.usePerspective)(),[_,R]=(0,r.useState)(null),P=(0,u.useTimelineSelector)(S,dv),k=(0,u.useTimelineSelector)(S,dy),E=(0,u.useTimelineSelector)(S,db),D=(0,u.useTimelineSelector)(S,dx),F=(0,u.useTimelineSelector)(S,df),A="loading"===D,V=!E,{t:M}=(0,u.useTranslation)(T);b[0]!==k||b[1]!==v||b[2]!==V||b[3]!==j||b[4]!==I?(t={documentId:v,schemaType:j,FieldWrapper:dg,rootDiff:k,isComparingCurrent:V,value:I,showFromValue:!0},b[0]=k,b[1]=v,b[2]=V,b[3]=j,b[4]=I,b[5]=t):t=b[5];let L=t;if(C){let e;return b[6]===Symbol.for("react.memo_cache_sentinel")?(e=(0,n.jsx)(l.Flex,{"data-testid":"review-changes-pane",direction:"column",height:"fill",children:(0,n.jsx)(l.Card,{flex:1,padding:2,paddingTop:0,children:(0,n.jsx)(ri,{versionError:!0})})}),b[6]=e):e=b[6],e}return b[7]!==M?(o=M("changes.from.label"),b[7]=M,b[8]=o):o=b[8],b[9]!==o?(s=(0,n.jsx)(l.Text,{size:1,muted:!0,children:o}),b[9]=o,b[10]=s):s=b[10],b[11]!==F?(a=(0,n.jsx)(rr,{mode:"since",chunk:F,placement:"bottom-start"}),b[11]=F,b[12]=a):a=b[12],b[13]!==M?(d=M("changes.to.label"),b[13]=M,b[14]=d):d=b[14],b[15]!==d?(c=(0,n.jsx)(l.Text,{size:1,muted:!0,children:d}),b[15]=d,b[16]=c):c=b[16],b[17]!==P?(p=(0,n.jsx)(rr,{chunk:P,mode:"rev",placement:"bottom-end"}),b[17]=P,b[18]=p):p=b[18],b[19]!==s||b[20]!==a||b[21]!==c||b[22]!==p?(m=(0,n.jsx)(l.Box,{padding:3,children:(0,n.jsxs)(dm,{paddingX:2,paddingBottom:2,children:[s,a,c,p]})}),b[19]=s,b[20]=a,b[21]=c,b[22]=p,b[23]=m):m=b[23],b[24]!==k||b[25]!==L||b[26]!==A||b[27]!==j||b[28]!==y||b[29]!==w?(h=y&&(0,n.jsx)(dj,{diff:k,documentContext:L,error:w,loading:A,schemaType:j}),b[24]=k,b[25]=L,b[26]=A,b[27]=j,b[28]=y,b[29]=w,b[30]=h):h=b[30],b[31]!==h?(g=(0,n.jsx)(dp,{"data-ui":"Scroller",ref:R,children:(0,n.jsx)(l.Box,{flex:1,paddingX:3,height:"fill",children:h})}),b[31]=h,b[32]=g):g=b[32],b[33]!==_||b[34]!==g?(f=(0,n.jsx)(l.Card,{flex:1,paddingX:2,paddingY:2,children:(0,n.jsx)(l.BoundaryElementProvider,{element:_,children:g})}),b[33]=_,b[34]=g,b[35]=f):f=b[35],b[36]!==f||b[37]!==m?(x=(0,n.jsxs)(l.Flex,{"data-testid":"review-changes-pane",direction:"column",height:"fill",overflow:"hidden",children:[m,f]}),b[36]=f,b[37]=m,b[38]=x):x=b[38],x}function dg(e){return(0,n.jsx)(u.ChangeFieldWrapper,{...e,hasRevertHover:!1})}function df(e){return e.sinceTime}function dx(e){return e.selectionState}function db(e){return e.onOlderRevision}function dy(e){return e.diff}function dv(e){return e.revTime}function dj(e){let t,l,o=(0,i.c)(9),{error:r,diff:a,documentContext:d,loading:c,schemaType:p}=e;if(r){let e;return o[0]===Symbol.for("react.memo_cache_sentinel")?(e=(0,n.jsx)(u.NoChanges,{}),o[0]=e):e=o[0],e}if(c){let e;return o[1]===Symbol.for("react.memo_cache_sentinel")?(e=(0,n.jsx)(u.LoadingBlock,{showText:!0}),o[1]=e):e=o[1],e}if(!a){let e;return o[2]===Symbol.for("react.memo_cache_sentinel")?(e=(0,n.jsx)(u.NoChanges,{}),o[2]=e):e=o[2],e}return o[3]!==a||o[4]!==p?(t=(0,n.jsx)(u.ChangeList,{diff:a,schemaType:p}),o[3]=a,o[4]=p,o[5]=t):t=o[5],o[6]!==d||o[7]!==t?(l=(0,n.jsx)(s.DocumentChangeContext.Provider,{value:d,children:t}),o[6]=d,o[7]=t,o[8]=l):l=o[8],l}function dw(e){let t,o,r,s,a,d,c,p,h=(0,i.c)(27),{event:g,isSelected:f,onSelect:x,optionsMenu:b}=e,{t:y}=(0,u.useTranslation)("studio");h[0]!==g?(t=!(0,u.isDeleteDocumentVersionEvent)(g)&&!(0,u.isDeleteDocumentGroupEvent)(g)&&!(0,u.isUnpublishDocumentEvent)(g)&&!(0,u.isScheduleDocumentVersionEvent)(g)&&!(0,u.isUnscheduleDocumentVersionEvent)(g),h[0]=g,h[1]=t):t=h[1];let v=t;h[2]!==g||h[3]!==v||h[4]!==x?(o=e=>{e.preventDefault(),e.stopPropagation(),v&&x(g)},h[2]=g,h[3]=v,h[4]=x,h[5]=o):o=h[5];let j=o;h[6]!==v||h[7]!==y?(r=v?"":y("changes.not-selectable"),h[6]=v,h[7]=y,h[8]=r):r=h[8];let w=v?"button":"div",S=v?"pointer":"default";return h[9]!==S?(s={cursor:S,width:"100%"},h[9]=S,h[10]=s):s=h[10],h[11]!==g?(a=(0,n.jsx)(u.Event,{event:g,showChangesBy:"tooltip"}),h[11]=g,h[12]=a):a=h[12],h[13]!==g.timestamp||h[14]!==j||h[15]!==f||h[16]!==w||h[17]!==s||h[18]!==a?(d=(0,n.jsx)(l.Card,{as:w,onClick:j,padding:2,pressed:f,radius:2,"data-ui":"timelineItem","data-testid":"timeline-item-button","data-chunk-timestamp":g.timestamp,style:s,children:a}),h[13]=g.timestamp,h[14]=j,h[15]=f,h[16]=w,h[17]=s,h[18]=a,h[19]=d):d=h[19],h[20]!==v||h[21]!==r||h[22]!==d?(c=(0,n.jsx)(m.Tooltip,{content:r,disabled:v,children:d}),h[20]=v,h[21]=r,h[22]=d,h[23]=c):c=h[23],h[24]!==b||h[25]!==c?(p=(0,n.jsxs)(l.Flex,{gap:1,children:[c,b]}),h[24]=b,h[25]=c,h[26]=p):p=h[26],p}function dS(e){let t,o,r,s,a,d,p,g,f,x,b,y,v,j=(0,i.c)(47),{event:w}=e,{t:S}=(0,u.useTranslation)(T),{t:I}=(0,u.useTranslation)(),C=(0,l.usePortal)(),{params:_,setParams:R}=lr(),P=(0,u.useSetPerspective)(),{document:k}=(0,u.useWorkspace)(),{drafts:E}=k,{enabled:D}=E;j[0]!==w.id||j[1]!==w.versionId||j[2]!==w.versionRevisionId||j[3]!==_||j[4]!==R?(t=()=>{R({..._,rev:w.versionRevisionId||"@lastPublished",since:void 0,historyEvent:w.id,historyVersion:(0,c.getVersionFromId)(w.versionId)})},j[0]=w.id,j[1]=w.versionId,j[2]=w.versionRevisionId,j[3]=_,j[4]=R,j[5]=t):t=j[5];let F=t;j[6]!==w.versionRevisionId||j[7]!==D||j[8]!==_||j[9]!==R||j[10]!==P?(o=()=>{R({..._,rev:w.versionRevisionId,preserveRev:"true",since:void 0}),setTimeout(()=>{P(D?"drafts":"published")},100)},j[6]=w.versionRevisionId,j[7]=D,j[8]=_,j[9]=R,j[10]=P,j[11]=o):o=j[11];let A=o,V=w.release?.metadata?.title;j[12]!==I?(r=I("release.placeholder-untitled-release"),j[12]=I,j[13]=r):r=j[13];let M=r;j[14]!==w.release?(s=e=>{let{children:t}=e;return(0,n.jsx)(u.VersionInlineBadge,{$tone:w.release?(0,u.isReleaseDocument)(w.release)?(0,u.getReleaseTone)(w.release):"default":void 0,children:t})},j[14]=w.release,j[15]=s):s=j[15];let L=s;j[16]!==w.release?(a=w.release&&!(0,u.isReleaseDocument)(w.release),j[16]=w.release,j[17]=a):a=j[17];let z=a,O=`timeline-item-menu-button-${w.versionId}`;j[18]!==S?(d=S("timeline-item.menu-button.aria-label"),j[18]=S,j[19]=d):d=j[19],j[20]!==w.release||j[21]!==z||j[22]!==S?(p=z?S("timeline-item.not-found-release.tooltip",{releaseId:w.release?._id?(0,u.getReleaseIdFromReleaseDocumentId)(w.release._id):void 0}):S("timeline-item.menu-button.tooltip"),j[20]=w.release,j[21]=z,j[22]=S,j[23]=p):p=j[23],j[24]!==p?(g={content:p},j[24]=p,j[25]=g):g=j[25],j[26]!==z||j[27]!==g||j[28]!==d?(f=(0,n.jsx)(u.ContextMenuButton,{"aria-label":d,tooltipProps:g,disabled:z}),j[26]=z,j[27]=g,j[28]=d,j[29]=f):f=j[29],j[30]!==L||j[31]!==w.release||j[32]!==w.versionRevisionId||j[33]!==A||j[34]!==F||j[35]!==M||j[36]!==V||j[37]!==S?(x=(0,n.jsx)(l.Menu,{padding:1,children:w.release?(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(h.IntentLink,{intent:u.RELEASES_INTENT,params:{id:(0,u.getReleaseIdFromReleaseDocumentId)(w.release._id)},style:{textDecoration:"none"},children:(0,n.jsx)(l.MenuItem,{padding:3,children:(0,n.jsx)(l.Flex,{align:"center",justify:"flex-start",children:(0,n.jsx)(l.Text,{size:1,style:{textDecoration:"none"},children:(0,n.jsx)(u.ReleaseTitle,{title:V,fallback:M,children:e=>{let{displayTitle:t}=e;return(0,n.jsx)(u.Translate,{components:{VersionBadge:e=>{let{children:t}=e;return(0,n.jsx)(L,{children:t})}},i18nKey:"events.open.release",values:{releaseTitle:t},t:S})}})})})})}),(0,n.jsx)(l.MenuItem,{onClick:F,children:(0,n.jsx)(l.Flex,{align:"center",justify:"flex-start",children:(0,n.jsx)(l.Text,{size:1,children:(0,n.jsx)(u.ReleaseTitle,{title:V,fallback:M,children:e=>{let{displayTitle:t}=e;return(0,n.jsx)(u.Translate,{components:{VersionBadge:e=>{let{children:t}=e;return(0,n.jsx)(L,{children:t})}},i18nKey:"events.inspect.release",values:{releaseTitle:t},t:S})}})})})})]}):(0,n.jsx)(l.MenuItem,{onClick:A,disabled:!w.versionRevisionId,children:(0,n.jsx)(l.Flex,{align:"center",children:(0,n.jsx)(l.Text,{size:1,children:(0,n.jsx)(u.Translate,{components:{VersionBadge:dI},i18nKey:"events.open.draft",t:S})})})})}),j[30]=L,j[31]=w.release,j[32]=w.versionRevisionId,j[33]=A,j[34]=F,j[35]=M,j[36]=V,j[37]=S,j[38]=x):x=j[38];let B=!C.elements?.[ro]||ro;return j[39]===Symbol.for("react.memo_cache_sentinel")?(b=["bottom-end","bottom-start"],j[39]=b):b=j[39],j[40]!==B?(y={portal:B,placement:"bottom",fallbackPlacements:b},j[40]=B,j[41]=y):y=j[41],j[42]!==f||j[43]!==x||j[44]!==y||j[45]!==O?(v=(0,n.jsx)(m.MenuButton,{id:O,button:f,menu:x,popover:y}),j[42]=f,j[43]=x,j[44]=y,j[45]=O,j[46]=v):v=j[46],v}function dI(e){let{children:t}=e;return(0,n.jsx)(u.VersionInlineBadge,{$tone:"caution",children:t})}let dC=a.motion.create(l.Box),d_={initial:{opacity:0},animate:{opacity:1},exit:{opacity:0}},dT=e=>{let t,o,s,a,d,c,p,m,h,g,f,x,b=(0,i.c)(38),{events:y,hasMoreEvents:v,selectedEventId:j,onLoadMore:w,onSelect:S,listMaxHeight:I,fetchEventChildren:C}=e,_=void 0===I?"calc(100vh - 280px)":I,[T,R]=(0,r.useState)(!1),{t:P}=(0,u.useTranslation)("studio");b[0]!==y||b[1]!==j?(t=()=>{if(j){let e=y.find(e=>e.id===j);if(e&&"parentId"in e&&e.parentId)return new Set([e.parentId])}return new Set},b[0]=y,b[1]=j,b[2]=t):t=b[2];let[k,E]=(0,r.useState)(t);b[3]===Symbol.for("react.memo_cache_sentinel")?(o=new Set,b[3]=o):o=b[3];let[D,F]=(0,r.useState)(o);b[4]!==y||b[5]!==k?(s=y.filter(e=>(0,u.isCreateDocumentVersionEvent)(e)&&e.parentId?y[y.length-1].id===e.id||k.has(e.parentId):!(0,u.isEditDocumentVersionEvent)(e)||!e.parentId||k.has(e.parentId)),b[4]=y,b[5]=k,b[6]=s):s=b[6];let A=s;b[7]!==C?(a=e=>async()=>{let t=e.id,n=!1;E(e=>{let i=new Set(e);return e.has(t)?i.delete(t):(n=!0,i.add(t)),i}),n&&(F(e=>{let n=new Set(e);return n.add(t),n}),await C(e),F(e=>{let n=new Set(e);return n.delete(t),n}))},b[7]=C,b[8]=a):a=b[8];let V=a;b[9]!==S?(d=e=>{S(e)},b[9]=S,b[10]=d):d=b[10];let M=d;b[11]!==k||b[12]!==V?(c=e=>{let t=(0,u.getDocumentVariantType)(e.documentId);return(0,u.isPublishDocumentVersionEvent)(e)&&"published"===t?(0,n.jsx)(dS,{event:e}):(0,u.isPublishDocumentVersionEvent)(e)&&"draft"===t&&e.creationEvent||(0,u.isDeleteDocumentVersionEvent)(e)&&e.creationEvent?(0,n.jsx)(oY,{isExpanded:k.has(e.id),onExpand:V(e)}):null},b[11]=k,b[12]=V,b[13]=c):c=b[13];let L=c;b[14]!==A.length||b[15]!==D||b[16]!==M||b[17]!==v||b[18]!==L||b[19]!==j?(p=(e,t)=>{let{activeIndex:i}=t,o=(0,u.isCreateDocumentVersionEvent)(e)&&e.parentId&&D.has(e.parentId),r=i===A.length-1;return o?(0,n.jsx)(dC,{animate:{opacity:1},initial:{opacity:0},transition:{duration:.2,delay:.2},children:(0,n.jsx)(l.Flex,{align:"center",justify:"center",style:{height:57},children:(0,n.jsx)(l.Spinner,{})})}):(0,n.jsxs)(dC,{paddingBottom:1,paddingRight:1,animate:"animate",exit:"exit",initial:"initial",variants:"parentId"in e?d_:void 0,paddingLeft:((0,u.isEditDocumentVersionEvent)(e)||(0,u.isCreateDocumentVersionEvent)(e))&&e.parentId&&!r?4:1,children:[(0,n.jsx)(dw,{event:e,isSelected:e.id===j,onSelect:M,optionsMenu:L(e)}),r&&v&&(0,n.jsx)(u.LoadingBlock,{})]},e.timestamp)},b[14]=A.length,b[15]=D,b[16]=M,b[17]=v,b[18]=L,b[19]=j,b[20]=p):p=b[20];let z=p;if(b[21]===Symbol.for("react.memo_cache_sentinel")?(h=()=>R(!0),m=[],b[21]=m,b[22]=h):(m=b[21],h=b[22]),(0,r.useEffect)(h,m),b[23]!==A||b[24]!==j){let e;b[26]!==j?(e=e=>e.id===j,b[26]=j,b[27]=e):e=b[27],g=A.findIndex(e),b[23]=A,b[24]=j,b[25]=g}else g=b[25];let O=g,B=!O||T;return b[28]!==A||b[29]!==_||b[30]!==w||b[31]!==z||b[32]!==O||b[33]!==P?(f=A.length>0?(0,n.jsx)(oJ,{direction:"column",$maxHeight:_,id:"timeline-list-wrapper",children:(0,n.jsx)(u.CommandList,{activeItemDataAttr:"data-hovered",ariaLabel:P("timeline.list.aria-label"),autoFocus:"list",initialIndex:O,initialScrollAlign:"center",itemHeight:57,items:A,onEndReached:w,onEndReachedIndexOffset:20,overscan:5,renderItem:z,wrapAround:!1})}):(0,n.jsxs)(l.Stack,{padding:3,space:3,children:[(0,n.jsx)(l.Text,{size:1,weight:"medium",children:P("timeline.error.no-document-history-title")}),(0,n.jsx)(l.Text,{muted:!0,size:1,children:P("timeline.error.no-document-history-description")})]}),b[28]=A,b[29]=_,b[30]=w,b[31]=z,b[32]=O,b[33]=P,b[34]=f):f=b[34],b[35]!==B||b[36]!==f?(x=(0,n.jsx)(oZ,{$visible:B,"data-ui":"timeline",children:f}),b[35]=B,b[36]=f,b[37]=x):x=b[37],x};dT.displayName="EventsTimeline";let dR=(0,eI.styled)(m.Popover).withConfig({displayName:"Root",componentId:"sc-mrgvta-0"})`overflow:hidden;overflow:clip;`,dP={timestamp:{dateStyle:"medium",timeStyle:"short"}};function dk(e){let t,s,a,d,c,p,h,g,x,b,y,v,j,w,S,I,C=(0,i.c)(58),{event:_,events:T,mode:R,placement:P}=e,{setTimelineRange:k}=ih(),[E,D]=(0,r.useState)(!1),[F,A]=(0,r.useState)(null),[V,M]=(0,r.useState)(null),L=(0,o.useToast)(),{nextCursor:z,loading:O,error:B,findRangeForRevision:N,findRangeForSince:$,loadMoreEvents:H,expandEvent:G}=(0,u.useEvents)(),{t:U}=(0,u.useTranslation)("studio");C[0]===Symbol.for("react.memo_cache_sentinel")?(t=()=>{D(!0)},C[0]=t):t=C[0];let q=t;C[1]===Symbol.for("react.memo_cache_sentinel")?(s=()=>{D(!1)},C[1]=s):s=C[1];let W=s;C[2]!==F||C[3]!==E?(a=e=>{E&&("Escape"===e.key||"Tab"===e.key)&&(W(),F?.focus())},C[2]=F,C[3]=E,C[4]=a):a=C[4],(0,l.useGlobalKeyDown)(a),C[5]!==F||C[6]!==V?(d=()=>[F,V],C[5]=F,C[6]=V,C[7]=d):d=C[7],(0,l.useClickOutsideEvent)(E&&W,d),C[8]!==N||C[9]!==k||C[10]!==U||C[11]!==L?(c=e=>{try{(()=>{if((0,u.isDeleteDocumentVersionEvent)(e)||(0,u.isDeleteDocumentGroupEvent)(e)||(0,u.isUnpublishDocumentEvent)(e)||(0,u.isScheduleDocumentVersionEvent)(e)||(0,u.isUnscheduleDocumentVersionEvent)(e))return console.error("Event is not selectable");let[t,n]=N(e?.id);k(t,n),W()})()}catch(e){L.push({closable:!0,description:e.message,status:"error",title:U("timeline.error.unable-to-load-revision")})}},C[8]=N,C[9]=k,C[10]=U,C[11]=L,C[12]=c):c=C[12];let K=c;C[13]!==$||C[14]!==k||C[15]!==U||C[16]!==L?(p=e=>{try{let[t,n]=$(e.id);k(t,n),W()}catch(e){L.push({closable:!0,description:e.message,status:"error",title:U("timeline.error.unable-to-load-revision")})}},C[13]=$,C[14]=k,C[15]=U,C[16]=L,C[17]=p):p=C[17];let Y=p;C[18]!==H||C[19]!==O||C[20]!==z?(h=()=>{!O&&z&&H()},C[18]=H,C[19]=O,C[20]=z,C[21]=h):h=C[21];let X=h;e:{let e;if(B){let e;C[22]===Symbol.for("react.memo_cache_sentinel")?(e=(0,n.jsx)(ri,{}),C[22]=e):e=C[22],g=e;break e}let t=!!z,i=_?.id,l="rev"===R?K:Y;C[23]!==T||C[24]!==G||C[25]!==X||C[26]!==i||C[27]!==l||C[28]!==t?(e=(0,n.jsx)(dT,{events:T,fetchEventChildren:G,hasMoreEvents:t,selectedEventId:i,onLoadMore:X,onSelect:l}),C[23]=T,C[24]=G,C[25]=X,C[26]=i,C[27]=l,C[28]=t,C[29]=e):e=C[29],g=e}let J=g;C[30]!==_||C[31]!==U?(x=_?U(u.TIMELINE_ITEM_I18N_KEY_MAPPING[_.documentVariantType][_.type],{context:"timestamp",timestamp:new Date(_.timestamp),formatParams:dP}):U("timeline.latest-revision"),C[30]=_,C[31]=U,C[32]=x):x=C[32];let Z=x;C[33]!==_||C[34]!==T||C[35]!==U?(b=_?U(u.TIMELINE_ITEM_I18N_KEY_MAPPING[_.documentVariantType][_.type],{context:"timestamp",timestamp:new Date(_.timestamp),formatParams:dP}):T.length>0?U("timeline.since-version-missing"):U("timeline.no-previous-events"),C[33]=_,C[34]=T,C[35]=U,C[36]=b):b=C[36];let Q="rev"===R?Z:b;C[37]!==V?(y={"timeline-menu":V},C[37]=V,C[38]=y):y=C[38];let ee=y,et=E&&J,en=E?"timeline-menu-close-button":"timeline-menu-open-button",ei=O||!T.length,el=E?W:q;return C[39]===Symbol.for("react.memo_cache_sentinel")?(v={maxWidth:"100%"},C[39]=v):v=C[39],C[40]!==Q||C[41]!==O||C[42]!==U?(j=O?U("timeline.loading-history"):Q,C[40]=Q,C[41]=O,C[42]=U,C[43]=j):j=C[43],C[44]!==E||C[45]!==en||C[46]!==ei||C[47]!==el||C[48]!==j?(w=(0,n.jsx)(l.Flex,{width:"fill",children:(0,n.jsx)(m.Button,{"data-testid":en,disabled:ei,mode:"ghost",onClick:el,ref:A,selected:E,width:"fill",tooltipProps:null,justify:"space-between",style:v,iconRight:f.ChevronDownIcon,text:j})}),C[44]=E,C[45]=en,C[46]=ei,C[47]=el,C[48]=j,C[49]=w):w=C[49],C[50]!==E||C[51]!==P||C[52]!==et||C[53]!==w?(S=(0,n.jsx)(dR,{"data-testid":"timeline-menu",constrainSize:!0,content:et,"data-ui":"versionMenu",open:E,placement:P,matchReferenceWidth:!0,portal:!0,ref:M,children:w}),C[50]=E,C[51]=P,C[52]=et,C[53]=w,C[54]=S):S=C[54],C[55]!==ee||C[56]!==S?(I=(0,n.jsx)(l.PortalProvider,{__unstable_elements:ee,children:S}),C[55]=ee,C[56]=S,C[57]=I):I=C[57],I}let dE=(0,eI.styled)(u.ScrollContainer).withConfig({displayName:"Scroller",componentId:"sc-qjtu5v-0"})`height:100%;overflow:auto;position:relative;scroll-behavior:smooth;`,dD=(0,eI.styled)(l.Box).withConfig({displayName:"Grid",componentId:"sc-qjtu5v-1"})`&:not([hidden]){display:grid;}grid-template-columns:48px 1fr;align-items:center;gap:0.25em;`,dF=(0,eI.styled)(l.Flex).withConfig({displayName:"SpinnerContainer",componentId:"sc-qjtu5v-2"})`width:100%;position:absolute;bottom:-4px;`,dA={diff:null,loading:!0,error:null},dV=()=>{let e,t,o,r,a,d,c,p,m,h,g,f=(0,i.c)(31),{documentId:x,schemaType:b,editState:y,displayed:v}=ih(),{selectedPerspective:j,selectedPerspectiveName:w,selectedReleaseId:S}=(0,u.usePerspective)(),{t:I}=(0,u.useTranslation)(T);f[0]!==v||f[1]!==y?.published?(e=(0,eC.diffInput)((0,eC.wrap)(y?.published??{},{author:""}),(0,eC.wrap)(v??{},{author:""})),f[0]=v,f[1]=y?.published,f[2]=e):e=f[2];let C=e;return(!S||y?.version)&&("drafts"!==j||y?.draft)&&"published"!==w&&v?._rev?(f[3]!==I?(t=I("events.compare-with-published.title"),f[3]=I,f[4]=t):t=f[4],f[5]!==t?(o=(0,n.jsx)(l.Text,{size:1,weight:"medium",children:t}),f[5]=t,f[6]=o):o=f[6],f[7]!==j?(r=(0,u.isReleaseDocument)(j)?j.metadata?.title:"draft",f[7]=j,f[8]=r):r=f[8],f[9]!==r?(a={version:r},f[9]=r,f[10]=a):a=f[10],f[11]!==I||f[12]!==a?(d=(0,n.jsx)(l.Text,{size:1,muted:!0,children:(0,n.jsx)(u.Translate,{i18nKey:"events.compare-with-published.description",t:I,values:a})}),f[11]=I,f[12]=a,f[13]=d):d=f[13],f[14]!==o||f[15]!==d?(c=(0,n.jsx)(l.Card,{borderBottom:!0,paddingBottom:3,children:(0,n.jsxs)(l.Stack,{space:3,paddingTop:1,children:[o,d]})}),f[14]=o,f[15]=d,f[16]=c):c=f[16],f[17]!==v||f[18]!==x||f[19]!==C||f[20]!==b?(p={documentId:x,schemaType:b,rootDiff:C,isComparingCurrent:!0,FieldWrapper:dB,value:v,showFromValue:!0},f[17]=v,f[18]=x,f[19]=C,f[20]=b,f[21]=p):p=f[21],f[22]!==C||f[23]!==b?(m=(0,n.jsx)(l.Box,{paddingY:1,children:(0,n.jsx)(u.ChangeList,{diff:C,schemaType:b})}),f[22]=C,f[23]=b,f[24]=m):m=f[24],f[25]!==p||f[26]!==m?(h=(0,n.jsx)(s.DocumentChangeContext.Provider,{value:p,children:m}),f[25]=p,f[26]=m,f[27]=h):h=f[27],f[28]!==c||f[29]!==h?(g=(0,n.jsxs)(l.Stack,{space:2,marginBottom:3,children:[c,h]}),f[28]=c,f[29]=h,f[30]=g):g=f[30],g):null};function dM(e){let t,o,s,d,c,p,m,h,g,f,x,b,y,v,j,w,S,I,C,_=(0,i.c)(83),{showChanges:T}=e,{documentId:R,schemaType:P,timelineError:k,value:E,formState:D}=ih(),[F,A]=(0,r.useState)(null),{events:V,revision:M,sinceRevision:L,getChangesList:z}=(0,u.useEvents)(),O=!M?.revisionId;_[0]!==z?(t=z(),_[0]=z,_[1]=t):t=_[1];let B=t,{diff:N,loading:$,error:H}=(0,e_.useObservable)(B,dA),{t:G}=(0,u.useTranslation)("studio");_[2]!==N||_[3]!==R||_[4]!==D?.readOnly||_[5]!==O||_[6]!==P||_[7]!==E?(o=()=>({documentId:R,schemaType:P,FieldWrapper:dL,rootDiff:N,isComparingCurrent:O&&!D?.readOnly,value:E,showFromValue:!0}),_[2]=N,_[3]=R,_[4]=D?.readOnly,_[5]=O,_[6]=P,_[7]=E,_[8]=o):o=_[8],_[9]!==o?(s=o(),_[9]=o,_[10]=s):s=_[10];let U=s;e:{let e,t,n;if(!V){let e;_[11]===Symbol.for("react.memo_cache_sentinel")?(e=[null,null],_[11]=e):e=_[11],d=e;break e}_[12]!==V||_[13]!==L?.revisionId?(e=V.find(e=>e.id===L?.revisionId)||null,_[12]=V,_[13]=L?.revisionId,_[14]=e):e=_[14],_[15]!==V||_[16]!==M?.revisionId?(t=V.find(e=>e.id===M?.revisionId)||V[0],_[15]=V,_[16]=M?.revisionId,_[17]=t):t=_[17],_[18]!==e||_[19]!==t?(n=[e,t],_[18]=e,_[19]=t,_[20]=n):n=_[20],d=n}let[q,W]=d;t:{let e;if(!W){let e;_[21]!==V?(e=V.slice(1),_[21]=V,_[22]=e):e=_[22],c=e;break t}if(_[23]!==V||_[24]!==W){let t;_[26]!==W?(t=e=>"parentId"in W&&"parentId"in e&&e.parentId===W.parentId||"parentId"in e&&W.id===e.parentId?{...e,parentId:void 0}:e,_[26]=W,_[27]=t):t=_[27],e=V.slice(V.indexOf(W)+1).map(t),_[23]=V,_[24]=W,_[25]=e}else e=_[25];c=e}let K=c;if(!V.length){let e,t,i,o,r;return _[28]!==G?(e=G("timeline.error.no-document-history-title"),_[28]=G,_[29]=e):e=_[29],_[30]!==e?(t=(0,n.jsx)(l.Text,{size:1,weight:"medium",children:e}),_[30]=e,_[31]=t):t=_[31],_[32]!==G?(i=G("timeline.error.no-document-history-description"),_[32]=G,_[33]=i):i=_[33],_[34]!==i?(o=(0,n.jsx)(l.Text,{muted:!0,size:1,children:i}),_[34]=i,_[35]=o):o=_[35],_[36]!==t||_[37]!==o?(r=(0,n.jsx)(l.Box,{paddingX:2,children:(0,n.jsxs)(l.Stack,{padding:3,space:3,children:[t,o]})}),_[36]=t,_[37]=o,_[38]=r):r=_[38],r}_[39]===Symbol.for("react.memo_cache_sentinel")?(p={position:"relative"},_[39]=p):p=_[39],_[40]!==G?(m=G("changes.inspector.from-label"),_[40]=G,_[41]=m):m=_[41],_[42]!==m?(h=(0,n.jsx)(l.Text,{size:1,muted:!0,children:m}),_[42]=m,_[43]=h):h=_[43];let Y=q||null;_[44]!==K||_[45]!==Y?(g=(0,n.jsx)(dk,{event:Y,events:K,mode:"since",placement:"bottom-start"}),_[44]=K,_[45]=Y,_[46]=g):g=_[46],_[47]!==G?(f=G("changes.inspector.to-label"),_[47]=G,_[48]=f):f=_[48],_[49]!==f?(x=(0,n.jsx)(l.Text,{size:1,muted:!0,children:f}),_[49]=f,_[50]=x):x=_[50];let X=W||null;return _[51]!==V||_[52]!==X?(b=(0,n.jsx)(dk,{event:X,events:V,mode:"rev",placement:"bottom-end"}),_[51]=V,_[52]=X,_[53]=b):b=_[53],_[54]!==g||_[55]!==x||_[56]!==b||_[57]!==h?(y=(0,n.jsxs)(dD,{paddingX:2,paddingBottom:2,children:[h,g,x,b]}),_[54]=g,_[55]=x,_[56]=b,_[57]=h,_[58]=y):y=_[58],_[59]!==$||_[60]!==G?(v=$&&(0,n.jsx)(a.motion.div,{animate:{opacity:1},initial:{opacity:0},transition:{delay:.2,duration:.2},children:(0,n.jsxs)(dF,{justify:"center",align:"center",gap:2,children:[(0,n.jsx)(l.Text,{muted:!0,size:0,children:G("changes.loading-changes")}),(0,n.jsx)(l.Spinner,{size:0})]})}),_[59]=$,_[60]=G,_[61]=v):v=_[61],_[62]!==y||_[63]!==v?(j=(0,n.jsxs)(l.Box,{padding:3,style:p,children:[y,v]}),_[62]=y,_[63]=v,_[64]=j):j=_[64],_[65]!==H||_[66]!==U||_[67]!==M?.loading||_[68]!==P||_[69]!==T||_[70]!==q||_[71]!==L?.loading||_[72]!==k||_[73]!==W?.id?(w=T&&(0,n.jsx)(dz,{documentContext:U,error:k||H,loading:M?.loading||L?.loading||!1,schemaType:P,sameRevisionSelected:q?.id===W?.id,sinceEvent:q}),_[65]=H,_[66]=U,_[67]=M?.loading,_[68]=P,_[69]=T,_[70]=q,_[71]=L?.loading,_[72]=k,_[73]=W?.id,_[74]=w):w=_[74],_[75]!==w?(S=(0,n.jsx)(dE,{"data-ui":"Scroller",ref:A,children:(0,n.jsx)(l.Box,{flex:1,paddingX:3,height:"fill",children:w})}),_[75]=w,_[76]=S):S=_[76],_[77]!==F||_[78]!==S?(I=(0,n.jsx)(l.Card,{flex:1,paddingX:2,paddingY:2,children:(0,n.jsx)(l.BoundaryElementProvider,{element:F,children:S})}),_[77]=F,_[78]=S,_[79]=I):I=_[79],_[80]!==j||_[81]!==I?(C=(0,n.jsxs)(l.Flex,{"data-testid":"review-changes-pane",direction:"column",height:"fill",overflow:"hidden",children:[j,I]}),_[80]=j,_[81]=I,_[82]=C):C=_[82],C}function dL(e){return e.path.length>0?(0,n.jsx)(u.ChangeFieldWrapper,{...e}):e.children}function dz(e){let t,o,r=(0,i.c)(15),{error:d,documentContext:c,loading:p,schemaType:m,sameRevisionSelected:h,sinceEvent:g}=e;if(d){let e,t,i;return r[0]===Symbol.for("react.memo_cache_sentinel")?(e=(0,n.jsx)(dV,{}),r[0]=e):e=r[0],r[1]!==d||r[2]!==g?.type?(t=g?.type!=="historyCleared"&&(0,n.jsx)(u.ChangesError,{error:d}),r[1]=d,r[2]=g?.type,r[3]=t):t=r[3],r[4]!==t?(i=(0,n.jsxs)(n.Fragment,{children:[e,t]}),r[4]=t,r[5]=i):i=r[5],i}if(p){let e;return r[6]===Symbol.for("react.memo_cache_sentinel")?(e=(0,n.jsx)(u.LoadingBlock,{showText:!0}),r[6]=e):e=r[6],e}if(h){let e;return r[7]===Symbol.for("react.memo_cache_sentinel")?(e=(0,n.jsx)(dO,{}),r[7]=e):e=r[7],e}if(!c.rootDiff){let e;return r[8]===Symbol.for("react.memo_cache_sentinel")?(e=(0,n.jsx)(a.motion.div,{animate:{opacity:1},initial:{opacity:0},transition:{delay:.2,duration:.2},children:(0,n.jsx)(u.NoChanges,{})}),r[8]=e):e=r[8],e}return r[9]!==c.rootDiff||r[10]!==m?(t=(0,n.jsx)(l.Box,{paddingY:1,children:(0,n.jsx)(u.ChangeList,{diff:c.rootDiff,schemaType:m})}),r[9]=c.rootDiff,r[10]=m,r[11]=t):t=r[11],r[12]!==c||r[13]!==t?(o=(0,n.jsx)(s.DocumentChangeContext.Provider,{value:c,children:t}),r[12]=c,r[13]=t,r[14]=o):o=r[14],o}function dO(){let e,t,o,r,s,d,c,p=(0,i.c)(12),{t:m}=(0,u.useTranslation)("");return p[0]===Symbol.for("react.memo_cache_sentinel")?(e={opacity:1},t={opacity:0},o={delay:.2,duration:.2},p[0]=e,p[1]=t,p[2]=o):(e=p[0],t=p[1],o=p[2]),p[3]!==m?(r=m("changes.same-revision-selected-title"),p[3]=m,p[4]=r):r=p[4],p[5]!==r?(s=(0,n.jsx)(l.Text,{size:1,weight:"medium",as:"h3",children:r}),p[5]=r,p[6]=s):s=p[6],p[7]!==m?(d=(0,n.jsx)(l.Text,{as:"p",size:1,muted:!0,children:(0,n.jsx)(u.Translate,{i18nKey:"changes.same-revision-selected-description",t:m})}),p[7]=m,p[8]=d):d=p[8],p[9]!==s||p[10]!==d?(c=(0,n.jsx)(a.motion.div,{animate:e,initial:t,transition:o,children:(0,n.jsxs)(l.Stack,{space:3,paddingTop:2,children:[s,d]})}),p[9]=s,p[10]=d,p[11]=c):c=p[11],c}function dB(e){return e.children}let dN=(0,eI.styled)(u.ScrollContainer).withConfig({displayName:"Scroller",componentId:"sc-1f5fnfo-0"})`height:100%;overflow:auto;position:relative;scroll-behavior:smooth;`;function d$(e){let t,s,a,d=(0,i.c)(21),{showList:c}=e,[p,m]=(0,r.useState)(null),[h,g]=(0,r.useState)(0),{setTimelineRange:f}=ih();d[0]!==h?(t=e=>{!h&&e&&(g(e.clientHeight?e.clientHeight-1:0),m(e))},d[0]=h,d[1]=t):t=d[1];let x=t,{events:b,nextCursor:y,loading:v,error:j,revision:w,loadMoreEvents:S,findRangeForRevision:I,expandEvent:C}=(0,u.useEvents)(),{t:_}=(0,u.useTranslation)("studio"),T=(0,o.useToast)();d[2]!==I||d[3]!==f||d[4]!==_||d[5]!==T?(s=e=>{try{(()=>{if((0,u.isDeleteDocumentVersionEvent)(e)||(0,u.isDeleteDocumentGroupEvent)(e)||(0,u.isUnpublishDocumentEvent)(e)||(0,u.isScheduleDocumentVersionEvent)(e)||(0,u.isUnscheduleDocumentVersionEvent)(e))return console.error("Event is not selectable");let[t,n]=I(e.id);f(t,n)})()}catch(e){T.push({closable:!0,description:e.message,status:"error",title:_("timeline.error.unable-to-load-revision")})}},d[2]=I,d[3]=f,d[4]=_,d[5]=T,d[6]=s):s=d[6];let R=s,P=v&&!b.length;return d[7]!==j||d[8]!==b||d[9]!==C||d[10]!==x||d[11]!==P||d[12]!==h||d[13]!==S||d[14]!==v||d[15]!==y||d[16]!==w?.revisionId||d[17]!==p||d[18]!==R||d[19]!==c?(a=(0,n.jsx)(l.Flex,{"data-testid":"review-changes-pane",direction:"column",height:"fill",children:(0,n.jsx)(l.Card,{flex:1,padding:2,paddingTop:0,children:j?(0,n.jsx)(ri,{}):(0,n.jsx)(l.BoundaryElementProvider,{element:p,children:(0,n.jsxs)(dN,{"data-ui":"Scroller",ref:x,children:[h&&c&&!P?(0,n.jsx)(dT,{events:b,fetchEventChildren:C,hasMoreEvents:!!y,selectedEventId:w?.revisionId||b[0]?.id,onLoadMore:S,onSelect:R,listMaxHeight:`${h}px`}):null,v&&(0,n.jsx)(u.LoadingBlock,{})]})})})}),d[7]=j,d[8]=b,d[9]=C,d[10]=x,d[11]=P,d[12]=h,d[13]=S,d[14]=v,d[15]=y,d[16]=w?.revisionId,d[17]=p,d[18]=R,d[19]=c,d[20]=a):a=d[20],a}let dH=(0,eI.styled)(u.ScrollContainer).withConfig({displayName:"Scroller",componentId:"sc-1ey5vbx-0"})`height:100%;overflow:auto;position:relative;scroll-behavior:smooth;`;function dG(e){let t,s,a,d,c=(0,i.c)(20),{showList:p}=e,{timelineError:m,setTimelineRange:h,timelineStore:g}=ih(),{selectedReleaseId:f}=(0,u.usePerspective)(),[x,b]=(0,r.useState)(null),[y,v]=(0,r.useState)(0);c[0]===Symbol.for("react.memo_cache_sentinel")?(t=e=>{e?.clientHeight&&(v(e.clientHeight-1),b(e))},c[0]=t):t=c[0];let j=t,w=(0,u.useTimelineSelector)(g,dK),S=(0,u.useTimelineSelector)(g,dW),I=(0,u.useTimelineSelector)(g,dq),C=(0,u.useTimelineSelector)(g,dU),{t:_}=(0,u.useTranslation)("studio"),T=(0,o.useToast)();c[1]!==h||c[2]!==_||c[3]!==g||c[4]!==T?(s=e=>{try{(()=>{let[t,n]=g?.findRangeForRev(e)||[null,null];h(t,n)})()}catch(e){T.push({closable:!0,description:e.message,status:"error",title:_("timeline.error.unable-to-load-revision")})}},c[1]=h,c[2]=_,c[3]=g,c[4]=T,c[5]=s):s=c[5];let R=s;c[6]!==C||c[7]!==g?(a=()=>{C||g?.loadMore()},c[6]=C,c[7]=g,c[8]=a):a=c[8];let P=a;return c[9]!==w||c[10]!==P||c[11]!==I||c[12]!==y||c[13]!==S||c[14]!==x||c[15]!==R||c[16]!==f||c[17]!==p||c[18]!==m?(d=(0,n.jsx)(l.Flex,{"data-testid":"review-changes-pane",direction:"column",height:"fill",children:(0,n.jsx)(l.Card,{flex:1,padding:2,paddingTop:0,children:m||f?(0,n.jsx)(ri,{versionError:!!f}):(0,n.jsx)(l.BoundaryElementProvider,{element:x,children:(0,n.jsx)(dH,{"data-ui":"Scroller",ref:j,children:y&&p?(0,n.jsx)(rn,{chunks:w,hasMoreChunks:I,lastChunk:S,onLoadMore:P,onSelect:R,listMaxHeight:`${y}px`}):null})})})}),c[9]=w,c[10]=P,c[11]=I,c[12]=y,c[13]=S,c[14]=x,c[15]=R,c[16]=f,c[17]=p,c[18]=m,c[19]=d):d=c[19],d}function dU(e){return e.isLoading}function dq(e){return e.hasMoreChunks}function dW(e){return e.realRevChunk}function dK(e){return e.chunks}let dY=(0,eI.styled)(l.Flex).withConfig({displayName:"FadeInFlex",componentId:"sc-a5131c-0"})`opacity:0;transition:opacity 200ms;&[data-ready]{opacity:1;}`,dX=["history","review"],dJ=a.motion.create(l.Flex),dZ=e=>{let t,o,r,s,a,d,p=(0,i.c)(25),{t:m}=(0,u.useTranslation)(T),{document:g,referenceToId:f}=e;p[0]!==g||p[1]!==f?(t=(0,u.getReferencePaths)(g,f),p[0]=g,p[1]=f,p[2]=t):t=p[2];let x=t,b=g._id,y=(0,u.useSchema)(),{navigate:v}=(0,h.useRouter)(),{routerPanesState:j,groupIndex:w}=lr(),S=g?._type;p[3]!==w||p[4]!==b||p[5]!==v||p[6]!==x||p[7]!==j||p[8]!==S?(o=()=>{S&&v({panes:[...j.slice(0,w+1),[{id:(0,c.getPublishedId)(b),params:{type:S,path:(0,u.pathToString)(x[0])}}]]})},p[3]=w,p[4]=b,p[5]=v,p[6]=x,p[7]=j,p[8]=S,p[9]=o):o=p[9];let I=o;p[10]!==g._type||p[11]!==y?(r=y.get(g._type),p[10]=g._type,p[11]=y,p[12]=r):r=p[12];let C=r;if(!C){let e,t;return p[13]!==g._type||p[14]!==m?(e=m("incoming-references-pane.schema-type-not-found",{type:g._type}),p[13]=g._type,p[14]=m,p[15]=e):e=p[15],p[16]!==e?(t=(0,n.jsx)(l.Card,{radius:2,tone:"critical",children:(0,n.jsx)(l.Box,{paddingY:4,paddingX:3,children:(0,n.jsx)(l.Text,{size:1,children:e})})}),p[16]=e,p[17]=t):t=p[17],t}return p[18]===Symbol.for("react.memo_cache_sentinel")?(s={opacity:0},a={opacity:1},p[18]=s,p[19]=a):(s=p[18],a=p[19]),p[20]!==g||p[21]!==I||p[22]!==x[0]||p[23]!==C?(d=(0,n.jsx)(l.Card,{radius:2,tone:"default",children:(0,n.jsx)(dJ,{initial:s,animate:a,gap:1,align:"center",children:(0,n.jsx)(l.Box,{flex:1,children:(0,n.jsx)(au,{type:C,value:g,onClick:I,path:x[0]})})})}),p[20]=g,p[21]=I,p[22]=x[0],p[23]=C,p[24]=d):d=p[24],d};function dQ(e){let t,o,r,s,a=(0,i.c)(16),{type:d,documents:c,renderItem:p,getItemKey:m,emptyMessage:h}=e,g=(0,u.useSchema)(),{t:f}=(0,u.useTranslation)(T);a[0]!==g||a[1]!==d?(t=g.get(d),a[0]=g,a[1]=d,a[2]=t):t=a[2];let x=t?.title||d;return a[3]!==x?(o=(0,n.jsx)(l.Flex,{align:"center",justify:"space-between",paddingBottom:2,gap:2,children:(0,n.jsx)(l.Box,{padding:2,children:(0,n.jsx)(l.Text,{size:1,weight:"medium",children:x})})}),a[3]=x,a[4]=o):o=a[4],a[5]!==c||a[6]!==h||a[7]!==m||a[8]!==p||a[9]!==f||a[10]!==x?(r=c.length>0?(0,n.jsx)(l.Card,{radius:2,padding:1,border:!0,tone:"default",children:(0,n.jsx)(as,{$itemCount:c.length,children:(0,n.jsx)(u.CommandList,{activeItemDataAttr:"data-hovered",ariaLabel:f("incoming-references-input.list-label",{type:x}),canReceiveFocus:!0,fixedHeight:!0,getItemKey:m,itemHeight:51,items:c,onlyShowSelectionWhenActive:!0,overscan:5,renderItem:p,wrapAround:!1})})}):(0,n.jsx)(l.Box,{padding:0,children:(0,n.jsx)(l.Card,{border:!0,radius:3,padding:1,tone:"default",children:(0,n.jsx)(l.Box,{paddingY:3,paddingX:2,children:(0,n.jsx)(l.Text,{size:1,muted:!0,children:h})})})}),a[5]=c,a[6]=h,a[7]=m,a[8]=p,a[9]=f,a[10]=x,a[11]=r):r=a[11],a[12]!==o||a[13]!==r||a[14]!==d?(s=(0,n.jsxs)(l.Stack,{padding:2,space:1,marginBottom:2,children:[o,r]},d),a[12]=o,a[13]=r,a[14]=d,a[15]=s):s=a[15],s}function d0(){let e,t,l,o,r,s,a,d=(0,i.c)(26),{documentId:p}=ih(),{t:m}=(0,u.useTranslation)(T),{getClient:h}=(0,u.useSource)(),g=(0,u.useDocumentPreviewStore)(),x=(0,u.useClient)(u.DEFAULT_STUDIO_CLIENT_OPTIONS);d[0]!==p||d[1]!==g||d[2]!==h?(e=(function({documentId:e,documentPreviewStore:t,type:n,filter:i,filterParams:l,getClient:o}){let r=(0,c.getPublishedId)(e);return("function"==typeof i?t.unstable_observeDocument(e).pipe((0,eR.distinctUntilChanged)((e,t)=>e?._rev===t?._rev),(0,e$.switchMap)(e=>ar(i,{document:e,getClient:o})),(0,ek.map)(e=>({filter:e.filter,filterParams:e.filterParams||l}))):(0,eE.of)({filter:i,filterParams:l})).pipe((0,eR.distinctUntilChanged)((e,t)=>e.filter===t.filter&&JSON.stringify(e.filterParams)===JSON.stringify(t.filterParams)),(0,e$.switchMap)(({filter:e,filterParams:i})=>t.unstable_observeDocumentIdSet(`references("${r}") ${n?`&& _type == "${n}"`:""} ${e?`&& ${e}`:""}`,i,{insert:"append"}).pipe((0,ek.map)(e=>e.documentIds),(0,eQ.mergeMapArray)(e=>t.unstable_observeDocument(e).pipe((0,eP.filter)(Boolean),(0,ek.map)(e=>e))),(0,ek.map)(e=>{let t=[];return e.filter(e=>{let n=(0,c.getPublishedId)(e._id);return!t.includes(n)&&(t.push(n),!0)})}),(0,ek.map)(e=>({documents:e,loading:!1})),(0,eF.startWith)(ao))))})({documentId:p,documentPreviewStore:g,getClient:h}).pipe((0,ek.map)(d8),(0,ek.map)(d6)),d[0]=p,d[1]=g,d[2]=h,d[3]=e):e=d[3];let b=(0,e_.useObservable)(e,null);d[4]!==x||d[5]!==p||d[6]!==g?(t=(function({documentId:e,type:t,client:i,documentPreviewStore:l}){return sz(e,{versionedClient:i}).pipe((0,ek.map)(e=>e?t?.dataset?e.references.filter(e=>e.datasetName===t.dataset&&e.documentId):e.references.filter(e=>e.documentId&&e.datasetName):[]),(0,eQ.mergeMapArray)(e=>l.observeDocumentTypeFromId((0,c.getPublishedId)(e.documentId),{dataset:e.datasetName,projectId:e.projectId}).pipe((0,ek.map)(t=>({...e,documentType:t})))),(0,eQ.mergeMapArray)(e=>{if(!e.documentType)return(0,eE.of)(null);if(!t)return(0,eE.of)({type:e.documentType,id:e.documentId,preview:{published:{_id:e.documentId,title:`Document Id: ${e.documentId}`,subtitle:`Dataset: ${e.datasetName} - Project Id: ${e.projectId}`,media:(0,n.jsx)(f.DocumentIcon,{})}},availability:{available:!0,reason:"READABLE"},projectId:e.projectId,dataset:e.datasetName});if(e.documentType!==t.type)return(0,eE.of)(null);let i=(0,u.getPreviewPaths)(t.preview)||[];return l.observePaths({_id:(0,c.getPublishedId)(e.documentId)},i,{dataset:e.datasetName,projectId:e.projectId}).pipe((0,ek.map)(i=>{let l=(0,u.prepareForPreview)(i,{type:t.type,title:t.title||"",icon:()=>(0,n.jsx)(f.DocumentIcon,{}),preview:t.preview});return{type:e.documentType,id:e.documentId,preview:{published:{...l,media:l.media??(0,n.jsx)(f.DocumentIcon,{})}},availability:{available:!0,reason:"READABLE"},projectId:e.projectId,dataset:e.datasetName}}))}),(0,ek.map)(e=>({documents:e.filter(u.isNonNullable),loading:!1})),(0,eF.startWith)(ac))})({documentId:p,client:x,documentPreviewStore:g}).pipe((0,ek.map)(d3),(0,ek.map)(d2)),d[4]=x,d[5]=p,d[6]=g,d[7]=t):t=d[7];let y=(0,e_.useObservable)(t,null);d[8]!==p?(l=e=>(0,n.jsx)(dZ,{document:e,referenceToId:p}),d[8]=p,d[9]=l):l=d[9];let v=l;d[10]!==m?(o=m("incoming-references-pane.no-references-found"),d[10]=m,d[11]=o):o=d[11];let j=o;return d[12]!==j||d[13]!==b?.list||d[14]!==b?.loading||d[15]!==v||d[16]!==m?(r=b?.loading?(0,n.jsx)(u.LoadingBlock,{showText:!0,title:m("incoming-references-input.types-loading")}):b?.list.map(e=>{let{type:t,documents:i}=e;return(0,n.jsx)(dQ,{type:t,documents:i,renderItem:v,getItemKey:e=>i[e]._id,emptyMessage:j},t)}),d[12]=j,d[13]=b?.list,d[14]=b?.loading,d[15]=v,d[16]=m,d[17]=r):r=d[17],d[18]!==y?.list||d[19]!==y?.loading||d[20]!==j||d[21]!==m?(s=y?.loading?(0,n.jsx)(u.LoadingBlock,{showText:!0,title:m("incoming-references-input.types-loading-cross-dataset")}):y?.list.map(e=>{let{type:t,documents:i}=e;return(0,n.jsx)(dQ,{type:t,documents:i,renderItem:d1,getItemKey:e=>i[e].id,emptyMessage:j},t)}),d[18]=y?.list,d[19]=y?.loading,d[20]=j,d[21]=m,d[22]=s):s=d[22],d[23]!==r||d[24]!==s?(a=(0,n.jsxs)(n.Fragment,{children:[r,s]}),d[23]=r,d[24]=s,d[25]=a):a=d[25],a}function d1(e){return(0,n.jsx)(aa,{document:e})}function d2(e){return{list:e,loading:!1}}function d3(e){let{documents:t}=e;return Object.entries(t.reduce(d5,{})).map(d4)}function d4(e){let[t,n]=e;return{type:t,documents:n}}function d5(e,t){let n=t.type;return e[n]?e[n].push(t):e[n]=[t],e}function d6(e){return{list:e,loading:!1}}function d8(e){let{documents:t}=e;return Object.entries(t.reduce(d9,{})).map(d7)}function d7(e){let[t,n]=e;return{type:t,documents:n}}function d9(e,t){let n=t._type;return e[n]?e[n].push(t):e[n]=[t],e}let ce={error:f.ErrorOutlineIcon,warning:f.WarningOutlineIcon,info:f.InfoOutlineIcon},ct={error:"critical",warning:"caution",info:"primary"};function cn(e){let t,o,s,a,d=(0,i.c)(17),{marker:c,onOpen:u,schemaType:p,value:h}=e;d[0]!==c.path||d[1]!==u?(t=()=>u(c.path),d[0]=c.path,d[1]=u,d[2]=t):t=d[2];let g=t,[f,x]=(0,r.useState)(null),b=ce[c.level];return d[3]!==f?(o=f&&(0,n.jsx)(l.Card,{padding:3,radius:2,tone:"critical",children:(0,n.jsx)(l.Text,{size:1,children:f.error.message})}),d[3]=f,d[4]=o):o=d[4],d[5]!==b||d[6]!==f||d[7]!==g||d[8]!==c.level||d[9]!==c.message||d[10]!==c.path||d[11]!==p||d[12]!==h?(s=!f&&(0,n.jsx)(l.Card,{__unstable_focusRing:!0,as:"button",onClick:g,padding:3,radius:2,tone:ct[c.level],children:(0,n.jsxs)(l.Flex,{align:"flex-start",gap:3,children:[(0,n.jsx)(l.Box,{flex:"none",children:(0,n.jsx)(l.Text,{size:1,children:(0,n.jsx)(b,{})})}),(0,n.jsxs)(l.Stack,{flex:1,space:2,children:[(0,n.jsx)(ci,{path:c.path,schemaType:p,value:h}),(0,n.jsx)(l.Text,{muted:!0,size:1,children:c.message})]})]})}),d[5]=b,d[6]=f,d[7]=g,d[8]=c.level,d[9]=c.message,d[10]=c.path,d[11]=p,d[12]=h,d[13]=s):s=d[13],d[14]!==o||d[15]!==s?(a=(0,n.jsxs)(m.ErrorBoundary,{onCatch:x,children:[o,s]}),d[14]=o,d[15]=s,d[16]=a):a=d[16],a}function ci(e){let t,o,r,s=(0,i.c)(8),{path:a,schemaType:d,value:c}=e;e:{try{let e;s[0]!==a||s[1]!==d||s[2]!==c?(e=function(e){let{path:t,schemaType:n,value:i}=e,l=[],o=n,r=i;for(let e of t){if("string"==typeof e){if(!(0,u.isRecord)(r)&&void 0!==r)throw Error(`Parent value is not an object, cannot get path segment: .${e}`);if("object"!==o.jsonType)throw Error(`Parent type is not an object schema type, cannot get path segment: .${e}`);r=r?.[e];let t=o.fields.find(t=>t.name===e);if(!t)return l.push({name:e}),l;o=t.type,l.push(o);continue}if("number"==typeof e){if(!(0,u.isArray)(r)&&void 0!==r)throw Error(`Parent value is not an array, cannot get path segment: [${e}]`);if("array"!==o.jsonType)throw Error(`Parent type is not an array schema type, cannot get path segment: [${e}]`);r=r?.[e];let t=o.of.find(e=>"string"==typeof r?"string"===e.jsonType:"number"==typeof r?"number"===e.jsonType:"boolean"==typeof r?"boolean"===e.jsonType:!!(0,u.isRecord)(r)&&e.name===r?._type);if(!t)throw Error(`Item type not found: [${e}]`);o=t,l.push(o);continue}if((0,u.isRecord)(e)&&e._key){if(typeof r>"u")return l;if(!(0,u.isArray)(r))throw Error(`Parent value is not an array, cannot get path segment: [_key == ${e}]`);if("array"!==o.jsonType)throw Error(`Parent type is not an array schema type, cannot get path segment: .${e}`);if(typeof(r=(r??[]).find(t=>(0,u.isRecord)(t)&&t._key===e._key))>"u")return l;if(!(0,u.isRecord)(r))throw Error(`Array item not found: [_key == ${e._key}]`);let t=o.of.find(e=>(0,u.isRecord)(r)&&e.name===r?._type);if(!t&&!r?._type){let e=o.of.filter(e=>"object"===e.jsonType);1===e.length&&(t=e[0])}if(!t)throw Error(`Array item type not found: .${r?._type}`);o=t,l.push(o);continue}throw Error(`Invalid path segment: ${JSON.stringify(e)}`)}return l}({path:a,schemaType:d,value:c}),s[0]=a,s[1]=d,s[2]=c,s[3]=e):e=s[3],t=e;break e}catch(e){console.error(e)}t=null}let p=t;return p?.length?(s[4]!==p?(o=p.map(cl),s[4]=p,s[5]=o):o=s[5],s[6]!==o?(r=(0,n.jsx)(l.Text,{size:1,children:o}),s[6]=o,s[7]=r):r=s[7],r):null}function cl(e,t){return(0,n.jsxs)(r.Fragment,{children:[t>0&&(0,n.jsx)("span",{style:{color:"var(--card-muted-fg-color)",opacity:.5},children:" / "}),(0,n.jsx)("span",{style:{fontWeight:500},children:e.title||e.name})]},t)}function co(e){return{level:e.level,message:e.message,path:e.path}}let cr={},cs=h.route.create("/",[h.route.intents("/intent"),h.route.create("/edit/:type/:editDocumentId",[h.route.create({path:"/:params",transform:{params:{toState:function(e){try{return JSON.parse(decodeURIComponent(e))}catch{return console.warn("Failed to parse JSON parameters"),{}}},toPath:function(e){return JSON.stringify(e)}}}})]),h.route.create({path:"/:panes",children:[h.route.create("/:action",h.route.create("/:legacyEditDocumentId"))],transform:{panes:{toState:function(e){var t;return -1!==(t=decodeURIComponent(e)).indexOf(",{")?function(e){let t=[],n=e;for(;n.length;){let[e,i,l]=n.match(ca)||[];if(!e){n=n.slice(1);continue}let o=l&&function(e){try{return JSON.parse(e)}catch(e){console.warn(`Failed to parse parameters: ${e.message}`);return}}(l);t.push({id:i,payload:o}),n=n.slice(e.length)}return[t]}(t):t.split(";").map(e=>{let[t,...n]=e.split("|").map(e=>{let t,[n,...i]=e.split(",");return t={id:n,params:cr,payload:void 0},i.reduce((e,t)=>{if(/^[a-z0-9]+=[^=]+/i.test(t)){let n=t.slice(0,t.indexOf("=")),i=t.slice(n.length+1);e.params={...e.params,[decodeURIComponent(n)]:decodeURIComponent(i)}}else/^[A-Za-z0-9\-_]+(?:={0,2})$/.test(t)?e.payload=function(e){try{return e?(0,h.decodeJsonParams)(e):void 0}catch(e){console.warn(`Failed to parse parameters: ${e.message}`);return}}(t):console.warn("Unknown pane segment: %s - skipping",t);return e},t)});return[t,...n.map(e=>({...t,...e,id:e.id||t.id,params:{...(0,e4.omit)(t.params,cd),...e.params},payload:e.payload||t.payload}))]}).filter(e=>e.length>0)},toPath:function(e){return(e||[]).map(e=>e.map(cu).join("|")).map(encodeURIComponent).join(";")}}}})]),ca=/^([.a-z0-9_-]+),?({.*?})?(?:(;|$))/i,cd=["view","since","rev","inspect","comment"],cc=Boolean;function cu(e,t,n){let{payload:i,params:l={},id:o}=e,[r]=n,s=e===r,a=0!==t&&o===r.id,d=typeof i>"u"?void 0:(0,h.encodeJsonParams)(i),c=Object.entries(l).filter(e=>{let[t,n]=e;return!!n&&(!!s||!(n===r.params?.[t]&&!cd.includes(t)))}).map(([e,t])=>`${encodeURIComponent(e)}=${encodeURIComponent(t)}`);return[a?"":o].concat([c.length>0&&c,d].filter(cc).flat()).join(",")||","}let cp=[oA,oM,oC,oT,ow,lY],cm=["delete","discardChanges"],ch=[da],cg=[{name:"sanity/structure/validation",component:function(e){let t,o,r,s,a,d,c,p=(0,i.c)(23),{onClose:m}=e,{onFocus:h,onPathOpen:g,schemaType:f,validation:x,value:b,editState:y}=ih(),{t:v}=(0,u.useTranslation)("validation");p[0]!==h||p[1]!==g?(t=e=>{g(e),h(e)},p[0]=h,p[1]=g,p[2]=t):t=p[2];let j=t;p[3]!==y?(o=y&&y.version&&(0,u.isGoingToUnpublish)(y.version),p[3]=y,p[4]=o):o=p[4];let w=o;return p[5]!==v?(r=v("panel.close-button-aria-label"),p[5]=v,p[6]=r):r=p[6],p[7]!==v?(s=v("panel.title"),p[7]=v,p[8]=s):s=p[8],p[9]!==m||p[10]!==r||p[11]!==s?(a=(0,n.jsx)(iA,{as:"header",closeButtonLabel:r,flex:"none",onClose:m,title:s}),p[9]=m,p[10]=r,p[11]=s,p[12]=a):a=p[12],p[13]!==j||p[14]!==w||p[15]!==f||p[16]!==v||p[17]!==x||p[18]!==b?(d=(0,n.jsx)(l.Card,{flex:1,overflow:"auto",padding:3,children:w?(0,n.jsx)(l.Box,{padding:2,children:(0,n.jsx)(l.Text,{muted:!0,size:1,children:v("panel.unpublish-message")})}):(0,n.jsxs)(n.Fragment,{children:[0===x.length&&(0,n.jsx)(l.Box,{padding:2,children:(0,n.jsx)(l.Text,{muted:!0,size:1,children:v("panel.no-errors-message")})}),x.length>0&&(0,n.jsx)(l.Stack,{space:2,children:x.map((e,t)=>(0,n.jsx)(cn,{marker:e,onOpen:j,schemaType:f,value:b},t))})]})}),p[13]=j,p[14]=w,p[15]=f,p[16]=v,p[17]=x,p[18]=b,p[19]=d):d=p[19],p[20]!==a||p[21]!==d?(c=(0,n.jsxs)(l.Flex,{direction:"column",height:"fill",overflow:"hidden",children:[a,d]}),p[20]=a,p[21]=d,p[22]=c):c=p[22],c},useMenuItem:function(e){let t,n,l,o,r,s,a=(0,i.c)(11),{documentType:d}=e,{t:c}=(0,u.useTranslation)("validation"),{selectedReleaseId:m}=(0,u.usePerspective)(),{value:h}=ih(),{validation:g}=(0,u.useValidationStatus)(h._id,d,!m);a[0]!==g?(t=g.map(co),a[0]=g,a[1]=t):t=a[1];let x=t,b=x.some(p.isValidationError),y=x.some(p.isValidationWarning);a[2]!==h?(n=(0,u.isGoingToUnpublish)(h),a[2]=h,a[3]=n):n=a[3];let v=n;e:{if(b){l=f.ErrorOutlineIcon;break e}if(y){l=f.WarningOutlineIcon;break e}l=f.CheckmarkCircleIcon}let j=l;t:{if(b){o="critical";break t}if(y){o="caution";break t}o="positive"}let w=o,S=0===x.length||v;return a[4]!==c?(r=c("panel.title"),a[4]=c,a[5]=r):r=a[5],a[6]!==j||a[7]!==S||a[8]!==r||a[9]!==w?(s={hidden:S,icon:j,title:r,tone:w,showAsAction:!0},a[6]=j,a[7]=S,a[8]=r,a[9]=w,a[10]=s):s=a[10],s}},{name:i_,useMenuItem:()=>{let{features:e}=iw(),{t}=(0,u.useTranslation)();return{hidden:!e.reviewChanges,icon:f.RestoreIcon,title:t("changes.title")}},component:function(e){let t,s,a,d,c,p,h,g,x,b,y,v,j,w,S,I,C,_,R,P,k,E,D,F,A,V,M,L=(0,i.c)(73),{params:z,setParams:O}=lr(),B=(0,u.useSource)(),[N,$]=(0,r.useState)(null),{t:H}=(0,u.useTranslation)(T),{t:G}=(0,u.useTranslation)(),U=z?.inspect===i_,{selectedPerspective:q}=(0,u.usePerspective)();L[0]!==z?(t=(M=z?.changesInspectorTab)&&dX.includes(M)?z.changesInspectorTab:dX[0],L[0]=z,L[1]=t):t=L[1];let W=t;L[2]!==z||L[3]!==O?(s=e=>O({...z,changesInspectorTab:e,since:"history"===e?void 0:z?.since}),L[2]=z,L[3]=O,L[4]=s):s=L[4];let K=s,Y=U?"":void 0;L[5]!==H?(a=H("changes.tab.history"),L[5]=H,L[6]=a):a=L[6],L[7]!==K?(d=()=>K("history"),L[7]=K,L[8]=d):d=L[8];let X="history"===W;L[9]!==a||L[10]!==d||L[11]!==X?(c=(0,n.jsx)(m.Tab,{"aria-controls":"history-panel",id:"history-tab",label:a,onClick:d,selected:X}),L[9]=a,L[10]=d,L[11]=X,L[12]=c):c=L[12],L[13]!==H?(p=H("changes.tab.review-changes"),L[13]=H,L[14]=p):p=L[14],L[15]!==K?(h=()=>K("review"),L[15]=K,L[16]=h):h=L[16];let J="review"===W;L[17]!==p||L[18]!==h||L[19]!==J?(g=(0,n.jsx)(m.Tab,{"aria-controls":"review-changes-panel",id:"changes-tab",label:p,onClick:h,selected:J}),L[17]=p,L[18]=h,L[19]=J,L[20]=g):g=L[20],L[21]!==g||L[22]!==c?(x=(0,n.jsxs)(l.TabList,{space:1,flex:1,children:[c,g]}),L[21]=g,L[22]=c,L[23]=x):x=L[23],L[24]!==H?(b=H("changes.action.close-label"),L[24]=H,L[25]=b):b=L[25];let Z=e.onClose;L[26]!==H?(y=H("document-inspector.close-button.tooltip"),L[26]=H,L[27]=y):y=L[27],L[28]!==y?(v={content:y},L[28]=y,L[29]=v):v=L[29],L[30]!==e.onClose||L[31]!==b||L[32]!==v?(j=(0,n.jsx)(m.Button,{"aria-label":b,icon:f.CloseIcon,mode:"bleed",onClick:Z,tooltipProps:v}),L[30]=e.onClose,L[31]=b,L[32]=v,L[33]=j):j=L[33],L[34]!==x||L[35]!==j?(w=(0,n.jsx)(l.Card,{paddingBottom:1,children:(0,n.jsxs)(l.Flex,{align:"center",padding:3,gap:2,children:[x,j]})}),L[34]=x,L[35]=j,L[36]=w):w=L[36],L[37]!==H?(S=(0,n.jsx)(l.Box,{flex:1,padding:1,children:(0,n.jsx)(l.Text,{size:1,children:(0,n.jsx)(u.Translate,{t:H,i18nKey:"changes.banner.tooltip"})})}),L[37]=H,L[38]=S):S=L[38],L[39]===Symbol.for("react.memo_cache_sentinel")?(I=(0,n.jsx)(l.Text,{size:0,muted:!0,children:(0,n.jsx)(f.InfoOutlineIcon,{fontSize:1})}),L[39]=I):I=L[39],L[40]!==N||L[41]!==S?(C=(0,n.jsx)(m.Tooltip,{portal:!0,placement:"bottom-end",boundaryElement:N,content:S,children:I}),L[40]=N,L[41]=S,L[42]=C):C=L[42],L[43]!==q||L[44]!==H||L[45]!==G?(_=function(e,{t,tCore:n}){return(0,u.isReleaseDocument)(e)?e.metadata.title||n("release.placeholder-untitled-release"):"drafts"===e?t("compare-versions.status.draft"):"published"===e?t("compare-versions.status.published"):e}(q,{t:H,tCore:G}),L[43]=q,L[44]=H,L[45]=G,L[46]=_):_=L[46],L[47]!==_?(R={perspective:_},L[47]=_,L[48]=R):R=L[48],L[49]!==H||L[50]!==R?(P=(0,n.jsx)(l.Text,{size:0,muted:!0,children:(0,n.jsx)(u.Translate,{t:H,values:R,i18nKey:"changes.banner.description"})}),L[49]=H,L[50]=R,L[51]=P):P=L[51],L[52]!==C||L[53]!==P?(k=(0,n.jsx)(l.Card,{padding:2,marginBottom:3,marginX:3,tone:"neutral",border:!0,radius:3,children:(0,n.jsxs)(l.Flex,{gap:2,align:"flex-start",children:[C,P]})}),L[52]=C,L[53]=P,L[54]=k):k=L[54];let Q="history"!==W;L[55]!==W||L[56]!==B.beta?.eventsAPI?.documents?(E=B.beta?.eventsAPI?.documents?(0,n.jsx)(d$,{showList:"history"===W}):(0,n.jsx)(dG,{showList:"history"===W}),L[55]=W,L[56]=B.beta?.eventsAPI?.documents,L[57]=E):E=L[57],L[58]!==Q||L[59]!==E?(D=(0,n.jsx)(o.TabPanel,{"aria-labelledby":"history-tab",height:"fill",hidden:Q,id:"history-panel",children:E}),L[58]=Q,L[59]=E,L[60]=D):D=L[60];let ee="review"!==W;return L[61]!==W||L[62]!==B.beta?.eventsAPI?.documents?(F=B.beta?.eventsAPI?.documents?(0,n.jsx)(n.Fragment,{children:"review"===W?(0,n.jsx)(dM,{showChanges:"review"===W}):null}):(0,n.jsx)(dh,{showChanges:"review"===W}),L[61]=W,L[62]=B.beta?.eventsAPI?.documents,L[63]=F):F=L[63],L[64]!==ee||L[65]!==F?(A=(0,n.jsx)(o.TabPanel,{"aria-labelledby":"review-tab",hidden:ee,id:"review-panel",height:"fill",children:F}),L[64]=ee,L[65]=F,L[66]=A):A=L[66],L[67]!==w||L[68]!==Y||L[69]!==k||L[70]!==D||L[71]!==A?(V=(0,n.jsxs)(dY,{direction:"column",padding:0,height:"fill","data-ready":Y,ref:$,children:[w,k,D,A]}),L[67]=w,L[68]=Y,L[69]=k,L[70]=D,L[71]=A,L[72]=V):V=L[72],V},onClose:({params:e})=>({params:{...e,since:void 0,rev:void 0,changesInspectorTab:void 0,historyVersion:void 0}}),onOpen:({params:e})=>({params:{...e,since:"@lastPublished"}})},{name:"sanity/structure/incoming-references",useMenuItem:()=>{let{t:e}=(0,u.useTranslation)();return{icon:f.SyncIcon,title:e("incoming-references.title")}},component:e=>{let t,o,r,s,a,d=(0,i.c)(11),{t:c}=(0,u.useTranslation)();d[0]!==c?(t=c("panel.close-button-aria-label"),d[0]=c,d[1]=t):t=d[1];let p=e.onClose;return d[2]!==c?(o=c("incoming-references.title"),d[2]=c,d[3]=o):o=d[3],d[4]!==e.onClose||d[5]!==t||d[6]!==o?(r=(0,n.jsx)(iA,{as:"header",closeButtonLabel:t,flex:"none",onClose:p,title:o}),d[4]=e.onClose,d[5]=t,d[6]=o,d[7]=r):r=d[7],d[8]===Symbol.for("react.memo_cache_sentinel")?(s=(0,n.jsx)(l.Card,{flex:1,overflow:"auto",padding:3,children:(0,n.jsx)(d0,{})}),d[8]=s):s=d[8],d[9]!==r?(a=(0,n.jsxs)(l.Flex,{direction:"column",height:"fill",overflow:"hidden",children:[r,s]}),d[9]=r,d[10]=a):a=d[10],a}}],cf=(0,u.definePlugin)(t=>{let n=t?.icon||f.MasterDetailIcon;return{name:"sanity/structure",document:{actions:(e,t)=>{let n=Array.from(new Set([...e,...cp])),i=n.filter(e=>cm.includes(e.action)),l=n.filter(e=>!cm.includes(e.action));return"published"===t.versionType?[...[...l].sort((e,t)=>"unpublish"===e.action?-1:+("unpublish"===t.action)),...i]:[...l,...i]},badges:e=>Array.from(new Set([...e,...ch])),inspectors:e=>Array.from(new Set([...e,...cg]))},tools:[{name:t?.name||"structure",title:t?.title||"Structure",icon:n,component:(0,r.lazy)(()=>e.A(75689)),canHandleIntent:(e,t)=>{var n;return"create"===e?function(e){if(!("type"in e))return!1;let t={};return"mode"in e&&(t.mode="structure"===e.mode),"template"in e&&(t.template=!0),!Object.keys(t).length||t}(t):"edit"===e&&"id"in(n=t)&&(!("mode"in n)||{mode:"structure"===n.mode})},getIntentState:du,controlsDocumentTitle:!0,options:t,router:cs,__internalApplicationType:"sanity/structure"}],i18n:{bundles:[R]}}});var cx=Object.freeze({__proto__:null,default:ss}),cb=Object.freeze({__proto__:null,default:ds});e.s(["BackLink",()=>su,"LOADING_PANE",()=>lA,"LoadingPane",()=>im,"Pane",()=>nN,"PaneContent",()=>nG,"PaneHeader",()=>n7,"PaneHeaderActions",()=>s3,"PaneItem",()=>at,"PaneLayout",()=>is,"StructureToolPane",()=>sv,"_DEBUG",()=>!1,"assignId",()=>am,"setActivePanes",()=>dc,"structureTool",()=>cf,"useDocumentLastRev",()=>rJ,"usePane",()=>nH,"usePaneLayout",()=>nL,"useStructureTool",()=>iw],55260)}]);